# PWA インストールガイド

**アロエ健康管理ログ Progressive Web App インストール方法**

---

## 🌟 概要

アロエ健康管理ログは完全に PWA（Progressive Web App）対応されており、ネイティブアプリのようにデバイスにインストールして利用できます。

**インストール後の利点**:

- 📱 ネイティブアプリ風の動作
- 📴 オフライン利用可能
- 🔄 自動更新通知
- 🌿 専用アイコン表示
- ⚡ 高速起動

---

## 📲 インストール方法

### 1. **専用インストールボタン（開発中）**

アプリ内に実装された専用ボタンです。現在、一部ブラウザで表示条件を調整中です。

#### 📍 ボタンの場所

- **デスクトップ**: ヘッダー右側（QR コードボタンの横）
- **モバイル**: ハンバーガーメニュー内下部

#### ⚠️ 表示条件

- `beforeinstallprompt` イベントが発火した場合のみ表示
- HTTPS 環境または localhost でのアクセスが必要
- ブラウザが PWA インストール可能と判定した場合のみ
- **開発環境では**: デバッグモードでインストール方法を案内

#### 🔧 実装詳細

- `PWAInstallButton` コンポーネントで実装
- `beforeinstallprompt` イベントに基づく表示制御
- TypeScript 完全対応

---

### 2. **ブラウザ標準機能（推奨）**

各ブラウザの標準機能を使用する方法です。最も確実にインストールできます。

#### **Chrome・Edge（デスクトップ）**

1. アドレスバー右側の「インストール」アイコン（📦）をクリック
2. **または** アドレスバー右端の「⋮」→「アプリをインストール」

#### **Chrome・Edge（モバイル）**

1. ブラウザメニュー「⋮」→「アプリをインストール」
2. **または**「ホーム画面に追加」

#### **Safari（iOS）**

1. 共有ボタン（□↑）→「ホーム画面に追加」
2. アプリ名「アロエ健康ログ」を確認
3. 「追加」ボタンをタップ

#### **Firefox（デスクトップ）**

1. アドレスバーの「⋮」→「このサイトをインストール」

---

### 3. **QR コードアクセス**

#### 📱 QR コード生成

1. アプリ内の「QR コード」ボタンをクリック
2. 生成された QR コードをモバイルでスキャン
3. アクセス後、上記のモバイル手順でインストール

#### 🔗 直接 URL

https://ted-sharp.github.io/aloe-wellness-log/

---

## 🔧 技術仕様

### **PWA 対応機能**

- **Service Worker**: オフライン動作・キャッシング
- **Web App Manifest**: アプリメタデータ・アイコン
- **レスポンシブデザイン**: 全デバイス対応
- **HTTPS**: セキュア通信

### **manifest.json 設定**

```json
{
  "name": "アロエ健康管理ログ",
  "short_name": "アロエ健康ログ",
  "start_url": "/",
  "display": "standalone",
  "theme_color": "#059669",
  "background_color": "#f8fafc",
  "icons": [
    {
      "src": "/aloe-icon.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "maskable any"
    }
  ]
}
```

### **Service Worker 機能**

- **オフライン対応**: ネットワーク切断時も動作
- **キャッシング**: 高速ロード
- **更新管理**: 新バージョン自動検出・通知

---

## 📱 インストール後の機能

### **ネイティブアプリ体験**

- デバイスのアプリ一覧に表示
- スプラッシュスクリーン表示
- ブラウザ UI なしでの動作
- タスクスイッチャー対応

### **データ管理**

- **IndexedDB**: ローカルデータ永続化
- **オフライン記録**: ネット接続なしで記録可能
- **自動同期**: オンライン復帰時に同期

### **更新システム**

- 新バージョンの自動検出
- ユーザーへの更新通知
- バックグラウンド更新

---

## 🛠️ トラブルシューティング

### **インストールボタンが表示されない場合**

#### 🔍 確認事項

1. **HTTPS 環境**: `https://` または `localhost` でアクセス
2. **ブラウザ対応**: Chrome、Edge、Firefox、Safari 最新版
3. **未インストール**: 既にインストール済みではない

#### 🚀 対処法

```javascript
// 開発者ツールで確認
window.addEventListener("beforeinstallprompt", (e) => {
  console.log("🎯 PWA install prompt ready");
});
```

### **Service Worker が動作しない場合**

#### 🔍 確認方法

1. 開発者ツール → Application → Service Workers
2. 登録状況とステータスを確認

#### 🚀 解決方法

- ブラウザのキャッシュクリア
- プライベートモードでテスト
- アプリの再読み込み

---

## 📋 サポート状況

| ブラウザ    | デスクトップ | モバイル | 備考     |
| ----------- | ------------ | -------- | -------- |
| **Chrome**  | ✅           | ✅       | フル対応 |
| **Edge**    | ✅           | ✅       | フル対応 |
| **Safari**  | ⚠️           | ✅       | 制限あり |
| **Firefox** | ✅           | ⚠️       | 基本対応 |

**凡例**:

- ✅ フル対応
- ⚠️ 基本対応（一部制限あり）

---

## 📖 関連ドキュメント

- **[README.md](../README.md)**: プロジェクト概要
- **[要件定義](./要件定義_健康管理アプリ.md)**: 機能仕様
- **[手動デプロイ手順](./manual-deployment.md)**: GitHub Pages デプロイ

---

💚 **インストールして、より便利に健康管理をお楽しみください！**
