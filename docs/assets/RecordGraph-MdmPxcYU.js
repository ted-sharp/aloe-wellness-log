import{j as e,R as a,L as r,C as t,X as s,Y as l,T as d,a as o,b as i}from"./ui-vendor-D7AUAfXm.js";import{a as n}from"./react-vendor-BzNAZZ5j.js";import{u as g,k as u}from"./index-_d5zLM54.js";import"./icons-vendor-DoCnAwwa.js";import"./state-vendor-O6FgWrPy.js";function m(){var m;const{t:p}=g(),{records:x,fields:c}=u(),h=[{label:p("pages.graph.periods.week"),value:7},{label:p("pages.graph.periods.month"),value:30},{label:p("pages.graph.periods.all"),value:0}],b=c.filter(e=>"number"===e.type||"string"===e.type).sort((e,a)=>(e.order||999)-(a.order||999)),[f,j]=n.useState(b.length>0?b[0].fieldId:""),[y,v]=n.useState(7),k=n.useMemo(()=>{if(!f)return[];let e=x.filter(e=>e.fieldId===f).map(e=>{var a;return{...e,date:e.date||(null==(a=e.datetime)?void 0:a.slice(0,10))}}).sort((e,a)=>e.date.localeCompare(a.date));if(y>0){const a=new Date;a.setDate(a.getDate()-y+1),e=e.filter(e=>new Date(e.date)>=a)}return e},[x,f,y]);return e.jsxs("div",{className:"p-2 sm:p-4 max-w-full sm:max-w-2xl mx-auto bg-gray-50 dark:bg-gray-900 min-h-screen px-2 sm:px-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-12",children:p("pages.graph.title")}),e.jsxs("div",{className:"flex gap-4 mb-4 items-center",children:[e.jsxs("label",{className:"text-gray-700 dark:text-gray-300",children:[p("pages.graph.field"),e.jsx("select",{value:f,onChange:e=>j(e.target.value),className:"border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded px-2 py-1 ml-2 focus:outline-none focus:ring-2 focus:ring-blue-600 dark:focus:ring-blue-400",children:b.map(a=>e.jsx("option",{value:a.fieldId,children:a.name},a.fieldId))})]}),e.jsxs("label",{className:"text-gray-700 dark:text-gray-300",children:[p("pages.graph.period"),e.jsx("select",{value:y,onChange:e=>v(Number(e.target.value)),className:"border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white rounded px-2 py-1 ml-2 focus:outline-none focus:ring-2 focus:ring-blue-600 dark:focus:ring-blue-400",children:h.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded shadow p-4",children:e.jsx(a,{width:"100%",height:300,children:e.jsxs(r,{data:k,margin:{top:20,right:30,left:0,bottom:0},children:[e.jsx(t,{strokeDasharray:"3 3"}),e.jsx(s,{dataKey:"date"}),e.jsx(l,{}),e.jsx(d,{}),e.jsx(o,{}),e.jsx(i,{type:"monotone",dataKey:"value",stroke:"#8884d8",name:null==(m=b.find(e=>e.fieldId===f))?void 0:m.name})]})})})]})}export{m as default};
