import{j as e,R as a,L as s,C as r,X as t,Y as l,T as d,a as i,b as o}from"./ui-vendor-D7AUAfXm.js";import{a as n}from"./react-vendor-BzNAZZ5j.js";import{u as p,k as m}from"./index-B-gbsLji.js";import"./icons-vendor-DoCnAwwa.js";import"./state-vendor-O6FgWrPy.js";function u(){var u;const{t:x}=p(),{records:h,fields:c}=m(),g=[{label:x("pages.graph.periods.week"),value:7},{label:x("pages.graph.periods.month"),value:30},{label:x("pages.graph.periods.all"),value:0}],j=c.filter(e=>"number"===e.type||"string"===e.type).sort((e,a)=>(e.order||999)-(a.order||999)),[v,f]=n.useState(j.length>0?j[0].fieldId:""),[b,y]=n.useState(7),w=n.useMemo(()=>{if(!v)return[];let e=h.filter(e=>e.fieldId===v).map(e=>{var a;return{...e,date:e.date||(null==(a=e.datetime)?void 0:a.slice(0,10))}}).sort((e,a)=>e.date.localeCompare(a.date));if(b>0){const a=new Date;a.setDate(a.getDate()-b+1),e=e.filter(e=>new Date(e.date)>=a)}return e},[h,v,b]);return e.jsxs("div",{className:"p-2 sm:p-4 max-w-full sm:max-w-2xl mx-auto bg-gray-50 min-h-screen px-2 sm:px-0",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-12",children:x("pages.graph.title")}),e.jsxs("div",{className:"flex gap-4 mb-4 items-center",children:[e.jsxs("label",{children:[x("pages.graph.field"),e.jsx("select",{value:v,onChange:e=>f(e.target.value),className:"border rounded px-2 py-1 ml-2",children:j.map(a=>e.jsx("option",{value:a.fieldId,children:a.name},a.fieldId))})]}),e.jsxs("label",{children:[x("pages.graph.period"),e.jsx("select",{value:b,onChange:e=>y(Number(e.target.value)),className:"border rounded px-2 py-1 ml-2",children:g.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),e.jsx("div",{className:"bg-white rounded shadow p-4",children:e.jsx(a,{width:"100%",height:300,children:e.jsxs(s,{data:w,margin:{top:20,right:30,left:0,bottom:0},children:[e.jsx(r,{strokeDasharray:"3 3"}),e.jsx(t,{dataKey:"date"}),e.jsx(l,{}),e.jsx(d,{}),e.jsx(i,{}),e.jsx(o,{type:"monotone",dataKey:"value",stroke:"#8884d8",name:null==(u=j.find(e=>e.fieldId===v))?void 0:u.name})]})})})]})}export{u as default};
