import{j as e,R as t,C as a,e as s,X as i,g as l,Y as r,T as n,L as o,h as d}from"./ui-vendor-J9A7wRLG.js";import{a as c}from"./react-vendor-C4GzcRrE.js";import{C as m,A as x,o as u}from"./index-cuACJ16C.js";import"./icons-vendor-DCv9Y2bB.js";import"./state-vendor-RA6ewXRt.js";const h=[{label:"2週間",days:14},{label:"1か月",days:30},{label:"2か月",days:60},{label:"全データ",days:null}],g=[{label:"体重",value:"weight"},{label:"体脂肪",value:"bodyComposition"},{label:"血圧",value:"bloodPressure"}],p={exercise:"🏃",meal:"🍽",sleep:"🛌"},f=["日","月","火","水","木","金","土"],b=()=>{const[b,y]=c.useState(0),[j,k]=c.useState(!1),[w,v]=c.useState("weight"),D=(()=>{const e=c.useCallback(e=>{const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()}`},[]),t=c.useCallback((e,t,a)=>{if(e.length<2)return null;const s=e.filter(e=>"number"==typeof e[t]&&"number"==typeof e[a]&&!isNaN(e[t])&&!isNaN(e[a]));if(s.length<2)return null;const i=s.length;let l=0,r=0,n=0,o=0;for(const p of s){const e=p[t],s=p[a];l+=e,r+=s,n+=e*e,o+=e*s}const d=l/i,c=r/i,m=n-l*d;if(0===m)return null;const x=(o-l*c)/m,u=c-x*d,h=s[0][t],g=s[s.length-1][t];return[{timestamp:h,[`${String(a)}Trend`]:x*h+u},{timestamp:g,[`${String(a)}Trend`]:x*g+u}]},[]),a=c.useCallback((e,t,a)=>{if(e.length<2)return null;const s=e.filter(e=>null!=e[t]&&!isNaN(e[t]));if(s.length<2)return null;const i=s.length;let l=0,r=0,n=0,o=0;for(const p of s)l+=p.timestamp,r+=p[t],n+=p.timestamp*p.timestamp,o+=p.timestamp*p[t];const d=l/i,c=r/i,m=n-l*d;if(0===m)return null;const x=(o-l*c)/m,u=c-x*d,h=s[0].timestamp,g=s[s.length-1].timestamp;return[{timestamp:h,[a]:x*h+u},{timestamp:g,[a]:x*g+u}]},[]),s=c.useCallback(e=>a(e,"value","weightTrend"),[a]),i=c.useCallback(e=>a(e,"bodyFat","bodyFatTrend"),[a]),l=c.useCallback(e=>a(e,"waist","waistTrend"),[a]),r=c.useCallback(e=>a(e,"systolic","systolicTrend"),[a]),n=c.useCallback(e=>a(e,"diastolic","diastolicTrend"),[a]),o=c.useCallback(e=>{if(!e.length)return[];const t=new Date(e[0].timestamp),a=new Date(e[e.length-1].timestamp);t.setHours(0,0,0,0),a.setHours(0,0,0,0);const s=[];for(let i=new Date(t);i<=a;i.setDate(i.getDate()+1))s.push(new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0).getTime());return s},[]),d=c.useCallback(e=>{if(!e.length)return[];const t=o(e),a=t.length;return a<=7?t:a<=14?t.filter((e,t)=>t%2==0):a<=30?t.filter((e,t)=>t%3==0):a<=60?t.filter((e,t)=>t%7==0):t.filter((e,t)=>t%14==0)},[o]);return{formatDateForTick:e,calculateTrendLine:t,calculateGenericTrendLine:a,calculateWeightTrendLine:s,calculateBodyFatTrendLine:i,calculateWaistTrendLine:l,calculateSystolicTrendLine:r,calculateDiastolicTrendLine:n,calculateDayStartLines:o,calculateXAxisTicks:d}})(),{goal:N,isLoading:F,error:S,getFilteredData:T,getFilteredBpData:W,getFilteredBodyCompositionData:A,getStatusStats:C}=function(){const e=m(),t=x(),{weightRecords:a,dailyRecords:s,bpRecords:i,loading:l,errors:r}=e,{goal:n}=t;c.useEffect(()=>{(async()=>{await Promise.all([t.loadGoal(),e.loadAllData()])})()},[]);const o=c.useCallback(async()=>{await Promise.all([t.loadGoal(),e.loadAllData()])},[t.loadGoal,e.loadAllData]),d=c.useMemo(()=>l.weight||l.daily||l.bp||l.global,[l.weight,l.daily,l.bp,l.global]),h=c.useMemo(()=>!!(r.weight||r.daily||r.bp||r.global),[r.weight,r.daily,r.bp,r.global]),g=c.useMemo(()=>{const e=new Map;return a.map(t=>{const a=`${t.date}T${t.time}`,s=new Date(a).getTime(),i=e.get(s)||0,l=s+i;return e.set(s,i+1),{...t,dateTime:a,timestamp:l,weight:t.weight,value:t.weight,excluded:t.excludeFromGraph||!1}}).sort((e,t)=>e.timestamp-t.timestamp)},[a]);c.useMemo(()=>{const e=new Map;return a.map(t=>{const a=`${t.date}T${t.time}`,s=new Date(a).getTime(),i=e.get(s)||0,l=s+i;return e.set(s,i+1),{...t,dateTime:a,timestamp:l,bodyFat:t.bodyFat??null,waist:t.waist??null}}).sort((e,t)=>e.timestamp-t.timestamp)},[a]);const p=c.useMemo(()=>{const e=new Map;return i.map(t=>{const a=`${t.date}T${t.time}`,s=new Date(a).getTime(),i=e.get(s)||0,l=s+i;return e.set(s,i+1),{...t,dateTime:a,timestamp:l,systolic:t.systolic,diastolic:t.diastolic,pulse:t.heartRate||0,excluded:t.excludeFromGraph||!1}}).sort((e,t)=>e.timestamp-t.timestamp)},[i]),f=c.useMemo(()=>{const e=[...a.map(e=>e.date),...i.map(e=>e.date)];return e.length>0?e.sort().reverse()[0]:null},[a,i]),b=c.useCallback(e=>{if(!f)return{weight:[],bp:[]};const t=new Date(f),a=new Date(t);a.setDate(a.getDate()-e+1);const s=u(a),i=u(t);return{weight:g.filter(e=>e.date>=s&&e.date<=i),bp:p.filter(e=>e.date>=s&&e.date<=i)}},[f,g,p]),y=c.useMemo(()=>s.map(e=>({fieldId:e.fieldId,date:e.date,value:e.value,achieved:1===e.value})),[s]),j=c.useCallback((e,t)=>{if(!f)return{total:0,achieved:0,rate:0};const a=new Date(f),s=new Date(a);s.setDate(s.getDate()-t+1);const i=u(s),l=u(a),r=y.filter(t=>t.fieldId===e&&t.date>=i&&t.date<=l),n=r.filter(e=>e.achieved).length,o=r.length;return{total:o,achieved:n,rate:o>0?n/o*100:0}},[f,y]),k=c.useCallback(()=>{o()},[o]),w=c.useCallback((t,a)=>{const s=e.processedWeightRecordsForGraph,i=new Date,l=new Date(i);l.setDate(l.getDate()-t+1);const r=u(l),n=u(i),o=s.filter(e=>e.date>=r&&e.date<=n);return(a?o:o.filter(e=>!e.excludeFromGraph)).map(e=>({...e,value:e.weight,excluded:e.excludeFromGraph||!1}))},[e.processedWeightRecordsForGraph]),v=c.useCallback((t,a)=>{const s=e.processedBpRecordsForGraph,i=new Date,l=new Date(i);l.setDate(l.getDate()-t+1);const r=u(l),n=u(i),o=s.filter(e=>e.date>=r&&e.date<=n),d=a?o:o.filter(e=>!e.excludeFromGraph),c=e=>(e.systolic??0)+(e.diastolic??0),m=(e,t)=>{const a=c(e),s=c(t);return a!==s?a<s:(e.diastolic??0)!==(t.diastolic??0)?(e.diastolic??0)<(t.diastolic??0):e.timestamp<t.timestamp},x=[];let h=null,g=null;for(const e of d){const t=e.timestamp;null!==h?t-h<=6e5?g&&m(e,g)&&(g=e):(g&&x.push(g),h=t,g=e):(h=t,g=e)}return g&&x.push(g),x.map(e=>({...e,systolic:e.systolic,diastolic:e.diastolic,pulse:e.heartRate||0,excluded:e.excludeFromGraph||!1}))},[e.processedBpRecordsForGraph]),D=c.useCallback((t,a)=>{const s=e.processedBodyCompositionForGraph,i=new Date,l=new Date(i);l.setDate(l.getDate()-t+1);const r=u(l),n=u(i),o=s.filter(e=>e.date>=r&&e.date<=n);return(a?o:o.filter(e=>!e.excludeFromGraph)).map(e=>({...e,excluded:Boolean(e.excludeFromGraph)}))},[e.processedBodyCompositionForGraph]),N=c.useCallback((t,a)=>e.getDailyRecordStats(t,a),[e.getDailyRecordStats]);return{weightRecords:g,bpRecords:p,dailyRecords:y,goal:n,isLoading:d,hasError:h,error:h?"データの取得に失敗しました":null,errors:{weight:r.weight,daily:r.daily,bp:r.bp,global:r.global},latestDate:f,getDataInPeriod:b,getDailyStats:j,getFilteredData:w,getFilteredBpData:v,getFilteredBodyCompositionData:D,getStatusStats:N,loadAllData:o,refreshData:k}}(),$=c.useMemo(()=>{const e=h[b].days;if("weight"===w)return T(e||9999,j);if("bloodPressure"===w){return W(e||9999,j)}return A(e||9999,j)},[b,j,w,T,W,A]),R=c.useMemo(()=>D.calculateDayStartLines($),[$,D]),M=c.useMemo(()=>{if(!$.length)return["auto","auto"];const e=$.map(e=>e.timestamp),t=Math.min(...e),a=Math.max(...e),s=new Date(t),i=new Date(a);return s.setHours(0,0,0,0),i.setHours(23,59,59,999),[s.getTime(),i.getTime()]},[$]),G=c.useMemo(()=>{if(0===b&&$.length)return D.calculateXAxisTicks($)},[$,b,D]),K=e=>{const t=new Date(e),a=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),l=String(t.getMinutes()).padStart(2,"0");return`${a}/${s}(${f[t.getDay()]}) ${i}:${l}`},L=c.useMemo(()=>"weight"===w?D.calculateWeightTrendLine($):null,[$,w,D]),B=c.useMemo(()=>"bodyComposition"!==w?null:D.calculateBodyFatTrendLine($),[$,w,D]),I=c.useMemo(()=>"bodyComposition"!==w?null:D.calculateWaistTrendLine($),[$,w,D]),H=c.useMemo(()=>"bloodPressure"!==w?null:D.calculateSystolicTrendLine($),[$,w,D]),P=c.useMemo(()=>"bloodPressure"!==w?null:D.calculateDiastolicTrendLine($),[$,w,D]),z=t=>{const{x:a=0,y:s=0,payload:i}=t,l=i.value,r=new Date(l),n=f[r.getDay()];return e.jsx("g",{children:e.jsx("text",{x:a,y:s+10,textAnchor:"middle",fontSize:"12",children:`${r.getMonth()+1}/${r.getDate()}(${n})`})})};return F?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"データを読み込み中..."})]}):S?e.jsx("div",{className:"flex flex-col items-center justify-center py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-w-md",children:[e.jsx("p",{className:"text-red-800 text-sm mb-2",children:"データの読み込みに失敗しました"}),e.jsx("p",{className:"text-red-600 text-xs",children:S})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-start py-0 bg-transparent","data-testid":"record-graph",children:[e.jsx("div",{className:"w-full mx-auto bg-white dark:bg-gray-800 shadow flex justify-center items-center mb-2 py-1 px-2",children:g.map(t=>e.jsx("button",{className:`flex-1 rounded-lg border font-semibold transition mx-0.5 text-xs leading-none flex items-center justify-center\n              ${w===t.value?"border-blue-400 text-blue-500 shadow":"border-gray-300 text-gray-500 hover:border-blue-300 hover:text-blue-400"}\n            `,style:{height:"24px",minHeight:"24px",maxHeight:"24px",padding:"0"},onClick:()=>v(t.value),children:t.label},t.value))}),e.jsx("div",{className:"w-full mx-auto bg-white dark:bg-gray-800 shadow flex justify-center items-center mb-4 p-2",children:h.map((t,a)=>e.jsx("button",{className:`flex-1 rounded-lg border font-semibold transition mx-0.5 text-xs leading-none flex items-center justify-center\n              ${b===a?"border-orange-400 text-orange-500 shadow":"border-gray-300 text-gray-500 hover:border-orange-300 hover:text-orange-400"}\n            `,style:{height:"24px",minHeight:"24px",maxHeight:"24px",padding:"0"},onClick:()=>y(a),children:t.label},t.label))}),e.jsx("div",{className:"flex gap-4 items-center mb-2 flex-wrap justify-center",children:"weight"===w?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#f59e42",borderRadius:2,marginRight:6}}),"目標"]}),e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#22c55e",borderRadius:2,marginRight:6}}),"傾向"]})]}):"bloodPressure"===w?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#ef4444",borderRadius:2,marginRight:6}}),"収縮期"]}),e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#3b82f6",borderRadius:2,marginRight:6}}),"拡張期"]}),e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#22c55e",borderRadius:2,marginRight:6}}),"傾向"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#8b5cf6",borderRadius:2,marginRight:6}}),"体脂肪率"]}),e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#f59e0b",borderRadius:2,marginRight:6}}),"腹囲"]}),e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:2,background:"#8b5cf6",borderRadius:1,marginRight:6,borderStyle:"dashed",borderWidth:"1px 0",borderColor:"#8b5cf6"}}),"体脂肪傾向"]}),e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:2,background:"#f59e0b",borderRadius:1,marginRight:6,borderStyle:"dashed",borderWidth:"1px 0",borderColor:"#f59e0b"}}),"腹囲傾向"]})]})}),e.jsxs("div",{className:"w-full h-[400px] bg-white dark:bg-gray-800 rounded-xl shadow p-1 relative",children:[("weight"===w||"bloodPressure"===w||"bodyComposition"===w)&&e.jsxs("label",{className:"flex items-center absolute right-0 top-0 bg-white/80 dark:bg-gray-800/80 px-1 py-0 h-6 min-h-0 rounded-none leading-tight text-xs font-bold z-10 w-auto cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox accent-blue-600 mr-1",checked:j,onChange:e=>k(e.target.checked)}),"除外値も表示"]}),e.jsx(t,{width:"100%",height:"100%",children:"bodyComposition"===w?e.jsxs(a,{data:$,margin:{top:20,right:30,left:0,bottom:20},children:[e.jsx(s,{stroke:"#eee",strokeDasharray:"5 5"}),e.jsx(i,{dataKey:"timestamp",type:"number",domain:M,tick:0===b?z:void 0,tickFormatter:0===b?void 0:K,ticks:G}),0===b&&R.map(t=>e.jsx(l,{x:t,stroke:"#888",strokeDasharray:"2 2",yAxisId:"left"},t)),e.jsx(r,{yAxisId:"left",domain:["auto","auto"]}),e.jsx(r,{yAxisId:"right",orientation:"right",domain:["auto","auto"]}),e.jsx(n,{content:({active:t,payload:a,label:s})=>{var i;if(!t||!a||!a.length)return null;const l=null==(i=a[0])?void 0:i.payload,r=null==l?void 0:l.timestamp,n=r?new Date(r):null;return e.jsxs("div",{style:{background:"#fff",border:"1px solid #ccc",padding:8,borderRadius:8},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4,color:"#333"},children:n?K(r):""}),(a.filter(e=>e&&("bodyFat"===e.dataKey||"waist"===e.dataKey))||[]).map((t,a)=>e.jsxs("div",{style:{color:t.color||"#333",fontSize:14},children:["bodyFat"===t.dataKey?"体脂肪率: ":"腹囲: ","number"==typeof t.value?t.value.toFixed(1):t.value,"bodyFat"===t.dataKey?"%":"cm"]},a))]})}}),e.jsx(o,{yAxisId:"left",type:"monotone",dataKey:"bodyFat",stroke:"#8b5cf6",strokeWidth:3,dot:({cx:t,cy:a,payload:s,index:i})=>e.jsx("circle",{cx:t,cy:a,r:4,fill:s.excluded?"#f87171":"#8b5cf6",stroke:"#fff",strokeWidth:1},`bodyFat-dot-${(null==s?void 0:s.id)||i}`),activeDot:!1,connectNulls:!1},"bodyFat-line"),e.jsx(o,{yAxisId:"right",type:"monotone",dataKey:"waist",stroke:"#f59e0b",strokeWidth:3,dot:({cx:t,cy:a,payload:s,index:i})=>e.jsx("circle",{cx:t,cy:a,r:4,fill:s.excluded?"#f87171":"#f59e0b",stroke:"#fff",strokeWidth:1},`waist-dot-${(null==s?void 0:s.id)||i}`),activeDot:!1,connectNulls:!1},"waist-line"),B&&e.jsx(o,{yAxisId:"left",type:"linear",data:B,dataKey:"bodyFatTrend",stroke:"#8b5cf6",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"bodyFat-trend"),I&&e.jsx(o,{yAxisId:"right",type:"linear",data:I,dataKey:"waistTrend",stroke:"#f59e0b",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"waist-trend"),e.jsx("text",{x:40,y:10,textAnchor:"start",fontSize:"12",fill:"#666",fontWeight:"bold",children:"(%)"}),e.jsx("text",{x:window.innerWidth-100,y:10,textAnchor:"end",fontSize:"12",fill:"#666",fontWeight:"bold",children:"(cm)"})]}):e.jsxs(d,{data:$,margin:{top:20,right:30,left:0,bottom:20},children:[e.jsx(s,{stroke:"#eee",strokeDasharray:"5 5"}),e.jsx(i,{dataKey:"timestamp",type:"number",domain:M,tick:0===b?z:void 0,tickFormatter:0===b?void 0:K,ticks:G}),0===b&&R.map(t=>e.jsx(l,{x:t,stroke:"#888",strokeDasharray:"2 2"},t)),"bodyComposition"===w?e.jsxs(e.Fragment,{children:[e.jsx(r,{yAxisId:"left",domain:["auto","auto"]}),e.jsx(r,{yAxisId:"right",orientation:"right",domain:["auto","auto"]}),e.jsx("text",{x:30,y:10,textAnchor:"start",fontSize:"12",fill:"#666",fontWeight:"bold",children:"(%)"}),e.jsx("text",{x:window.innerWidth-50,y:10,textAnchor:"end",fontSize:"12",fill:"#666",fontWeight:"bold",children:"(cm)"})]}):e.jsxs(e.Fragment,{children:[e.jsx(r,{domain:["auto","auto"]}),e.jsxs("text",{x:30,y:10,textAnchor:"start",fontSize:"12",fill:"#666",fontWeight:"bold",children:["(","weight"===w?"kg":"mmHg",")"]})]}),"weight"===w&&(()=>{if(!N)return null;const t="number"==typeof N.startWeight&&isFinite(N.startWeight),a="number"==typeof N.targetWeight&&isFinite(N.targetWeight),s="string"==typeof N.targetStart&&!isNaN(Date.parse(N.targetStart)),i="string"==typeof N.targetEnd&&!isNaN(Date.parse(N.targetEnd));if(!(t&&a&&s&&i))return null;const l=Date.parse(N.targetStart),r=N.startWeight,n=Date.parse(N.targetEnd),d=N.targetWeight;if(l>=n)return null;const[c,m]=M,x=Math.max(l,c),u=Math.min(n,m);if(x>u)return null;const h=e=>r+(d-r)*(e-l)/(n-l),g=[{timestamp:x,targetValue:h(x)},{timestamp:u,targetValue:h(u)}];return e.jsx(o,{type:"linear",data:g,dataKey:"targetValue",stroke:"#f59e42",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"4 2",legendType:"none"},"weight-target")})(),e.jsx(n,{content:({active:t,payload:a,label:s})=>{var i;if(!t||!a||!a.length)return null;const l=null==(i=a[0])?void 0:i.payload,r=null==l?void 0:l.timestamp,n=r?new Date(r):null;return n&&(n.getFullYear(),String(n.getMonth()+1).padStart(2,"0"),String(n.getDate()).padStart(2,"0")),e.jsxs("div",{style:{background:"#fff",border:"1px solid #ccc",padding:8,borderRadius:8},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4,color:"#333"},children:(()=>{var e;if(!a||!Array.isArray(a)||0===a.length)return"";const t=null==(e=a[0])?void 0:e.payload;if(!t||"object"!=typeof t||null===t||!("timestamp"in t))return"";const s=t.timestamp,i=new Date(s),l=String(i.getMonth()+1).padStart(2,"0"),r=String(i.getDate()).padStart(2,"0"),n=String(i.getHours()).padStart(2,"0"),o=String(i.getMinutes()).padStart(2,"0");return`${l}/${r}(${f[i.getDay()]}) ${n}:${o}`})()}),"bodyComposition"!==w&&(a??[]).filter(e=>{const t=null==e?void 0:e.dataKey;return"targetValue"!==t&&"weightTrend"!==t&&"systolicTrend"!==t&&"diastolicTrend"!==t}).map((t,a)=>e.jsxs("div",{style:{color:t.color||"#333",fontSize:14},children:["number"==typeof t.value?t.value.toFixed("weight"===w?2:0):t.value,"weight"===w?"kg":"mmHg"]},a))]})}}),"weight"===w?e.jsx(o,{type:"monotone",dataKey:"value",data:$,stroke:"#38bdf8",strokeWidth:3,dot:({cx:t,cy:a,payload:s,index:i})=>e.jsx("circle",{cx:t,cy:a,r:4,fill:s.excluded?"#f87171":"#38bdf8",stroke:"#fff",strokeWidth:1},`weight-dot-${(null==s?void 0:s.id)||i}`),activeDot:!1},"weight-line"):e.jsxs(e.Fragment,{children:[e.jsx(o,{type:"monotone",dataKey:"systolic",data:$,stroke:"#ef4444",strokeWidth:3,dot:({cx:t,cy:a,payload:s,index:i})=>e.jsx("circle",{cx:t,cy:a,r:4,fill:s.excluded?"#f87171":"#ef4444",stroke:"#fff",strokeWidth:1},`systolic-dot-${(null==s?void 0:s.id)||i}`),activeDot:!1},"systolic-line"),e.jsx(o,{type:"monotone",dataKey:"diastolic",data:$,stroke:"#3b82f6",strokeWidth:3,dot:({cx:t,cy:a,payload:s,index:i})=>e.jsx("circle",{cx:t,cy:a,r:4,fill:s.excluded?"#f87171":"#3b82f6",stroke:"#fff",strokeWidth:1},`diastolic-dot-${(null==s?void 0:s.id)||i}`),activeDot:!1},"diastolic-line"),H&&e.jsx(o,{type:"linear",data:H,dataKey:"systolicTrend",stroke:"#22c55e",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"systolic-trend"),P&&e.jsx(o,{type:"linear",data:P,dataKey:"diastolicTrend",stroke:"#22c55e",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"diastolic-trend")]}),"weight"===w&&L&&e.jsx(o,{type:"linear",data:L,dataKey:"weightTrend",stroke:"#22c55e",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"weight-trend")]})})]}),"bloodPressure"===w&&e.jsx("div",{className:"w-full flex justify-center",children:e.jsx("div",{className:"text-gray-600 dark:text-gray-300 text-[11px] sm:text-xs mt-1 px-1 leading-tight text-left max-w-[720px] w-full",children:"10分以内に複数回測定がある場合、最も低い結果を代表値として表示します（合計が同じ場合は拡張期→時刻で決定）。"})}),"weight"===w&&(()=>{const t=$.filter(e=>"value"in e&&null!=e.value&&!isNaN(e.value));if(0===t.length)return null;const a=t.map(e=>e.value),s=Math.min(...a),i=Math.max(...a),l=i-s,r=Math.round(7200*l),n=(r/2700).toFixed(1);return e.jsx("div",{className:"w-full flex justify-center mt-3 mb-2",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:"flex gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-red-600 dark:text-red-400 font-medium",children:"最大:"}),e.jsxs("span",{className:"font-bold text-red-700 dark:text-red-300",children:[i.toFixed(2),"kg"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-600 dark:text-blue-400 font-medium",children:"最小:"}),e.jsxs("span",{className:"font-bold text-blue-700 dark:text-blue-300",children:[s.toFixed(2),"kg"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-green-600 dark:text-green-400 font-medium",children:"差:"}),e.jsxs("span",{className:"font-bold text-green-700 dark:text-green-300",children:[l.toFixed(2),"kg"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600 dark:text-gray-400",children:[e.jsxs("span",{children:["カロリー換算: ",e.jsxs("span",{className:"font-semibold text-orange-600 dark:text-orange-400",children:[r.toLocaleString(),"kcal"]})]}),e.jsxs("span",{children:["マラソン換算: ",e.jsxs("span",{className:"font-semibold text-purple-600 dark:text-purple-400",children:[n,"回分"]})]})]})]})})})(),"weight"===w&&e.jsx("div",{className:"w-full flex flex-col items-start gap-1 mt-4 mb-2 text-left",children:["exercise","meal","sleep"].map(t=>{const a=C(t,h[b].days||9999);let s="";N&&("exercise"===t&&N.exerciseGoal&&(s=`${N.exerciseGoal}`),"meal"===t&&N.dietGoal&&(s=`${N.dietGoal}`),"sleep"===t&&N.sleepGoal&&(s=`${N.sleepGoal}`));const i=p[t]??"";return a?e.jsxs("div",{className:"flex items-baseline text-xs sm:text-base text-blue-700 dark:text-blue-200 font-semibold whitespace-nowrap",children:[e.jsx("span",{className:"inline-block min-w-[2em] text-center",children:i}),e.jsx("span",{className:"inline-block min-w-[7em]",children:a.total>0?`${a.rate.toFixed(0)}% (${a.achieved}/${a.total}日)`:"記録なし"}),s&&e.jsx("span",{className:"ml-0 text-gray-500 dark:text-gray-300 text-xs sm:text-sm font-normal",children:s})]},t):e.jsxs("div",{className:"flex items-baseline text-xs sm:text-base text-blue-700 dark:text-blue-200 font-semibold whitespace-nowrap",children:[e.jsx("span",{className:"inline-block min-w-[2em] text-center",children:i}),e.jsx("span",{className:"inline-block min-w-[7em]",children:"記録なし"}),s&&e.jsx("span",{className:"ml-0 text-gray-500 dark:text-gray-300 text-xs sm:text-sm font-normal",children:s})]},t)})})]})};export{b as default};
