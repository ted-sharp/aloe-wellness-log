import{j as e,c as r}from"./ui-vendor-D7AUAfXm.js";import{a}from"./react-vendor-BzNAZZ5j.js";import{u as t,k as n,a as d,h as l,w as s}from"./index-_d5zLM54.js";import"./icons-vendor-DoCnAwwa.js";import"./state-vendor-O6FgWrPy.js";function o(){const{t:o,translateFieldName:i,currentLanguage:c,formatDate:m}=t(),{records:g,fields:x,loadRecords:u,loadFields:h}=n(),[b,f]=a.useState(null),[p,v]=a.useState(new Set),y="ja"===c?"ja-JP":"en-US";a.useEffect(()=>{h(),u()},[h,u]);const j=e=>{if("notes"===e)return{fieldId:"notes",name:i("notes"),type:"string",order:0};let r=x.find(r=>r.fieldId===e);return r||(r=x.find(r=>r.name===e)),r},k=(e,r=30)=>e.length<=r?e:e.substring(0,r)+"...",_=a.useMemo(()=>new Set(g.map(e=>e.date)),[g]),w=a.useMemo(()=>{if(!b)return[];const e=`${b.getFullYear()}-${String(b.getMonth()+1).padStart(2,"0")}-${String(b.getDate()).padStart(2,"0")}`;return g.filter(r=>r.date===e)},[g,b]),N=a.useMemo(()=>{if(0===w.length)return{};return[...w].sort((e,r)=>{const a=`${e.date} ${e.time}`;return`${r.date} ${r.time}`.localeCompare(a)}).reduce((e,r)=>{const a=`${r.date} ${r.time}`;return e[a]||(e[a]=[]),e[a].push(r),e},{})},[w]);return e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-12",children:o("pages.calendar.title")}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6 mb-8",children:[e.jsx("style",{children:"\n          .react-calendar {\n            width: 100%;\n            background: transparent;\n            border: none;\n            font-family: inherit;\n          }\n          .react-calendar__tile {\n            padding: 12px 8px;\n            background: transparent;\n            border-radius: 8px;\n            transition: all 0.2s;\n            position: relative;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            text-align: center;\n            color: #374151;\n          }\n          @media (prefers-color-scheme: dark) {\n            .react-calendar__tile {\n              color: #d1d5db;\n            }\n          }\n          .react-calendar__tile:enabled:hover,\n          .react-calendar__tile:enabled:focus {\n            background-color: #dbeafe;\n          }\n          @media (prefers-color-scheme: dark) {\n            .react-calendar__tile:enabled:hover,\n            .react-calendar__tile:enabled:focus {\n              background-color: #1e3a8a;\n            }\n          }\n          .react-calendar__tile--active {\n            background: #2563eb !important;\n            color: white !important;\n          }\n          .react-calendar__tile--active .record-border {\n            border-color: white !important;\n          }\n          .react-calendar__navigation button {\n            color: #374151;\n            font-weight: 500;\n            font-size: 16px;\n            padding: 8px 16px;\n          }\n          @media (prefers-color-scheme: dark) {\n            .react-calendar__navigation button {\n              color: #d1d5db;\n            }\n          }\n          .react-calendar__navigation button:enabled:hover,\n          .react-calendar__navigation button:enabled:focus {\n            background-color: #f3f4f6;\n            border-radius: 8px;\n          }\n          @media (prefers-color-scheme: dark) {\n            .react-calendar__navigation button:enabled:hover,\n            .react-calendar__navigation button:enabled:focus {\n              background-color: #374151;\n            }\n          }\n          .react-calendar__month-view__weekdays {\n            font-weight: 600;\n            color: #6b7280;\n          }\n          @media (prefers-color-scheme: dark) {\n            .react-calendar__month-view__weekdays {\n              color: #9ca3af;\n            }\n          }\n        "}),e.jsx(r,{onChange:e=>f(e),value:b,locale:y,tileContent:({date:r,view:a})=>{if("month"===a){const a=`${r.getFullYear()}-${String(r.getMonth()+1).padStart(2,"0")}-${String(r.getDate()).padStart(2,"0")}`;if(_.has(a))return e.jsx("div",{className:"absolute inset-0 border-2 border-blue-600 rounded-lg pointer-events-none record-border"})}return null}})]}),b&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-white mb-8",children:[m(b,{year:"numeric",month:"long",day:"numeric",weekday:"long"})," ",o("pages.calendar.recordsFor")]}),0===w.length?e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6 text-center text-gray-500 dark:text-gray-400",children:e.jsx("p",{className:"text-lg",children:o("pages.calendar.noRecords")})}):e.jsx("div",{className:"space-y-8",children:Object.entries(N).map(([r,a])=>{return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6",children:[e.jsxs("div",{className:"text-2xl font-semibold text-gray-800 dark:text-white mb-6 border-b border-gray-200 dark:border-gray-600 pb-4 flex items-center gap-2",children:[e.jsx(d,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"}),a[0].time]}),e.jsx("ul",{className:"space-y-4",children:(t=a,[...t].sort((e,r)=>{const a=j(e.fieldId),t=j(r.fieldId);return((null==a?void 0:a.order)??999)-((null==t?void 0:t.order)??999)})).map(r=>{const a=j(r.fieldId);return e.jsx("li",{className:"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200",children:"notes"===(null==a?void 0:a.fieldId)?e.jsxs("div",{className:"flex items-stretch gap-2",children:[e.jsx("div",{className:"text-xl font-medium text-gray-700 dark:text-gray-300 pr-2 border-r border-gray-200 dark:border-gray-500 flex-shrink-0",children:a?a.name:r.fieldId}),e.jsx("div",{className:"text-lg text-gray-800 dark:text-white font-semibold pl-2 flex-1 min-w-0",children:"string"==typeof r.value&&r.value.length>30?e.jsx("button",{onClick:()=>{return e=r.id,void v(r=>{const a=new Set(r);return a.has(e)?a.delete(e):a.add(e),a});var e},className:"text-left hover:text-blue-600 transition-colors break-words w-full",title:o("common.clickToExpand"),children:(t=r.id,p.has(t)?r.value:k(r.value))}):e.jsx("span",{className:"break-words",children:r.value})})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-2 items-stretch",children:[e.jsx("div",{className:"text-xl font-medium text-gray-700 dark:text-gray-300 text-right pr-2 border-r border-gray-200 dark:border-gray-500",children:a?a.name:r.fieldId}),e.jsx("div",{className:"text-lg text-gray-800 dark:text-white font-semibold pl-2 text-left",children:"boolean"==typeof r.value?r.value?e.jsxs("span",{className:"inline-flex items-center gap-2 text-green-600",children:[e.jsx(l,{className:"w-6 h-6"}),o("fields.yes")]}):e.jsxs("span",{className:"inline-flex items-center gap-2 text-red-600",children:[e.jsx(s,{className:"w-6 h-6"}),o("fields.no")]}):e.jsxs("span",{className:"break-words",children:[r.value,(null==a?void 0:a.unit)&&"boolean"!=typeof r.value&&e.jsx("span",{className:"text-gray-600 dark:text-gray-400 ml-1",children:a.unit})]})})]})},r.id);var t})})]},r);var t})})]})]})}export{o as default};
