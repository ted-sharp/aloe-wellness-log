import{G as e}from"./icons-vendor-DCv9Y2bB.js";import{j as t}from"./ui-vendor-J9A7wRLG.js";import{a}from"./react-vendor-C4GzcRrE.js";import{g as r}from"./index-Dq4XCX4H.js";function l(t){return e({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M232,208a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V48a8,8,0,0,1,16,0V60.69l56,56,26.34-26.35a8,8,0,0,1,11.32,0L192,148.69V128a8,8,0,0,1,16,0v40a7,7,0,0,1,0,.8c0,.11,0,.21-.05.32s0,.3-.07.46a2.83,2.83,0,0,1-.09.37c0,.13-.06.26-.1.39s-.08.23-.12.35l-.14.39-.15.31c-.06.13-.12.27-.19.4s-.11.18-.16.28l-.24.39-.21.28-.26.35c-.11.14-.24.27-.36.4l-.16.18-.17.15a4.83,4.83,0,0,1-.42.37,3.92,3.92,0,0,1-.32.25l-.3.22-.38.23a2.91,2.91,0,0,1-.3.17l-.37.19-.34.15-.36.13a2.84,2.84,0,0,1-.38.13l-.36.1c-.14,0-.26.07-.4.09l-.42.07-.35.05a7,7,0,0,1-.79,0H160a8,8,0,0,1,0-16h20.69L128,107.31l-26.34,26.35a8,8,0,0,1-11.32,0L40,83.31V200H224A8,8,0,0,1,232,208Z"},child:[]}]})(t)}const o=a.memo(function({value:e,onChange:r,placeholder:l,step:o="0.1",min:n,max:s,width:i="md",className:c="",disabled:d=!1,"data-testid":u}){const[h,g]=a.useState(!1),[m,b]=a.useState(!1),f=((e="md")=>{switch(e){case"sm":return"w-16";case"md":default:return"w-20";case"lg":return"w-24"}})(i),w=a.useCallback(e=>{r(e.target.value),b(!0),setTimeout(()=>b(!1),1e3)},[r]),y=a.useCallback(()=>{g(!0)},[]),p=a.useCallback(()=>{g(!1)},[]),x=["h-10 border rounded-lg px-3 py-2 text-lg font-mono font-semibold","bg-inherit placeholder:font-normal placeholder:text-sm placeholder-gray-400","transition-all duration-200 transform",h?"border-blue-500 ring-2 ring-blue-200 dark:ring-blue-800 scale-105":"border-gray-300 dark:border-gray-600",m?"input-highlight":"","text-gray-700 dark:text-gray-200",f,c].filter(Boolean).join(" ");return t.jsx("input",{type:"number",className:x,value:e,onChange:w,onFocus:y,onBlur:p,placeholder:l,step:o,min:n,max:s,disabled:d,"data-testid":u})});function n(t){return e({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"},child:[]}]})(t)}function s(t){return e({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 2v11h3v9l7-12h-4l4-8z"},child:[]}]})(t)}function i(t){return e({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 17h1m16 0h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7m-9.7 5.7a4 4 0 0 1 8 0"},child:[]},{tag:"path",attr:{d:"M3 21l18 0"},child:[]},{tag:"path",attr:{d:"M12 9v-6l3 3m-6 0l3 -3"},child:[]}]})(t)}const c=a.memo(function({value:e,onChange:a,className:r=""}){return t.jsxs("div",{className:`flex gap-2 ${r}`,children:[t.jsx("input",{type:"time",className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-base bg-inherit text-gray-700 dark:text-gray-200 w-[6.5em]",value:e,onChange:e=>a(e.target.value)}),t.jsx("button",{type:"button",className:"h-10 px-3 rounded-xl bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-300/20 dark:hover:bg-yellow-300/40 border border-yellow-300 text-yellow-500 dark:text-yellow-200 focus:outline-none focus:ring-2 focus:ring-yellow-400 shadow flex items-center justify-center transition-colors duration-150",title:"朝7時にセット","aria-label":"朝7時にセット",onClick:()=>{a("07:00")},children:t.jsx(i,{className:"w-6 h-6"})}),t.jsx("button",{type:"button",className:"h-10 px-3 rounded-xl bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-300/20 dark:hover:bg-yellow-300/40 border border-yellow-300 text-yellow-500 dark:text-yellow-200 focus:outline-none focus:ring-2 focus:ring-yellow-400 shadow flex items-center justify-center transition-colors duration-150",title:"現在時刻にセット","aria-label":"現在時刻にセット",onClick:()=>{a((()=>{const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`})())},children:t.jsx(s,{className:"w-6 h-6"})})]})});function d({getAllRecords:e,addRecord:t,updateRecord:r,deleteRecord:l,onRecordAdded:o}){const[n,s]=a.useState([]),[i,c]=a.useState(!0),[d,u]=a.useState(null),h=a.useCallback(async()=>{try{c(!0),u(null);const t=await e();s(t)}catch(t){u(t instanceof Error?t.message:"記録の取得に失敗しました")}finally{c(!1)}},[e]);a.useEffect(()=>{h()},[h]);const g=a.useCallback(async e=>{try{u(null),await t(e),await h(),null==o||o()}catch(a){throw u(a instanceof Error?a.message:"記録の追加に失敗しました"),a}},[t,h,o]),m=a.useCallback(async e=>{try{u(null),await r(e),await h()}catch(t){throw u(t instanceof Error?t.message:"記録の更新に失敗しました"),t}},[r,h]),b=a.useCallback(async e=>{try{if(u(null),!window.confirm("本当に削除しますか？"))return;await l(e),await h()}catch(t){throw u(t instanceof Error?t.message:"記録の削除に失敗しました"),t}},[l,h]),f=a.useCallback(()=>{u(null)},[]);return{records:n,isLoading:i,error:d,handleAdd:g,handleUpdate:m,handleDelete:b,refetchRecords:h,clearError:f}}function u({initialValues:e,createRecord:t,resetValues:l}){const[o,n]=a.useState(e),s=a.useCallback((e,t)=>{n(a=>({...a,[e]:t}))},[]),i=a.useCallback(()=>{n({...e,...l,time:r()})},[e,l]),c=a.useCallback(e=>t(o,e),[o,t]);return{formData:o,setFormData:n,updateField:s,resetForm:i,createRecordFromForm:c}}export{n as M,o as N,l as P,c as T,u as a,d as u};
