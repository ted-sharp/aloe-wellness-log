import{j as e,R as a,a as t,C as s,X as r,Y as l,T as d,b as n,c as o}from"./ui-vendor-NppzeDv9.js";import{r as i}from"./react-vendor-C0LY84C9.js";import{g as m}from"./index-C5oYGPPY.js";import"./icons-vendor-dw3RmBrp.js";import"./state-vendor-B_eAjXv5.js";const c=[{label:"1週間",value:7},{label:"1ヶ月",value:30},{label:"全期間",value:0}];function u(){var u;const{records:x,fields:h}=m(),j=h.filter(e=>"number"===e.type||"string"===e.type).sort((e,a)=>(e.order||999)-(a.order||999)),[p,v]=i.useState(j.length>0?j[0].fieldId:""),[f,b]=i.useState(7),g=i.useMemo(()=>{if(!p)return[];let e=x.filter(e=>e.fieldId===p).map(e=>{var a;return{...e,date:e.date||(null==(a=e.datetime)?void 0:a.slice(0,10))}}).sort((e,a)=>e.date.localeCompare(a.date));if(f>0){const a=new Date;a.setDate(a.getDate()-f+1),e=e.filter(e=>new Date(e.date)>=a)}return e},[x,p,f]);return e.jsxs("div",{className:"p-4 max-w-2xl mx-auto bg-gray-50 min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-12",children:"グラフ"}),e.jsxs("div",{className:"flex gap-4 mb-4 items-center",children:[e.jsxs("label",{children:["項目：",e.jsx("select",{value:p,onChange:e=>v(e.target.value),className:"border rounded px-2 py-1 ml-2",children:j.map(a=>e.jsx("option",{value:a.fieldId,children:a.name},a.fieldId))})]}),e.jsxs("label",{children:["期間：",e.jsx("select",{value:f,onChange:e=>b(Number(e.target.value)),className:"border rounded px-2 py-1 ml-2",children:c.map(a=>e.jsx("option",{value:a.value,children:a.label},a.value))})]})]}),e.jsx("div",{className:"bg-white rounded shadow p-4",children:e.jsx(a,{width:"100%",height:300,children:e.jsxs(t,{data:g,margin:{top:20,right:30,left:0,bottom:0},children:[e.jsx(s,{strokeDasharray:"3 3"}),e.jsx(r,{dataKey:"date"}),e.jsx(l,{}),e.jsx(d,{}),e.jsx(n,{}),e.jsx(o,{type:"monotone",dataKey:"value",stroke:"#8884d8",name:null==(u=j.find(e=>e.fieldId===p))?void 0:u.name})]})})})]})}export{u as default};
