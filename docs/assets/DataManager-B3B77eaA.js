import{j as e}from"./ui-vendor-J9A7wRLG.js";import{a as s}from"./react-vendor-C4GzcRrE.js";import{C as a,Q as l,b as n}from"./index-DRBJlZRQ.js";import{B as r}from"./Button-DQwbRege.js";import{E as t,S as i,I as d}from"./StatusMessage-DZoo_nsH.js";import"./icons-vendor-DCv9Y2bB.js";import"./state-vendor-RA6ewXRt.js";const c=s.memo(function({onStatusChange:c,onDataUpdated:o}){const{deleteAllData:m}=a(),[x,j]=s.useState(null),[u,f]=s.useState(!1),h=s.useCallback(async()=>{if(!window.confirm("本当にすべてのデータを削除しますか？\n\nこの操作は取り消せません。削除前にデータをエクスポートしてバックアップを作成することをお勧めします。\n\n続行しますか？"))return;if(window.confirm("最終確認です。\n\nすべての記録データ（体重、血圧、日課、目標）が完全に削除されます。\n\nこの操作は取り消せません。本当に実行しますか？")){f(!0),j("すべてのデータを削除中..."),null==c||c("すべてのデータを削除中...");try{await m(),j("すべてのデータを削除しました"),null==c||c("すべてのデータを削除しました"),null==o||o()}catch(e){const s=e instanceof Error?e.message:"不明なエラー";j(`削除に失敗しました: ${s}`),null==c||c(`削除に失敗しました: ${s}`)}finally{f(!1)}}},[m,c,o]),b=s.useCallback(()=>{j(null),null==c||c(null)},[c]);return e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 text-gray-700 dark:text-gray-200 flex items-center gap-2 justify-center",children:[e.jsx(l,{className:"w-6 h-6 text-red-600 dark:text-red-400"}),"危険な操作"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-red-800 dark:text-red-200 mb-4 flex justify-center",children:e.jsxs("div",{className:"text-left max-w-md",children:[e.jsx("p",{className:"mb-2",children:"この操作により、すべての記録データが完全に削除されます。"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mb-3",children:[e.jsx("li",{children:"体重記録"}),e.jsx("li",{children:"血圧記録"}),e.jsx("li",{children:"日課記録"}),e.jsx("li",{children:"日課項目設定"}),e.jsx("li",{children:"目標設定"})]}),e.jsx("p",{className:"font-semibold",children:"削除前に必ずデータをエクスポートしてバックアップを作成してください。"})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(r,{variant:"danger",icon:n,onClick:h,disabled:u,children:u?"削除中...":"すべてのデータを削除"})}),x&&e.jsx("div",{className:"mt-4",children:x.includes("失敗")||x.includes("エラー")?e.jsx(t,{message:x,onHide:b}):x.includes("削除しました")?e.jsx(i,{message:x,onHide:b}):e.jsx(d,{message:x})})]})]})});export{c as default};
