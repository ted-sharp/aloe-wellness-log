import{j as e}from"./ui-vendor-Bpjs_4Uy.js";import{a as s}from"./react-vendor-9hcqHTTy.js";import{u as a,a as r,B as n,q as l}from"./index-DiNO0sBy.js";import{E as t,S as d,I as i}from"./RecordExport-DOGkAqgz.js";import"./icons-vendor-BLJDdPqg.js";import"./dnd-vendor-B-r8cpST.js";import"./state-vendor-CZRBIdKG.js";const c=s.memo(function({onStatusChange:c,onDataUpdated:o}){const{deleteAllData:x}=a(),[m,j]=s.useState(null),[u,h]=s.useState(!1),f=s.useCallback(async()=>{if(!window.confirm("本当にすべてのデータを削除しますか？\n\nこの操作は取り消せません。削除前にデータをエクスポートしてバックアップを作成することをお勧めします。\n\n続行しますか？"))return;if(window.confirm("最終確認です。\n\nすべての記録データ（体重、血圧、日課、目標）が完全に削除されます。\n\nこの操作は取り消せません。本当に実行しますか？")){h(!0),j("すべてのデータを削除中..."),null==c||c("すべてのデータを削除中...");try{await x(),j("すべてのデータを削除しました"),null==c||c("すべてのデータを削除しました"),null==o||o()}catch(e){const s=e instanceof Error?e.message:"不明なエラー";j(`削除に失敗しました: ${s}`),null==c||c(`削除に失敗しました: ${s}`)}finally{h(!1)}}},[x,c,o]),p=s.useCallback(()=>{j(null),null==c||c(null)},[c]);return e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-xl shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 text-gray-700 dark:text-gray-200 flex items-center gap-2 justify-center",children:[e.jsx(r,{className:"w-6 h-6 text-red-600 dark:text-red-400"}),"危険な操作"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-red-800 dark:text-red-200 mb-4 flex justify-center",children:e.jsxs("div",{className:"text-left max-w-md",children:[e.jsx("p",{className:"mb-2",children:"この操作により、すべての記録データが完全に削除されます："}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 mb-3",children:[e.jsx("li",{children:"体重記録"}),e.jsx("li",{children:"血圧記録"}),e.jsx("li",{children:"日課記録"}),e.jsx("li",{children:"日課項目設定"}),e.jsx("li",{children:"目標設定"})]}),e.jsx("p",{className:"font-semibold",children:"削除前に必ずデータをエクスポートしてバックアップを作成してください。"})]})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(n,{variant:"danger",icon:l,onClick:f,disabled:u,children:u?"削除中...":"すべてのデータを削除"})}),m&&e.jsx("div",{className:"mt-4",children:m.includes("失敗")||m.includes("エラー")?e.jsx(t,{message:m,onHide:p}):m.includes("削除しました")?e.jsx(d,{message:m,onHide:p}):e.jsx(i,{message:m})}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400 text-center",children:e.jsx("p",{children:"データは復元できません。慎重に操作してください。"})})]})]})});export{c as default};
