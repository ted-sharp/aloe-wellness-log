import{j as e,c as t}from"./ui-vendor-D7AUAfXm.js";import{a as n}from"./react-vendor-BzNAZZ5j.js";import{u as a,k as r,a as s,h as l,w as d}from"./index-Me2wFoHP.js";import"./icons-vendor-DoCnAwwa.js";import"./state-vendor-O6FgWrPy.js";function i(){const{t:i,translateFieldName:o,currentLanguage:c,formatDate:m}=a(),{records:x,fields:u,loadRecords:g,loadFields:h}=r(),[p,f]=n.useState(null),[b,v]=n.useState(new Set),j="ja"===c?"ja-JP":"en-US";n.useEffect(()=>{h(),g()},[h,g]);const y=e=>{if("notes"===e)return{fieldId:"notes",name:o("notes"),type:"string",order:0};let t=u.find(t=>t.fieldId===e);return t||(t=u.find(t=>t.name===e)),t},w=(e,t=30)=>e.length<=t?e:e.substring(0,t)+"...",N=n.useMemo(()=>new Set(x.map(e=>e.date)),[x]),_=n.useMemo(()=>{if(!p)return[];const e=`${p.getFullYear()}-${String(p.getMonth()+1).padStart(2,"0")}-${String(p.getDate()).padStart(2,"0")}`;return x.filter(t=>t.date===e)},[x,p]),k=n.useMemo(()=>{if(0===_.length)return{};return[..._].sort((e,t)=>{const n=`${e.date} ${e.time}`;return`${t.date} ${t.time}`.localeCompare(n)}).reduce((e,t)=>{const n=`${t.date} ${t.time}`;return e[n]||(e[n]=[]),e[n].push(t),e},{})},[_]);return e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-12",children:i("pages.calendar.title")}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6 mb-8",children:[e.jsx("style",{children:"\n          .react-calendar {\n            width: 100%;\n            background: transparent;\n            border: none;\n            font-family: inherit;\n          }\n          .react-calendar__tile {\n            padding: 12px 8px;\n            background: transparent;\n            border-radius: 8px;\n            transition: all 0.2s;\n            position: relative;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            text-align: center;\n          }\n          .react-calendar__tile:enabled:hover,\n          .react-calendar__tile:enabled:focus {\n            background-color: #dbeafe;\n          }\n          .react-calendar__tile--active {\n            background: #2563eb !important;\n            color: white !important;\n          }\n          .react-calendar__tile--active .record-border {\n            border-color: white !important;\n          }\n          .react-calendar__navigation button {\n            color: #374151;\n            font-weight: 500;\n            font-size: 16px;\n            padding: 8px 16px;\n          }\n          .react-calendar__navigation button:enabled:hover,\n          .react-calendar__navigation button:enabled:focus {\n            background-color: #f3f4f6;\n            border-radius: 8px;\n          }\n          .react-calendar__month-view__weekdays {\n            font-weight: 600;\n            color: #6b7280;\n          }\n        "}),e.jsx(t,{onChange:e=>f(e),value:p,locale:j,tileContent:({date:t,view:n})=>{if("month"===n){const n=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;if(N.has(n))return e.jsx("div",{className:"absolute inset-0 border-2 border-blue-600 rounded-lg pointer-events-none record-border"})}return null}})]}),p&&e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-semibold text-gray-800 mb-8",children:[m(p,{year:"numeric",month:"long",day:"numeric",weekday:"long"})," ",i("pages.calendar.recordsFor")]}),0===_.length?e.jsx("div",{className:"bg-white rounded-2xl shadow-md p-6 text-center text-gray-500",children:e.jsx("p",{className:"text-lg",children:i("pages.calendar.noRecords")})}):e.jsx("div",{className:"space-y-8",children:Object.entries(k).map(([t,n])=>{return e.jsxs("div",{className:"bg-white rounded-2xl shadow-md p-6",children:[e.jsxs("div",{className:"text-2xl font-semibold text-gray-800 mb-6 border-b border-gray-200 pb-4 flex items-center gap-2",children:[e.jsx(s,{className:"w-6 h-6 text-blue-600"}),n[0].time]}),e.jsx("ul",{className:"space-y-4",children:(a=n,[...a].sort((e,t)=>{const n=y(e.fieldId),a=y(t.fieldId);return((null==n?void 0:n.order)??999)-((null==a?void 0:a.order)??999)})).map(t=>{const n=y(t.fieldId);return e.jsx("li",{className:"bg-gray-50 rounded-lg p-4 hover:bg-gray-100 transition-colors duration-200",children:"notes"===(null==n?void 0:n.fieldId)?e.jsxs("div",{className:"flex items-stretch gap-2",children:[e.jsx("div",{className:"text-xl font-medium text-gray-700 pr-2 border-r border-gray-200 flex-shrink-0",children:n?n.name:t.fieldId}),e.jsx("div",{className:"text-lg text-gray-800 font-semibold pl-2 flex-1 min-w-0",children:"string"==typeof t.value&&t.value.length>30?e.jsx("button",{onClick:()=>{return e=t.id,void v(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n});var e},className:"text-left hover:text-blue-600 transition-colors break-words w-full",title:i("common.clickToExpand"),children:(a=t.id,b.has(a)?t.value:w(t.value))}):e.jsx("span",{className:"break-words",children:t.value})})]}):e.jsxs("div",{className:"grid grid-cols-2 gap-2 items-stretch",children:[e.jsx("div",{className:"text-xl font-medium text-gray-700 text-right pr-2 border-r border-gray-200",children:n?n.name:t.fieldId}),e.jsx("div",{className:"text-lg text-gray-800 font-semibold pl-2 text-left",children:"boolean"==typeof t.value?t.value?e.jsxs("span",{className:"inline-flex items-center gap-2 text-green-600",children:[e.jsx(l,{className:"w-6 h-6"}),i("fields.yes")]}):e.jsxs("span",{className:"inline-flex items-center gap-2 text-red-600",children:[e.jsx(d,{className:"w-6 h-6"}),i("fields.no")]}):e.jsxs("span",{className:"break-words",children:[t.value,(null==n?void 0:n.unit)&&"boolean"!=typeof t.value&&e.jsx("span",{className:"text-gray-600 ml-1",children:n.unit})]})})]})},t.id);var a})})]},t);var a})})]})]})}export{i as default};
