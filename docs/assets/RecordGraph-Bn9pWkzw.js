import{j as e,R as t,C as a,e as s,X as i,g as r,Y as l,T as n,L as o,h as d}from"./ui-vendor-BuGzxEnB.js";import{a as c}from"./react-vendor-9hcqHTTy.js";import{A as m,y as g,H as u,s as h}from"./index-D0hqXwCf.js";import"./icons-vendor-BLJDdPqg.js";import"./state-vendor-DgseLVVv.js";const x=[{label:"2週間",days:14},{label:"1か月半",days:45},{label:"3か月",days:90},{label:"全データ",days:null}],p=[{label:"体重",value:"weight"},{label:"体脂肪",value:"bodyComposition"},{label:"血圧",value:"bloodPressure"}],b={exercise:"🏃",meal:"🍽",sleep:"🛌"},f=["日","月","火","水","木","金","土"],y=()=>{const[y,k]=c.useState(0),[j,w]=c.useState(!1),[v,D]=c.useState("weight"),S=(()=>{const e=c.useCallback(e=>{const t=new Date(e);return`${t.getMonth()+1}/${t.getDate()}`},[]),t=c.useCallback((e,t,a)=>{if(e.length<2)return null;const s=e.filter(e=>"number"==typeof e[t]&&"number"==typeof e[a]&&!isNaN(e[t])&&!isNaN(e[a]));if(s.length<2)return null;const i=s.length;let r=0,l=0,n=0,o=0;for(const p of s){const e=p[t],s=p[a];r+=e,l+=s,n+=e*e,o+=e*s}const d=r/i,c=l/i,m=n-r*d;if(0===m)return null;const g=(o-r*c)/m,u=c-g*d,h=s[0][t],x=s[s.length-1][t];return[{timestamp:h,[`${String(a)}Trend`]:g*h+u},{timestamp:x,[`${String(a)}Trend`]:g*x+u}]},[]),a=c.useCallback((e,t,a)=>{if(e.length<2)return null;const s=e.filter(e=>null!=e[t]&&!isNaN(e[t]));if(s.length<2)return null;const i=s.length;let r=0,l=0,n=0,o=0;for(const p of s)r+=p.timestamp,l+=p[t],n+=p.timestamp*p.timestamp,o+=p.timestamp*p[t];const d=r/i,c=l/i,m=n-r*d;if(0===m)return null;const g=(o-r*c)/m,u=c-g*d,h=s[0].timestamp,x=s[s.length-1].timestamp;return[{timestamp:h,[a]:g*h+u},{timestamp:x,[a]:g*x+u}]},[]),s=c.useCallback(e=>a(e,"value","weightTrend"),[a]),i=c.useCallback(e=>a(e,"bodyFat","bodyFatTrend"),[a]),r=c.useCallback(e=>a(e,"waist","waistTrend"),[a]),l=c.useCallback(e=>a(e,"systolic","systolicTrend"),[a]),n=c.useCallback(e=>a(e,"diastolic","diastolicTrend"),[a]),o=c.useCallback(e=>{if(!e.length)return[];const t=new Date(e[0].timestamp),a=new Date(e[e.length-1].timestamp);t.setHours(0,0,0,0),a.setHours(0,0,0,0);const s=[];for(let i=new Date(t);i<=a;i.setDate(i.getDate()+1))s.push(new Date(i.getFullYear(),i.getMonth(),i.getDate(),0,0,0,0).getTime());return s},[]),d=c.useCallback(e=>{if(!e.length)return[];const t=o(e),a=t.length;return a<=7?t:a<=14?t.filter((e,t)=>t%2==0):a<=30?t.filter((e,t)=>t%3==0):a<=60?t.filter((e,t)=>t%7==0):t.filter((e,t)=>t%14==0)},[o]);return{formatDateForTick:e,calculateTrendLine:t,calculateGenericTrendLine:a,calculateWeightTrendLine:s,calculateBodyFatTrendLine:i,calculateWaistTrendLine:r,calculateSystolicTrendLine:l,calculateDiastolicTrendLine:n,calculateDayStartLines:o,calculateXAxisTicks:d}})(),{dailyRecords:T,goal:F,isLoading:N,error:A,getFilteredData:W,getFilteredBpData:R,getFilteredBodyCompositionData:$,getStatusStats:C}=function(){const e=m(),t=g(),{weightRecords:a,dailyRecords:s,bpRecords:i,loading:r,errors:l}=e,{goal:n}=t;c.useEffect(()=>{(async()=>{await Promise.all([t.loadGoal(),e.loadAllData()])})()},[]);const o=c.useCallback(async()=>{await Promise.all([t.loadGoal(),e.loadAllData()])},[t.loadGoal,e.loadAllData]),d=c.useMemo(()=>r.weight||r.daily||r.bp||r.global,[r.weight,r.daily,r.bp,r.global]),u=c.useMemo(()=>!!(l.weight||l.daily||l.bp||l.global),[l.weight,l.daily,l.bp,l.global]),h=c.useMemo(()=>{const e=new Map;return a.map(t=>{const a=`${t.date}T${t.time}`,s=new Date(a).getTime(),i=e.get(s)||0,r=s+i;return e.set(s,i+1),{...t,dateTime:a,timestamp:r,weight:t.weight,value:t.weight,excluded:t.excludeFromGraph||!1}}).sort((e,t)=>e.timestamp-t.timestamp)},[a]);c.useMemo(()=>{const e=new Map;return a.map(t=>{const a=`${t.date}T${t.time}`,s=new Date(a).getTime(),i=e.get(s)||0,r=s+i;return e.set(s,i+1),{...t,dateTime:a,timestamp:r,bodyFat:t.bodyFat??null,waist:t.waist??null}}).sort((e,t)=>e.timestamp-t.timestamp)},[a]);const x=c.useMemo(()=>{const e=new Map;return i.map(t=>{const a=`${t.date}T${t.time}`,s=new Date(a).getTime(),i=e.get(s)||0,r=s+i;return e.set(s,i+1),{...t,dateTime:a,timestamp:r,systolic:t.systolic,diastolic:t.diastolic,pulse:t.heartRate||0,excluded:t.excludeFromGraph||!1}}).sort((e,t)=>e.timestamp-t.timestamp)},[i]),p=c.useMemo(()=>{const e=[...h.map(e=>e.date),...x.map(e=>e.date)];return e.length>0?e.sort().reverse()[0]:null},[h,x]),b=c.useCallback(e=>{if(!p)return{weight:[],bp:[]};const t=new Date(p),a=new Date(t);a.setDate(a.getDate()-e+1);const s=a.toISOString().split("T")[0],i=t.toISOString().split("T")[0];return{weight:h.filter(e=>e.date>=s&&e.date<=i),bp:x.filter(e=>e.date>=s&&e.date<=i)}},[p,h,x]),f=c.useMemo(()=>s.map(e=>({fieldId:e.fieldId,date:e.date,value:e.value,achieved:1===e.value})),[s]),y=c.useCallback((e,t)=>{if(!p)return{total:0,achieved:0,rate:0};const a=new Date(p),s=new Date(a);s.setDate(s.getDate()-t+1);const i=s.toISOString().split("T")[0],r=a.toISOString().split("T")[0],l=f.filter(t=>t.fieldId===e&&t.date>=i&&t.date<=r),n=l.filter(e=>e.achieved).length,o=l.length;return{total:o,achieved:n,rate:o>0?n/o*100:0}},[p,f]),k=c.useCallback(()=>{o()},[o]),j=c.useCallback((t,a)=>{const s=e.processedWeightRecordsForGraph,i=new Date,r=new Date(i);r.setDate(r.getDate()-t+1);const l=r.toISOString().split("T")[0],n=i.toISOString().split("T")[0],o=s.filter(e=>e.date>=l&&e.date<=n);return(a?o:o.filter(e=>!e.excludeFromGraph)).map(e=>({...e,value:e.weight,excluded:e.excludeFromGraph||!1}))},[e.processedWeightRecordsForGraph]),w=c.useCallback((t,a)=>{const s=e.processedBpRecordsForGraph,i=new Date,r=new Date(i);r.setDate(r.getDate()-t+1);const l=r.toISOString().split("T")[0],n=i.toISOString().split("T")[0],o=s.filter(e=>e.date>=l&&e.date<=n);return(a?o:o.filter(e=>!e.excludeFromGraph)).map(e=>({...e,systolic:e.systolic,diastolic:e.diastolic,pulse:e.heartRate||0,excluded:e.excludeFromGraph||!1}))},[e.processedBpRecordsForGraph]),v=c.useCallback((t,a)=>{const s=e.processedBodyCompositionForGraph,i=new Date,r=new Date(i);r.setDate(r.getDate()-t+1);const l=r.toISOString().split("T")[0],n=i.toISOString().split("T")[0],o=s.filter(e=>e.date>=l&&e.date<=n);return a?o:o.filter(e=>!e.excludeFromGraph)},[e.processedBodyCompositionForGraph]),D=c.useCallback((t,a)=>e.getDailyRecordStats(t,a),[e.getDailyRecordStats]);return{weightRecords:h,bpRecords:x,dailyRecords:f,goal:n,isLoading:d,hasError:u,error:u?"データの取得に失敗しました":null,errors:{weight:l.weight,daily:l.daily,bp:l.bp,global:l.global},latestDate:p,getDataInPeriod:b,getDailyStats:y,getFilteredData:j,getFilteredBpData:w,getFilteredBodyCompositionData:v,getStatusStats:D,loadAllData:o,refreshData:k}}(),M=c.useMemo(()=>{const e=x[y].days;if("weight"===v)return W(e||9999,j);if("bloodPressure"===v){return R(e||9999,j)}return $(e||9999,j)},[y,j,v]),I=c.useMemo(()=>S.calculateDayStartLines(M),[M]),G=c.useMemo(()=>{if(!M.length)return["auto","auto"];const e=M.map(e=>e.timestamp),t=Math.min(...e),a=Math.max(...e),s=new Date(t),i=new Date(a);return s.setHours(0,0,0,0),i.setHours(23,59,59,999),[s.getTime(),i.getTime()]},[M]),L=c.useMemo(()=>{if(0===y&&M.length)return S.calculateXAxisTicks(M)},[M,y]),K=e=>{const t=new Date(e),a=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0");return`${a}/${s}(${f[t.getDay()]}) ${i}:${r}`},z=c.useMemo(()=>"weight"===v?S.calculateWeightTrendLine(M):null,[M,v]),H=c.useMemo(()=>"bodyComposition"!==v?null:S.calculateBodyFatTrendLine(M),[M,v]),B=c.useMemo(()=>"bodyComposition"!==v?null:S.calculateWaistTrendLine(M),[M,v]),O=c.useMemo(()=>"bloodPressure"!==v?null:S.calculateSystolicTrendLine(M),[M,v]),P=c.useMemo(()=>"bloodPressure"!==v?null:S.calculateDiastolicTrendLine(M),[M,v]),E=t=>{const{x:a=0,y:s=0,payload:i}=t,r=i.value,l=new Date(r),n=f[l.getDay()];return e.jsx("g",{children:e.jsx("text",{x:a,y:s+10,textAnchor:"middle",fontSize:"12",children:`${l.getMonth()+1}/${l.getDate()}(${n})`})})};return N?e.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-4"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"データを読み込み中..."})]}):A?e.jsx("div",{className:"flex flex-col items-center justify-center py-8",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-w-md",children:[e.jsx("p",{className:"text-red-800 text-sm mb-2",children:"データの読み込みに失敗しました"}),e.jsx("p",{className:"text-red-600 text-xs",children:A})]})}):e.jsxs("div",{className:"flex flex-col items-center justify-start py-0 bg-transparent","data-testid":"record-graph",children:[e.jsx("div",{className:"w-full mx-auto bg-white dark:bg-gray-800 shadow flex justify-center items-center mb-2 py-1 px-2",children:p.map(t=>e.jsx("button",{className:`flex-1 rounded-lg border font-semibold transition mx-0.5 text-xs leading-none flex items-center justify-center\n              ${v===t.value?"border-blue-400 text-blue-500 shadow":"border-gray-300 text-gray-500 hover:border-blue-300 hover:text-blue-400"}\n            `,style:{height:"24px",minHeight:"24px",maxHeight:"24px",padding:"0"},onClick:()=>D(t.value),children:t.label},t.value))}),e.jsx("div",{className:"w-full mx-auto bg-white dark:bg-gray-800 shadow flex justify-center items-center mb-4 p-2",children:x.map((t,a)=>e.jsx("button",{className:`flex-1 rounded-lg border font-semibold transition mx-0.5 text-xs leading-none flex items-center justify-center\n              ${y===a?"border-orange-400 text-orange-500 shadow":"border-gray-300 text-gray-500 hover:border-orange-300 hover:text-orange-400"}\n            `,style:{height:"24px",minHeight:"24px",maxHeight:"24px",padding:"0"},onClick:()=>k(a),children:t.label},t.label))}),e.jsx("div",{className:"flex gap-4 items-center mb-2 flex-wrap justify-center",children:"weight"===v?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#f59e42",borderRadius:2,marginRight:6}}),"目標"]}),e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#22c55e",borderRadius:2,marginRight:6}}),"傾向"]})]}):"bloodPressure"===v?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#ef4444",borderRadius:2,marginRight:6}}),"収縮期"]}),e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#3b82f6",borderRadius:2,marginRight:6}}),"拡張期"]}),e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#22c55e",borderRadius:2,marginRight:6}}),"傾向"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#8b5cf6",borderRadius:2,marginRight:6}}),"体脂肪率"]}),e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#f59e0b",borderRadius:2,marginRight:6}}),"腹囲"]}),e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:2,background:"#8b5cf6",borderRadius:1,marginRight:6,borderStyle:"dashed",borderWidth:"1px 0",borderColor:"#8b5cf6"}}),"体脂肪傾向"]}),e.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[e.jsx("span",{style:{display:"inline-block",width:18,height:2,background:"#f59e0b",borderRadius:1,marginRight:6,borderStyle:"dashed",borderWidth:"1px 0",borderColor:"#f59e0b"}}),"腹囲傾向"]})]})}),e.jsxs("div",{className:"w-full h-[400px] bg-white dark:bg-gray-800 rounded-xl shadow p-1 relative",children:[("weight"===v||"bloodPressure"===v)&&e.jsxs("label",{className:"flex items-center absolute right-0 top-0 bg-white/80 dark:bg-gray-800/80 px-1 py-0 h-6 min-h-0 rounded-none leading-tight text-xs font-bold z-10 w-auto cursor-pointer select-none",children:[e.jsx("input",{type:"checkbox",className:"form-checkbox accent-blue-600 mr-1",checked:j,onChange:e=>w(e.target.checked)}),"除外値も表示"]}),e.jsx(t,{width:"100%",height:"100%",children:"bodyComposition"===v?e.jsxs(a,{data:M,margin:{top:20,right:30,left:0,bottom:20},children:[e.jsx(s,{stroke:"#eee",strokeDasharray:"5 5"}),e.jsx(i,{dataKey:"timestamp",type:"number",domain:G,tick:0===y?E:void 0,tickFormatter:0===y?void 0:K,ticks:L}),0===y&&I.map(t=>e.jsx(r,{x:t,stroke:"#888",strokeDasharray:"2 2",yAxisId:"left"},t)),e.jsx(l,{yAxisId:"left",domain:["auto","auto"]}),e.jsx(l,{yAxisId:"right",orientation:"right",domain:["auto","auto"]}),e.jsx(n,{content:({active:t,payload:a,label:s})=>{var i;if(!t||!a||!a.length)return null;const r=null==(i=a[0])?void 0:i.payload,l=null==r?void 0:r.timestamp,n=l?new Date(l):null;return e.jsxs("div",{style:{background:"#fff",border:"1px solid #ccc",padding:8,borderRadius:8},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:n?K(l):""}),a.map((t,a)=>e.jsxs("div",{style:{color:t.color,fontSize:14},children:["bodyFat"===t.dataKey?"体脂肪率: ":"腹囲: ","number"==typeof t.value?t.value.toFixed(1):t.value,"bodyFat"===t.dataKey?"%":"cm"]},a))]})}}),e.jsx(o,{yAxisId:"left",type:"monotone",dataKey:"bodyFat",stroke:"#8b5cf6",strokeWidth:3,dot:{fill:"#8b5cf6",stroke:"#fff",strokeWidth:1,r:4},activeDot:!1,connectNulls:!1},"bodyFat-line"),e.jsx(o,{yAxisId:"right",type:"monotone",dataKey:"waist",stroke:"#f59e0b",strokeWidth:3,dot:{fill:"#f59e0b",stroke:"#fff",strokeWidth:1,r:4},activeDot:!1,connectNulls:!1},"waist-line"),H&&e.jsx(o,{yAxisId:"left",type:"linear",data:H,dataKey:"bodyFatTrend",stroke:"#8b5cf6",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"bodyFat-trend"),B&&e.jsx(o,{yAxisId:"right",type:"linear",data:B,dataKey:"waistTrend",stroke:"#f59e0b",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"waist-trend"),e.jsx("text",{x:40,y:10,textAnchor:"start",fontSize:"12",fill:"#666",fontWeight:"bold",children:"(%)"}),e.jsx("text",{x:window.innerWidth-100,y:10,textAnchor:"end",fontSize:"12",fill:"#666",fontWeight:"bold",children:"(cm)"})]}):e.jsxs(d,{data:M,margin:{top:20,right:30,left:0,bottom:20},children:[e.jsx(s,{stroke:"#eee",strokeDasharray:"5 5"}),e.jsx(i,{dataKey:"timestamp",type:"number",domain:G,tick:0===y?E:void 0,tickFormatter:0===y?void 0:K,ticks:L}),0===y&&I.map(t=>e.jsx(r,{x:t,stroke:"#888",strokeDasharray:"2 2"},t)),"bodyComposition"===v?e.jsxs(e.Fragment,{children:[e.jsx(l,{yAxisId:"left",domain:["auto","auto"]}),e.jsx(l,{yAxisId:"right",orientation:"right",domain:["auto","auto"]}),e.jsx("text",{x:30,y:10,textAnchor:"start",fontSize:"12",fill:"#666",fontWeight:"bold",children:"(%)"}),e.jsx("text",{x:window.innerWidth-50,y:10,textAnchor:"end",fontSize:"12",fill:"#666",fontWeight:"bold",children:"(cm)"})]}):e.jsxs(e.Fragment,{children:[e.jsx(l,{domain:["auto","auto"]}),e.jsxs("text",{x:30,y:10,textAnchor:"start",fontSize:"12",fill:"#666",fontWeight:"bold",children:["(","weight"===v?"kg":"mmHg",")"]})]}),"weight"===v&&(()=>{if(!F)return null;const t="number"==typeof F.startWeight&&isFinite(F.startWeight),a="number"==typeof F.targetWeight&&isFinite(F.targetWeight),s="string"==typeof F.targetStart&&!isNaN(Date.parse(F.targetStart)),i="string"==typeof F.targetEnd&&!isNaN(Date.parse(F.targetEnd));if(!(t&&a&&s&&i))return null;const r=Date.parse(F.targetStart),l=F.startWeight,n=Date.parse(F.targetEnd),d=F.targetWeight;if(r>=n)return null;const[c,m]=G,g=Math.max(r,c),u=Math.min(n,m);if(g>u)return null;const h=e=>l+(d-l)*(e-r)/(n-r),x=[{timestamp:g,value:h(g)},{timestamp:u,value:h(u)}];return e.jsx(o,{type:"linear",data:x,dataKey:"value",stroke:"#f59e42",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"4 2",legendType:"none"},"weight-target")})(),e.jsx(n,{content:({active:t,payload:a,label:s})=>{var i;if(!t||!a||!a.length)return null;const r=null==(i=a[0])?void 0:i.payload,l=null==r?void 0:r.timestamp,n=l?new Date(l):null,o=n?`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}-${String(n.getDate()).padStart(2,"0")}`:"";return e.jsxs("div",{style:{background:"#fff",border:"1px solid #ccc",padding:8,borderRadius:8},children:[e.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:(()=>{var e;if(!a||!Array.isArray(a)||0===a.length)return"";const t=null==(e=a[0])?void 0:e.payload;if(!t||"object"!=typeof t||null===t||!("timestamp"in t))return"";const s=t.timestamp,i=new Date(s),r=String(i.getMonth()+1).padStart(2,"0"),l=String(i.getDate()).padStart(2,"0"),n=String(i.getHours()).padStart(2,"0"),o=String(i.getMinutes()).padStart(2,"0");return`${r}/${l}(${f[i.getDay()]}) ${n}:${o}`})()}),"bodyComposition"!==v&&(a??[]).filter(e=>e&&"#f59e42"!==e.color&&"#22c55e"!==e.color).map((t,a)=>e.jsxs("div",{style:{color:t.color,fontSize:14},children:["number"==typeof t.value?t.value.toFixed("weight"===v?2:0):t.value,"weight"===v?"kg":"mmHg"]},a)),e.jsx("div",{style:{marginTop:6,fontSize:13},children:[{key:"exercise",label:"🏃‍♂️"},{key:"meal",label:"🍽"},{key:"sleep",label:"🛌"}].map(({key:t,label:a})=>{const s=T.find(e=>e.fieldId===t&&e.date===o);return void 0===s?null:e.jsxs("span",{style:{marginRight:8,verticalAlign:"middle",fontSize:"1.1em",display:"inline-flex",alignItems:"center"},children:[a,1===s.value?e.jsx(u,{style:{color:"#38bdf8",fontSize:"1.3em",marginLeft:2,verticalAlign:"middle"}}):e.jsx(h,{style:{color:"#bbb",fontSize:"1.3em",marginLeft:2,verticalAlign:"middle"}})]},t)})})]})}}),"weight"===v?e.jsx(o,{type:"monotone",dataKey:"value",data:M,stroke:"#38bdf8",strokeWidth:3,dot:({cx:t,cy:a,payload:s,index:i})=>e.jsx("circle",{cx:t,cy:a,r:4,fill:s.excluded?"#f87171":"#38bdf8",stroke:"#fff",strokeWidth:1},`weight-dot-${(null==s?void 0:s.id)||i}`),activeDot:!1},"weight-line"):e.jsxs(e.Fragment,{children:[e.jsx(o,{type:"monotone",dataKey:"systolic",data:M,stroke:"#ef4444",strokeWidth:3,dot:({cx:t,cy:a,payload:s,index:i})=>e.jsx("circle",{cx:t,cy:a,r:4,fill:s.excluded?"#f87171":"#ef4444",stroke:"#fff",strokeWidth:1},`systolic-dot-${(null==s?void 0:s.id)||i}`),activeDot:!1},"systolic-line"),e.jsx(o,{type:"monotone",dataKey:"diastolic",data:M,stroke:"#3b82f6",strokeWidth:3,dot:({cx:t,cy:a,payload:s,index:i})=>e.jsx("circle",{cx:t,cy:a,r:4,fill:s.excluded?"#f87171":"#3b82f6",stroke:"#fff",strokeWidth:1},`diastolic-dot-${(null==s?void 0:s.id)||i}`),activeDot:!1},"diastolic-line"),O&&e.jsx(o,{type:"linear",data:O,dataKey:"systolicTrend",stroke:"#22c55e",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"systolic-trend"),P&&e.jsx(o,{type:"linear",data:P,dataKey:"diastolicTrend",stroke:"#22c55e",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"diastolic-trend")]}),"weight"===v&&z&&e.jsx(o,{type:"linear",data:z,dataKey:"weightTrend",stroke:"#22c55e",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"weight-trend")]})})]}),"weight"===v&&e.jsx("div",{className:"w-full flex flex-col items-start gap-1 mt-4 mb-2 text-left",children:["exercise","meal","sleep"].map(t=>{const a=C(t,x[y].days||9999);let s="";F&&("exercise"===t&&F.exerciseGoal&&(s=`${F.exerciseGoal}`),"meal"===t&&F.dietGoal&&(s=`${F.dietGoal}`),"sleep"===t&&F.sleepGoal&&(s=`${F.sleepGoal}`));const i=b[t]??"";return a?e.jsxs("div",{className:"flex items-baseline text-xs sm:text-base text-blue-700 dark:text-blue-200 font-semibold whitespace-nowrap",children:[e.jsx("span",{className:"inline-block min-w-[2em] text-center",children:i}),e.jsx("span",{className:"inline-block min-w-[7em]",children:a.total>0?`${a.rate.toFixed(0)}% (${a.achieved}/${a.total}日)`:"記録なし"}),s&&e.jsx("span",{className:"ml-0 text-gray-500 dark:text-gray-300 text-xs sm:text-sm font-normal",children:s})]},t):e.jsxs("div",{className:"flex items-baseline text-xs sm:text-base text-blue-700 dark:text-blue-200 font-semibold whitespace-nowrap",children:[e.jsx("span",{className:"inline-block min-w-[2em] text-center",children:i}),e.jsx("span",{className:"inline-block min-w-[7em]",children:"記録なし"}),s&&e.jsx("span",{className:"ml-0 text-gray-500 dark:text-gray-300 text-xs sm:text-sm font-normal",children:s})]},t)})})]})};export{y as default};
