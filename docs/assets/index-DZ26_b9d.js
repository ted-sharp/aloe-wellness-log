const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RecordExport-BKfb87q0.js","assets/ui-vendor-BuGzxEnB.js","assets/react-vendor-9hcqHTTy.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,r,a)=>((t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a)(t,"symbol"!=typeof r?r+"":r,a);import{j as r,r as a,F as n,u as o,a as s,b as i,c as l,d,o as c,f as u,s as h,R as m,C as f,e as g,X as p,g as b,Y as x,T as y,L as w,h as v}from"./ui-vendor-BuGzxEnB.js";import{e as k,a as D,r as N,g as j,d as S,f as M,h as E,N as C,u as T,L as O,B as _}from"./react-vendor-9hcqHTTy.js";import{G as R}from"./icons-vendor-BLJDdPqg.js";import{u as I,C as A,a as P,b as W,D as L,c as F,S as B,v as $,d as Y,P as z}from"./dnd-vendor-B-r8cpST.js";import{c as H}from"./state-vendor-CZRBIdKG.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var G,U={};var Z=function(){if(G)return U;G=1;var e=k();return U.createRoot=e.createRoot,U.hydrateRoot=e.hydrateRoot,U}();const V={},q=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),n=(null==r?void 0:r.nonce)||(null==r?void 0:r.getAttribute("nonce"));a=e(t.map(e=>{if((e=function(e){return"/aloe-wellness-log/"+e}(e))in V)return;V[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,n&&a.setAttribute("nonce",n),document.head.appendChild(a),t?new Promise((t,r)=>{a.addEventListener("load",t),a.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})},X=({className:e="",onInstall:t,onCancel:a,debug:n=!1})=>{const[o,s]=D.useState(null),[i,l]=D.useState(!1),[d,c]=D.useState(!1),[u,h]=D.useState(!1);D.useEffect(()=>{(()=>{const e=window.matchMedia("(display-mode: standalone)").matches,t=!0===navigator.standalone;(e||t)&&h(!0)})();const e=e=>{e.preventDefault(),s(e),l(!0)},r=()=>{h(!0),l(!1),s(null),null==t||t()};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",r),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",r)}},[t]);return n||u||!i?null:r.jsxs("button",{onClick:async()=>{if(o){c(!0);try{await o.prompt();const{outcome:e}=await o.userChoice;"dismissed"===e&&(null==a||a()),s(null),l(!1)}catch(e){}finally{c(!1)}}},disabled:d,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 ${e}`,"aria-label":"アプリをインストール",title:"アプリをインストール",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),d?"インストール中...":"アプリをインストール"]})};function K(e){return R({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M2 2h2v2H2z"},child:[]},{tag:"path",attr:{d:"M6 0v6H0V0zM5 1H1v4h4zM4 12H2v2h2z"},child:[]},{tag:"path",attr:{d:"M6 10v6H0v-6zm-5 1v4h4v-4zm11-9h2v2h-2z"},child:[]},{tag:"path",attr:{d:"M10 0v6h6V0zm5 1v4h-4V1zM8 1V0h1v2H8v2H7V1zm0 5V4h1v2zM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8zm0 0v1H2V8H1v1H0V7h3v1zm10 1h-1V7h1zm-1 0h-1v2h2v-1h-1zm-4 0h2v1h-1v1h-1zm2 3v-1h-1v1h-1v1H9v1h3v-2zm0 0h3v1h-2v1h-1zm-4-1v1h1v-2H7v1z"},child:[]},{tag:"path",attr:{d:"M7 12h1v3h4v1H7zm9 2v2h-3v-1h2v-1z"},child:[]}]})(e)}function Q(e){return R({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(e)}var J,ee,te,re,ae,ne,oe,se,ie,le,de,ce,ue,he,me,fe,ge,pe,be={};function xe(){return ee?J:(ee=1,J={L:1,M:0,Q:3,H:2})}function ye(){return re?te:(re=1,te={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8})}function we(){if(ce)return de;ce=1;for(var e={glog:function(t){if(t<1)throw new Error("glog("+t+")");return e.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},t=0;t<8;t++)e.EXP_TABLE[t]=1<<t;for(t=8;t<256;t++)e.EXP_TABLE[t]=e.EXP_TABLE[t-4]^e.EXP_TABLE[t-5]^e.EXP_TABLE[t-6]^e.EXP_TABLE[t-8];for(t=0;t<255;t++)e.LOG_TABLE[e.EXP_TABLE[t]]=t;return de=e}function ve(){if(he)return ue;he=1;var e=we();function t(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&0==e[r];)r++;this.num=new Array(e.length-r+t);for(var a=0;a<e.length-r;a++)this.num[a]=e[a+r]}return t.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(r){for(var a=new Array(this.getLength()+r.getLength()-1),n=0;n<this.getLength();n++)for(var o=0;o<r.getLength();o++)a[n+o]^=e.gexp(e.glog(this.get(n))+e.glog(r.get(o)));return new t(a,0)},mod:function(r){if(this.getLength()-r.getLength()<0)return this;for(var a=e.glog(this.get(0))-e.glog(r.get(0)),n=new Array(this.getLength()),o=0;o<this.getLength();o++)n[o]=this.get(o);for(o=0;o<r.getLength();o++)n[o]^=e.gexp(e.glog(r.get(o))+a);return new t(n,0).mod(r)}},ue=t}function ke(){if(pe)return ge;pe=1;var e=function(){if(ne)return ae;ne=1;var e=ye();function t(t){this.mode=e.MODE_8BIT_BYTE,this.data=t}return t.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},ae=t}(),t=function(){if(se)return oe;se=1;var e=xe();function t(e,t){this.totalCount=e,this.dataCount=t}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(e,r){var a=t.getRsBlockTable(e,r);if(null==a)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+r);for(var n=a.length/3,o=new Array,s=0;s<n;s++)for(var i=a[3*s+0],l=a[3*s+1],d=a[3*s+2],c=0;c<i;c++)o.push(new t(l,d));return o},t.getRsBlockTable=function(r,a){switch(a){case e.L:return t.RS_BLOCK_TABLE[4*(r-1)+0];case e.M:return t.RS_BLOCK_TABLE[4*(r-1)+1];case e.Q:return t.RS_BLOCK_TABLE[4*(r-1)+2];case e.H:return t.RS_BLOCK_TABLE[4*(r-1)+3];default:return}},oe=t}(),r=function(){if(le)return ie;function e(){this.buffer=new Array,this.length=0}return le=1,e.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},ie=e}(),a=function(){if(fe)return me;fe=1;var e=ye(),t=ve(),r=we(),a=0,n=1,o=2,s=3,i=4,l=5,d=6,c=7,u={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;u.getBCHDigit(t)-u.getBCHDigit(u.G15)>=0;)t^=u.G15<<u.getBCHDigit(t)-u.getBCHDigit(u.G15);return(e<<10|t)^u.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;u.getBCHDigit(t)-u.getBCHDigit(u.G18)>=0;)t^=u.G18<<u.getBCHDigit(t)-u.getBCHDigit(u.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return u.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case a:return(t+r)%2==0;case n:return t%2==0;case o:return r%3==0;case s:return(t+r)%3==0;case i:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case l:return t*r%2+t*r%3==0;case d:return(t*r%2+t*r%3)%2==0;case c:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var a=new t([1],0),n=0;n<e;n++)a=a.multiply(new t([1,r.gexp(n)],0));return a},getLengthInBits:function(t,r){if(1<=r&&r<10)switch(t){case e.MODE_NUMBER:return 10;case e.MODE_ALPHA_NUM:return 9;case e.MODE_8BIT_BYTE:case e.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(r<27)switch(t){case e.MODE_NUMBER:return 12;case e.MODE_ALPHA_NUM:return 11;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(r<41))throw new Error("type:"+r);switch(t){case e.MODE_NUMBER:return 14;case e.MODE_ALPHA_NUM:return 13;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,a=0;a<t;a++)for(var n=0;n<t;n++){for(var o=0,s=e.isDark(a,n),i=-1;i<=1;i++)if(!(a+i<0||t<=a+i))for(var l=-1;l<=1;l++)n+l<0||t<=n+l||0==i&&0==l||s==e.isDark(a+i,n+l)&&o++;o>5&&(r+=3+o-5)}for(a=0;a<t-1;a++)for(n=0;n<t-1;n++){var d=0;e.isDark(a,n)&&d++,e.isDark(a+1,n)&&d++,e.isDark(a,n+1)&&d++,e.isDark(a+1,n+1)&&d++,0!=d&&4!=d||(r+=3)}for(a=0;a<t;a++)for(n=0;n<t-6;n++)e.isDark(a,n)&&!e.isDark(a,n+1)&&e.isDark(a,n+2)&&e.isDark(a,n+3)&&e.isDark(a,n+4)&&!e.isDark(a,n+5)&&e.isDark(a,n+6)&&(r+=40);for(n=0;n<t;n++)for(a=0;a<t-6;a++)e.isDark(a,n)&&!e.isDark(a+1,n)&&e.isDark(a+2,n)&&e.isDark(a+3,n)&&e.isDark(a+4,n)&&!e.isDark(a+5,n)&&e.isDark(a+6,n)&&(r+=40);var c=0;for(n=0;n<t;n++)for(a=0;a<t;a++)e.isDark(a,n)&&c++;return r+Math.abs(100*c/t/t-50)/5*10}};return me=u}(),n=ve();function o(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var s=o.prototype;return s.addData=function(t){var r=new e(t);this.dataList.push(r),this.dataCache=null},s.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},s.getModuleCount=function(){return this.moduleCount},s.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var n=t.getRSBlocks(e,this.errorCorrectLevel),o=new r,s=0,i=0;i<n.length;i++)s+=n[i].dataCount;for(i=0;i<this.dataList.length;i++){var l=this.dataList[i];o.put(l.mode,4),o.put(l.getLength(),a.getLengthInBits(l.mode,e)),l.write(o)}if(o.getLengthInBits()<=8*s)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},s.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[r][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},s.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(this.modules[e+r][t+a]=0<=r&&r<=6&&(0==a||6==a)||0<=a&&a<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=a&&a<=4)},s.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var n=a.getLostPoint(this);(0==r||e>n)&&(e=n,t=r)}return t},s.createMovieClip=function(e,t,r){var a=e.createEmptyMovieClip(t,r);this.make();for(var n=0;n<this.modules.length;n++)for(var o=1*n,s=0;s<this.modules[n].length;s++){var i=1*s;this.modules[n][s]&&(a.beginFill(0,100),a.moveTo(i,o),a.lineTo(i+1,o),a.lineTo(i+1,o+1),a.lineTo(i,o+1),a.endFill())}return a},s.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},s.setupPositionAdjustPattern=function(){for(var e=a.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var n=e[t],o=e[r];if(null==this.modules[n][o])for(var s=-2;s<=2;s++)for(var i=-2;i<=2;i++)this.modules[n+s][o+i]=-2==s||2==s||-2==i||2==i||0==s&&0==i}},s.setupTypeNumber=function(e){for(var t=a.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var n=!e&&1==(t>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=n}for(r=0;r<18;r++){n=!e&&1==(t>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=n}},s.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,n=a.getBCHTypeInfo(r),o=0;o<15;o++){var s=!e&&1==(n>>o&1);o<6?this.modules[o][8]=s:o<8?this.modules[o+1][8]=s:this.modules[this.moduleCount-15+o][8]=s}for(o=0;o<15;o++){s=!e&&1==(n>>o&1);o<8?this.modules[8][this.moduleCount-o-1]=s:o<9?this.modules[8][15-o-1+1]=s:this.modules[8][15-o-1]=s}this.modules[this.moduleCount-8][8]=!e},s.mapData=function(e,t){for(var r=-1,n=this.moduleCount-1,o=7,s=0,i=this.moduleCount-1;i>0;i-=2)for(6==i&&i--;;){for(var l=0;l<2;l++)if(null==this.modules[n][i-l]){var d=!1;s<e.length&&(d=1==(e[s]>>>o&1)),a.getMask(t,n,i-l)&&(d=!d),this.modules[n][i-l]=d,-1==--o&&(s++,o=7)}if((n+=r)<0||this.moduleCount<=n){n-=r,r=-r;break}}},o.PAD0=236,o.PAD1=17,o.createData=function(e,n,s){for(var i=t.getRSBlocks(e,n),l=new r,d=0;d<s.length;d++){var c=s[d];l.put(c.mode,4),l.put(c.getLength(),a.getLengthInBits(c.mode,e)),c.write(l)}var u=0;for(d=0;d<i.length;d++)u+=i[d].dataCount;if(l.getLengthInBits()>8*u)throw new Error("code length overflow. ("+l.getLengthInBits()+">"+8*u+")");for(l.getLengthInBits()+4<=8*u&&l.put(0,4);l.getLengthInBits()%8!=0;)l.putBit(!1);for(;!(l.getLengthInBits()>=8*u||(l.put(o.PAD0,8),l.getLengthInBits()>=8*u));)l.put(o.PAD1,8);return o.createBytes(l,i)},o.createBytes=function(e,t){for(var r=0,o=0,s=0,i=new Array(t.length),l=new Array(t.length),d=0;d<t.length;d++){var c=t[d].dataCount,u=t[d].totalCount-c;o=Math.max(o,c),s=Math.max(s,u),i[d]=new Array(c);for(var h=0;h<i[d].length;h++)i[d][h]=255&e.buffer[h+r];r+=c;var m=a.getErrorCorrectPolynomial(u),f=new n(i[d],m.getLength()-1).mod(m);l[d]=new Array(m.getLength()-1);for(h=0;h<l[d].length;h++){var g=h+f.getLength()-l[d].length;l[d][h]=g>=0?f.get(g):0}}var p=0;for(h=0;h<t.length;h++)p+=t[h].totalCount;var b=new Array(p),x=0;for(h=0;h<o;h++)for(d=0;d<t.length;d++)h<i[d].length&&(b[x++]=i[d][h]);for(h=0;h<s;h++)for(d=0;d<t.length;d++)h<l[d].length&&(b[x++]=l[d][h]);return b},ge=o}var De,Ne,je={};function Se(){if(De)return je;De=1,Object.defineProperty(je,"__esModule",{value:!0});var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},t=o(a()),r=N(),n=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var s={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},i=(0,r.forwardRef)(function(t,r){var a=t.bgColor,o=t.bgD,s=t.fgD,i=t.fgColor,l=t.size,d=t.title,c=t.viewBoxSize,u=t.xmlns,h=void 0===u?"http://www.w3.org/2000/svg":u,m=function(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return n.default.createElement("svg",e({},m,{height:l,ref:r,viewBox:"0 0 "+c+" "+c,width:l,xmlns:h}),d?n.default.createElement("title",null,d):null,n.default.createElement("path",{d:o,fill:a}),n.default.createElement("path",{d:s,fill:i}))});return i.displayName="QRCodeSvg",i.propTypes=s,je.default=i,je}const Me=j(function(){if(Ne)return be;Ne=1,Object.defineProperty(be,"__esModule",{value:!0}),be.QRCode=void 0;var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},t=l(a()),r=l(xe()),n=l(ke()),o=N(),s=l(o),i=l(Se());function l(e){return e&&e.__esModule?e:{default:e}}var d={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},c=(0,o.forwardRef)(function(t,a){var o=t.bgColor,l=void 0===o?"#FFFFFF":o,d=t.fgColor,c=void 0===d?"#000000":d,u=t.level,h=void 0===u?"L":u,m=t.size,f=void 0===m?256:m,g=t.value,p=function(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}(t,["bgColor","fgColor","level","size","value"]),b=new n.default(-1,r.default[h]);b.addData(g),b.make();var x=b.modules;return s.default.createElement(i.default,e({},p,{bgColor:l,bgD:x.map(function(e,t){return e.map(function(e,r){return e?"":"M "+r+" "+t+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:c,fgD:x.map(function(e,t){return e.map(function(e,r){return e?"M "+r+" "+t+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:a,size:f,viewBoxSize:x.length}))});return be.QRCode=c,c.displayName="QRCode",c.propTypes=d,be.default=c,be}()),Ee=({url:e="https://ted-sharp.github.io/aloe-wellness-log/",className:t=""})=>{const[a,n]=D.useState(!1),o=()=>n(!1);return r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>n(!0),className:`inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:ring-offset-2 transition-colors ${t}`,title:"QRコードを表示",children:[r.jsx(K,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"QRコード"})]}),a&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm",style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 m-4 max-w-sm w-full shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"QRコードを表示"}),r.jsx("button",{onClick:o,className:"bg-gray-200/80 dark:bg-gray-700/70 text-gray-400 dark:text-gray-300 hover:bg-gray-300/90 dark:hover:bg-gray-600/80 transition-colors rounded-full p-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800","aria-label":"閉じる",children:r.jsx(Q,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow-inner border border-gray-200 dark:border-gray-600",children:r.jsx(Me,{value:e,size:200,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:"QRコードをスキャン"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 break-all",children:e})]}),r.jsx("button",{onClick:()=>{navigator.clipboard.writeText(e);const t=document.activeElement,r=t.textContent;t.textContent="コピーしました！",setTimeout(()=>{t.textContent=r},2e3)},className:"px-4 py-2 text-sm font-medium text-emerald-700 dark:text-emerald-300 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-700 rounded-md hover:bg-emerald-100 dark:hover:bg-emerald-900/30 focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:ring-offset-2 transition-colors",children:"URLをコピー"})]}),r.jsx("button",{onClick:o,className:"w-full mt-4 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:focus:ring-gray-400 focus:ring-offset-2 transition-colors",children:"閉じる"})]})})]})},Ce=({open:e,onClose:t,tipText:a})=>{const[n,o]=D.useState(!1);D.useEffect(()=>{o("1"===localStorage.getItem("disableTips"))},[e]);return e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-2 sm:px-0 backdrop-blur-sm",style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},onClick:t,children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 max-w-md w-full flex flex-col items-center",onClick:e=>e.stopPropagation(),children:[r.jsx("h2",{className:"text-xl font-bold mb-3 text-gray-800 dark:text-white",children:"本日のTIPS"}),r.jsx("div",{className:"text-gray-700 dark:text-gray-200 mb-6 text-left whitespace-pre-line",children:a}),r.jsxs("div",{className:"flex items-center mt-2",children:[r.jsx("input",{id:"modal-disable-tips-checkbox",type:"checkbox",className:"mr-2 w-5 h-5 accent-purple-600",checked:n,onChange:e=>{const t=e.target.checked;o(t),localStorage.setItem("disableTips",t?"1":"0")}}),r.jsx("label",{htmlFor:"modal-disable-tips-checkbox",className:"text-sm text-gray-800 dark:text-gray-200 select-none cursor-pointer",children:"今後TIPSを自動表示しない"})]})]})}):null},Te=["夕食は寝る3時間前までに済ませましょう。 遅い時間の食事は空腹感を強め、消費カロリーを減らし、脂肪の蓄積を促す可能性があります。寝る直前の食事を避けることで、体脂肪の増加リスクを下げる効果が期待できます。","砂糖入り飲料は控えて水やお茶に置き換えましょう。 清涼飲料水やジュースなど甘い飲み物の摂取は体重増加や肥満と強く関連しており、日常的に水を飲む人は総摂取カロリーが約9%少ないとの報告があります。水や無糖のお茶で水分補給する習慣がダイエットに役立ちます。","食事の30分前にコップ1杯の水を飲みましょう。 食前に水を500ml程度飲むと満腹感が高まり、同じ食事制限でもより体重が減少しやすいことが研究で示されています。食事前の水分摂取は食べ過ぎ防止に効果的です。","食物繊維をたっぷり摂取しましょう。 野菜、果物、全粒穀物、豆類などに多く含まれる食物繊維は満腹感を持続させ、総カロリー摂取を抑える効果があります。食物繊維の摂取量が多い人ほど減量中の体重減少幅が大きく、ダイエットの継続率も高いと報告されています。","毎食にタンパク質を含めましょう。 肉・魚・卵・大豆製品・乳製品など良質なたんぱく質は、満腹ホルモンの分泌を促し、筋肉量を維持するのに役立ちます。高タンパク食は脂肪を減らしつつ筋肉の減少を抑えることで代謝低下を防ぎ、減量やリバウンド防止に有効とされています。","極端な食事抜きは避け、朝食を含め規則正しく食べましょう。 朝食を抜く習慣は肥満や生活習慣病のリスク増加と関連しており、朝食を全く食べない人は肥満になるリスクが高いとのメタ分析結果があります。一日3食バランスよく摂ることで過度な空腹を防ぎ、ドカ食いの予防につながります。","ゆっくり、よく噛んで食べましょう。 食事に20分以上かけてゆっくり噛むことで満腹シグナルが脳に伝わりやすくなり、結果として食事量を減らせます。実際に早食いの人はゆっくり食べる人より肥満になりやすい傾向があり、よく噛むことで摂取カロリーが約10～15%減少したとの研究もあります","「ながら食べ」をやめ、食事に集中しましょう。 テレビを見たりスマホを操作しながらの食事は、自分がどれだけ食べているか気づきにくくなり、食べ過ぎにつながります。研究でも、食事中のテレビ視聴はその後の食事での余分なカロリー摂取を増やすことが報告されています。","野菜やスープから先に手をつけましょう。 食事の最初にサラダや野菜スープなど低カロリー食品を摂ると、早い段階で満腹感が得られて食べ過ぎを防ぎやすくなります。ボリュームのある野菜から食べ始めることで、後に続く主菜や高カロリー食品の摂取量を自然に減らす効果が期待できます。","高カロリー食品は小皿に取り分けて食べましょう。 大きなお皿や袋から直接食べると適量を超えて摂取しがちです。小さい器に盛り付けることで見た目の満足感が得られ、実際に提供量を減らすと1日の総摂取カロリーが平均235kcal減少したという報告もあります。お菓子も小分け包装のものを選ぶなど工夫しましょう。","外食はメニュー選びと食べ方に工夫をしましょう。 外食時には揚げ物よりも焼き物・蒸し物を選ぶ、ソースやドレッシングは別添えにして必要な分だけ使う、主菜の一部を残すか持ち帰るなどの工夫でカロリーを大幅に減らせます。外食の頻度そのものも適度に抑えると、総摂取カロリー管理に役立ちます。","甘い物や好物も計画的に少量楽しみましょう。 大好きなスイーツなどを完全に我慢し続けるとストレスが溜まり暴食につながることがあります。例えば「週末に一度だけ少し食べる」などルールを決め、少量を味わって満足することで、長期的に見るとダイエットの継続に寄与します。","アルコールの摂取量に気をつけましょう。 アルコール飲料はカロリーが高いうえ食欲を刺激しがちです。飲む場合も頻度や量を控えめにし、糖分の多いカクテルより蒸留酒のソーダ割りや辛口ワインなど比較的低カロリーな選択をするといった工夫を心がけてください。","栄養密度の高い食品を選びましょう。 同じカロリーなら、ビタミン・ミネラルや食物繊維を多く含む食品（例えばポテトチップではなく果物やナッツ類）を選ぶことで、身体に必要な栄養を摂取しつつ満足感を得られます。栄養バランスの良い食事は空腹感を和らげ、間食の欲求を減らす効果があります。","加工度の低い「ホールフード」を中心に摂りましょう。 ケーキやスナック菓子、ファストフードなどの超加工食品ばかりの食事では、知らず知らずのうちにカロリー過多になり体重増加を招きやすいです。一方、未加工またはシンプルに調理した食品中心の食事に切り替えると自然と摂取カロリーが減り、体重減少につながることが示されています。食品選択の際は原材料のシンプルなものを優先しましょう。","中等度の有酸素運動を週150分以上目指しましょう。 ウォーキングや軽いジョギング、サイクリングなどの有酸素運動は、消費エネルギーを増やすだけでなく食欲や血糖コントロールの改善にも役立ちます。定期的な運動習慣を身につけることが長期的な体重管理成功の最良の予測因子の一つであることが知られています。","筋力トレーニングを週2～3回取り入れましょう。 抵抗運動（ウェイトトレーニングなど）は筋肉量の維持・増加に役立ち、基礎代謝の低下を防ぎます。減量中に筋トレを組み合わせると筋肉の減少が抑えられ、脂肪だけを効率的に減らすことにつながります。また筋力が向上し、引き締まった体づくりにも有効です。","日常生活でこまめに身体を動かす工夫をしましょう。 エレベーターではなく階段を使う、バス停や駅では一つ手前で降りて歩く、家事や掃除で体を動かすなど、日常の中で非運動性熱産生（NEAT）を増やすことが大切です。小さな積み重ねでも1日の消費カロリーを底上げし、脂肪が蓄積しにくい体質づくりに役立ちます。","長時間座りっぱなしを避けましょう。 デスクワークなどで何時間も座ったままでいるとエネルギー消費が低下しがちです。1時間に一度は立ち上がってストレッチをしたり数分歩いたりして、血行や代謝をリセットしましょう。こまめに姿勢を変える習慣が、体重増加の予防に繋がります。","自分が楽しめる運動を見つけましょう。 ランニングが苦手ならダンスや水泳、サイクリングなど他の有酸素運動を、ジム通いが続かないなら自宅でできるエクササイズや動画プログラムを試すなど、好きになれる身体活動を探してみてください。楽しいと感じる運動は習慣化しやすく、消費カロリーの継続的な増加に寄与します。","「ながら運動」で日常に活動量をプラスしましょう。 テレビを見ながらストレッチをする、電話しながら足踏みする、通勤時に一駅分歩くなど、日常生活の中に運動を組み込む工夫をします。忙しい人でも小さな運動を積み重ねることで、一日の総消費エネルギーを増やすことができます。","運動の頻度・強度は徐々に高めましょう。 運動習慣のない人がいきなりハードな運動を始めるとケガや挫折の原因になります。最初は軽い運動から始め、慣れてきたら少しずつ時間や強度を上げていきましょう。例えば最初は1回15分のウォーキングから開始し、徐々に30分に延ばすなど段階的に負荷を上げると安全かつ効果的です。","日々の歩数を記録し、目標設定しましょう。 スマホのアプリや万歩計を使って自分の平均歩数を把握し、少し高い目標歩数（例：プラス1000歩/日）を設定します。歩数目標を意識することで通勤や買い物で歩く機会を増やせて、結果的に消費カロリーアップに繋がります。","達成可能な減量目標を立てましょう。最初の目標は現在体重の5～10%減を目安にし、ペースは1週間あたり0.5～1kg減量程度が適切です。急激に体重を減らそうとすると筋肉まで落ちたりリバウンドしやすくなります。無理のない目標設定が長続きのコツです。","体重は定期的に測定しましょう。毎日または少なくとも週1回は同じ条件で体重を測り、記録します。頻繁な自己計測によって体重の変化に早く気づきやすくなり、週1回以上体重測定する人はそうでない人に比べ体重管理が良好であることが示されています。増加傾向にいち早く対処できるため、リバウンド防止にも有用です。","食事内容や活動量を記録する習慣をつけましょう。手書きの食事日記やスマホアプリで、毎日の食事・間食・運動を記録します。自分の行動を「見える化」する自己モニタリングは行動変容の中心的手法であり、記録を付ける人は付けない人より一貫して減量効果が高いことが報告されています。書き出すことで思わぬ過食に気づきやすくなり、改善に役立ちます。","十分な睡眠時間を確保しましょう。大人は1日7～9時間の睡眠が推奨されており、慢性的な睡眠不足は食欲ホルモンのバランスを崩し過食を招きやすくなります。実際、睡眠時間の短い人ほど太りやすい傾向があり、逆に適切な睡眠は減量中の空腹感を和らげ体重管理を助けます。毎晩規則的な睡眠リズムを心がけてください。","ストレスを上手に発散しましょう。慢性的なストレスはコルチゾールというホルモンの分泌を増やし、食欲増進や脂肪蓄積を招くことが分かっています。ストレスを感じたときは深呼吸やストレッチ、散歩、趣味の時間を持つなど食べ物以外の方法で発散する工夫をしましょう。ストレス解消はメンタルヘルスだけでなくダイエット成功にも重要です。","周囲のサポートを活用しましょう。家族や友人にダイエット宣言をして協力してもらったり、一緒に運動する仲間を見つけたりすると継続しやすくなります。社会的サポートは減量の成功率を高める強力な要因です。恥ずかしがらず周囲に目標を共有し、励まし合える環境を整えましょう。","「完璧主義」より「継続」を目指しましょう。時には計画通りにいかない日があっても落ち込みすぎず、すぐ気持ちを切り替えて軌道修正することが大切です。減量の過程では停滞期や体重の小さな増減は誰にでも起こります。一度の挫折で投げ出さず、長い目で良い習慣を積み重ねることが成功への近道です。","食べる以外の「ストレス解消法」を持ちましょう。悩んだり退屈したりしたときにお菓子に手が伸びてしまう人は、代わりにできる行動（音楽を聴く、日記を書く、短い散歩をする、人に話す等）をあらかじめ用意しておきます。ストレスによるやけ食いを防ぐには、食以外のコーピング手段を持つことが有効です。","空腹のサインに耳を傾けましょう。お腹が空いているときだけ食べ、満腹感を得たら残りは保存する習慣をつけます。「まだ食べられるけど満腹ではない（腹八分目）」段階で箸を置くよう意識することで、総摂取カロリーを減らすことができます。自分の身体の空腹・満腹信号を尊重することが大切です。","食事は決まった場所・環境でとりましょう。例えば「仕事中はデスクで食べず、ダイニングテーブルで食べる」「歩きながら物を食べない」などルールを決めます。食べることに集中できる環境を整えると満足感が高まり、知らぬ間の過剰摂取を防げます。","ご褒美は食べ物以外で設定しましょう。減量目標の達成や運動継続のご褒美に、服や本、マッサージなど自分の好きな非食物報酬を与えるとモチベーション維持に効果的です。「○kg減ったら新しい靴を買う」など具体的なご褒美プランを立てておくと、日々の努力の励みになります。","環境を整えて「つい食べ」を防ぎましょう。家ではお菓子やジャンクフードをテーブルの上など見える場所に置かないようにし、代わりにフルーツやナッツを置いておくといった工夫をします。人は目に付く食べ物につられて食べがちなので、視界に入るものをヘルシーな食品に変えることで自然と摂取カロリーを減らせます。","買い物は満腹時に計画的に行いましょう。空腹の状態でスーパーに行くと高カロリーのお菓子や出来合い食品を衝動買いしやすくなります。事前に購入リストを作り、食後に買い物に行くようにすることで不要な高カロリー食品の購入を減らせます。健康的な食材を常備しやすくなり、結果的にダイエットの助けとなります。","減量方法は「続けられるか」で判断しましょう。特定の食品だけに頼るダイエットや極端な短期集中減量法はリスクが高く、減った体重を維持できる人はごくわずか（1～3%程度）であるとされています。「明日も明後日も続けられる習慣か？」を基準に取り入れる方法を選びましょう。ダイエットは一過性の努力ではなく、生活習慣の改善として捉えることが成功の秘訣です。","停滞期も想定しておきましょう。減量を続けていると、ある程度体重が減ったところで体重がなかなか動かなくなる停滞期が訪れることがあります。これは身体が新しい状態に慣れ適応しているサインです。停滞期に入っても焦らず、今までの良い習慣を継続してください。必要に応じて食事内容や運動強度を見直しつつ、身体の変化を根気強く待ちましょう。","減量後も健康的な習慣を続けましょう。目標体重に到達した後こそ、リバウンド防止の正念場です。達成したからといって元の生活に戻すのではなく、取り入れた良い習慣（例えば定期的な運動や野菜中心の食事、体重測定など）はそのまま維持しましょう。減量期と維持期ではアプローチを多少調整しつつも、「習慣自体は一生続ける」つもりでいることが大切です。","ポジティブ思考を持ちましょう。体重の数値や見た目の変化ばかりにとらわれず、健康的な行動ができた自分を褒める習慣を持ってください。階段を上っただけでも「よくやった」と自分に声をかけ、小さな成功体験の積み重ねを意識します。前向きなマインドはストレスを減らし、長期的な減量の成功率を高めます。","食事時間を規則正しく保ちましょう。体内時計（概日リズム）に合わせて毎日同じ時間帯に食事をとることで、代謝が最適化されます。実際に不規則な食事時間の人は規則正しい人と比較して肥満リスクが約2.3倍高く、インスリン抵抗性も悪化しやすいことが日本の大規模疫学研究で明らかになっています。特に夜遅い時間（午後9時以降）の食事は体重増加と強く関連するため、可能な限り夕食は早めの時間帯に済ませることが重要です。","週に150-300分の中強度有酸素運動に加え、週2回以上の筋力トレーニングを組み合わせましょう。WHO（世界保健機関）が推奨するこの運動量を満たしている人は、座りがちな生活をしている人と比較して死亡リスクが28-35%低く、心血管疾患リスクも大幅に減少することが100万人以上を対象とした大規模メタ解析で確認されています。有酸素運動と筋力トレーニングの組み合わせは、それぞれ単独で行うより体重減少効果が約40%高いとの報告もあります。","オメガ3脂肪酸を積極的に摂取しましょう。青魚（サバ、イワシ、サケなど）を週2回以上食べる人は、ほとんど食べない人と比較して内臓脂肪面積が平均で約15%少ないことが日本人を対象とした研究で示されています。EPAやDHAなどのオメガ3脂肪酸は炎症を抑制し、脂肪細胞の代謝を改善する作用があります。魚が苦手な場合は亜麻仁油やえごま油、くるみなどの植物性オメガ3も効果的です。","食物繊維を1日25-35g以上摂取しましょう。食物繊維摂取量が10g増加するごとに体重が平均1.9kg減少し、ウエスト周囲径も1.2cm減少することが6ヶ月間の介入試験で確認されています。また、食物繊維豊富な食事は腸内の短鎖脂肪酸産生を促進し、食欲抑制ホルモンGLP-1の分泌を増加させます。野菜、果物、全粒穀物、豆類から多様な食物繊維を摂取することで、満腹感の持続と体重管理の両方に効果を発揮します。","食事の記録をつけましょう。スマートフォンアプリや日記で食事内容を記録する人は、記録しない人と比較して6ヶ月間で平均2.3倍多く体重が減少することが、1,685名を対象とした大規模研究で明らかになっています。食事記録は自分の食行動を客観視する「セルフモニタリング」効果があり、無意識の間食や食べ過ぎに気づきやすくなります。写真を撮るだけでも効果があるため、手軽な方法から始めてみましょう。","良質な睡眠のために就寝前2時間はブルーライトを避けましょう。スマートフォンやパソコンの画面から発せられるブルーライトは、睡眠ホルモンであるメラトニンの分泌を約23%抑制し、睡眠の質を低下させます。睡眠不足は食欲ホルモン（グレリン、レプチン）のバランスを崩し、体重増加リスクを約30%高めることが複数の研究で示されています。就寝2時間前からはデジタルデバイスの使用を控え、読書や軽いストレッチなどでリラックスタイムを過ごしましょう。","立位での活動時間を増やしましょう。1日の立位時間を3時間延長することで、年間約144kcal（体重約0.7kg相当）の追加消費が可能であることが代謝測定研究で確認されています。また、座位時間が1日10時間を超えると、それ以下の人と比較して内臓脂肪蓄積リスクが約40%増加します。デスクワーク中も1時間ごとに3-5分立つ、電話は立って取る、階段を積極的に使うなどの工夫で、日常的なエネルギー消費を底上げできます。","間食は計画的に摂りましょう。間食を完全に我慢するより、1日の総摂取カロリーの10-15%以内（約150-200kcal）で計画的に摂取する方が、長期的な体重管理に成功しやすいことが行動変容研究で示されています。ナッツ類15-20g、ヨーグルト100g、果物1個程度が適量の目安です。間食により空腹感をコントロールすることで、主食での過食を防ぎ、1日の総摂取カロリーを安定させることができます。","ソーシャルサポートを活用しましょう。家族や友人と一緒に健康的な生活習慣に取り組む人は、一人で取り組む人と比較して6ヶ月後の体重減少量が平均で2.7kg多いことが、複数のランダム化比較試験のメタ解析で確認されています。また、オンラインコミュニティへの参加も同様の効果があります。目標を共有し、進捗を報告し合い、励まし合える環境を作ることで、モチベーション維持と習慣継続の成功率が大幅に向上します。"];function Oe(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"},child:[]}]})(e)}function _e(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.47 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06l-3.22-3.22V16.5a.75.75 0 0 1-1.5 0V4.81L8.03 8.03a.75.75 0 0 1-1.06-1.06l4.5-4.5ZM3 15.75a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"},child:[]}]})(e)}function Re(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"},child:[]}]})(e)}function Ie(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"},child:[]}]})(e)}function Ae(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"},child:[]}]})(e)}function Pe(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"},child:[]}]})(e)}function We(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625Z"},child:[]},{tag:"path",attr:{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"},child:[]}]})(e)}function Le(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"},child:[]}]})(e)}function Fe(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM22.676 12.553a11.249 11.249 0 0 1-2.631 4.31l-3.099-3.099a5.25 5.25 0 0 0-6.71-6.71L7.759 4.577a11.217 11.217 0 0 1 4.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113Z"},child:[]},{tag:"path",attr:{d:"M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0 1 15.75 12ZM12.53 15.713l-4.243-4.244a3.75 3.75 0 0 0 4.244 4.243Z"},child:[]},{tag:"path",attr:{d:"M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 0 0-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 0 1 6.75 12Z"},child:[]}]})(e)}function Be(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"},child:[]}]})(e)}function $e(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"},child:[]}]})(e)}function Ye(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"},child:[]}]})(e)}function ze(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"m6.72 5.66 11.62 11.62A8.25 8.25 0 0 0 6.72 5.66Zm10.56 12.68L5.66 6.72a8.25 8.25 0 0 0 11.62 11.62ZM5.105 5.106c3.807-3.808 9.98-3.808 13.788 0 3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788Z",clipRule:"evenodd"},child:[]}]})(e)}function He(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"},child:[]}]})(e)}function Ge(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"},child:[]}]})(e)}function Ue(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z",clipRule:"evenodd"},child:[]}]})(e)}function Ze(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"},child:[]}]})(e)}function Ve(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"},child:[]}]})(e)}function qe(e){return R({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"},child:[]}]})(e)}function Xe(e){return R({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M232,208a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V48a8,8,0,0,1,16,0V60.69l56,56,26.34-26.35a8,8,0,0,1,11.32,0L192,148.69V128a8,8,0,0,1,16,0v40a7,7,0,0,1,0,.8c0,.11,0,.21-.05.32s0,.3-.07.46a2.83,2.83,0,0,1-.09.37c0,.13-.06.26-.1.39s-.08.23-.12.35l-.14.39-.15.31c-.06.13-.12.27-.19.4s-.11.18-.16.28l-.24.39-.21.28-.26.35c-.11.14-.24.27-.36.4l-.16.18-.17.15a4.83,4.83,0,0,1-.42.37,3.92,3.92,0,0,1-.32.25l-.3.22-.38.23a2.91,2.91,0,0,1-.3.17l-.37.19-.34.15-.36.13a2.84,2.84,0,0,1-.38.13l-.36.1c-.14,0-.26.07-.4.09l-.42.07-.35.05a7,7,0,0,1-.79,0H160a8,8,0,0,1,0-16h20.69L128,107.31l-26.34,26.35a8,8,0,0,1-11.32,0L40,83.31V200H224A8,8,0,0,1,232,208Z"},child:[]}]})(e)}const Ke=[{min:0,max:90,color:"#6ec6f1",label:"低",range:"<90"},{min:90,max:120,color:"#7edfa0",label:"正常",range:"90-119"},{min:120,max:130,color:"#e6f7b2",label:"正常高値",range:"120-129"},{min:130,max:140,color:"#fff59d",label:"高値",range:"130-139"},{min:140,max:160,color:"#ffb74d",label:"Ⅰ度",range:"140-159"},{min:160,max:180,color:"#ff7043",label:"Ⅱ度",range:"160-179"},{min:180,max:300,color:"#d32f2f",label:"Ⅲ度",range:"180+"}],Qe=[{min:0,max:60,color:"#6ec6f1",label:"低",range:"<60"},{min:60,max:80,color:"#7edfa0",label:"正常",range:"60-79"},{min:80,max:90,color:"#fff59d",label:"高値",range:"80-89"},{min:90,max:100,color:"#ffb74d",label:"Ⅰ度",range:"90-99"},{min:100,max:110,color:"#ff7043",label:"Ⅱ度",range:"100-109"},{min:110,max:200,color:"#d32f2f",label:"Ⅲ度",range:"110+"}];function Je(e,t){if(null==t)return 0;let r=0;for(let a=0;a<e.length;a++){const n=e[a];if(t<n.max){return r+100/e.length*((t-n.min)/(n.max-n.min))}r+=100/e.length}return 100}const et=({recordsOfDay:e})=>{const t=e.length?Math.min(...e.map(e=>e.systolic)):null,a=e.length?Math.min(...e.map(e=>e.diastolic)):null,n=Je(Ke,t),o=Je(Qe,a);return r.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col items-center gap-2 mb-2",children:[r.jsxs("div",{className:"w-full flex flex-col items-center",children:[r.jsxs("div",{className:"relative w-full h-7 flex rounded overflow-hidden shadow",style:{minWidth:240},children:[Ke.map(e=>r.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",style:{background:e.color,minWidth:0},children:r.jsx("span",{className:"text-[10px] font-bold text-gray-800 dark:text-gray-900 select-none",style:{lineHeight:1},children:e.label})},e.label)),null!=t&&r.jsx("div",{className:"absolute left-0 top-0 w-full pointer-events-none",style:{height:"100%"},children:r.jsx("div",{style:{position:"absolute",left:`calc(${n}% - 0.65em)`,top:"50%",transform:"translateY(-50%)",color:"#dc2626",fontSize:"1.3em",textShadow:"0 0 2px #fff, 0 0 2px #fff, 1px 1px 2px #0002",zIndex:2},"aria-label":"現在の収縮期位置",children:"▼"})})]}),r.jsx("div",{className:"w-full flex justify-between mt-0.5 px-1",children:Ke.map(e=>r.jsx("span",{className:"text-[10px] text-gray-700 dark:text-gray-200",style:{minWidth:0},children:e.range},e.label+"-range"))})]}),r.jsxs("div",{className:"w-full flex flex-col items-center",children:[r.jsxs("div",{className:"relative w-full h-7 flex rounded overflow-hidden shadow",style:{minWidth:240},children:[Qe.map(e=>r.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",style:{background:e.color,minWidth:0},children:r.jsx("span",{className:"text-[10px] font-bold text-gray-800 dark:text-gray-900 select-none",style:{lineHeight:1},children:e.label})},e.label)),null!=a&&r.jsx("div",{className:"absolute left-0 top-0 w-full pointer-events-none",style:{height:"100%"},children:r.jsx("div",{style:{position:"absolute",left:`calc(${o}% - 0.65em)`,top:"50%",transform:"translateY(-50%)",color:"#dc2626",fontSize:"1.3em",textShadow:"0 0 2px #fff, 0 0 2px #fff, 1px 1px 2px #0002",zIndex:2},"aria-label":"現在の拡張期位置",children:"▼"})})]}),r.jsx("div",{className:"w-full flex justify-between mt-0.5 px-1",children:Qe.map(e=>r.jsx("span",{className:"text-[10px] text-gray-700 dark:text-gray-200",style:{minWidth:0},children:e.range},e.label+"-range"))})]})]})},tt={primary:"bg-blue-500 hover:bg-blue-600 focus:ring-blue-500 text-white",success:"bg-green-600 hover:bg-green-700 focus:ring-green-600 text-white",warning:"bg-amber-500 hover:bg-amber-600 focus:ring-amber-500 text-white",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-600 text-white",secondary:"bg-gray-400 hover:bg-gray-500 focus:ring-gray-400 text-white",purple:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-600 text-white",teal:"bg-teal-500 hover:bg-teal-600 focus:ring-teal-500 text-white",sky:"bg-sky-500 hover:bg-sky-600 focus:ring-sky-500 text-white"},rt={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},at="rounded-lg font-medium shadow-md transition-all duration-200 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",nt=({variant:e="primary",size:t="md",icon:a,iconPosition:n="left",loading:o=!1,fullWidth:s=!1,className:i="",children:l,disabled:d,...c})=>{const u=d||o,h=[at,tt[e],rt[t],s?"w-full":"w-auto","hover:shadow-lg",i].join(" "),m="lg"===t?"w-6 h-6":"sm"===t?"w-4 h-4":"w-5 h-5";return r.jsx("button",{className:h,disabled:u,...c,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`animate-spin rounded-full border-2 border-current border-t-transparent ${m}`}),"読み込み中..."]}):r.jsxs(r.Fragment,{children:[a&&"left"===n&&r.jsx(a,{className:m,"aria-hidden":"true"}),l,a&&"right"===n&&r.jsx(a,{className:m,"aria-hidden":"true"})]})})},ot=15,st=15,it=10,lt=15,dt=10,ct=30,ut="text-red-500",ht="text-blue-500",mt="",ft=()=>{const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},gt=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,pt="selectedDate",bt=e=>`${e.getDate()}`,xt=e=>["日","月","火","水","木","金","土"][e.getDay()],yt=(e,t)=>{const r=new Date(e),a="forward"===t?st:-15;return r.setDate(e.getDate()+a),r},wt=(e,t,r,a,n,o)=>{const s=gt(t),i=gt(a),l=gt(r);return e.map((t,r)=>{const a=gt(t),d=a===s,c=a===i,u=a===l,h=r>0?e[r-1]:null,m=0===r||!!h&&t.getMonth()!==h.getMonth(),f=(e=>{switch(e){case 0:return ut;case 6:return ht;default:return mt}})(t.getDay());return{date:t,isSelected:d,isToday:c,isCenter:u,showMonth:m,weekdayColor:f,status:n?n(t):(null==o?void 0:o(t))?"green":"none",index:r}})},vt=e=>{const[t,r]=D.useState(()=>(e=>{const t=new Date(e);t.setDate(e.getDate()-ot);const r=new Date(e);return r.setDate(e.getDate()+ot),{minDate:t,maxDate:r}})(e)),a=D.useRef(null),n=D.useRef(0);D.useEffect(()=>{const{minDate:a,maxDate:n}=t;let o=!1,s={...t};e<a&&(s.minDate=yt(e,"backward"),o=!0),e>n&&(s.maxDate=yt(e,"forward"),o=!0),o&&r(s)},[e]);const o=D.useCallback((e,t)=>{r("left"===e?e=>({...e,minDate:yt(e.minDate,"backward")}):e=>({...e,maxDate:yt(e.maxDate,"forward")})),a.current=e,n.current=t},[]);return{dateRange:t,lastEdgeRef:a,prevWidthRef:n,expandRange:o}},kt=({onScrollEdge:e})=>{const t=D.useRef(null),r=D.useCallback(e=>{const r=t.current;r&&Math.abs(e.deltaY)>Math.abs(e.deltaX)&&(r.scrollLeft+=e.deltaY,e.preventDefault())},[]),a=D.useCallback(()=>{const r=t.current;if(!r)return;const{scrollLeft:a,scrollWidth:n,clientWidth:o}=r,{isAtLeft:s,isAtRight:i}=((e,t,r)=>({isAtLeft:e<=it,isAtRight:e+r+it>=t}))(a,n,o);i&&e("right",n),s&&e("left",n)},[e]);return D.useEffect(()=>{const e=t.current;if(e)return e.addEventListener("wheel",r,{passive:!1}),()=>{e.removeEventListener("wheel",r)}},[r]),D.useEffect(()=>{const e=t.current;if(e)return e.addEventListener("scroll",a,{passive:!0}),()=>{e.removeEventListener("scroll",a)}},[a]),{containerRef:t}},Dt=({selectedDate:e,setSelectedDate:t,centerDate:r,setCenterDate:a,today:n,isRecorded:o,getDateStatus:s})=>{const{dateRange:i,lastEdgeRef:l,prevWidthRef:d,expandRange:c}=vt(r),{containerRef:u}=kt({onScrollEdge:c}),{touchRef:h}=(({setCenterDate:e})=>{const t=D.useRef(null),r=D.useRef({startX:null,startY:null}),a=D.useCallback(e=>{const t=e.touches[0];r.current={startX:t.clientX,startY:t.clientY}},[]),n=D.useCallback(t=>{const{startX:a,startY:n}=r.current;if(null===a||null===n)return;const o=t.changedTouches[0],s=o.clientX-a,i=o.clientY-n;if(Math.abs(s)>Math.abs(i)&&Math.abs(s)>lt){const t=new Date,r=new Date(t);s<0?r.setDate(t.getDate()+1):r.setDate(t.getDate()-1),e(r)}r.current={startX:null,startY:null}},[e]);return D.useEffect(()=>{const e=t.current;if(e)return e.addEventListener("touchstart",a,{passive:!0}),e.addEventListener("touchend",n,{passive:!0}),()=>{e.removeEventListener("touchstart",a),e.removeEventListener("touchend",n)}},[a,n]),{touchRef:t}})({setCenterDate:a}),{requestCenterScroll:m}=(({centerDate:e,containerRef:t})=>{const[r,a]=D.useState(!1);D.useEffect(()=>{a(!0)},[]);const n=D.useCallback(()=>{const n=t.current;if(!n||!r)return;let o=0;const s=()=>{const t=n.querySelector(`button[data-date='${gt(e)}']`);if(t){const e=(r=n.getBoundingClientRect(),(i=t.getBoundingClientRect()).left+i.width/2-(r.left+r.width/2));n.scrollBy({left:e,behavior:"smooth"}),a(!1)}else o<dt?(o++,setTimeout(s,ct)):a(!1);var r,i};s()},[e,t,r]);return D.useEffect(()=>{n()},[n]),{requestCenterScroll:D.useCallback(()=>{a(!0)},[])}})({centerDate:r,containerRef:u});(({containerRef:e,lastEdgeRef:t,prevWidthRef:r,dateRange:a})=>{D.useLayoutEffect(()=>{const a=e.current;if(!a||!t.current)return;const n=r.current??0,o=a.scrollWidth-n;"left"===t.current&&o>0&&(a.scrollLeft+=o),t.current&&(t.current=null)},[e,t,r,a])})({containerRef:u,lastEdgeRef:l,prevWidthRef:d,dateRange:i});const f=D.useMemo(()=>((e,t)=>{const r=[],a=new Date(e);for(;a<=t;)r.push(new Date(a)),a.setDate(a.getDate()+1);return r})(i.minDate,i.maxDate),[i.minDate,i.maxDate]);return{dateItems:D.useMemo(()=>wt(f,e,r,n||new Date,s,o),[f,e,r,n,s,o]),scrollRef:u,touchRef:h,handleDateSelect:D.useCallback(e=>{t(e)},[t]),handleCalendarSelect:D.useCallback(e=>{t(e),a(e),m()},[t,a,m]),requestCenterScroll:m}},Nt=D.memo(({dateItem:e,onSelect:t})=>{const{date:a,isSelected:n,isToday:o,isCenter:s,weekdayColor:i,status:l,index:d}=e,c=D.useMemo(()=>`${"\n      flex flex-col items-center justify-center \n      min-w-12 w-12 max-w-12 h-12 \n      px-0 py-0 mt-2 mb-2 \n      rounded-full transition-colors duration-150 shadow-md\n      hover:bg-blue-200 dark:hover:bg-blue-700 \n      focus:outline-none focus:ring-2 focus:ring-blue-400\n    ".trim()} ${n?"bg-blue-600 text-white shadow-lg scale-105 z-10":o?"bg-blue-100 text-blue-700":"bg-white text-gray-700 dark:bg-gray-800 dark:text-gray-200"} ${s&&!n?"scale-105":""}`,[n,o,s]),u=D.useMemo(()=>`inline-block w-2 h-2 rounded-full ${"green"===l?"bg-green-500":"red"===l?"bg-red-500":""}`.trim(),[l]),h=D.useMemo(()=>{const e=gt(a),t=bt(a);return`${e} ${xt(a)} ${t}日 ${"green"===l?"記録済み":"red"===l?"注意":""} ${n?"選択中":""} ${o?"今日":""}`.trim()},[a,l,n,o]);return r.jsxs("button",{"data-date-idx":d,"data-date":gt(a),onClick:()=>t(a),className:c,style:{position:"relative",scrollSnapAlign:"center",border:"none"},"aria-current":n?"date":void 0,"aria-label":h,role:"gridcell",tabIndex:n?0:-1,children:[r.jsx("span",{className:`text-xs font-medium ${i}`,"aria-hidden":"true",children:xt(a)}),r.jsx("span",{className:"text-lg font-bold","aria-hidden":"true",children:bt(a)}),r.jsx("span",{className:u,"aria-hidden":"true",role:"presentation"})]})},(e,t)=>{const r=e.dateItem,a=t.dateItem;return r.date.getTime()===a.date.getTime()&&r.isSelected===a.isSelected&&r.isToday===a.isToday&&r.isCenter===a.isCenter&&r.status===a.status&&r.showMonth===a.showMonth&&e.onSelect===t.onSelect}),jt=D.memo(({date:e})=>{const t="\n    flex flex-col items-center justify-center \n    min-w-14 w-14 max-w-14 h-14 \n    px-0 py-0 m-1 \n    rounded-xl bg-gray-100 dark:bg-gray-700 \n    text-gray-500 dark:text-gray-300 \n    text-xs font-bold \n    select-none cursor-default \n    border border-gray-300 dark:border-gray-600\n  ".trim();return r.jsxs("span",{className:t,"aria-hidden":"true",style:{scrollSnapAlign:"center"},children:[e.getMonth()+1,"月"]})},(e,t)=>e.date.getMonth()===t.date.getMonth()&&e.date.getFullYear()===t.date.getFullYear()),St={},Mt={};function Et(e,t){try{const r=(St[e]||(St[e]=new Intl.DateTimeFormat("en-GB",{timeZone:e,hour:"numeric",timeZoneName:"longOffset"}).format))(t).split("GMT")[1]||"";return r in Mt?Mt[r]:Tt(r,r.split(":"))}catch{if(e in Mt)return Mt[e];const t=null==e?void 0:e.match(Ct);return t?Tt(e,t.slice(1)):NaN}}const Ct=/([+-]\d\d):?(\d\d)?/;function Tt(e,t){const r=+t[0],a=+(t[1]||0);return Mt[e]=r>0?60*r+a:60*r-a}class Ot extends Date{constructor(...e){super(),e.length>1&&"string"==typeof e[e.length-1]&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(Et(this.timeZone,this))?this.setTime(NaN):e.length?"number"==typeof e[0]&&(1===e.length||2===e.length&&"number"!=typeof e[1])?this.setTime(e[0]):"string"==typeof e[0]?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),It(this),Rt(this)):this.setTime(Date.now())}static tz(e,...t){return t.length?new Ot(...t,e):new Ot(Date.now(),e)}withTimeZone(e){return new Ot(+this,e)}getTimezoneOffset(){return-Et(this.timeZone,this)}setTime(e){return Date.prototype.setTime.apply(this,arguments),Rt(this),+this}[Symbol.for("constructDateFrom")](e){return new Ot(+new Date(e),this.timeZone)}}const _t=/^(get|set)(?!UTC)/;function Rt(e){e.internal.setTime(+e),e.internal.setUTCMinutes(e.internal.getUTCMinutes()-e.getTimezoneOffset())}function It(e){const t=Et(e.timeZone,e),r=new Date(+e);r.setUTCHours(r.getUTCHours()-1);const a=-new Date(+e).getTimezoneOffset(),n=a- -new Date(+r).getTimezoneOffset(),o=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();n&&o&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+n);const s=a-t;s&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+s);const i=Et(e.timeZone,e),l=-new Date(+e).getTimezoneOffset()-i-s;if(i!==t&&l){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+l);const t=i-Et(e.timeZone,e);t&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+t),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+t))}}Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!_t.test(e))return;const t=e.replace(_t,"$1UTC");Ot.prototype[t]&&(e.startsWith("get")?Ot.prototype[e]=function(){return this.internal[t]()}:(Ot.prototype[e]=function(){var e;return Date.prototype[t].apply(this.internal,arguments),e=this,Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),It(e),+this},Ot.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),Rt(this),+this}))});class At extends Ot{static tz(e,...t){return t.length?new At(...t,e):new At(Date.now(),e)}toISOString(){const[e,t,r]=this.tzComponents(),a=`${e}${t}:${r}`;return this.internal.toISOString().slice(0,-1)+a}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,t,r,a]=this.internal.toUTCString().split(" ");return`${null==e?void 0:e.slice(0,-1)} ${r} ${t} ${a}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[t,r,a]=this.tzComponents();return`${e} GMT${t}${r}${a} (${n=this.timeZone,o=this,new Intl.DateTimeFormat("en-GB",{timeZone:n,timeZoneName:"long"}).format(o).slice(12)})`;var n,o}toLocaleString(e,t){return Date.prototype.toLocaleString.call(this,e,{...t,timeZone:(null==t?void 0:t.timeZone)||this.timeZone})}toLocaleDateString(e,t){return Date.prototype.toLocaleDateString.call(this,e,{...t,timeZone:(null==t?void 0:t.timeZone)||this.timeZone})}toLocaleTimeString(e,t){return Date.prototype.toLocaleTimeString.call(this,e,{...t,timeZone:(null==t?void 0:t.timeZone)||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset();return[e>0?"-":"+",String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),String(Math.abs(e)%60).padStart(2,"0")]}withTimeZone(e){return new At(+this,e)}[Symbol.for("constructDateFrom")](e){return new At(+new Date(e),this.timeZone)}}var Pt,Wt,Lt,Ft,Bt,$t,Yt,zt;(Wt=Pt||(Pt={})).Root="root",Wt.Chevron="chevron",Wt.Day="day",Wt.DayButton="day_button",Wt.CaptionLabel="caption_label",Wt.Dropdowns="dropdowns",Wt.Dropdown="dropdown",Wt.DropdownRoot="dropdown_root",Wt.Footer="footer",Wt.MonthGrid="month_grid",Wt.MonthCaption="month_caption",Wt.MonthsDropdown="months_dropdown",Wt.Month="month",Wt.Months="months",Wt.Nav="nav",Wt.NextMonthButton="button_next",Wt.PreviousMonthButton="button_previous",Wt.Week="week",Wt.Weeks="weeks",Wt.Weekday="weekday",Wt.Weekdays="weekdays",Wt.WeekNumber="week_number",Wt.WeekNumberHeader="week_number_header",Wt.YearsDropdown="years_dropdown",(Ft=Lt||(Lt={})).disabled="disabled",Ft.hidden="hidden",Ft.outside="outside",Ft.focused="focused",Ft.today="today",($t=Bt||(Bt={})).range_end="range_end",$t.range_middle="range_middle",$t.range_start="range_start",$t.selected="selected",(zt=Yt||(Yt={})).weeks_before_enter="weeks_before_enter",zt.weeks_before_exit="weeks_before_exit",zt.weeks_after_enter="weeks_after_enter",zt.weeks_after_exit="weeks_after_exit",zt.caption_after_enter="caption_after_enter",zt.caption_after_exit="caption_after_exit",zt.caption_before_enter="caption_before_enter",zt.caption_before_exit="caption_before_exit";const Ht=6048e5,Gt=Symbol.for("constructDateFrom");function Ut(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&Gt in e?e[Gt](t):e instanceof Date?new e.constructor(t):new Date(t)}function Zt(e,t){return Ut(t||e,e)}function Vt(e,t,r){const a=Zt(e,null==r?void 0:r.in);return isNaN(t)?Ut(e,NaN):t?(a.setDate(a.getDate()+t),a):a}function qt(e,t,r){const a=Zt(e,null==r?void 0:r.in);if(isNaN(t))return Ut(e,NaN);if(!t)return a;const n=a.getDate(),o=Ut(e,a.getTime());o.setMonth(a.getMonth()+t+1,0);return n>=o.getDate()?o:(a.setFullYear(o.getFullYear(),o.getMonth(),n),a)}let Xt={};function Kt(){return Xt}function Qt(e,t){var r,a,n,o;const s=Kt(),i=(null==t?void 0:t.weekStartsOn)??(null==(a=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:a.weekStartsOn)??s.weekStartsOn??(null==(o=null==(n=s.locale)?void 0:n.options)?void 0:o.weekStartsOn)??0,l=Zt(e,null==t?void 0:t.in),d=l.getDay(),c=(d<i?7:0)+d-i;return l.setDate(l.getDate()-c),l.setHours(0,0,0,0),l}function Jt(e,t){return Qt(e,{...t,weekStartsOn:1})}function er(e,t){const r=Zt(e,null==t?void 0:t.in),a=r.getFullYear(),n=Ut(r,0);n.setFullYear(a+1,0,4),n.setHours(0,0,0,0);const o=Jt(n),s=Ut(r,0);s.setFullYear(a,0,4),s.setHours(0,0,0,0);const i=Jt(s);return r.getTime()>=o.getTime()?a+1:r.getTime()>=i.getTime()?a:a-1}function tr(e){const t=Zt(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function rr(e,...t){const r=Ut.bind(null,t.find(e=>"object"==typeof e));return t.map(r)}function ar(e,t){const r=Zt(e,null==t?void 0:t.in);return r.setHours(0,0,0,0),r}function nr(e,t,r){const[a,n]=rr(null==r||r.in,e,t),o=ar(a),s=ar(n),i=+o-tr(o),l=+s-tr(s);return Math.round((i-l)/864e5)}function or(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function sr(e,t){const{start:r,end:a}=function(e,t){const[r,a]=rr(0,t.start,t.end);return{start:r,end:a}}(null==t||t.in,e);let n=+r>+a;const o=n?+r:+a,s=n?a:r;s.setHours(0,0,0,0),s.setDate(1);const i=[];for(;+s<=o;)i.push(Ut(r,s)),s.setMonth(s.getMonth()+1);return n?i.reverse():i}function ir(e,t){const r=Zt(e,null==t?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function lr(e,t){var r,a,n,o;const s=Kt(),i=(null==t?void 0:t.weekStartsOn)??(null==(a=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:a.weekStartsOn)??s.weekStartsOn??(null==(o=null==(n=s.locale)?void 0:n.options)?void 0:o.weekStartsOn)??0,l=Zt(e,null==t?void 0:t.in),d=l.getDay(),c=6+(d<i?-7:0)-(d-i);return l.setDate(l.getDate()+c),l.setHours(23,59,59,999),l}const dr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function cr(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const ur={date:cr({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:cr({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:cr({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},hr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function mr(e){return(t,r)=>{let a;if("formatting"===((null==r?void 0:r.context)?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,n=(null==r?void 0:r.width)?String(r.width):t;a=e.formattingValues[n]||e.formattingValues[t]}else{const t=e.defaultWidth,n=(null==r?void 0:r.width)?String(r.width):e.defaultWidth;a=e.values[n]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function fr(e){return(t,r={})=>{const a=r.width,n=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],o=t.match(n);if(!o)return null;const s=o[0],i=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(i,e=>e.test(s)):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(i,e=>e.test(s));let d;d=e.valueCallback?e.valueCallback(l):l,d=r.valueCallback?r.valueCallback(d):d;return{value:d,rest:t.slice(s.length)}}}function gr(e){return(t,r={})=>{const a=t.match(e.matchPattern);if(!a)return null;const n=a[0],o=t.match(e.parsePattern);if(!o)return null;let s=e.valueCallback?e.valueCallback(o[0]):o[0];s=r.valueCallback?r.valueCallback(s):s;return{value:s,rest:t.slice(n.length)}}}const pr={code:"en-US",formatDistance:(e,t,r)=>{let a;const n=dr[e];return a="string"==typeof n?n:1===t?n.one:n.other.replace("{{count}}",t.toString()),(null==r?void 0:r.addSuffix)?r.comparison&&r.comparison>0?"in "+a:a+" ago":a},formatLong:ur,formatRelative:(e,t,r,a)=>hr[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e),a=r%100;if(a>20||a<10)switch(a%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:mr({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:mr({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:mr({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:mr({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:mr({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:gr({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:fr({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:fr({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:fr({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:fr({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:fr({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function br(e,t){const r=Zt(e,null==t?void 0:t.in),a=+Jt(r)-+function(e,t){const r=er(e,t),a=Ut(e,0);return a.setFullYear(r,0,4),a.setHours(0,0,0,0),Jt(a)}(r);return Math.round(a/Ht)+1}function xr(e,t){var r,a,n,o;const s=Zt(e,null==t?void 0:t.in),i=s.getFullYear(),l=Kt(),d=(null==t?void 0:t.firstWeekContainsDate)??(null==(a=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:a.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(o=null==(n=l.locale)?void 0:n.options)?void 0:o.firstWeekContainsDate)??1,c=Ut((null==t?void 0:t.in)||e,0);c.setFullYear(i+1,0,d),c.setHours(0,0,0,0);const u=Qt(c,t),h=Ut((null==t?void 0:t.in)||e,0);h.setFullYear(i,0,d),h.setHours(0,0,0,0);const m=Qt(h,t);return+s>=+u?i+1:+s>=+m?i:i-1}function yr(e,t){const r=Zt(e,null==t?void 0:t.in),a=+Qt(r,t)-+function(e,t){var r,a,n,o;const s=Kt(),i=(null==t?void 0:t.firstWeekContainsDate)??(null==(a=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:a.firstWeekContainsDate)??s.firstWeekContainsDate??(null==(o=null==(n=s.locale)?void 0:n.options)?void 0:o.firstWeekContainsDate)??1,l=xr(e,t),d=Ut((null==t?void 0:t.in)||e,0);return d.setFullYear(l,0,i),d.setHours(0,0,0,0),Qt(d,t)}(r,t);return Math.round(a/Ht)+1}function wr(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const vr={y(e,t){const r=e.getFullYear(),a=r>0?r:1-r;return wr("yy"===t?a%100:a,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):wr(r+1,2)},d:(e,t)=>wr(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>wr(e.getHours()%12||12,t.length),H:(e,t)=>wr(e.getHours(),t.length),m:(e,t)=>wr(e.getMinutes(),t.length),s:(e,t)=>wr(e.getSeconds(),t.length),S(e,t){const r=t.length,a=e.getMilliseconds();return wr(Math.trunc(a*Math.pow(10,r-3)),t.length)}},kr="midnight",Dr="noon",Nr="morning",jr="afternoon",Sr="evening",Mr="night",Er={G:function(e,t,r){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(a,{width:"abbreviated"});case"GGGGG":return r.era(a,{width:"narrow"});default:return r.era(a,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return r.ordinalNumber(a,{unit:"year"})}return vr.y(e,t)},Y:function(e,t,r,a){const n=xr(e,a),o=n>0?n:1-n;if("YY"===t){return wr(o%100,2)}return"Yo"===t?r.ordinalNumber(o,{unit:"year"}):wr(o,t.length)},R:function(e,t){return wr(er(e),t.length)},u:function(e,t){return wr(e.getFullYear(),t.length)},Q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return wr(a,2);case"Qo":return r.ordinalNumber(a,{unit:"quarter"});case"QQQ":return r.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(a,{width:"narrow",context:"formatting"});default:return r.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,r){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return wr(a,2);case"qo":return r.ordinalNumber(a,{unit:"quarter"});case"qqq":return r.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(a,{width:"narrow",context:"standalone"});default:return r.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,r){const a=e.getMonth();switch(t){case"M":case"MM":return vr.M(e,t);case"Mo":return r.ordinalNumber(a+1,{unit:"month"});case"MMM":return r.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(a,{width:"narrow",context:"formatting"});default:return r.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,r){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return wr(a+1,2);case"Lo":return r.ordinalNumber(a+1,{unit:"month"});case"LLL":return r.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(a,{width:"narrow",context:"standalone"});default:return r.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,r,a){const n=yr(e,a);return"wo"===t?r.ordinalNumber(n,{unit:"week"}):wr(n,t.length)},I:function(e,t,r){const a=br(e);return"Io"===t?r.ordinalNumber(a,{unit:"week"}):wr(a,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):vr.d(e,t)},D:function(e,t,r){const a=function(e,t){const r=Zt(e,null==t?void 0:t.in);return nr(r,ir(r))+1}(e);return"Do"===t?r.ordinalNumber(a,{unit:"dayOfYear"}):wr(a,t.length)},E:function(e,t,r){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,r,a){const n=e.getDay(),o=(n-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return wr(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(n,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},c:function(e,t,r,a){const n=e.getDay(),o=(n-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return wr(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"});default:return r.day(n,{width:"wide",context:"standalone"})}},i:function(e,t,r){const a=e.getDay(),n=0===a?7:a;switch(t){case"i":return String(n);case"ii":return wr(n,t.length);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return r.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const a=e.getHours();let n;switch(n=12===a?Dr:0===a?kr:a/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},B:function(e,t,r){const a=e.getHours();let n;switch(n=a>=17?Sr:a>=12?jr:a>=4?Nr:Mr,t){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return vr.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):vr.H(e,t)},K:function(e,t,r){const a=e.getHours()%12;return"Ko"===t?r.ordinalNumber(a,{unit:"hour"}):wr(a,t.length)},k:function(e,t,r){let a=e.getHours();return 0===a&&(a=24),"ko"===t?r.ordinalNumber(a,{unit:"hour"}):wr(a,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):vr.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):vr.s(e,t)},S:function(e,t){return vr.S(e,t)},X:function(e,t,r){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return Tr(a);case"XXXX":case"XX":return Or(a);default:return Or(a,":")}},x:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"x":return Tr(a);case"xxxx":case"xx":return Or(a);default:return Or(a,":")}},O:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Cr(a,":");default:return"GMT"+Or(a,":")}},z:function(e,t,r){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Cr(a,":");default:return"GMT"+Or(a,":")}},t:function(e,t,r){return wr(Math.trunc(+e/1e3),t.length)},T:function(e,t,r){return wr(+e,t.length)}};function Cr(e,t=""){const r=e>0?"-":"+",a=Math.abs(e),n=Math.trunc(a/60),o=a%60;return 0===o?r+String(n):r+String(n)+t+wr(o,2)}function Tr(e,t){if(e%60==0){return(e>0?"-":"+")+wr(Math.abs(e)/60,2)}return Or(e,t)}function Or(e,t=""){const r=e>0?"-":"+",a=Math.abs(e);return r+wr(Math.trunc(a/60),2)+t+wr(a%60,2)}const _r=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Rr=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Ir={p:Rr,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],a=r[1],n=r[2];if(!n)return _r(e,t);let o;switch(a){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",_r(a,t)).replace("{{time}}",Rr(n,t))}},Ar=/^D+$/,Pr=/^Y+$/,Wr=["D","DD","YY","YYYY"];const Lr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Fr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Br=/^'([^]*?)'?$/,$r=/''/g,Yr=/[a-zA-Z]/;function zr(e,t,r){var a,n,o,s,i,l,d,c;const u=Kt(),h=(null==r?void 0:r.locale)??u.locale??pr,m=(null==r?void 0:r.firstWeekContainsDate)??(null==(n=null==(a=null==r?void 0:r.locale)?void 0:a.options)?void 0:n.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(s=null==(o=u.locale)?void 0:o.options)?void 0:s.firstWeekContainsDate)??1,f=(null==r?void 0:r.weekStartsOn)??(null==(l=null==(i=null==r?void 0:r.locale)?void 0:i.options)?void 0:l.weekStartsOn)??u.weekStartsOn??(null==(c=null==(d=u.locale)?void 0:d.options)?void 0:c.weekStartsOn)??0,g=Zt(e,null==r?void 0:r.in);if(!function(e){return!(!or(e)&&"number"!=typeof e||isNaN(+Zt(e)))}(g))throw new RangeError("Invalid time value");let p=t.match(Fr).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,Ir[t])(e,h.formatLong)}return e}).join("").match(Lr).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Hr(e)};if(Er[t])return{isToken:!0,value:e};if(t.match(Yr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});h.localize.preprocessor&&(p=h.localize.preprocessor(g,p));const b={firstWeekContainsDate:m,weekStartsOn:f,locale:h};return p.map(a=>{if(!a.isToken)return a.value;const n=a.value;(!(null==r?void 0:r.useAdditionalWeekYearTokens)&&function(e){return Pr.test(e)}(n)||!(null==r?void 0:r.useAdditionalDayOfYearTokens)&&function(e){return Ar.test(e)}(n))&&function(e,t,r){const a=function(e,t,r){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(Wr.includes(e))throw new RangeError(a)}(n,t,String(e));return(0,Er[n[0]])(g,n,h.localize,b)}).join("")}function Hr(e){const t=e.match(Br);return t?t[1].replace($r,"'"):e}function Gr(e,t,r){const a=Zt(e,null==r?void 0:r.in),n=a.getFullYear(),o=a.getDate(),s=Ut(e,0);s.setFullYear(n,t,15),s.setHours(0,0,0,0);const i=function(e,t){const r=Zt(e,null==t?void 0:t.in),a=r.getFullYear(),n=r.getMonth(),o=Ut(r,0);return o.setFullYear(a,n+1,0),o.setHours(0,0,0,0),o.getDate()}(s);return a.setMonth(t,Math.min(o,i)),a}function Ur(e,t){const r=t.startOfMonth(e),a=r.getDay();return 1===a?r:0===a?t.addDays(r,-6):t.addDays(r,-1*(a-1))}class Zr{constructor(e,t){this.Date=Date,this.today=()=>{var e;return(null==(e=this.overrides)?void 0:e.today)?this.overrides.today():this.options.timeZone?At.tz(this.options.timeZone):new this.Date},this.newDate=(e,t,r)=>{var a;return(null==(a=this.overrides)?void 0:a.newDate)?this.overrides.newDate(e,t,r):this.options.timeZone?new At(e,t,r,this.options.timeZone):new Date(e,t,r)},this.addDays=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.addDays)?this.overrides.addDays(e,t):Vt(e,t)},this.addMonths=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.addMonths)?this.overrides.addMonths(e,t):qt(e,t)},this.addWeeks=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.addWeeks)?this.overrides.addWeeks(e,t):function(e,t,r){return Vt(e,7*t,r)}(e,t)},this.addYears=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.addYears)?this.overrides.addYears(e,t):function(e,t,r){return qt(e,12*t,r)}(e,t)},this.differenceInCalendarDays=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.differenceInCalendarDays)?this.overrides.differenceInCalendarDays(e,t):nr(e,t)},this.differenceInCalendarMonths=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.differenceInCalendarMonths)?this.overrides.differenceInCalendarMonths(e,t):function(e,t,r){const[a,n]=rr(null==r||r.in,e,t);return 12*(a.getFullYear()-n.getFullYear())+(a.getMonth()-n.getMonth())}(e,t)},this.eachMonthOfInterval=e=>{var t;return(null==(t=this.overrides)?void 0:t.eachMonthOfInterval)?this.overrides.eachMonthOfInterval(e):sr(e)},this.endOfBroadcastWeek=e=>{var t;return(null==(t=this.overrides)?void 0:t.endOfBroadcastWeek)?this.overrides.endOfBroadcastWeek(e):function(e,t){const r=Ur(e,t),a=function(e,t){const r=t.startOfMonth(e),a=r.getDay()>0?r.getDay():7,n=t.addDays(e,1-a),o=t.addDays(n,34);return t.getMonth(e)===t.getMonth(o)?5:4}(e,t);return t.addDays(r,7*a-1)}(e,this)},this.endOfISOWeek=e=>{var t;return(null==(t=this.overrides)?void 0:t.endOfISOWeek)?this.overrides.endOfISOWeek(e):function(e,t){return lr(e,{...t,weekStartsOn:1})}(e)},this.endOfMonth=e=>{var t;return(null==(t=this.overrides)?void 0:t.endOfMonth)?this.overrides.endOfMonth(e):function(e,t){const r=Zt(e,null==t?void 0:t.in),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}(e)},this.endOfWeek=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.endOfWeek)?this.overrides.endOfWeek(e,t):lr(e,this.options)},this.endOfYear=e=>{var t;return(null==(t=this.overrides)?void 0:t.endOfYear)?this.overrides.endOfYear(e):function(e,t){const r=Zt(e,null==t?void 0:t.in),a=r.getFullYear();return r.setFullYear(a+1,0,0),r.setHours(23,59,59,999),r}(e)},this.format=(e,t,r)=>{var a;const n=(null==(a=this.overrides)?void 0:a.format)?this.overrides.format(e,t,this.options):zr(e,t,this.options);return this.options.numerals&&"latn"!==this.options.numerals?this.replaceDigits(n):n},this.getISOWeek=e=>{var t;return(null==(t=this.overrides)?void 0:t.getISOWeek)?this.overrides.getISOWeek(e):br(e)},this.getMonth=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.getMonth)?this.overrides.getMonth(e,this.options):function(e,t){return Zt(e,null==t?void 0:t.in).getMonth()}(e,this.options)},this.getYear=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.getYear)?this.overrides.getYear(e,this.options):function(e,t){return Zt(e,null==t?void 0:t.in).getFullYear()}(e,this.options)},this.getWeek=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.getWeek)?this.overrides.getWeek(e,this.options):yr(e,this.options)},this.isAfter=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.isAfter)?this.overrides.isAfter(e,t):function(e,t){return+Zt(e)>+Zt(t)}(e,t)},this.isBefore=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.isBefore)?this.overrides.isBefore(e,t):function(e,t){return+Zt(e)<+Zt(t)}(e,t)},this.isDate=e=>{var t;return(null==(t=this.overrides)?void 0:t.isDate)?this.overrides.isDate(e):or(e)},this.isSameDay=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.isSameDay)?this.overrides.isSameDay(e,t):function(e,t,r){const[a,n]=rr(null==r||r.in,e,t);return+ar(a)===+ar(n)}(e,t)},this.isSameMonth=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.isSameMonth)?this.overrides.isSameMonth(e,t):function(e,t,r){const[a,n]=rr(null==r||r.in,e,t);return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()}(e,t)},this.isSameYear=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.isSameYear)?this.overrides.isSameYear(e,t):function(e,t,r){const[a,n]=rr(null==r||r.in,e,t);return a.getFullYear()===n.getFullYear()}(e,t)},this.max=e=>{var t;return(null==(t=this.overrides)?void 0:t.max)?this.overrides.max(e):function(e,t){let r,a=null==t?void 0:t.in;return e.forEach(e=>{a||"object"!=typeof e||(a=Ut.bind(null,e));const t=Zt(e,a);(!r||r<t||isNaN(+t))&&(r=t)}),Ut(a,r||NaN)}(e)},this.min=e=>{var t;return(null==(t=this.overrides)?void 0:t.min)?this.overrides.min(e):function(e,t){let r,a=null==t?void 0:t.in;return e.forEach(e=>{a||"object"!=typeof e||(a=Ut.bind(null,e));const t=Zt(e,a);(!r||r>t||isNaN(+t))&&(r=t)}),Ut(a,r||NaN)}(e)},this.setMonth=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.setMonth)?this.overrides.setMonth(e,t):Gr(e,t)},this.setYear=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.setYear)?this.overrides.setYear(e,t):function(e,t,r){const a=Zt(e,null==r?void 0:r.in);return isNaN(+a)?Ut(e,NaN):(a.setFullYear(t),a)}(e,t)},this.startOfBroadcastWeek=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.startOfBroadcastWeek)?this.overrides.startOfBroadcastWeek(e,this):Ur(e,this)},this.startOfDay=e=>{var t;return(null==(t=this.overrides)?void 0:t.startOfDay)?this.overrides.startOfDay(e):ar(e)},this.startOfISOWeek=e=>{var t;return(null==(t=this.overrides)?void 0:t.startOfISOWeek)?this.overrides.startOfISOWeek(e):Jt(e)},this.startOfMonth=e=>{var t;return(null==(t=this.overrides)?void 0:t.startOfMonth)?this.overrides.startOfMonth(e):function(e,t){const r=Zt(e,null==t?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}(e)},this.startOfWeek=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.startOfWeek)?this.overrides.startOfWeek(e,this.options):Qt(e,this.options)},this.startOfYear=e=>{var t;return(null==(t=this.overrides)?void 0:t.startOfYear)?this.overrides.startOfYear(e):ir(e)},this.options={locale:pr,...e},this.overrides=t}getDigitMap(){const{numerals:e="latn"}=this.options,t=new Intl.NumberFormat("en-US",{numberingSystem:e}),r={};for(let a=0;a<10;a++)r[a.toString()]=t.format(a);return r}replaceDigits(e){const t=this.getDigitMap();return e.replace(/\d/g,e=>t[e]||e)}formatNumber(e){return this.replaceDigits(e.toString())}}const Vr=new Zr;class qr{constructor(e,t,r=Vr){this.date=e,this.displayMonth=t,this.outside=Boolean(t&&!r.isSameMonth(e,t)),this.dateLib=r}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}}class Xr{constructor(e,t){this.date=e,this.weeks=t}}class Kr{constructor(e,t){this.days=t,this.weekNumber=e}}function Qr(e,t,r=!1,a=Vr){let{from:n,to:o}=e;const{differenceInCalendarDays:s,isSameDay:i}=a;if(n&&o){s(o,n)<0&&([n,o]=[o,n]);return s(t,n)>=(r?1:0)&&s(o,t)>=(r?1:0)}return!r&&o?i(o,t):!(r||!n)&&i(n,t)}function Jr(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}function ea(e){return Boolean(e&&"object"==typeof e&&"from"in e)}function ta(e){return Boolean(e&&"object"==typeof e&&"after"in e)}function ra(e){return Boolean(e&&"object"==typeof e&&"before"in e)}function aa(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}function na(e,t){return Array.isArray(e)&&e.every(t.isDate)}function oa(e,t,r=Vr){const a=Array.isArray(t)?t:[t],{isSameDay:n,differenceInCalendarDays:o,isAfter:s}=r;return a.some(t=>{if("boolean"==typeof t)return t;if(r.isDate(t))return n(e,t);if(na(t,r))return t.includes(e);if(ea(t))return Qr(t,e,!1,r);if(aa(t))return Array.isArray(t.dayOfWeek)?t.dayOfWeek.includes(e.getDay()):t.dayOfWeek===e.getDay();if(Jr(t)){const r=o(t.before,e)>0,a=o(t.after,e)<0;return s(t.before,t.after)?a&&r:r||a}return ta(t)?o(e,t.after)>0:ra(t)?o(t.before,e)>0:"function"==typeof t&&t(e)})}const sa=D.createContext(void 0);function ia(){const e=D.useContext(sa);if(void 0===e)throw new Error("useDayPicker() must be used within a custom component.");return e}const la=Object.freeze(Object.defineProperty({__proto__:null,Button:function(e){return S.createElement("button",{...e})},CaptionLabel:function(e){return S.createElement("span",{...e})},Chevron:function(e){const{size:t=24,orientation:r="left",className:a}=e;return S.createElement("svg",{className:a,width:t,height:t,viewBox:"0 0 24 24"},"up"===r&&S.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),"down"===r&&S.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),"left"===r&&S.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),"right"===r&&S.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))},Day:function(e){const{day:t,modifiers:r,...a}=e;return S.createElement("td",{...a})},DayButton:function(e){const{day:t,modifiers:r,...a}=e,n=S.useRef(null);return S.useEffect(()=>{var e;r.focused&&(null==(e=n.current)||e.focus())},[r.focused]),S.createElement("button",{ref:n,...a})},Dropdown:function(e){const{options:t,className:r,components:a,classNames:n,...o}=e,s=[n[Pt.Dropdown],r].join(" "),i=null==t?void 0:t.find(({value:e})=>e===o.value);return S.createElement("span",{"data-disabled":o.disabled,className:n[Pt.DropdownRoot]},S.createElement(a.Select,{className:s,...o},null==t?void 0:t.map(({value:e,label:t,disabled:r})=>S.createElement(a.Option,{key:e,value:e,disabled:r},t))),S.createElement("span",{className:n[Pt.CaptionLabel],"aria-hidden":!0},null==i?void 0:i.label,S.createElement(a.Chevron,{orientation:"down",size:18,className:n[Pt.Chevron]})))},DropdownNav:function(e){return S.createElement("div",{...e})},Footer:function(e){return S.createElement("div",{...e})},Month:function(e){const{calendarMonth:t,displayIndex:r,...a}=e;return S.createElement("div",{...a},e.children)},MonthCaption:function(e){const{calendarMonth:t,displayIndex:r,...a}=e;return S.createElement("div",{...a})},MonthGrid:function(e){return S.createElement("table",{...e})},Months:function(e){return S.createElement("div",{...e})},MonthsDropdown:function(e){const{components:t}=ia();return S.createElement(t.Dropdown,{...e})},Nav:function(e){const{onPreviousClick:t,onNextClick:r,previousMonth:a,nextMonth:n,...o}=e,{components:s,classNames:i,labels:{labelPrevious:l,labelNext:d}}=ia(),c=D.useCallback(e=>{n&&(null==r||r(e))},[n,r]),u=D.useCallback(e=>{a&&(null==t||t(e))},[a,t]);return S.createElement("nav",{...o},S.createElement(s.PreviousMonthButton,{type:"button",className:i[Pt.PreviousMonthButton],tabIndex:a?void 0:-1,"aria-disabled":!a||void 0,"aria-label":l(a),onClick:u},S.createElement(s.Chevron,{disabled:!a||void 0,className:i[Pt.Chevron],orientation:"left"})),S.createElement(s.NextMonthButton,{type:"button",className:i[Pt.NextMonthButton],tabIndex:n?void 0:-1,"aria-disabled":!n||void 0,"aria-label":d(n),onClick:c},S.createElement(s.Chevron,{disabled:!n||void 0,orientation:"right",className:i[Pt.Chevron]})))},NextMonthButton:function(e){const{components:t}=ia();return S.createElement(t.Button,{...e})},Option:function(e){return S.createElement("option",{...e})},PreviousMonthButton:function(e){const{components:t}=ia();return S.createElement(t.Button,{...e})},Root:function(e){const{rootRef:t,...r}=e;return S.createElement("div",{...r,ref:t})},Select:function(e){return S.createElement("select",{...e})},Week:function(e){const{week:t,...r}=e;return S.createElement("tr",{...r})},WeekNumber:function(e){const{week:t,...r}=e;return S.createElement("th",{...r})},WeekNumberHeader:function(e){return S.createElement("th",{...e})},Weekday:function(e){return S.createElement("th",{...e})},Weekdays:function(e){return S.createElement("thead",{"aria-hidden":!0},S.createElement("tr",{...e}))},Weeks:function(e){return S.createElement("tbody",{...e})},YearsDropdown:function(e){const{components:t}=ia();return S.createElement(t.Dropdown,{...e})}},Symbol.toStringTag,{value:"Module"}));function da(){const e={};for(const t in Pt)e[Pt[t]]=`rdp-${Pt[t]}`;for(const t in Lt)e[Lt[t]]=`rdp-${Lt[t]}`;for(const t in Bt)e[Bt[t]]=`rdp-${Bt[t]}`;for(const t in Yt)e[Yt[t]]=`rdp-${Yt[t]}`;return e}function ca(e,t,r){return(r??new Zr(t)).format(e,"LLLL y")}const ua=ca;function ha(e,t=Vr){return t.format(e,"yyyy")}const ma=ha,fa=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:ca,formatDay:function(e,t,r){return(r??new Zr(t)).format(e,"d")},formatMonthCaption:ua,formatMonthDropdown:function(e,t=Vr){return t.format(e,"LLLL")},formatWeekNumber:function(e,t=Vr){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)},formatWeekNumberHeader:function(){return""},formatWeekdayName:function(e,t,r){return(r??new Zr(t)).format(e,"cccccc")},formatYearCaption:ma,formatYearDropdown:ha},Symbol.toStringTag,{value:"Module"}));function ga(e,t,r){return(r??new Zr(t)).format(e,"LLLL y")}const pa=ga;function ba(e,t,r,a){let n=(a??new Zr(r)).format(e,"PPPP");return t.today&&(n=`Today, ${n}`),t.selected&&(n=`${n}, selected`),n}const xa=ba;const ya=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:pa,labelDay:xa,labelDayButton:ba,labelGrid:ga,labelGridcell:function(e,t,r,a){let n=(a??new Zr(r)).format(e,"PPPP");return(null==t?void 0:t.today)&&(n=`Today, ${n}`),n},labelMonthDropdown:function(e){return"Choose the Month"},labelNav:function(){return""},labelNext:function(e){return"Go to the Next Month"},labelPrevious:function(e){return"Go to the Previous Month"},labelWeekNumber:function(e,t){return`Week ${e}`},labelWeekNumberHeader:function(e){return"Week Number"},labelWeekday:function(e,t,r){return(r??new Zr(t)).format(e,"cccc")},labelYearDropdown:function(e){return"Choose the Year"}},Symbol.toStringTag,{value:"Module"})),wa=e=>e instanceof HTMLElement?e:null,va=e=>[...e.querySelectorAll("[data-animated-month]")??[]],ka=e=>wa(e.querySelector("[data-animated-caption]")),Da=e=>wa(e.querySelector("[data-animated-weeks]"));function Na(e,t,{classNames:r,months:a,focused:n,dateLib:o}){const s=D.useRef(null),i=D.useRef(a),l=D.useRef(!1);D.useLayoutEffect(()=>{const d=i.current;if(i.current=a,!(t&&e.current&&e.current instanceof HTMLElement&&0!==a.length&&0!==d.length&&a.length===d.length))return;const c=o.isSameMonth(a[0].date,d[0].date),u=o.isAfter(a[0].date,d[0].date),h=u?r[Yt.caption_after_enter]:r[Yt.caption_before_enter],m=u?r[Yt.weeks_after_enter]:r[Yt.weeks_before_enter],f=s.current,g=e.current.cloneNode(!0);if(g instanceof HTMLElement){va(g).forEach(e=>{if(!(e instanceof HTMLElement))return;const t=wa(e.querySelector("[data-animated-month]"));t&&e.contains(t)&&e.removeChild(t);const r=ka(e);r&&r.classList.remove(h);const a=Da(e);a&&a.classList.remove(m)}),s.current=g}else s.current=null;if(l.current||c||n)return;const p=f instanceof HTMLElement?va(f):[],b=va(e.current);if(b&&b.every(e=>e instanceof HTMLElement)&&p&&p.every(e=>e instanceof HTMLElement)){l.current=!0,e.current.style.isolation="isolate";const t=(x=e.current,wa(x.querySelector("[data-animated-nav]")));t&&(t.style.zIndex="1"),b.forEach((a,n)=>{const o=p[n];if(!o)return;a.style.position="relative",a.style.overflow="hidden";const s=ka(a);s&&s.classList.add(h);const i=Da(a);i&&i.classList.add(m);const d=()=>{l.current=!1,e.current&&(e.current.style.isolation=""),t&&(t.style.zIndex=""),s&&s.classList.remove(h),i&&i.classList.remove(m),a.style.position="",a.style.overflow="",a.contains(o)&&a.removeChild(o)};o.style.pointerEvents="none",o.style.position="absolute",o.style.overflow="hidden",o.setAttribute("aria-hidden","true");const c=(e=>wa(e.querySelector("[data-animated-weekdays]")))(o);c&&(c.style.opacity="0");const f=ka(o);f&&(f.classList.add(u?r[Yt.caption_before_exit]:r[Yt.caption_after_exit]),f.addEventListener("animationend",d));const g=Da(o);g&&g.classList.add(u?r[Yt.weeks_before_exit]:r[Yt.weeks_after_exit]),a.insertBefore(o,a.firstChild)})}var x})}function ja(e,t,r,a){const{month:n,defaultMonth:o,today:s=a.today(),numberOfMonths:i=1}=e;let l=n||o||s;const{differenceInCalendarMonths:d,addMonths:c,startOfMonth:u}=a;if(r&&d(r,l)<i-1){l=c(r,-1*(i-1))}return t&&d(l,t)<0&&(l=t),u(l)}function Sa(e,t){const[r,a]=D.useState(e);return[void 0===t?r:t,a]}function Ma(e,t){const[r,a]=function(e,t){let{startMonth:r,endMonth:a}=e;const{startOfYear:n,startOfDay:o,startOfMonth:s,endOfMonth:i,addYears:l,endOfYear:d,newDate:c,today:u}=t,{fromYear:h,toYear:m,fromMonth:f,toMonth:g}=e;!r&&f&&(r=f),!r&&h&&(r=t.newDate(h,0,1)),!a&&g&&(a=g),!a&&m&&(a=c(m,11,31));const p="dropdown"===e.captionLayout||"dropdown-years"===e.captionLayout;return r?r=s(r):h?r=c(h,0,1):!r&&p&&(r=n(l(e.today??u(),-100))),a?a=i(a):m?a=c(m,11,31):!a&&p&&(a=d(e.today??u())),[r?o(r):r,a?o(a):a]}(e,t),{startOfMonth:n,endOfMonth:o}=t,s=ja(e,r,a,t),[i,l]=Sa(s,e.month?s:void 0);D.useEffect(()=>{const n=ja(e,r,a,t);l(n)},[e.timeZone]);const d=function(e,t,r,a){const{numberOfMonths:n=1}=r,o=[];for(let s=0;s<n;s++){const r=a.addMonths(e,s);if(t&&r>t)break;o.push(r)}return o}(i,a,e,t),c=function(e,t,r,a){const n=e[0],o=e[e.length-1],{ISOWeek:s,fixedWeeks:i,broadcastCalendar:l}=r??{},{addDays:d,differenceInCalendarDays:c,differenceInCalendarMonths:u,endOfBroadcastWeek:h,endOfISOWeek:m,endOfMonth:f,endOfWeek:g,isAfter:p,startOfBroadcastWeek:b,startOfISOWeek:x,startOfWeek:y}=a,w=l?b(n,a):s?x(n):y(n),v=c(l?h(o):s?m(f(o)):g(f(o)),w),k=u(o,n)+1,D=[];for(let j=0;j<=v;j++){const e=d(w,j);if(t&&p(e,t))break;D.push(e)}const N=(l?35:42)*k;if(i&&D.length<N){const e=N-D.length;for(let t=0;t<e;t++){const e=d(D[D.length-1],1);D.push(e)}}return D}(d,e.endMonth?o(e.endMonth):void 0,e,t),u=function(e,t,r,a){const{addDays:n,endOfBroadcastWeek:o,endOfISOWeek:s,endOfMonth:i,endOfWeek:l,getISOWeek:d,getWeek:c,startOfBroadcastWeek:u,startOfISOWeek:h,startOfWeek:m}=a,f=e.reduce((e,f)=>{const g=r.broadcastCalendar?u(f,a):r.ISOWeek?h(f):m(f),p=r.broadcastCalendar?o(f):r.ISOWeek?s(i(f)):l(i(f)),b=t.filter(e=>e>=g&&e<=p),x=r.broadcastCalendar?35:42;if(r.fixedWeeks&&b.length<x){const e=t.filter(e=>{const t=x-b.length;return e>p&&e<=n(p,t)});b.push(...e)}const y=b.reduce((e,t)=>{const n=r.ISOWeek?d(t):c(t),o=e.find(e=>e.weekNumber===n),s=new qr(t,f,a);return o?o.days.push(s):e.push(new Kr(n,[s])),e},[]),w=new Xr(f,y);return e.push(w),e},[]);return r.reverseMonths?f.reverse():f}(d,c,e,t),h=function(e){return e.reduce((e,t)=>[...e,...t.weeks],[])}(u),m=function(e){const t=[];return e.reduce((e,r)=>[...e,...r.weeks.reduce((e,t)=>[...e,...t.days],t)],t)}(u),f=function(e,t,r,a){if(r.disableNavigation)return;const{pagedNavigation:n,numberOfMonths:o}=r,{startOfMonth:s,addMonths:i,differenceInCalendarMonths:l}=a,d=n?o??1:1,c=s(e);return t&&l(c,t)<=0?void 0:i(c,-d)}(i,r,e,t),g=function(e,t,r,a){if(r.disableNavigation)return;const{pagedNavigation:n,numberOfMonths:o=1}=r,{startOfMonth:s,addMonths:i,differenceInCalendarMonths:l}=a,d=n?o:1,c=s(e);return t&&l(t,e)<o?void 0:i(c,d)}(i,a,e,t),{disableNavigation:p,onMonthChange:b}=e,x=e=>{if(p)return;let t=n(e);r&&t<n(r)&&(t=n(r)),a&&t>n(a)&&(t=n(a)),l(t),null==b||b(t)};return{months:u,weeks:h,days:m,navStart:r,navEnd:a,previousMonth:f,nextMonth:g,goToMonth:x,goToDay:e=>{(e=>h.some(t=>t.days.some(t=>t.isEqualTo(e))))(e)||x(e.date)}}}var Ea,Ca;function Ta(e){return!e[Lt.disabled]&&!e[Lt.hidden]&&!e[Lt.outside]}function Oa(e,t,r,a,n,o,s,i=0){if(i>365)return;const l=function(e,t,r,a,n,o,s){const{ISOWeek:i,broadcastCalendar:l}=o,{addDays:d,addMonths:c,addWeeks:u,addYears:h,endOfBroadcastWeek:m,endOfISOWeek:f,endOfWeek:g,max:p,min:b,startOfBroadcastWeek:x,startOfISOWeek:y,startOfWeek:w}=s;let v={day:d,week:u,month:c,year:h,startOfWeek:e=>l?x(e,s):i?y(e):w(e),endOfWeek:e=>l?m(e):i?f(e):g(e)}[e](r,"after"===t?1:-1);return"before"===t&&a?v=p([a,v]):"after"===t&&n&&(v=b([n,v])),v}(e,t,r.date,a,n,o,s),d=Boolean(o.disabled&&oa(l,o.disabled,s)),c=Boolean(o.hidden&&oa(l,o.hidden,s)),u=new qr(l,l,s);return d||c?Oa(e,t,u,a,n,o,s,i+1):u}function _a(e,t,r,a,n){const{autoFocus:o}=e,[s,i]=D.useState(),l=function(e,t,r,a){let n,o=-1;for(const s of e){const e=t(s);Ta(e)&&(e[Lt.focused]&&o<Ea.FocusedModifier?(n=s,o=Ea.FocusedModifier):(null==a?void 0:a.isEqualTo(s))&&o<Ea.LastFocused?(n=s,o=Ea.LastFocused):r(s.date)&&o<Ea.Selected?(n=s,o=Ea.Selected):e[Lt.today]&&o<Ea.Today&&(n=s,o=Ea.Today))}return n||(n=e.find(e=>Ta(t(e)))),n}(t.days,r,a||(()=>!1),s),[d,c]=D.useState(o?l:void 0);return{isFocusTarget:e=>Boolean(null==l?void 0:l.isEqualTo(e)),setFocused:c,focused:d,blur:()=>{i(d),c(void 0)},moveFocus:(r,a)=>{if(!d)return;const o=Oa(r,a,d,t.navStart,t.navEnd,e,n);o&&(t.goToDay(o),c(o))}}}function Ra(e,t,r=Vr){return Qr(e,t.from,!1,r)||Qr(e,t.to,!1,r)||Qr(t,e.from,!1,r)||Qr(t,e.to,!1,r)}function Ia(e,t,r=Vr){const a=Array.isArray(t)?t:[t];if(a.filter(e=>"function"!=typeof e).some(t=>{if("boolean"==typeof t)return t;if(r.isDate(t))return Qr(e,t,!1,r);if(na(t,r))return t.some(t=>Qr(e,t,!1,r));if(ea(t))return!(!t.from||!t.to)&&Ra(e,{from:t.from,to:t.to},r);if(aa(t))return function(e,t,r=Vr){const a=Array.isArray(t)?t:[t];let n=e.from;const o=r.differenceInCalendarDays(e.to,e.from),s=Math.min(o,6);for(let i=0;i<=s;i++){if(a.includes(n.getDay()))return!0;n=r.addDays(n,1)}return!1}(e,t.dayOfWeek,r);if(Jr(t)){return r.isAfter(t.before,t.after)?Ra(e,{from:r.addDays(t.after,1),to:r.addDays(t.before,-1)},r):oa(e.from,t,r)||oa(e.to,t,r)}return!(!ta(t)&&!ra(t))&&(oa(e.from,t,r)||oa(e.to,t,r))}))return!0;const n=a.filter(e=>"function"==typeof e);if(n.length){let t=e.from;const a=r.differenceInCalendarDays(e.to,e.from);for(let e=0;e<=a;e++){if(n.some(e=>e(t)))return!0;t=r.addDays(t,1)}}return!1}function Aa(e,t){const{disabled:r,excludeDisabled:a,selected:n,required:o,onSelect:s}=e,[i,l]=Sa(n,s?n:void 0),d=s?n:i;return{selected:d,select:(n,i,c)=>{const{min:u,max:h}=e,m=n?function(e,t,r=0,a=0,n=!1,o=Vr){const{from:s,to:i}=t||{},{isSameDay:l,isAfter:d,isBefore:c}=o;let u;if(s||i){if(s&&!i)u=l(s,e)?n?{from:s,to:void 0}:void 0:c(e,s)?{from:e,to:s}:{from:s,to:e};else if(s&&i)if(l(s,e)&&l(i,e))u=n?{from:s,to:i}:void 0;else if(l(s,e))u={from:s,to:r>0?void 0:e};else if(l(i,e))u={from:e,to:r>0?void 0:e};else if(c(e,s))u={from:e,to:i};else if(d(e,s))u={from:s,to:e};else{if(!d(e,i))throw new Error("Invalid range");u={from:s,to:e}}}else u={from:e,to:r>0?void 0:e};if((null==u?void 0:u.from)&&(null==u?void 0:u.to)){const t=o.differenceInCalendarDays(u.to,u.from);(a>0&&t>a||r>1&&t<r)&&(u={from:e,to:void 0})}return u}(n,d,u,h,o,t):void 0;return a&&r&&(null==m?void 0:m.from)&&m.to&&Ia({from:m.from,to:m.to},r,t)&&(m.from=n,m.to=void 0),s||l(m),null==s||s(m,n,i,c),m},isSelected:e=>d&&Qr(d,e,!1,t)}}function Pa(e,t){const r=function(e,t){const{selected:r,required:a,onSelect:n}=e,[o,s]=Sa(r,n?r:void 0),i=n?r:o,{isSameDay:l}=t;return{selected:i,select:(e,t,r)=>{let o=e;return!a&&i&&i&&l(e,i)&&(o=void 0),n||s(o),null==n||n(o,e,t,r),o},isSelected:e=>!!i&&l(i,e)}}(e,t),a=function(e,t){const{selected:r,required:a,onSelect:n}=e,[o,s]=Sa(r,n?r:void 0),i=n?r:o,{isSameDay:l}=t,d=e=>(null==i?void 0:i.some(t=>l(t,e)))??!1,{min:c,max:u}=e;return{selected:i,select:(e,t,r)=>{let o=[...i??[]];if(d(e)){if((null==i?void 0:i.length)===c)return;if(a&&1===(null==i?void 0:i.length))return;o=null==i?void 0:i.filter(t=>!l(t,e))}else o=(null==i?void 0:i.length)===u?[e]:[...o,e];return n||s(o),null==n||n(o,e,t,r),o},isSelected:d}}(e,t),n=Aa(e,t);switch(e.mode){case"single":return r;case"multiple":return a;case"range":return n;default:return}}function Wa(e){var t;let r=e;r.timeZone&&(r={...e},r.today&&(r.today=new At(r.today,r.timeZone)),r.month&&(r.month=new At(r.month,r.timeZone)),r.defaultMonth&&(r.defaultMonth=new At(r.defaultMonth,r.timeZone)),r.startMonth&&(r.startMonth=new At(r.startMonth,r.timeZone)),r.endMonth&&(r.endMonth=new At(r.endMonth,r.timeZone)),"single"===r.mode&&r.selected?r.selected=new At(r.selected,r.timeZone):"multiple"===r.mode&&r.selected?r.selected=null==(t=r.selected)?void 0:t.map(e=>new At(e,r.timeZone)):"range"===r.mode&&r.selected&&(r.selected={from:r.selected.from?new At(r.selected.from,r.timeZone):void 0,to:r.selected.to?new At(r.selected.to,r.timeZone):void 0}));const{components:a,formatters:n,labels:o,dateLib:s,locale:i,classNames:l}=D.useMemo(()=>{const e={...pr,...r.locale};return{dateLib:new Zr({locale:e,weekStartsOn:r.broadcastCalendar?1:r.weekStartsOn,firstWeekContainsDate:r.firstWeekContainsDate,useAdditionalWeekYearTokens:r.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:r.useAdditionalDayOfYearTokens,timeZone:r.timeZone,numerals:r.numerals},r.dateLib),components:(a=r.components,{...la,...a}),formatters:(t=r.formatters,(null==t?void 0:t.formatMonthCaption)&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),(null==t?void 0:t.formatYearCaption)&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...fa,...t}),labels:{...ya,...r.labels},locale:e,classNames:{...da(),...r.classNames}};var t,a},[r.locale,r.broadcastCalendar,r.weekStartsOn,r.firstWeekContainsDate,r.useAdditionalWeekYearTokens,r.useAdditionalDayOfYearTokens,r.timeZone,r.numerals,r.dateLib,r.components,r.formatters,r.labels,r.classNames]),{captionLayout:d,mode:c,navLayout:u,numberOfMonths:h=1,onDayBlur:m,onDayClick:f,onDayFocus:g,onDayKeyDown:p,onDayMouseEnter:b,onDayMouseLeave:x,onNextClick:y,onPrevClick:w,showWeekNumber:v,styles:k}=r,{formatCaption:N,formatDay:j,formatMonthDropdown:M,formatWeekNumber:E,formatWeekNumberHeader:C,formatWeekdayName:T,formatYearDropdown:O}=n,_=Ma(r,s),{days:R,months:I,navStart:A,navEnd:P,previousMonth:W,nextMonth:L,goToMonth:F}=_,B=function(e,t,r,a,n){const{disabled:o,hidden:s,modifiers:i,showOutsideDays:l,broadcastCalendar:d,today:c}=t,{isSameDay:u,isSameMonth:h,startOfMonth:m,isBefore:f,endOfMonth:g,isAfter:p}=n,b=r&&m(r),x=a&&g(a),y={[Lt.focused]:[],[Lt.outside]:[],[Lt.disabled]:[],[Lt.hidden]:[],[Lt.today]:[]},w={};for(const v of e){const{date:e,displayMonth:t}=v,r=Boolean(t&&!h(e,t)),a=Boolean(b&&f(e,b)),m=Boolean(x&&p(e,x)),g=Boolean(o&&oa(e,o,n)),k=Boolean(s&&oa(e,s,n))||a||m||!d&&!l&&r||d&&!1===l&&r,D=u(e,c??n.today());r&&y.outside.push(v),g&&y.disabled.push(v),k&&y.hidden.push(v),D&&y.today.push(v),i&&Object.keys(i).forEach(t=>{const r=null==i?void 0:i[t];r&&oa(e,r,n)&&(w[t]?w[t].push(v):w[t]=[v])})}return e=>{const t={[Lt.focused]:!1,[Lt.disabled]:!1,[Lt.hidden]:!1,[Lt.outside]:!1,[Lt.today]:!1},r={};for(const a in y){const r=y[a];t[a]=r.some(t=>t===e)}for(const a in w)r[a]=w[a].some(t=>t===e);return{...t,...r}}}(R,r,A,P,s),{isSelected:$,select:Y,selected:z}=Pa(r,s)??{},{blur:H,focused:G,isFocusTarget:U,moveFocus:Z,setFocused:V}=_a(r,_,B,$??(()=>!1),s),{labelDayButton:q,labelGridcell:X,labelGrid:K,labelMonthDropdown:Q,labelNav:J,labelPrevious:ee,labelNext:te,labelWeekday:re,labelWeekNumber:ae,labelWeekNumberHeader:ne,labelYearDropdown:oe}=o,se=D.useMemo(()=>function(e,t){const r=e.today(),a=t?e.startOfISOWeek(r):e.startOfWeek(r),n=[];for(let o=0;o<7;o++){const t=e.addDays(a,o);n.push(t)}return n}(s,r.ISOWeek),[s,r.ISOWeek]),ie=void 0!==c||void 0!==f,le=D.useCallback(()=>{W&&(F(W),null==w||w(W))},[W,F,w]),de=D.useCallback(()=>{L&&(F(L),null==y||y(L))},[F,L,y]),ce=D.useCallback((e,t)=>r=>{r.preventDefault(),r.stopPropagation(),V(e),null==Y||Y(e.date,t,r),null==f||f(e.date,t,r)},[Y,f,V]),ue=D.useCallback((e,t)=>r=>{V(e),null==g||g(e.date,t,r)},[g,V]),he=D.useCallback((e,t)=>r=>{H(),null==m||m(e.date,t,r)},[H,m]),me=D.useCallback((e,t)=>a=>{const n={ArrowLeft:[a.shiftKey?"month":"day","rtl"===r.dir?"after":"before"],ArrowRight:[a.shiftKey?"month":"day","rtl"===r.dir?"before":"after"],ArrowDown:[a.shiftKey?"year":"week","after"],ArrowUp:[a.shiftKey?"year":"week","before"],PageUp:[a.shiftKey?"year":"month","before"],PageDown:[a.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(n[a.key]){a.preventDefault(),a.stopPropagation();const[e,t]=n[a.key];Z(e,t)}null==p||p(e.date,t,a)},[Z,p,r.dir]),fe=D.useCallback((e,t)=>r=>{null==b||b(e.date,t,r)},[b]),ge=D.useCallback((e,t)=>r=>{null==x||x(e.date,t,r)},[x]),pe=D.useCallback(e=>t=>{const r=Number(t.target.value),a=s.setMonth(s.startOfMonth(e),r);F(a)},[s,F]),be=D.useCallback(e=>t=>{const r=Number(t.target.value),a=s.setYear(s.startOfMonth(e),r);F(a)},[s,F]),{className:xe,style:ye}=D.useMemo(()=>({className:[l[Pt.Root],r.className].filter(Boolean).join(" "),style:{...null==k?void 0:k[Pt.Root],...r.style}}),[l,r.className,r.style,k]),we=function(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([e,r])=>{e.startsWith("data-")&&(t[e]=r)}),t}(r),ve=D.useRef(null);Na(ve,Boolean(r.animate),{classNames:l,months:I,focused:G,dateLib:s});const ke={dayPickerProps:r,selected:z,select:Y,isSelected:$,months:I,nextMonth:L,previousMonth:W,goToMonth:F,getModifiers:B,components:a,classNames:l,styles:k,labels:o,formatters:n};return S.createElement(sa.Provider,{value:ke},S.createElement(a.Root,{rootRef:r.animate?ve:void 0,className:xe,style:ye,dir:r.dir,id:r.id,lang:r.lang,nonce:r.nonce,title:r.title,role:r.role,"aria-label":r["aria-label"],...we},S.createElement(a.Months,{className:l[Pt.Months],style:null==k?void 0:k[Pt.Months]},!r.hideNavigation&&!u&&S.createElement(a.Nav,{"data-animated-nav":r.animate?"true":void 0,className:l[Pt.Nav],style:null==k?void 0:k[Pt.Nav],"aria-label":J(),onPreviousClick:le,onNextClick:de,previousMonth:W,nextMonth:L}),I.map((e,t)=>{const o=function(e,t,r,a,n){const{startOfMonth:o,startOfYear:s,endOfYear:i,eachMonthOfInterval:l,getMonth:d}=n;return l({start:s(e),end:i(e)}).map(e=>{const s=a.formatMonthDropdown(e,n);return{value:d(e),label:s,disabled:t&&e<o(t)||r&&e>o(r)||!1}})}(e.date,A,P,n,s),m=function(e,t,r,a){if(!e)return;if(!t)return;const{startOfYear:n,endOfYear:o,addYears:s,getYear:i,isBefore:l,isSameYear:d}=a,c=n(e),u=o(t),h=[];let m=c;for(;l(m,u)||d(m,u);)h.push(m),m=s(m,1);return h.map(e=>{const t=r.formatYearDropdown(e,a);return{value:i(e),label:t,disabled:!1}})}(A,P,n,s);return S.createElement(a.Month,{"data-animated-month":r.animate?"true":void 0,className:l[Pt.Month],style:null==k?void 0:k[Pt.Month],key:t,displayIndex:t,calendarMonth:e},"around"===u&&!r.hideNavigation&&0===t&&S.createElement(a.PreviousMonthButton,{type:"button",className:l[Pt.PreviousMonthButton],tabIndex:W?void 0:-1,"aria-disabled":!W||void 0,"aria-label":ee(W),onClick:le,"data-animated-button":r.animate?"true":void 0},S.createElement(a.Chevron,{disabled:!W||void 0,className:l[Pt.Chevron],orientation:"rtl"===r.dir?"right":"left"})),S.createElement(a.MonthCaption,{"data-animated-caption":r.animate?"true":void 0,className:l[Pt.MonthCaption],style:null==k?void 0:k[Pt.MonthCaption],calendarMonth:e,displayIndex:t},(null==d?void 0:d.startsWith("dropdown"))?S.createElement(a.DropdownNav,{className:l[Pt.Dropdowns],style:null==k?void 0:k[Pt.Dropdowns]},"dropdown"===d||"dropdown-months"===d?S.createElement(a.MonthsDropdown,{className:l[Pt.MonthsDropdown],"aria-label":Q(),classNames:l,components:a,disabled:Boolean(r.disableNavigation),onChange:pe(e.date),options:o,style:null==k?void 0:k[Pt.Dropdown],value:s.getMonth(e.date)}):S.createElement("span",null,M(e.date,s)),"dropdown"===d||"dropdown-years"===d?S.createElement(a.YearsDropdown,{className:l[Pt.YearsDropdown],"aria-label":oe(s.options),classNames:l,components:a,disabled:Boolean(r.disableNavigation),onChange:be(e.date),options:m,style:null==k?void 0:k[Pt.Dropdown],value:s.getYear(e.date)}):S.createElement("span",null,O(e.date,s)),S.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},N(e.date,s.options,s))):S.createElement(a.CaptionLabel,{className:l[Pt.CaptionLabel],role:"status","aria-live":"polite"},N(e.date,s.options,s))),"around"===u&&!r.hideNavigation&&t===h-1&&S.createElement(a.NextMonthButton,{type:"button",className:l[Pt.NextMonthButton],tabIndex:L?void 0:-1,"aria-disabled":!L||void 0,"aria-label":te(L),onClick:de,"data-animated-button":r.animate?"true":void 0},S.createElement(a.Chevron,{disabled:!L||void 0,className:l[Pt.Chevron],orientation:"rtl"===r.dir?"left":"right"})),t===h-1&&"after"===u&&!r.hideNavigation&&S.createElement(a.Nav,{"data-animated-nav":r.animate?"true":void 0,className:l[Pt.Nav],style:null==k?void 0:k[Pt.Nav],"aria-label":J(),onPreviousClick:le,onNextClick:de,previousMonth:W,nextMonth:L}),S.createElement(a.MonthGrid,{role:"grid","aria-multiselectable":"multiple"===c||"range"===c,"aria-label":K(e.date,s.options,s)||void 0,className:l[Pt.MonthGrid],style:null==k?void 0:k[Pt.MonthGrid]},!r.hideWeekdays&&S.createElement(a.Weekdays,{"data-animated-weekdays":r.animate?"true":void 0,className:l[Pt.Weekdays],style:null==k?void 0:k[Pt.Weekdays]},v&&S.createElement(a.WeekNumberHeader,{"aria-label":ne(s.options),className:l[Pt.WeekNumberHeader],style:null==k?void 0:k[Pt.WeekNumberHeader],scope:"col"},C()),se.map((e,t)=>S.createElement(a.Weekday,{"aria-label":re(e,s.options,s),className:l[Pt.Weekday],key:t,style:null==k?void 0:k[Pt.Weekday],scope:"col"},T(e,s.options,s)))),S.createElement(a.Weeks,{"data-animated-weeks":r.animate?"true":void 0,className:l[Pt.Weeks],style:null==k?void 0:k[Pt.Weeks]},e.weeks.map((e,t)=>S.createElement(a.Week,{className:l[Pt.Week],key:e.weekNumber,style:null==k?void 0:k[Pt.Week],week:e},v&&S.createElement(a.WeekNumber,{week:e,style:null==k?void 0:k[Pt.WeekNumber],"aria-label":ae(e.weekNumber,{locale:i}),className:l[Pt.WeekNumber],scope:"row",role:"rowheader"},E(e.weekNumber,s)),e.days.map(e=>{const{date:t}=e,n=B(e);if(n[Lt.focused]=!n.hidden&&Boolean(null==G?void 0:G.isEqualTo(e)),n[Bt.selected]=(null==$?void 0:$(t))||n.selected,ea(z)){const{from:e,to:r}=z;n[Bt.range_start]=Boolean(e&&r&&s.isSameDay(t,e)),n[Bt.range_end]=Boolean(e&&r&&s.isSameDay(t,r)),n[Bt.range_middle]=Qr(z,t,!0,s)}const o=function(e,t={},r={}){let a={...null==t?void 0:t[Pt.Day]};return Object.entries(e).filter(([,e])=>!0===e).forEach(([e])=>{a={...a,...null==r?void 0:r[e]}}),a}(n,k,r.modifiersStyles),i=function(e,t,r={}){return Object.entries(e).filter(([,e])=>!0===e).reduce((e,[a])=>(r[a]?e.push(r[a]):t[Lt[a]]?e.push(t[Lt[a]]):t[Bt[a]]&&e.push(t[Bt[a]]),e),[t[Pt.Day]])}(n,l,r.modifiersClassNames),d=ie||n.hidden?void 0:X(t,n,s.options,s);return S.createElement(a.Day,{key:`${s.format(t,"yyyy-MM-dd")}_${s.format(e.displayMonth,"yyyy-MM")}`,day:e,modifiers:n,className:i.join(" "),style:o,role:"gridcell","aria-selected":n.selected||void 0,"aria-label":d,"data-day":s.format(t,"yyyy-MM-dd"),"data-month":e.outside?s.format(t,"yyyy-MM"):void 0,"data-selected":n.selected||void 0,"data-disabled":n.disabled||void 0,"data-hidden":n.hidden||void 0,"data-outside":e.outside||void 0,"data-focused":n.focused||void 0,"data-today":n.today||void 0},!n.hidden&&ie?S.createElement(a.DayButton,{className:l[Pt.DayButton],style:null==k?void 0:k[Pt.DayButton],type:"button",day:e,modifiers:n,disabled:n.disabled||void 0,tabIndex:U(e)?0:-1,"aria-label":q(t,n,s.options,s),onClick:ce(e,n),onBlur:he(e,n),onFocus:ue(e,n),onKeyDown:me(e,n),onMouseEnter:fe(e,n),onMouseLeave:ge(e,n)},j(t,s.options,s)):!n.hidden&&j(e.date,s.options,s))}))))))})),r.footer&&S.createElement(a.Footer,{className:l[Pt.Footer],style:null==k?void 0:k[Pt.Footer],role:"status","aria-live":"polite"},r.footer)))}(Ca=Ea||(Ea={}))[Ca.Today=0]="Today",Ca[Ca.Selected=1]="Selected",Ca[Ca.LastFocused=2]="LastFocused",Ca[Ca.FocusedModifier=3]="FocusedModifier";const La={lessThanXSeconds:{one:"1秒未満",other:"{{count}}秒未満",oneWithSuffix:"約1秒",otherWithSuffix:"約{{count}}秒"},xSeconds:{one:"1秒",other:"{{count}}秒"},halfAMinute:"30秒",lessThanXMinutes:{one:"1分未満",other:"{{count}}分未満",oneWithSuffix:"約1分",otherWithSuffix:"約{{count}}分"},xMinutes:{one:"1分",other:"{{count}}分"},aboutXHours:{one:"約1時間",other:"約{{count}}時間"},xHours:{one:"1時間",other:"{{count}}時間"},xDays:{one:"1日",other:"{{count}}日"},aboutXWeeks:{one:"約1週間",other:"約{{count}}週間"},xWeeks:{one:"1週間",other:"{{count}}週間"},aboutXMonths:{one:"約1か月",other:"約{{count}}か月"},xMonths:{one:"1か月",other:"{{count}}か月"},aboutXYears:{one:"約1年",other:"約{{count}}年"},xYears:{one:"1年",other:"{{count}}年"},overXYears:{one:"1年以上",other:"{{count}}年以上"},almostXYears:{one:"1年近く",other:"{{count}}年近く"}},Fa={date:cr({formats:{full:"y年M月d日EEEE",long:"y年M月d日",medium:"y/MM/dd",short:"y/MM/dd"},defaultWidth:"full"}),time:cr({formats:{full:"H時mm分ss秒 zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:cr({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},Ba={lastWeek:"先週のeeeeのp",yesterday:"昨日のp",today:"今日のp",tomorrow:"明日のp",nextWeek:"翌週のeeeeのp",other:"P"},$a={code:"ja",formatDistance:(e,t,r)=>{let a;r=r||{};const n=La[e];return a="string"==typeof n?n:1===t?r.addSuffix&&n.oneWithSuffix?n.oneWithSuffix:n.one:r.addSuffix&&n.otherWithSuffix?n.otherWithSuffix.replace("{{count}}",String(t)):n.other.replace("{{count}}",String(t)),r.addSuffix?r.comparison&&r.comparison>0?a+"後":a+"前":a},formatLong:Fa,formatRelative:(e,t,r,a)=>Ba[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e);switch(String(null==t?void 0:t.unit)){case"year":return`${r}年`;case"quarter":return`第${r}四半期`;case"month":return`${r}月`;case"week":return`第${r}週`;case"date":return`${r}日`;case"hour":return`${r}時`;case"minute":return`${r}分`;case"second":return`${r}秒`;default:return`${r}`}},era:mr({values:{narrow:["BC","AC"],abbreviated:["紀元前","西暦"],wide:["紀元前","西暦"]},defaultWidth:"wide"}),quarter:mr({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["第1四半期","第2四半期","第3四半期","第4四半期"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:mr({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},defaultWidth:"wide"}),day:mr({values:{narrow:["日","月","火","水","木","金","土"],short:["日","月","火","水","木","金","土"],abbreviated:["日","月","火","水","木","金","土"],wide:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]},defaultWidth:"wide"}),dayPeriod:mr({values:{narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},defaultWidth:"wide",formattingValues:{narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:gr({matchPattern:/^第?\d+(年|四半期|月|週|日|時|分|秒)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:fr({matchPatterns:{narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^(紀元[前後]|西暦)/i,wide:/^(紀元[前後]|西暦)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^B/i,/^A/i],any:[/^(紀元前)/i,/^(西暦|紀元後)/i]},defaultParseWidth:"any"}),quarter:fr({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^第[1234一二三四１２３４]四半期/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1|一|１)/i,/(2|二|２)/i,/(3|三|３)/i,/(4|四|４)/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:fr({matchPatterns:{narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])月/i,wide:/^([123456789]|1[012])月/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:fr({matchPatterns:{narrow:/^[日月火水木金土]/,short:/^[日月火水木金土]/,abbreviated:/^[日月火水木金土]/,wide:/^[日月火水木金土]曜日/},defaultMatchWidth:"wide",parsePatterns:{any:[/^日/,/^月/,/^火/,/^水/,/^木/,/^金/,/^土/]},defaultParseWidth:"any"}),dayPeriod:fr({matchPatterns:{any:/^(AM|PM|午前|午後|正午|深夜|真夜中|夜|朝)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(A|午前)/i,pm:/^(P|午後)/i,midnight:/^深夜|真夜中/i,noon:/^正午/i,morning:/^朝/i,afternoon:/^午後/i,evening:/^夜/i,night:/^深夜/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},Ya=D.memo(({isOpen:e,onClose:t,selectedDate:a,onSelect:n,onCenterScroll:o,isRecorded:s})=>{if(!e)return null;return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",role:"dialog","aria-modal":"true",onClick:e=>{e.target===e.currentTarget&&t()},children:r.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 pt-8 p-4 sm:pt-10 sm:p-6 w-[95vw] max-w-md relative",onClick:e=>e.stopPropagation(),children:[r.jsx("button",{type:"button",onClick:t,className:"absolute top-0 right-0 m-2 text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 bg-transparent shadow-none border-none rounded-full transition-colors focus:outline-none hover:bg-gray-200/60 dark:hover:bg-white/10","aria-label":"閉じる",children:r.jsx("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:r.jsx("path",{stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6l12 12M6 18L18 6"})})}),r.jsx(Wa,{mode:"single",selected:a,locale:$a,weekStartsOn:0,onSelect:e=>{e&&(n(e),o(),t())},formatters:{formatCaption:e=>`${e.getFullYear()}年${e.getMonth()+1}月`},modifiers:{recorded:e=>!!s&&s(e),today:e=>{const t=new Date;return e.toDateString()===t.toDateString()}},modifiersClassNames:{recorded:"relative after:absolute after:bottom-0.5 after:left-1/2 after:-translate-x-1/2 after:w-1.5 after:h-1.5 after:bg-green-500 after:rounded-full",today:"ring-2 ring-blue-400 ring-offset-1"},classNames:{...da(),root:`${da().root} dark:text-gray-100`,caption_label:`${da().caption_label} text-lg font-medium text-gray-900 dark:text-gray-100`,nav:`${da().nav||""} border border-gray-200 dark:border-gray-700 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800`,day:`${da().day} hover:bg-blue-50 dark:hover:bg-blue-900/30`,selected:`${da().selected||""} bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg hover:from-blue-600 hover:to-blue-700 dark:from-blue-400 dark:to-blue-500`,today:`${da().today||""} bg-gradient-to-br from-gray-100 to-gray-200 text-gray-900 dark:from-gray-700 dark:to-gray-800 dark:text-gray-100 font-semibold`,outside:`${da().outside||""} text-gray-400 opacity-50 dark:text-gray-600`,disabled:`${da().disabled||""} text-gray-400 opacity-50 dark:text-gray-600`},components:{Chevron:({orientation:e,...t})=>"left"===e?r.jsx("span",{className:"text-2xl text-blue-500 dark:text-blue-300",...t,children:"◀"}):r.jsx("span",{className:"text-2xl text-blue-500 dark:text-blue-300",...t,children:"▶"})}})]})})},(e,t)=>e.isOpen===t.isOpen&&e.selectedDate.getTime()===t.selectedDate.getTime()&&e.onClose===t.onClose&&e.onSelect===t.onSelect&&e.onCenterScroll===t.onCenterScroll&&e.isRecorded===t.isRecorded),za=e=>{const{selectedDate:t,isRecorded:a}=e,[n,o]=D.useState(!1),{dateItems:s,scrollRef:i,touchRef:l,handleDateSelect:d,handleCalendarSelect:c}=Dt(e),u=D.useCallback(()=>o(!0),[]),h=D.useCallback(()=>o(!1),[]);return r.jsxs("div",{"data-testid":"date-picker",children:[r.jsxs("div",{ref:l,className:"w-full flex items-center justify-center pt-2 pb-2 bg-white/80 dark:bg-gray-900/80 shadow-md sticky top-0 z-10",children:[r.jsx("button",{type:"button",onClick:u,className:"ml-2 mr-1 flex items-center justify-center w-12 h-12 rounded-full border-2 border-blue-400 bg-white dark:bg-gray-800 hover:bg-blue-100 dark:hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"カレンダーを開く",children:r.jsx(Ie,{className:"w-7 h-7 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{ref:i,className:"flex-1 flex gap-1 mx-1 overflow-x-auto justify-center scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollSnapType:"x mandatory",WebkitOverflowScrolling:"touch"},children:[r.jsx("style",{children:"\n            .scrollbar-hide::-webkit-scrollbar, \n            .scrollbar-none::-webkit-scrollbar, \n            .scrollbar-fake::-webkit-scrollbar {\n              display: none !important;\n            }\n          "}),s.map(e=>r.jsxs(S.Fragment,{children:[e.showMonth&&r.jsx(jt,{date:e.date}),r.jsx(Nt,{dateItem:e,onSelect:d})]},`${e.date.getTime()}`))]})]}),r.jsx(Ya,{isOpen:n,onClose:h,selectedDate:t,onSelect:c,onCenterScroll:()=>{},isRecorded:a})]})},Ha=D.memo(function({value:e,onChange:t,placeholder:a,step:n="0.1",min:o,max:s,width:i="md",className:l="",disabled:d=!1,"data-testid":c}){const u=((e="md")=>{switch(e){case"sm":return"w-16";case"md":default:return"w-20";case"lg":return"w-24"}})(i);return r.jsx("input",{type:"number",className:`h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-lg font-mono font-semibold bg-inherit text-gray-700 dark:text-gray-200 placeholder:font-normal placeholder:text-sm placeholder-gray-400 ${u} ${l}`,value:e,onChange:e=>t(e.target.value),placeholder:a,step:n,min:o,max:s,disabled:d,"data-testid":c})});function Ga(e){return R({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"},child:[]}]})(e)}function Ua(e){return R({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 2v11h3v9l7-12h-4l4-8z"},child:[]}]})(e)}function Za(e){return R({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 17h1m16 0h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7m-9.7 5.7a4 4 0 0 1 8 0"},child:[]},{tag:"path",attr:{d:"M3 21l18 0"},child:[]},{tag:"path",attr:{d:"M12 9v-6l3 3m-6 0l3 -3"},child:[]}]})(e)}const Va=D.memo(function({value:e,onChange:t,className:a=""}){return r.jsxs("div",{className:`flex gap-2 ${a}`,children:[r.jsx("input",{type:"time",className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-base bg-inherit text-gray-700 dark:text-gray-200 w-[6.5em]",value:e,onChange:e=>t(e.target.value)}),r.jsx("button",{type:"button",className:"h-10 px-3 rounded-xl bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-300/20 dark:hover:bg-yellow-300/40 border border-yellow-300 text-yellow-500 dark:text-yellow-200 focus:outline-none focus:ring-2 focus:ring-yellow-400 shadow flex items-center justify-center transition-colors duration-150",title:"朝7時にセット","aria-label":"朝7時にセット",onClick:()=>{t("07:00")},children:r.jsx(Za,{className:"w-6 h-6"})}),r.jsx("button",{type:"button",className:"h-10 px-3 rounded-xl bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-300/20 dark:hover:bg-yellow-300/40 border border-yellow-300 text-yellow-500 dark:text-yellow-200 focus:outline-none focus:ring-2 focus:ring-yellow-400 shadow flex items-center justify-center transition-colors duration-150",title:"現在時刻にセット","aria-label":"現在時刻にセット",onClick:()=>{t((()=>{const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`})())},children:r.jsx(Ua,{className:"w-6 h-6"})})]})}),qa={NAME:"aloe-wellness-log",VERSION:4,RETRY_ATTEMPTS:3,RETRY_DELAY:1e3,TRANSACTION_TIMEOUT:3e4},Xa={GOAL:"goal",WEIGHT_RECORDS:"weight_records",BP_RECORDS:"bp_records",DAILY_RECORDS:"daily_records",DAILY_FIELDS:"daily_fields"},Ka=[{name:Xa.GOAL,keyPath:"id"},{name:Xa.WEIGHT_RECORDS,keyPath:"id",indexes:[{name:"dateIndex",keyPath:"date",options:{unique:!1}},{name:"excludeFromGraphIndex",keyPath:"excludeFromGraph",options:{unique:!1}}]},{name:Xa.BP_RECORDS,keyPath:"id",indexes:[{name:"dateIndex",keyPath:"date",options:{unique:!1}},{name:"fieldIdIndex",keyPath:"fieldId",options:{unique:!1}},{name:"excludeFromGraphIndex",keyPath:"excludeFromGraph",options:{unique:!1}}]},{name:Xa.DAILY_RECORDS,keyPath:"id"},{name:Xa.DAILY_FIELDS,keyPath:"fieldId"}],Qa=Object.freeze(Object.defineProperty({__proto__:null,DATABASE_CONFIG:qa,STORE_CONFIGS:Ka,STORE_NAMES:Xa},Symbol.toStringTag,{value:"Module"}));var Ja=(e=>(e.CONNECTION_FAILED="connection_failed",e.TRANSACTION_FAILED="transaction_failed",e.DATA_CORRUPTED="data_corrupted",e.QUOTA_EXCEEDED="quota_exceeded",e.VERSION_ERROR="version_error",e.UNKNOWN="unknown",e))(Ja||{});class en extends Error{constructor(e,t,r,a=!0){super(t),this.type=e,this.originalError=r,this.retryable=a,this.name="DbError"}toJSON(){return{name:this.name,type:this.type,message:this.message,retryable:this.retryable,originalError:this.originalError}}getUserFriendlyMessage(){switch(this.type){case"connection_failed":return"データベースへの接続に失敗しました。ページを再読み込みしてください。";case"quota_exceeded":return"ストレージ容量が不足しています。不要なデータを削除してください。";case"version_error":return"データベースのバージョンが競合しています。他のタブを閉じて再試行してください。";case"data_corrupted":return"データが破損しています。サポートにお問い合わせください。";case"transaction_failed":return"データベース操作が失敗しました。しばらく待ってから再試行してください。";default:return"データベースエラーが発生しました。しばらく待ってから再試行してください。"}}}function tn(e){if(e instanceof en)return e;if(e instanceof DOMException)switch(e.name){case"QuotaExceededError":return new en("quota_exceeded","ストレージ容量が不足しています",e,!1);case"VersionError":return new en("version_error","データベースのバージョンが競合しています",e,!1);case"InvalidStateError":case"TransactionInactiveError":return new en("transaction_failed","データベーストランザクションが失敗しました",e);case"DataError":case"ConstraintError":return new en("data_corrupted","データが破損しているか、制約違反です",e,!1);default:return new en("unknown",`データベースエラー: ${e.message}`,e)}return e instanceof Error?new en("connection_failed",`データベース接続に失敗しました: ${e.message}`,e):new en("unknown","予期しないエラーが発生しました",e)}function rn(e){return e instanceof en?e.retryable:!(e instanceof DOMException&&["QuotaExceededError","VersionError","DataError","ConstraintError"].includes(e.name))}const an=class e{constructor(){t(this,"dbInstance",null),t(this,"connectionPromise",null)}static getInstance(){return e.instance||(e.instance=new e),e.instance}async getConnection(){if(this.dbInstance&&this.dbInstance.objectStoreNames.length>0)return this.dbInstance;if(this.connectionPromise)return this.connectionPromise;this.connectionPromise=this.createConnection();try{return this.dbInstance=await this.connectionPromise,this.dbInstance}catch(e){throw this.connectionPromise=null,e}}async createConnection(){return this.withRetry(async()=>new Promise((e,t)=>{try{const r=indexedDB.open(qa.NAME,qa.VERSION);r.onupgradeneeded=e=>{const t=e.target.result;this.upgradeDatabase(t,e.oldVersion,e.newVersion||qa.VERSION)},r.onsuccess=()=>{const t=r.result;t.onerror=e=>{},t.onclose=()=>{this.dbInstance=null,this.connectionPromise=null},e(t)},r.onerror=()=>{t(new en(Ja.CONNECTION_FAILED,"データベースを開けませんでした",r.error))},r.onblocked=()=>{t(new en(Ja.CONNECTION_FAILED,"データベースが他のタブによってブロックされています",void 0,!1))}}catch(r){t(tn(r))}}))}upgradeDatabase(e,t,r){Ka.forEach(t=>{let r;if(e.objectStoreNames.contains(t.name)){const a=e.transaction([t.name],"versionchange");r=a.objectStore(t.name)}else r=e.createObjectStore(t.name,{keyPath:t.keyPath,autoIncrement:t.autoIncrement||!1});t.indexes&&t.indexes.forEach(e=>{r.indexNames.contains(e.name)||r.createIndex(e.name,e.keyPath,e.options)})})}async executeTransaction(e,t,r){return this.withRetry(async()=>{const a=await this.getConnection();return new Promise((n,o)=>{try{const s=a.transaction(e,t),i=setTimeout(()=>{s.abort(),o(new en(Ja.TRANSACTION_FAILED,"トランザクションがタイムアウトしました"))},qa.TRANSACTION_TIMEOUT);s.oncomplete=()=>{clearTimeout(i)},s.onerror=()=>{clearTimeout(i),o(tn(s.error))},s.onabort=()=>{clearTimeout(i),o(new en(Ja.TRANSACTION_FAILED,"トランザクションが中断されました"))};const l=Array.isArray(e)?e.map(e=>s.objectStore(e)):s.objectStore(e);r(s,l).then(n).catch(o)}catch(s){o(tn(s))}})})}async withRetry(e,t=qa.RETRY_ATTEMPTS,r=qa.RETRY_DELAY){let a;for(let o=1;o<=t;o++)try{return await e()}catch(n){if(a=tn(n),!rn(a))throw a;if(o===t)throw a;await new Promise(e=>setTimeout(e,r*Math.pow(2,o-1)))}throw a}close(){this.dbInstance&&(this.dbInstance.close(),this.dbInstance=null),this.connectionPromise=null}isConnected(){return null!==this.dbInstance&&this.dbInstance.objectStoreNames.length>0}getDatabaseInfo(){return this.dbInstance?{name:this.dbInstance.name,version:this.dbInstance.version,stores:Array.from(this.dbInstance.objectStoreNames),connected:this.isConnected()}:null}};t(an,"instance");let nn=an;const on=nn.getInstance(),sn=(e,t,r)=>on.executeTransaction(e,t,r),ln=Object.freeze(Object.defineProperty({__proto__:null,DatabaseConnectionManager:nn,dbConnection:on,executeTransaction:sn},Symbol.toStringTag,{value:"Module"})),dn=!1,cn={enableRenderTracking:!0,enableMemoryTracking:!0,enableInteractionTracking:!0,enableDatabaseTracking:!0,sampleRate:.1,reportInterval:3e4};const un=new class{constructor(e=cn){t(this,"metrics",[]),t(this,"maxMetrics",1e3),t(this,"config"),this.config=e}addMetric(e){Math.random()>this.config.sampleRate||(this.metrics.push({...e,timestamp:Date.now()}),this.metrics.length>this.maxMetrics&&(this.metrics=this.metrics.slice(-this.maxMetrics)))}getMetrics(){return[...this.metrics]}getAverageMetrics(e=3e5){const t=Date.now(),r=this.metrics.filter(r=>r.timestamp>t-e);if(0===r.length)return{};const a=r.reduce((e,t)=>({renderTime:e.renderTime+t.renderTime,componentCount:e.componentCount+t.componentCount,reRenderCount:e.reRenderCount+t.reRenderCount,loadTime:e.loadTime+t.loadTime,interactionToNext:e.interactionToNext+t.interactionToNext,inputDelay:e.inputDelay+t.inputDelay,dbOperationTime:e.dbOperationTime+t.dbOperationTime,recordCount:e.recordCount+t.recordCount}),{renderTime:0,componentCount:0,reRenderCount:0,loadTime:0,interactionToNext:0,inputDelay:0,dbOperationTime:0,recordCount:0}),n=r.length;return{renderTime:a.renderTime/n,componentCount:a.componentCount/n,reRenderCount:a.reRenderCount/n,loadTime:a.loadTime/n,interactionToNext:a.interactionToNext/n,inputDelay:a.inputDelay/n,dbOperationTime:a.dbOperationTime/n,recordCount:a.recordCount/n}}clearMetrics(){this.metrics=[]}};class hn{constructor(){t(this,"renderStartTimes",new Map),t(this,"componentCounts",new Map),t(this,"reRenderCounts",new Map)}startRender(e){}endRender(e){}trackReRender(e,t){}getStats(){const e={};for(const[t,r]of this.componentCounts)e[t]={count:r,reRenders:this.reRenderCounts.get(t)||0};return e}clearStats(){this.renderStartTimes.clear(),this.componentCounts.clear(),this.reRenderCounts.clear()}}class mn{constructor(){t(this,"lastMemoryCheck",0),t(this,"memoryCheckInterval",5e3)}getCurrentMemoryUsage(){try{if("undefined"!=typeof performance&&"memory"in performance){const e=performance.memory;if(e)return{used:Math.round(e.usedJSHeapSize/1024/1024),total:Math.round(e.totalJSHeapSize/1024/1024),limit:Math.round(e.jsHeapSizeLimit/1024/1024)}}}catch(e){}return null}checkMemoryUsage(){const e=Date.now();if(e-this.lastMemoryCheck<this.memoryCheckInterval)return;this.lastMemoryCheck=e;const t=this.getCurrentMemoryUsage();if(t){const e=t.used/t.limit*100;e>80&&(t.used,e.toFixed(1))}}startMemoryMonitoring(){}}class fn{constructor(){t(this,"operationStartTimes",new Map)}startOperation(e,t){this.operationStartTimes.set(e,performance.now())}endOperation(e,t,r){const a=this.operationStartTimes.get(e);if(a){const t=performance.now()-a;return this.operationStartTimes.delete(e),t>100&&t.toFixed(2),t.toFixed(2),t}return 0}}class gn{constructor(){t(this,"interactionStartTimes",new Map)}startInteraction(e){const t=`${e}-${Date.now()}`;return this.interactionStartTimes.set(t,performance.now()),t}endInteraction(e,t){const r=this.interactionStartTimes.get(e);if(r){const t=performance.now()-r;return this.interactionStartTimes.delete(e),t>100&&t.toFixed(2),t.toFixed(2),t}return 0}}const pn=new class{constructor(e=cn){t(this,"renderTracker",new hn),t(this,"memoryTracker",new mn),t(this,"dbTracker",new fn),t(this,"interactionTracker",new gn),t(this,"config"),t(this,"reportingInterval"),t(this,"trackRender",{start:e=>{this.config.enableRenderTracking&&this.renderTracker.startRender(e)},end:e=>{this.config.enableRenderTracking&&this.renderTracker.endRender(e)},reRender:(e,t)=>{this.config.enableRenderTracking&&this.renderTracker.trackReRender(e,t)}}),t(this,"trackDatabase",{start:(e,t)=>{this.config.enableDatabaseTracking&&this.dbTracker.startOperation(e,t)},end:(e,t,r)=>this.config.enableDatabaseTracking?this.dbTracker.endOperation(e,t,r):0}),t(this,"trackInteraction",{start:e=>this.config.enableInteractionTracking?this.interactionTracker.startInteraction(e):"",end:(e,t)=>this.config.enableInteractionTracking?this.interactionTracker.endInteraction(e,t):0}),this.config=e}startMonitoring(){this.config.enableMemoryTracking&&this.memoryTracker.startMemoryMonitoring()}stopMonitoring(){this.reportingInterval&&(clearInterval(this.reportingInterval),this.reportingInterval=void 0)}getMetrics(){return un.getMetrics()}clearMetrics(){un.clearMetrics(),this.renderTracker.clearStats()}updateConfig(e){this.config={...this.config,...e}}};async function bn(e,t,r){const a=function(e){const t=Date.now(),r=Math.random().toString(36).substr(2,9);return`${e}-${t}-${r}`}(e),n=performance.now();pn.trackDatabase.start(a,e);try{const n=await t();performance.now();return Date.now(),pn.trackDatabase.end(a,e,r),n}catch(o){throw performance.now(),o instanceof Error&&o.name,pn.trackDatabase.end(a,e,r),o}}const xn=Object.freeze(Object.defineProperty({__proto__:null,trackDbOperation:bn},Symbol.toStringTag,{value:"Module"}));class yn{constructor(e,t="aloe-wellness-log",r=4){this.storeName=e,this.dbName=t,this.dbVersion=r}async openDatabase(){return new Promise((e,t)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>{var e;t(new Error(`Database connection failed: ${null==(e=r.error)?void 0:e.message}`))},r.onsuccess=()=>{e(r.result)},r.onupgradeneeded=e=>{const t=e.target.result;this.upgradeDatabase(t,e.oldVersion,e.newVersion||this.dbVersion)}})}async executeTransaction(e,t){const r=(await this.openDatabase()).transaction([this.storeName],e),a=r.objectStore(this.storeName);return new Promise((e,n)=>{r.onerror=()=>{var e;n(new Error(`Transaction failed: ${null==(e=r.error)?void 0:e.message}`))},t(a).then(e).catch(n)})}generateId(){return`${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}new class extends yn{constructor(){super("weight_records")}upgradeDatabase(e,t,r){if(!e.objectStoreNames.contains(this.storeName)){const t=e.createObjectStore(this.storeName,{keyPath:"id"});t.createIndex("date","date",{unique:!1}),t.createIndex("weight","weight",{unique:!1})}}async getAll(){try{const e=await this.executeTransaction("readonly",async e=>new Promise((t,r)=>{const a=e.getAll();a.onsuccess=()=>t(a.result),a.onerror=()=>r(a.error)}));return{success:!0,data:e,recordsAffected:e.length}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async getById(e){try{const t=await this.executeTransaction("readonly",async t=>new Promise((r,a)=>{const n=t.get(e);n.onsuccess=()=>r(n.result),n.onerror=()=>a(n.error)}));return t?{success:!0,data:t}:{success:!1,error:"Record not found"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async add(e){try{const t={...e,id:this.generateId()};return await this.executeTransaction("readwrite",async e=>new Promise((r,a)=>{const n=e.add(t);n.onsuccess=()=>r(),n.onerror=()=>a(n.error)})),{success:!0,data:t,recordsAffected:1}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async update(e){try{return await this.executeTransaction("readwrite",async t=>new Promise((r,a)=>{const n=t.put(e);n.onsuccess=()=>r(),n.onerror=()=>a(n.error)})),{success:!0,data:e,recordsAffected:1}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async delete(e){try{return await this.executeTransaction("readwrite",async t=>new Promise((r,a)=>{const n=t.delete(e);n.onsuccess=()=>r(),n.onerror=()=>a(n.error)})),{success:!0,recordsAffected:1}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async deleteAll(){try{return await this.executeTransaction("readwrite",async e=>new Promise((t,r)=>{const a=e.clear();a.onsuccess=()=>t(),a.onerror=()=>r(a.error)})),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async search(e){try{const t=await this.getAll();if(!t.success||!t.data)return t;let r=t.data;if(e.where&&(r=r.filter(t=>Object.entries(e.where).every(([e,r])=>t[e]===r))),e.orderBy&&r.sort((t,r)=>{const a=t[e.orderBy],n=r[e.orderBy];if(null==a&&null==n)return 0;if(null==a)return 1;if(null==n)return-1;const o=a<n?-1:a>n?1:0;return"desc"===e.order?-o:o}),e.offset||e.limit){const t=e.offset||0,a=e.limit?t+e.limit:void 0;r=r.slice(t,a)}return{success:!0,data:r,recordsAffected:r.length}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async count(){try{return{success:!0,data:await this.executeTransaction("readonly",async e=>new Promise((t,r)=>{const a=e.count();a.onsuccess=()=>t(a.result),a.onerror=()=>r(a.error)}))}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async getStats(){try{const e=await this.count();if(!e.success)return{success:!1,error:"Failed to get count"};const t=await this.getAll();if(!t.success||!t.data)return{success:!1,error:"Failed to get records for stats"};const r=t.data.length>0?new Date(Math.max(...t.data.map(e=>new Date(e.date).getTime()))):void 0;return{success:!0,data:{recordCount:e.data,lastModified:r,size:JSON.stringify(t.data).length}}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async getByDateRange(e,t){return this.search({where:{},orderBy:"date",order:"asc"}).then(r=>{if(!r.success||!r.data)return r;const a=r.data.filter(r=>r.date>=e&&r.date<=t);return{...r,data:a,recordsAffected:a.length}})}async getLatest(e=10){return this.search({orderBy:"date",order:"desc",limit:e})}};const wn=new class extends yn{constructor(){super(Xa.WEIGHT_RECORDS)}upgradeDatabase(e,t,r){if(!e.objectStoreNames.contains(this.storeName)){const t=e.createObjectStore(this.storeName,{keyPath:"id"});t.createIndex("date","date",{unique:!1}),t.createIndex("weight","weight",{unique:!1}),t.createIndex("excludeFromGraph","excludeFromGraph",{unique:!1})}}async getAll(){return bn("get-all-weight-records",async()=>{try{const e=await sn(this.storeName,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.getAll();a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})});return{success:!0,data:e,recordsAffected:e.length}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}})}async getById(e){return bn("get-weight-record-by-id",async()=>{try{const t=await sn(this.storeName,"readonly",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n=a.get(e);n.onsuccess=()=>t(n.result),n.onerror=()=>r(n.error)})});return t?{success:!0,data:t}:{success:!1,error:"Record not found"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}})}async add(e){return bn("add-weight-record",async()=>{try{const t={...e,id:this.generateId()};return await sn(this.storeName,"readwrite",async(e,r)=>{const a=r;return new Promise((e,r)=>{const n=a.add(t);n.onsuccess=()=>e(),n.onerror=()=>r(n.error)})}),{success:!0,data:t,recordsAffected:1}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},1)}async update(e){return bn("update-weight-record",async()=>{try{return await sn(this.storeName,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n=a.put(e);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})}),{success:!0,data:e,recordsAffected:1}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},1)}async delete(e){return bn("delete-weight-record",async()=>{try{return await sn(this.storeName,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n=a.delete(e);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})}),{success:!0,recordsAffected:1}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},1)}async deleteAll(){return bn("delete-all-weight-records",async()=>{try{return await sn(this.storeName,"readwrite",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.clear();a.onsuccess=()=>e(),a.onerror=()=>t(a.error)})}),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}})}async search(e){return bn("search-weight-records",async()=>{try{const t=await this.getAll();if(!t.success||!t.data)return t;let r=t.data;if(e.where&&(r=r.filter(t=>Object.entries(e.where).every(([e,r])=>t[e]===r))),e.dateRange&&(r=r.filter(t=>t.date>=e.dateRange.start&&t.date<=e.dateRange.end)),void 0!==e.excludeFromGraph&&(r=r.filter(t=>Boolean(t.excludeFromGraph)===e.excludeFromGraph)),e.weightRange&&(r=r.filter(t=>t.weight>=e.weightRange.min&&t.weight<=e.weightRange.max)),e.orderBy&&r.sort((t,r)=>{const a=t[e.orderBy],n=r[e.orderBy];if(null==a&&null==n)return 0;if(null==a)return 1;if(null==n)return-1;const o=a<n?-1:a>n?1:0;return"desc"===e.order?-o:o}),e.offset||e.limit){const t=e.offset||0,a=e.limit?t+e.limit:void 0;r=r.slice(t,a)}return{success:!0,data:r,recordsAffected:r.length}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}})}async count(){return bn("count-weight-records",async()=>{try{return{success:!0,data:await sn(this.storeName,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.count();a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})})}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}})}async getStats(){return bn("get-weight-record-stats",async()=>{try{const e=await this.getAll();if(!e.success||!e.data)return{success:!1,error:"Failed to get records for stats"};const t=e.data;if(0===t.length)return{success:!0,data:{recordCount:0,totalRecords:0,averageWeight:0,minWeight:0,maxWeight:0,weightTrend:"stable",recordsThisMonth:0,recordsThisWeek:0}};const r=t.map(e=>e.weight),a=Math.min(...r),n=Math.max(...r),o=r.reduce((e,t)=>e+t,0)/r.length,s=t.sort((e,t)=>t.date.localeCompare(e.date)),i=s[0],l=s.slice(0,5);let d="stable";if(l.length>=2){const e=l[l.length-1].weight,t=l[0].weight-e;t>.5?d="increasing":t<-.5&&(d="decreasing")}const c=new Date,u=`${c.getFullYear()}-${String(c.getMonth()+1).padStart(2,"0")}`,h=new Date(c.setDate(c.getDate()-c.getDay())).toISOString().slice(0,10),m=t.filter(e=>e.date.startsWith(u)).length,f=t.filter(e=>e.date>=h).length;return{success:!0,data:{recordCount:t.length,totalRecords:t.length,averageWeight:o,minWeight:a,maxWeight:n,weightTrend:d,lastRecord:i,recordsThisMonth:m,recordsThisWeek:f}}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}})}async getByDateRange(e,t){return this.search({dateRange:{start:e,end:t},orderBy:"date",order:"asc"})}async getLatest(e=10){return this.search({orderBy:"date",order:"desc",limit:e})}async getForGraph(){return this.search({excludeFromGraph:!1,orderBy:"date",order:"asc"})}},vn=class e{constructor(){t(this,"storeName",Xa.GOAL),t(this,"GOAL_ID","singleton")}static getInstance(){return e.instance||(e.instance=new e),e.instance}async setGoal(e){return bn("set-goal",async()=>{try{const t=this.validateGoalData(e);return t?{success:!1,error:t}:(await sn(this.storeName,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n={...e,id:this.GOAL_ID},o=a.put(n);o.onsuccess=()=>t(),o.onerror=()=>r(o.error)})}),{success:!0,data:e})}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}})}async getGoal(){return bn("get-goal",async()=>{try{const e=await sn(this.storeName,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.get(this.GOAL_ID);a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})});if(!e)return{success:!1,error:"Goal not found"};const{id:t,...r}=e;return{success:!0,data:r}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}})}async hasGoal(){try{const e=await this.getGoal();return e.success&&!!e.data}catch{return!1}}async clearGoal(){return bn("clear-goal",async()=>{try{return await sn(this.storeName,"readwrite",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.delete(this.GOAL_ID);a.onsuccess=()=>e(),a.onerror=()=>t(a.error)})}),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}})}async getGoalProgress(e){return bn("get-goal-progress",async()=>{try{const t=await this.getGoal();if(!t.success||!t.data)return{success:!0,data:{hasGoal:!1,progressPercentage:0,isGoalAchieved:!1}};const r=t.data;if(void 0===e)return{success:!0,data:{hasGoal:!0,targetWeight:r.targetWeight,progressPercentage:0,isGoalAchieved:!1}};const a=r.currentWeight||e,n=r.targetWeight,o=Math.abs(e-n);let s=0;if(a>n){const t=a-n;s=t>0?(a-e)/t*100:0}else{const t=n-a;s=t>0?(e-a)/t*100:0}s=Math.max(0,Math.min(100,s));const i=o<=.5;let l,d;if(!i&&r.targetDate){const e=new Date(r.targetDate),t=new Date;d=Math.ceil((e.getTime()-t.getTime())/864e5),d>0&&(l=r.targetDate)}return{success:!0,data:{hasGoal:!0,targetWeight:n,currentWeight:e,remainingWeight:o,progressPercentage:s,isGoalAchieved:i,daysToTarget:d,estimatedCompletionDate:l}}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}})}validateGoalData(e){if(!e.targetWeight||e.targetWeight<=0)return"目標体重が正しく設定されていません";if(e.targetWeight<20||e.targetWeight>300)return"目標体重は20kg〜300kgの範囲で設定してください";if(e.currentWeight&&(e.currentWeight<20||e.currentWeight>300))return"現在の体重は20kg〜300kgの範囲で設定してください";if(e.targetDate){const t=new Date(e.targetDate);if(t<=new Date)return"目標日は今日より後の日付を設定してください";const r=new Date;if(r.setFullYear(r.getFullYear()+1),t>r)return"目標日は1年以内の日付を推奨します"}return null}async validateGoalHealth(e){const t=[],r=[];if(e.currentWeight&&e.targetWeight){const a=Math.abs(e.currentWeight-e.targetWeight),n=e.currentWeight>e.targetWeight;if(a>20&&(t.push("20kg以上の体重変化は健康に影響を与える可能性があります"),r.push("段階的な目標設定を検討してください")),e.targetDate){const o=Math.ceil((new Date(e.targetDate).getTime()-(new Date).getTime())/864e5);if(o>0){const e=a/o*7;n&&e>1?(t.push("週1kg以上の減量は健康に負担をかける可能性があります"),r.push("週0.5kg程度の減量を目安にしてください")):!n&&e>.5&&(t.push("急激な体重増加は健康に影響する可能性があります"),r.push("週0.25kg程度の増量を目安にしてください"))}}if(e.height&&e.height>0){const a=e.height/100,n=e.targetWeight/(a*a);n<18.5?(t.push("目標BMIが低体重の範囲です"),r.push("健康的な体重範囲での目標設定を検討してください")):n>25&&(t.push("目標BMIが標準範囲を超えています"),r.push("健康的な体重範囲での目標設定を検討してください"))}}return{isHealthy:0===t.length,warnings:t,recommendations:r}}};t(vn,"instance");const kn=vn.getInstance();async function Dn(e){const t=await wn.add(e);if(!t.success)throw new Error(t.error||"Failed to add weight record")}async function Nn(){const e=await wn.getAll();if(!e.success)throw new Error(e.error||"Failed to get weight records");return e.data||[]}async function jn(e){const{executeTransaction:t}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return a("add-bp-record",async()=>{await t(r.BP_RECORDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n=a.put(e);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})})})}async function Sn(){const{executeTransaction:e}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:t}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:r}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return r("get-all-bp-records",async()=>e(t.BP_RECORDS,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.getAll();a.onsuccess=()=>e(a.result||[]),a.onerror=()=>t(a.error)})}))}async function Mn(e){const{executeTransaction:t}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return a("update-bp-record",async()=>{await t(r.BP_RECORDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n=a.put(e);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})})})}async function En(e){const{executeTransaction:t}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return a("delete-bp-record",async()=>{await t(r.BP_RECORDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n=a.delete(e);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})})})}async function Cn(e){const{executeTransaction:t}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return a("add-daily-record",async()=>{await t(r.DAILY_RECORDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n=a.put(e);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})})})}async function Tn(){const{executeTransaction:e}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:t}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:r}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return r("get-all-daily-records",async()=>e(t.DAILY_RECORDS,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.getAll();a.onsuccess=()=>e(a.result||[]),a.onerror=()=>t(a.error)})}))}async function On(e){const{executeTransaction:t}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return a("add-daily-field",async()=>{await t(r.DAILY_FIELDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n=a.put(e);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})})})}async function _n(){const{executeTransaction:e}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:t}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:r}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return r("get-all-daily-fields",async()=>e(t.DAILY_FIELDS,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.getAll();a.onsuccess=()=>e(a.result||[]),a.onerror=()=>t(a.error)})}))}async function Rn(e){const{executeTransaction:t}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return a("update-daily-field",async()=>{await t(r.DAILY_FIELDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n=a.put(e);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})})})}async function In(e){const{executeTransaction:t}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return a("delete-daily-field",async()=>{await t(r.DAILY_FIELDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n=a.delete(e);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})})})}async function An(){const{executeTransaction:e}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:t}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:r}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return r("delete-all-data",async()=>{await e([t.GOAL,t.WEIGHT_RECORDS,t.BP_RECORDS,t.DAILY_RECORDS,t.DAILY_FIELDS],"readwrite",async(e,t)=>{const r=t,[a,n,o,s,i]=r;return new Promise((e,t)=>{let r=0;const l=()=>{r++,5===r&&e()},d=e=>t(e),c=a.clear();c.onsuccess=l,c.onerror=()=>d(c.error);const u=n.clear();u.onsuccess=l,u.onerror=()=>d(u.error);const h=o.clear();h.onsuccess=l,h.onerror=()=>d(h.error);const m=s.clear();m.onsuccess=l,m.onerror=()=>d(m.error);const f=i.clear();f.onsuccess=l,f.onerror=()=>d(f.error)})})})}function Pn({records:e,getRecordDate:t}){const r=new Date,[a,n]=D.useState(()=>{const e=localStorage.getItem(pt);return e?new Date(e):r}),[o,s]=D.useState(()=>{const e=localStorage.getItem(pt);return e?new Date(e):r}),i=D.useMemo(()=>gt(o),[o]),l=D.useMemo(()=>e.filter(e=>t(e)===i),[e,i,t]),d=D.useCallback(r=>{const a=gt(r);return e.some(e=>t(e)===a)},[e,t]);return D.useEffect(()=>{localStorage.setItem(pt,o.toISOString())},[o]),D.useEffect(()=>{n(o)},[o]),{selectedDate:o,setSelectedDate:s,centerDate:a,setCenterDate:n,today:r,recordDate:i,recordsOfDay:l,isRecorded:d}}function Wn({getAllRecords:e,addRecord:t,updateRecord:r,deleteRecord:a,onRecordAdded:n}){const[o,s]=D.useState([]),[i,l]=D.useState(!0),[d,c]=D.useState(null),u=D.useCallback(async()=>{try{l(!0),c(null);const t=await e();s(t)}catch(t){c(t instanceof Error?t.message:"記録の取得に失敗しました")}finally{l(!1)}},[e]);D.useEffect(()=>{u()},[u]);const h=D.useCallback(async e=>{try{c(null),await t(e),await u(),null==n||n()}catch(r){throw c(r instanceof Error?r.message:"記録の追加に失敗しました"),r}},[t,u,n]),m=D.useCallback(async e=>{try{c(null),await r(e),await u()}catch(t){throw c(t instanceof Error?t.message:"記録の更新に失敗しました"),t}},[r,u]),f=D.useCallback(async e=>{try{if(c(null),!window.confirm("本当に削除しますか？"))return;await a(e),await u()}catch(t){throw c(t instanceof Error?t.message:"記録の削除に失敗しました"),t}},[a,u]),g=D.useCallback(()=>{c(null)},[]);return{records:o,isLoading:i,error:d,handleAdd:h,handleUpdate:m,handleDelete:f,refetchRecords:u,clearError:g}}function Ln({initialValues:e,createRecord:t,resetValues:r}){const[a,n]=D.useState(e),o=D.useCallback((e,t)=>{n(r=>({...r,[e]:t}))},[]),s=D.useCallback(()=>{n({...e,...r,time:ft()})},[e,r]),i=D.useCallback(e=>t(a,e),[a,t]);return{formData:a,setFormData:n,updateField:o,resetForm:s,createRecordFromForm:i}}const Fn={systolic:"",diastolic:"",heartRate:"",time:ft(),note:"",excludeFromGraph:!1},Bn=()=>{const{records:e,isLoading:t,error:a,handleAdd:n,handleUpdate:o,handleDelete:s,clearError:i}=Wn({getAllRecords:Sn,addRecord:jn,updateRecord:Mn,deleteRecord:En}),{selectedDate:l,setSelectedDate:d,centerDate:c,setCenterDate:u,today:h,recordDate:m,recordsOfDay:f,isRecorded:g}=Pn({records:e,getRecordDate:e=>e.date}),{formData:p,updateField:b,resetForm:x,createRecordFromForm:y}=Ln({initialValues:Fn,createRecord:(e,t)=>({id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:t,time:e.time,systolic:Number(e.systolic),diastolic:Number(e.diastolic),heartRate:""!==e.heartRate?Number(e.heartRate):null,note:e.note||null,excludeFromGraph:e.excludeFromGraph||!1}),resetValues:Fn}),w=D.useCallback(async()=>{if(p.systolic&&p.diastolic)try{const e=y(m);await n(e),x()}catch(e){}},[p.systolic,p.diastolic,y,m,n,x]);return r.jsxs("div",{className:"bg-transparent",children:[r.jsx(za,{selectedDate:l,setSelectedDate:d,centerDate:c,setCenterDate:u,today:h,isRecorded:g,"data-testid":"date-picker"}),r.jsx("div",{className:"w-full max-w-md mx-auto mt-3 mb-3 flex justify-start pl-4",children:r.jsxs("span",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-white",children:[l.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),g(l)&&r.jsx(Pe,{className:"inline-block w-6 h-6 text-green-500 ml-2 align-middle","aria-label":"入力済み"})]})}),r.jsx(et,{recordsOfDay:f}),r.jsxs("div",{className:"flex flex-col items-center justify-start min-h-[60vh]",children:[a&&r.jsx("div",{className:"w-full max-w-md mb-4",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[r.jsx("p",{className:"text-red-800 text-sm",children:a}),r.jsx("button",{onClick:i,className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"エラーを閉じる"})]})}),r.jsx("div",{className:"flex flex-col gap-2 w-full max-w-md",children:f.map(e=>r.jsxs("div",{className:"flex flex-col gap-1 bg-white dark:bg-gray-800 rounded-xl shadow p-2 mb-1",children:[r.jsxs("div",{className:"flex items-center w-full mb-1 justify-between",children:[r.jsx("input",{type:"time",className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-base bg-inherit text-gray-700 dark:text-gray-200 w-[6.5em]",value:e.time,onChange:t=>o({...e,time:t.target.value})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(nt,{variant:"danger",size:"sm",icon:Ze,"aria-label":"削除",onClick:()=>s(e.id),children:""}),r.jsxs(nt,{variant:e.excludeFromGraph?"secondary":"sky",size:"sm","aria-label":e.excludeFromGraph?"グラフ除外":"グラフ表示",onClick:()=>o({...e,excludeFromGraph:!e.excludeFromGraph}),children:["",r.jsxs("span",{className:"relative inline-block w-5 h-5",children:[r.jsx(Xe,{className:"w-5 h-5 text-white"}),e.excludeFromGraph&&r.jsx(ze,{className:"w-5 h-5 text-red-500 absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 w-full",children:[r.jsx(Ha,{value:e.systolic,onChange:t=>o({...e,systolic:Number(t)}),placeholder:"収縮",step:"1",min:"0",max:"300",width:"md"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500 text-sm",children:"mmHg"}),r.jsx(Ha,{value:e.diastolic,onChange:t=>o({...e,diastolic:Number(t)}),placeholder:"拡張",step:"1",min:"0",max:"200",width:"md"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500 text-sm",children:"mmHg"}),r.jsx(Ha,{value:e.heartRate??"",onChange:t=>o({...e,heartRate:""===t?null:Number(t)}),placeholder:"心拍",step:"1",min:"0",max:"300",width:"md"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500 text-sm",children:"bpm"})]}),r.jsx("textarea",{className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-2 py-1 text-base bg-inherit text-gray-700 dark:text-gray-200 resize-none w-full pr-2 mb-0",value:e.note??"",onChange:t=>o({...e,note:t.target.value}),placeholder:"補足・メモ（任意）"})]},e.id))}),r.jsx("div",{className:"w-full max-w-md mt-2 mb-2",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow p-2 mb-0 flex flex-col gap-1",children:[r.jsxs("div",{className:"flex items-center w-full mb-1 justify-between",children:[r.jsx(Va,{value:p.time,onChange:e=>b("time",e)}),r.jsx(nt,{variant:"success",size:"sm",icon:Pe,"aria-label":"保存",onClick:w,"data-testid":"save-btn",disabled:t||!p.systolic||!p.diastolic,children:""})]}),r.jsxs("div",{className:"flex items-center gap-1 w-full mb-1",children:[r.jsx(Ha,{value:p.systolic,onChange:e=>b("systolic",e),placeholder:"収縮",step:"1",min:"0",max:"300",width:"md"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500 text-sm",children:"mmHg"}),r.jsx(Ha,{value:p.diastolic,onChange:e=>b("diastolic",e),placeholder:"拡張",step:"1",min:"0",max:"200",width:"md"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500 text-sm",children:"mmHg"}),r.jsx(Ha,{value:p.heartRate,onChange:e=>b("heartRate",e),placeholder:"心拍",step:"1",min:"0",max:"300",width:"md"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500 text-sm",children:"bpm"})]}),r.jsx("textarea",{className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-2 py-1 text-base bg-inherit text-gray-700 dark:text-gray-200 resize-none w-full pr-2 mb-1",rows:1,value:p.note,onChange:e=>b("note",e.target.value),placeholder:"補足・メモ（任意）"}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("input",{type:"checkbox",id:"excludeFromGraph",checked:p.excludeFromGraph,onChange:e=>b("excludeFromGraph",e.target.checked),className:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"}),r.jsx("label",{htmlFor:"excludeFromGraph",className:"text-sm text-gray-700 dark:text-gray-200",children:"グラフから除外"})]})]})}),r.jsx("div",{className:"w-full max-w-md mx-auto mb-2 px-4",children:r.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 text-yellow-800 dark:text-yellow-100 p-3 rounded shadow-sm text-sm text-left",children:[r.jsx("strong",{children:"【ワンポイント】"})," ","血圧は安静時に測定し、可能であれば毎日同じ時間帯（朝・夜など）に記録することをお勧めします。運動後や食事直後の測定は避けましょう。"]})})]})]})};function $n(e){return R({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M216 23.86c0-23.8-30.65-32.77-44.15-13.04C48 191.85 224 200 224 288c0 35.63-29.11 64.46-64.85 63.99-35.17-.45-63.15-29.77-63.15-64.94v-85.51c0-21.7-26.47-32.23-41.43-16.5C27.8 213.16 0 261.33 0 320c0 105.87 86.13 192 192 192s192-86.13 192-192c0-170.29-168-193-168-296.14z"},child:[]}]})(e)}function Yn(e,t=800){const[r,a]=D.useState(0);return D.useEffect(()=>{if("number"!=typeof e||isNaN(e))return;const r=performance.now();requestAnimationFrame(function n(o){const s=o-r,i=Math.min(s/t,1);a(0+(e-0)*i),i<1?requestAnimationFrame(n):a(e)})},[e,t]),r}const zn=D.memo(function({field:e,value:t,stats:a,onAchieve:n,onPartial:o,onUnachieve:s}){const i=Yn(a.percent);return r.jsxs("div",{className:"flex flex-col gap-1 bg-white dark:bg-gray-800 rounded-xl shadow p-4 mb-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 min-w-[5em]",children:e.name}),r.jsx(nt,{variant:1===t?"primary":"secondary",size:"md",onClick:n,"aria-pressed":1===t,className:"flex-1","data-testid":`daily-input-${e.fieldId}-achieve`,children:"達成"}),r.jsx(nt,{variant:.5===t?"primary":"secondary",size:"md",onClick:o,"aria-pressed":.5===t,className:"flex-1","data-testid":`daily-input-${e.fieldId}-partial`,children:"微達成"}),r.jsx(nt,{variant:0===t?"primary":"secondary",size:"md",onClick:s,"aria-pressed":0===t,className:"flex-1","data-testid":`daily-input-${e.fieldId}-unachieve`,children:"未達"})]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r.jsx("span",{className:"text-base font-semibold text-blue-700 dark:text-blue-200 align-middle",children:"直近2週間の達成率："}),a.total>0?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"ml-4 text-base font-semibold text-blue-700 dark:text-blue-200 align-middle",children:[r.jsx("span",{style:{display:"inline-block",minWidth:"3ch",textAlign:"right",fontFamily:"monospace"},children:i.toFixed(0)}),"%"]}),r.jsxs("span",{className:"ml-2 text-base font-semibold text-blue-700 dark:text-blue-200 align-middle",children:["(",a.success,"/",a.total,"日)"]})]}):"記録なし"]})]})}),Hn=D.memo(function({field:e,isEditing:t,onStartEdit:a,onEndEdit:n,onNameChange:o,onDelete:s,onToggleDisplay:i,inputRef:l,onCaretPositionChange:d}){const{attributes:c,listeners:u,setNodeRef:h,transform:m,transition:f,isDragging:g}=I({id:e.fieldId}),p={...g?{transform:A.Transform.toString(m),transition:f}:{},opacity:g?.5:1,background:g?"#f3f4f6":void 0},[b,x]=D.useState(e.name);D.useEffect(()=>{t&&x(e.name)},[t,e.name]);return r.jsxs("div",{ref:h,style:p,className:"flex items-center gap-2 rounded-xl shadow p-4 mb-2 transition-colors "+(!1===e.display?"bg-gray-100 dark:bg-gray-700 text-gray-400":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200"),children:[t?r.jsx("input",{ref:l,type:"text",value:b,onChange:t=>{x(t.target.value);const r=t.target.selectionStart??t.target.value.length,a=t.target.selectionEnd??t.target.value.length;null==d||d(e.fieldId,r,a)},onSelect:t=>{const r=t.target,a=r.selectionStart??r.value.length,n=r.selectionEnd??r.value.length;null==d||d(e.fieldId,a,n)},onBlur:()=>{o(b),n()},onKeyDown:e=>{"Enter"===e.key&&(o(b),n())},className:"flex-1 border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 text-lg font-semibold min-w-[5em] bg-inherit "+(!1===e.display?"border-gray-200 dark:border-gray-600 text-gray-400 bg-gray-50 dark:bg-gray-800":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200"),"data-testid":`daily-input-${e.fieldId}`}):r.jsx("span",{className:"flex-1 text-lg font-semibold min-w-[5em] cursor-pointer",onClick:a,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||a()},role:"button","aria-label":"項目名を編集",tabIndex:0,children:e.name}),r.jsx("button",{type:"button",onClick:()=>{window.confirm("本当に削除しますか？\n（保存すると確定されます。）")&&s()},className:"text-red-500 hover:text-red-700 p-2","aria-label":"削除","data-testid":`delete-btn-${e.fieldId}`,children:r.jsx(Ze,{className:"w-6 h-6"})}),r.jsx("button",{type:"button",onClick:i,className:"p-2 "+(!1===e.display?"text-gray-400 hover:text-blue-400":"text-blue-500 hover:text-blue-700"),"aria-label":!1===e.display?"表示項目にする":"非表示項目にする","data-testid":`toggle-btn-${e.fieldId}`,children:!1===e.display?r.jsx(Fe,{className:"w-6 h-6"}):r.jsx(Be,{className:"w-6 h-6"})}),r.jsx("span",{className:"cursor-move p-2","aria-label":"並び替えハンドル",style:{touchAction:"none"},...c,...u,tabIndex:0,children:r.jsx(Re,{className:"w-6 h-6 text-gray-400"})})]})}),Gn=()=>{const[e,t]=D.useState([]),[a,n]=D.useState([]),{selectedDate:o,setSelectedDate:s,centerDate:i,setCenterDate:l,today:d,recordDate:c}=Pn({records:a,getRecordDate:e=>e.date}),[u,h]=D.useState(!1),[m,f]=D.useState(""),[g,p]=D.useState(""),[b,x]=D.useState(!1),y=b?e.slice().sort((e,t)=>(e.order??0)-(t.order??0)):e.filter(e=>!("display"in e)||!1!==e.display).sort((e,t)=>(e.order??0)-(t.order??0)),[w,v]=D.useState([]),[k,N]=D.useState(()=>y.map(e=>e.fieldId)),[j,M]=D.useState([]),E=P(W(z)),C=e=>a.find(t=>t.fieldId===e&&t.date===c),T=S.useCallback(async()=>{const e=await _n();t(e)},[]),O=S.useCallback(async()=>{const e=await Tn();n(e)},[]),_=[{fieldId:"exercise",name:"運動",order:10,display:!0},{fieldId:"meal",name:"食事",order:20,display:!0},{fieldId:"sleep",name:"睡眠",order:30,display:!0},{fieldId:"smoke",name:"喫煙",order:40,display:!1},{fieldId:"alcohol",name:"飲酒",order:50,display:!1}];D.useEffect(()=>{(async()=>{const e=await _n();if(!e||0===e.length){for(const e of _)await On(e);t(await _n())}})()},[]),S.useEffect(()=>{T(),O()},[T,O]);const R=async(e,t)=>{const r=C(e);if(r&&r.value===t)await async function(e){const{executeTransaction:t}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return a("delete-daily-record",async()=>{await t(r.DAILY_RECORDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n=a.delete(e);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})})})}(r.id),await O();else if(r)await async function(e){const{executeTransaction:t}=await q(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>ln);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await q(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>Qa);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await q(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>xn);return{trackDbOperation:e}},void 0);return a("update-daily-record",async()=>{await t(r.DAILY_RECORDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const n=a.put(e);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})})})}({...r,value:t}),await O();else{const r=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;await Cn({id:r,fieldId:e,date:c,value:t}),await O()}};D.useEffect(()=>{if(b){const t=e.slice().sort((e,t)=>(e.order??0)-(t.order??0));v(t.map(e=>({fieldId:e.fieldId,name:e.name,order:e.order??0,display:"display"in e?e.display:"boolean"!=typeof e.defaultDisplay||e.defaultDisplay}))),N(t.map(e=>e.fieldId)),M([])}},[b,e]);const[I,A]=D.useState(null),H=D.useRef({}),G=D.useRef({});D.useEffect(()=>{if(!I)return;const e=H.current[I];if(e){const t=G.current[I]??{start:e.value.length,end:e.value.length};e.setSelectionRange(t.start,t.end)}},[I]);const U=D.useCallback((e,t,r)=>{G.current[e]={start:t,end:r}},[]),Z=D.useCallback(e=>{M(t=>[...t,e]),v(t=>t.filter(t=>t.fieldId!==e)),N(t=>t.filter(t=>t!==e))},[]),V=D.useCallback(e=>{v(t=>t.map(t=>t.fieldId===e?{...t,display:!t.display}:t))},[]),X=e=>{const t=(()=>{const e=[];for(let t=0;t<14;t++){const r=new Date(d);r.setDate(d.getDate()-t),e.push(gt(r))}return e.reverse()})();let r=0,n=0;return t.forEach(t=>{const o=a.find(r=>r.fieldId===e&&r.date===t);"number"==typeof(null==o?void 0:o.value)&&(r++,o.value>0&&n++)}),{total:r,success:n,percent:r>0?Math.round(n/r*100):0}},K=(t=>{if(0===a.length)return 0;const r=e.map(e=>e.fieldId),n=a.map(e=>e.date).sort();if(0===n.length)return 0;const o=new Date(n[0]);let s=0;for(let e=new Date(t);e>=o;e.setDate(e.getDate()-1)){const t=gt(e);if(!r.some(e=>a.some(r=>r.fieldId===e&&r.date===t&&"number"==typeof r.value&&r.value>0)))break;s++}return s>1?s:0})(o),Q=Yn(K),J=Yn((t=>{const r=e.map(e=>e.fieldId);if(0===a.length)return 0;const n=a.map(e=>e.date).sort(),o=new Date(n[0]),s=t;let i=0;for(let e=new Date(o);e<=s;e.setDate(e.getDate()+1)){const t=gt(e);r.some(e=>a.some(r=>r.fieldId===e&&r.date===t&&"number"==typeof r.value&&r.value>0))&&i++}return i})(o));return r.jsxs("div",{className:"bg-transparent",children:[r.jsx(za,{selectedDate:o,setSelectedDate:s,centerDate:i,setCenterDate:l,getDateStatus:t=>{const r=gt(t),n=e.map(e=>e.fieldId),o=a.filter(e=>e.date===r&&n.includes(e.fieldId));if(0===o.length)return"none";return o.some(e=>1===e.value||.5===e.value)?"green":"red"},"data-testid":"date-picker"}),r.jsx("div",{className:"w-full max-w-md mx-auto mt-3 mb-3 flex justify-start pl-4",children:r.jsxs("span",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-white",children:[c,(t=>{const r=gt(t),n=e.map(e=>e.fieldId);return a.some(e=>e.date===r&&n.includes(e.fieldId))})(o)&&r.jsx(Pe,{className:"inline-block w-6 h-6 text-green-500 ml-2 align-middle","aria-label":"入力済み"}),r.jsxs("span",{className:"inline-flex items-center",children:[K>=2&&r.jsxs("span",{className:"ml-3 px-2 py-0.5 rounded-full bg-orange-500 text-white text-xs font-bold inline-flex items-center",title:"連続達成日数",children:[r.jsx($n,{className:"inline-block mr-1",style:{fontSize:"1em"}}),r.jsx("span",{style:{display:"inline-block",minWidth:"3ch",textAlign:"right"},children:Q.toFixed(0)}),"日継続中"]}),r.jsxs("span",{className:"ml-3 px-2 py-0.5 rounded-full bg-blue-500 text-white text-xs font-bold inline-flex items-center",title:"累計達成日数",children:[r.jsx("span",{className:"inline-block mr-1",style:{fontSize:"1em"},children:"🏅"}),r.jsx("span",{style:{display:"inline-block",minWidth:"3ch",textAlign:"right"},children:J.toFixed(0)}),"日達成"]})]})]})}),r.jsxs("div",{className:"flex flex-col items-center justify-start min-h-[60vh]",children:[r.jsx("div",{className:"flex flex-col gap-1 w-full max-w-md",children:b?r.jsx(L,{sensors:E,collisionDetection:F,onDragEnd:e=>{const{active:t,over:r}=e;if(!r)return;const a=String(t.id),n=String(r.id);if(a!==n){const e=k.indexOf(a),t=k.indexOf(n);N(Y(k,e,t))}},children:r.jsx(B,{items:k,strategy:$,children:k.map(e=>{const t=w.find(t=>t.fieldId===e);if(!t)return null;const a=I===t.fieldId;return r.jsx(Hn,{field:t,isEditing:a,onStartEdit:()=>A(t.fieldId),onEndEdit:()=>A(null),onNameChange:e=>v(r=>r.map(r=>r.fieldId===t.fieldId?{...r,name:e}:r)),onDelete:()=>Z(t.fieldId),onToggleDisplay:()=>V(t.fieldId),inputRef:e=>H.current[t.fieldId]=e,onCaretPositionChange:U},t.fieldId)})})}):y.map(e=>{const t=(e=>{const t=C(e);if("number"==typeof(null==t?void 0:t.value)){if(1===t.value)return 1;if(.5===t.value)return.5;if(0===t.value)return 0}})(e.fieldId),a=X(e.fieldId);return r.jsx(zn,{field:e,value:t,stats:a,onAchieve:async()=>{await R(e.fieldId,1)},onPartial:async()=>{await R(e.fieldId,.5)},onUnachieve:async()=>{await R(e.fieldId,0)}},e.fieldId)})}),b&&r.jsxs("div",{className:"w-full max-w-md mt-2 mb-2",children:[u?r.jsxs("div",{className:"flex items-center gap-1 mb-1 bg-white dark:bg-gray-800 rounded-xl shadow p-2",children:[r.jsx("input",{type:"text",value:m,onChange:e=>f(e.target.value),className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"新しい項目名",maxLength:20,"data-testid":"daily-input-2"}),r.jsx(nt,{variant:"primary",size:"md",icon:Pe,"aria-label":"保存",onClick:async()=>{p("");const t=m.trim();if(!t)return void p("項目名を入力してください");if(e.some(e=>e.name===t))return void p("同じ名前の項目が既に存在します");const r=`custom_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,a={fieldId:r,name:t,order:10*(e.length+1),display:!0};await On(a),await T(),b&&(v(e=>[...e,a]),N(e=>[...e,r])),h(!1),f("")},disabled:!m.trim(),"data-testid":"save-btn",children:""}),r.jsx(nt,{variant:"secondary",size:"md",icon:qe,"aria-label":"キャンセル",onClick:()=>{h(!1),f(""),p("")},children:""})]}):r.jsx(nt,{variant:"teal",size:"md",icon:Ge,fullWidth:!0,onClick:()=>h(!0),"data-testid":"add-btn",children:"新規項目"}),g&&r.jsx("div",{className:"text-red-500 text-sm mt-1",children:g})]}),r.jsx("div",{className:"w-full max-w-md mt-2 mb-2",children:b?r.jsxs("div",{className:"flex gap-1",children:[r.jsx(nt,{variant:"success",size:"md",icon:Ae,onClick:async()=>{for(const e of j)await In(e);for(let e=0;e<k.length;++e){const t=w.find(t=>t.fieldId===k[e]);t&&await Rn({...t,order:10*e})}await T(),x(!1)},fullWidth:!0,children:"保存"}),r.jsx(nt,{variant:"secondary",size:"md",icon:qe,onClick:()=>{x(!1)},fullWidth:!0,children:"キャンセル"})]}):r.jsx(nt,{variant:"teal",size:"md",icon:He,fullWidth:!0,onClick:()=>x(!0),children:"編集"})}),r.jsx("div",{className:"w-full max-w-md mx-auto mb-2 px-4",children:r.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 text-yellow-800 dark:text-yellow-100 p-3 rounded shadow-sm text-sm text-left",children:[r.jsx("strong",{children:"【ワンポイント】"})," ","日課は毎日少しずつでも続けることが大切です。完璧を目指さず、できた日を積み重ねましょう。少しでもやったら微達成として記録しましょう。"]})})]})]})},Un=D.memo(function({startWeight:e,targetWeight:t,targetStart:a,targetEnd:n,gender:o,type:s="total"}){const{isValid:i,totalCalories:l,dailyCalories:d}=D.useMemo(()=>{const r="female"===o?7e3:6500;if(!(e&&t&&a&&n&&!isNaN(Number(e))&&!isNaN(Number(t))&&Number(t)<Number(e)&&/^\d{4}-\d{2}-\d{2}$/.test(a)&&/^\d{4}-\d{2}-\d{2}$/.test(n)&&new Date(n)>=new Date(a)))return{isValid:!1,totalCalories:0,dailyCalories:0};const s=(Number(e)-Number(t))*r,i=new Date(a),l=new Date(n),d=Math.floor((l.getTime()-i.getTime())/864e5)+1;if(d<=0)return{isValid:!1,totalCalories:0,dailyCalories:0};return{isValid:!0,totalCalories:s,dailyCalories:Math.round(s/d)}},[e,t,a,n,o]);if(!i)return null;const c=(Number(e)-Number(t)).toFixed(1);switch(s){case"total":return r.jsxs("div",{className:"text-sm mb-2 text-black dark:text-white",children:["あと",c,"kg減らすには",r.jsxs("span",{className:"text-blue-700 dark:text-blue-300",children:["約",Math.round(l).toLocaleString(),"kcal"]}),"の消費が必要です"]});case"daily":return r.jsxs("div",{className:"text-sm mb-2 text-black dark:text-white",children:["期間中に一日あたり",r.jsxs("span",{className:"text-blue-700 dark:text-blue-300",children:["約",d.toLocaleString(),"kcal"]}),"の消費が必要です"]});case"exercise":return r.jsxs("div",{className:"text-sm text-black dark:text-white",children:["運動で一日あたり",r.jsxs("span",{className:"text-blue-700 dark:text-blue-300",children:["約",Math.round(d/2).toLocaleString(),"kcal"]}),"の消費を目標にしましょう。"]});case"diet":return r.jsxs("div",{className:"text-sm text-black dark:text-white",children:["減食で一日あたり",r.jsxs("span",{className:"text-blue-700 dark:text-blue-300",children:["約",Math.round(d/2).toLocaleString(),"kcal"]}),"の消費を目標にしましょう。"]});default:return null}});const Zn=D.memo(function({examples:e,onSelect:t,label:a="定型文を挿入",className:m=""}){const f=function(){const[e,t]=D.useState(!1),{refs:r,floatingStyles:a,context:n}=o({open:e,onOpenChange:t,middleware:[c(6),u(),h()],placement:"bottom-end"}),m=s(n),f=i(n),g=l(n),{getReferenceProps:p,getFloatingProps:b}=d([m,f,g]);return{open:e,setOpen:t,refs:r,floatingStyles:a,getReferenceProps:p,getFloatingProps:b}}();return r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:f.refs.setReference,...f.getReferenceProps({}),className:`absolute right-2 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center text-yellow-400 cursor-pointer align-middle hover:opacity-80 focus:outline-none ${m}`,tabIndex:0,"aria-label":a,onClick:()=>f.setOpen(e=>!e),children:r.jsx(Ue,{className:"w-6 h-6"})}),f.open&&r.jsx(n,{children:r.jsx("div",{ref:f.refs.setFloating,style:f.floatingStyles,...f.getFloatingProps({className:"z-30 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-lg min-w-[180px] py-1"}),children:e.map((e,a)=>r.jsx("button",{type:"button",className:"block w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-none bg-transparent focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-700",onClick:()=>(e=>{t(e),f.setOpen(!1)})(e),children:e},a))})})]})});function Vn(e,t){return D.useMemo(()=>{if(t.required&&!e.trim())return`${t.fieldName}は必須です。`;if(!e.trim())return null;if(isNaN(Number(e)))return`${t.fieldName}は数値で入力してください。`;const r=Number(e);if(r<t.min||r>t.max)return`${t.fieldName}は${t.min}～${t.max}の範囲で入力してください。`;if(t.step&&1!==t.step){const e=10*r%(10*t.step);if(Math.abs(e)>1e-4)return`${t.fieldName}は${t.step}刻みで入力してください。`}return null},[e,t.min,t.max,t.required,t.fieldName,t.step])}function qn(e,t="体重"){return Vn(e,{min:30,max:200,required:!0,fieldName:`${t}[kg]`,step:.1})}const Xn=H(e=>({goal:null,setGoal:async t=>{const r=await kn.setGoal(t);if(!r.success)throw new Error(r.error||"Failed to set goal");e({goal:t})},clearGoal:async()=>{const t=await kn.clearGoal();if(!t.success)throw new Error(t.error||"Failed to clear goal");e({goal:null})},loadGoal:async()=>{const t=await kn.getGoal();t.success?e({goal:t.data||null}):e({goal:null})}})),Kn=(new Date).getFullYear(),Qn=["毎日ラジオ体操(第1,2)をする","なるべく階段を使う","通勤で早歩きする","一駅歩く","毎日30分歩く","毎日5000歩歩く","毎日ジョギングをする"],Jn=["清涼飲料水を 0 cal にする","間食、夜食を控える","野菜を多く食べる","よく噛んで20分以上かける","夜はお米を食べない","毎食ご飯を半分にする"],eo=["7時間以上寝る","23時までに就寝する","就寝90分前に入浴し体温調節をする","寝室の温度を 18–22 ℃ に保つ","寝室の照明を 300 lx 以下に落とす","寝る前にスマホを見ない"],to=["家では吸わない","会社では吸わない","電子タバコへ移行し本数を半減する","1週間に1本ずつ減らす","禁煙外来に通う"],ro=["休肝日を作る","1日1杯までにする","週2回までにする","飲み会は月1回まで","ノンアルコール飲料にする"],ao=[{value:"male",label:"男性"},{value:"female",label:"女性"},{value:"unknown",label:"未回答"}];function no(){const{goal:e,setGoal:t,loadGoal:a}=Xn(),[n,o]=D.useState("unknown"),[s,i]=D.useState(""),[l,d]=D.useState(""),[c,u]=D.useState(""),[h,m]=D.useState(""),[f,g]=D.useState(""),[p,b]=D.useState(""),[x,y]=D.useState(""),[w,v]=D.useState(""),[k,N]=D.useState(""),[j,S]=D.useState(""),[M,E]=D.useState(""),[C,T]=D.useState(null),[O,_]=D.useState(null),[R,I]=D.useState(null),A=function(e,t="生年"){return Vn(e,{min:1900,max:(new Date).getFullYear(),required:!0,fieldName:t})}(s,"生年"),P=function(e,t="身長"){return Vn(e,{min:100,max:250,required:!0,fieldName:`${t}[cm]`,step:.1})}(l,"身長"),W=qn(c,"開始体重"),L=qn(p,"目標体重"),F=(e,t)=>e&&/^\d{4}-\d{2}-\d{2}$/.test(e)?null:`${t}はYYYY-MM-DD形式で入力してください。`,B=F(h,"目標開始日"),$=F(f,"目標終了日"),Y=h&&f&&h>f?"目標終了日は開始日以降の日付にしてください。":null;D.useEffect(()=>{(async()=>{try{const[e,t,r]=await Promise.all([Nn(),Sn(),Tn()]);if(e.length>0){const t=[...e].sort((e,t)=>new Date(`${e.date}T${e.time}`).getTime()-new Date(`${t.date}T${t.time}`).getTime());_(t[0].weight),T(t[t.length-1].weight)}else T(null),_(null);const a=[];if(e.forEach(e=>{a.push(e.date)}),t.forEach(e=>{a.push(e.date)}),r.forEach(e=>{a.push(e.date)}),a.length>0){const e=a.sort();I(e[0])}else I(null)}catch(e){T(null),_(null),I(null)}})()},[]),D.useEffect(()=>{a()},[a]),D.useEffect(()=>{e&&(o(e.gender||"unknown"),i(e.birthYear?e.birthYear.toString():""),d(e.height?e.height.toString():""),u(e.startWeight?e.startWeight.toString():""),m(e.targetStart||""),g(e.targetEnd||""),b(e.targetWeight.toString()),y(e.exerciseGoal||""),v(e.dietGoal||""),N(e.sleepGoal||""),S(e.smokingGoal||""),E(e.alcoholGoal||""))},[e]);D.useEffect(()=>{if(n&&s&&l&&c&&h&&f&&p&&!(A||P||W||B||$||Y||L)){const e={gender:n,birthYear:Number(s),height:Number(l),startWeight:Number(c),targetStart:h,targetEnd:f,targetWeight:Number(p),exerciseGoal:x,dietGoal:w,sleepGoal:k,smokingGoal:j,alcoholGoal:M};t(e)}},[n,s,l,c,h,f,p,x,w,k,j,M,t]);const z=Number(l)||170;return r.jsx("div",{className:"flex flex-col items-center justify-start py-0 bg-transparent",children:r.jsxs("form",{className:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 w-full max-w-md flex flex-col gap-4",children:[r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"性別"}),r.jsx("div",{className:"flex gap-4 mt-1",children:ao.map(e=>r.jsxs("label",{className:"flex items-center gap-1 text-base",children:[r.jsx("input",{type:"radio",name:"gender",value:e.value,checked:n===e.value,onChange:()=>o(e.value),className:"accent-blue-500"}),e.label]},e.value))})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"生年（例: 1990）"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"1900",max:Kn,value:s,onChange:e=>i(e.target.value),className:"border rounded px-3 py-2 text-base w-32",required:!0,placeholder:"例: 1990"}),r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>i((Kn-40).toString()),children:"40"}),r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>i((Number(s)-5).toString()),children:"-5"}),r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>i((Number(s)+5).toString()),children:"+5"})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"身長[cm] (例: 165.0)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"100",max:"250",value:l,onChange:e=>d(e.target.value),className:"border rounded px-3 py-2 text-base w-32",required:!0,placeholder:"例: 165.0"}),r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>d("170"),children:"170"}),r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>d((z-5).toString()),children:"-5"}),r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>d((z+5).toString()),children:"+5"})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"開始体重[kg] (例: 68.0)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"30",max:"200",step:"0.1",value:c,onChange:e=>u(e.target.value),className:"border rounded px-3 py-2 text-base w-32",required:!0,placeholder:"例: 68.0","data-testid":"goal-weight-input"}),null!==C&&r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>u(C.toString()),children:"最新"}),null!==O&&r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>u(O.toString()),children:"最古"})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"目標体重[kg] (例: 75.0)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"30",max:"200",step:"0.1",value:p,onChange:e=>b(e.target.value),className:"border rounded px-3 py-2 text-base w-32",required:!0,placeholder:"例: 75.0"}),r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>{c&&!isNaN(Number(c))&&b((Math.round(10*(Number(c)-2))/10).toString())},children:"-2kg"}),r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>{c&&!isNaN(Number(c))&&b((Math.round(10*(Number(c)-5))/10).toString())},children:"-5kg"})]})]}),r.jsx(Un,{startWeight:c,targetWeight:p,targetStart:h,targetEnd:f,gender:n,type:"total"}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"目標開始日"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"date",value:h,onChange:e=>m(e.target.value),className:"border rounded px-3 py-2 text-base",required:!0}),r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>m((new Date).toISOString().slice(0,10)),children:"今日"}),R&&r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>m(R),children:"最古"})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"目標終了日"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"date",value:f,onChange:e=>g(e.target.value),className:"border rounded px-3 py-2 text-base",required:!0}),r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>{const e=h?new Date(h):new Date;e.setMonth(e.getMonth()+3),g(e.toISOString().slice(0,10))},children:"3か月後"}),r.jsx(nt,{type:"button",size:"sm",variant:"secondary",onClick:()=>{const e=h?new Date(h):new Date;e.setMonth(e.getMonth()+6),g(e.toISOString().slice(0,10))},children:"半年後"})]})]}),r.jsx(Un,{startWeight:c,targetWeight:p,targetStart:h,targetEnd:f,gender:n,type:"daily"}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"運動目標 (例: なるべく階段を使う)"}),r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx("input",{type:"text",value:x,onChange:e=>y(e.target.value),className:"border rounded px-3 py-2 text-base flex-1 pr-10",placeholder:"例: 毎日30分歩く"}),r.jsx(Zn,{examples:Qn,onSelect:e=>y(e),label:"運動目標の定型文を挿入"})]})]}),r.jsx(Un,{startWeight:c,targetWeight:p,targetStart:h,targetEnd:f,gender:n,type:"exercise"}),r.jsx("div",{className:"text-blue-700 dark:text-blue-300 text-sm font-semibold mb-2",children:"簡単に取り組める日常の動作の延長が効果的です。"}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"減食目標 (例: 間食を控える)"}),r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx("input",{type:"text",value:w,onChange:e=>v(e.target.value),className:"border rounded px-3 py-2 text-base flex-1 pr-10",placeholder:"例: 間食を控える"}),r.jsx(Zn,{examples:Jn,onSelect:e=>v(e),label:"減食目標の定型文を挿入"})]})]}),r.jsx(Un,{startWeight:c,targetWeight:p,targetStart:h,targetEnd:f,gender:n,type:"diet"}),r.jsx("div",{className:"text-blue-700 dark:text-blue-300 text-sm font-semibold mb-2",children:"カロリーコントロールが一番効果があります。"}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"睡眠目標 (例: 23時までに就寝する)"}),r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx("input",{type:"text",value:k,onChange:e=>N(e.target.value),className:"border rounded px-3 py-2 text-base flex-1 pr-10",placeholder:"例: 7時間以上寝る"}),r.jsx(Zn,{examples:eo,onSelect:e=>N(e),label:"睡眠目標の定型文を挿入"})]})]}),r.jsx("div",{className:"text-blue-700 dark:text-blue-300 text-sm font-semibold mb-2",children:"十分な睡眠(7時間以上)をとると痩せやすくなります。"}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"喫煙目標 (例: 1日○本までにする)"}),r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx("input",{type:"text",value:j,onChange:e=>S(e.target.value),className:"border rounded px-3 py-2 text-base flex-1 pr-10",placeholder:"例: 1日○本までにする"}),r.jsx(Zn,{examples:to,onSelect:e=>S(e),label:"喫煙目標の定型文を挿入"})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"飲酒目標 (例: 週2回までにする)"}),r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx("input",{type:"text",value:M,onChange:e=>E(e.target.value),className:"border rounded px-3 py-2 text-base flex-1 pr-10",placeholder:"例: 週2回までにする"}),r.jsx(Zn,{examples:ro,onSelect:e=>E(e),label:"飲酒目標の定型文を挿入"})]})]}),r.jsx(nt,{type:"submit",size:"lg",variant:"primary","data-testid":"save-btn",children:"保存"})]})})}const oo=3e5,so=(e,t)=>e instanceof en?e:new en(Ja.UNKNOWN,t,e),io=H((e,t)=>({weightRecords:[],dailyRecords:[],bpRecords:[],dailyFields:[],loading:{weight:!1,daily:!1,bp:!1,fields:!1,global:!1},errors:{weight:null,daily:null,bp:null,fields:null,global:null},cache:{weight:{lastUpdated:null,isStale:!0},daily:{lastUpdated:null,isStale:!0},bp:{lastUpdated:null,isStale:!0},fields:{lastUpdated:null,isStale:!0}},loadWeightRecords:async()=>{const r=t();if(r.loading.weight)return;const a=r.cache.weight;if(!(a.lastUpdated&&!a.isStale&&Date.now()-a.lastUpdated.getTime()<oo)){e(e=>({loading:{...e.loading,weight:!0},errors:{...e.errors,weight:null}}));try{const t=await wn.getAll();if(!t.success||!t.data)throw new Error(t.error||"Failed to load weight records");e(e=>({weightRecords:t.data||[],loading:{...e.loading,weight:!1},cache:{...e.cache,weight:{lastUpdated:new Date,isStale:!1}}}))}catch(n){const t=so(n,"体重記録の読み込みに失敗しました");e(e=>({loading:{...e.loading,weight:!1},errors:{...e.errors,weight:t},cache:{...e.cache,weight:{...e.cache.weight,isStale:!0}}}))}}},loadDailyRecords:async()=>{const r=t();if(r.loading.daily)return;const a=r.cache.daily;if(!(a.lastUpdated&&!a.isStale&&Date.now()-a.lastUpdated.getTime()<oo)){e(e=>({loading:{...e.loading,daily:!0},errors:{...e.errors,daily:null}}));try{const t=await Tn();e(e=>({dailyRecords:t,loading:{...e.loading,daily:!1},cache:{...e.cache,daily:{lastUpdated:new Date,isStale:!1}}}))}catch(n){const t=so(n,"日課記録の読み込みに失敗しました");e(e=>({loading:{...e.loading,daily:!1},errors:{...e.errors,daily:t}}))}}},loadBpRecords:async()=>{const r=t();if(r.loading.bp)return;const a=r.cache.bp;if(!(a.lastUpdated&&!a.isStale&&Date.now()-a.lastUpdated.getTime()<oo)){e(e=>({loading:{...e.loading,bp:!0},errors:{...e.errors,bp:null}}));try{const t=await Sn();e(e=>({bpRecords:t,loading:{...e.loading,bp:!1},cache:{...e.cache,bp:{lastUpdated:new Date,isStale:!1}}}))}catch(n){const t=so(n,"血圧記録の読み込みに失敗しました");e(e=>({loading:{...e.loading,bp:!1},errors:{...e.errors,bp:t}}))}}},loadDailyFields:async()=>{const r=t();if(r.loading.fields)return;const a=r.cache.fields;if(!(a.lastUpdated&&!a.isStale&&Date.now()-a.lastUpdated.getTime()<oo)){e(e=>({loading:{...e.loading,fields:!0},errors:{...e.errors,fields:null}}));try{const t=await _n();e(e=>({dailyFields:t,loading:{...e.loading,fields:!1},cache:{...e.cache,fields:{lastUpdated:new Date,isStale:!1}}}))}catch(n){const t=so(n,"日課フィールドの読み込みに失敗しました");e(e=>({loading:{...e.loading,fields:!1},errors:{...e.errors,fields:t}}))}}},loadAllData:async()=>{if(!t().loading.global){e(e=>({loading:{...e.loading,global:!0},errors:{...e.errors,global:null}}));try{await Promise.all([t().loadWeightRecords(),t().loadDailyRecords(),t().loadBpRecords(),t().loadDailyFields()]),e(e=>({loading:{...e.loading,global:!1}}))}catch(r){const t=so(r,"全データの読み込みに失敗しました");e(e=>({loading:{...e.loading,global:!1},errors:{...e.errors,global:t}}))}}},addWeightRecord:async t=>{try{const r=await wn.add(t);if(r.success&&r.data)return e(e=>({weightRecords:[...e.weightRecords,r.data],cache:{...e.cache,weight:{lastUpdated:new Date,isStale:!1}}})),r.data;throw new Error(r.error||"Failed to add weight record")}catch(r){const t=so(r,"体重記録の追加に失敗しました");return e(e=>({errors:{...e.errors,weight:t}})),null}},updateWeightRecord:async t=>{try{const r=await wn.update(t);if(r.success)return e(e=>({weightRecords:e.weightRecords.map(e=>e.id===t.id?t:e),cache:{...e.cache,weight:{lastUpdated:new Date,isStale:!1}}})),!0;throw new Error(r.error||"Failed to update weight record")}catch(r){const t=so(r,"体重記録の更新に失敗しました");return e(e=>({errors:{...e.errors,weight:t}})),!1}},deleteWeightRecord:async t=>{try{const r=await wn.delete(t);if(r.success)return e(e=>({weightRecords:e.weightRecords.filter(e=>e.id!==t),cache:{...e.cache,weight:{lastUpdated:new Date,isStale:!1}}})),!0;throw new Error(r.error||"Failed to delete weight record")}catch(r){const t=so(r,"体重記録の削除に失敗しました");return e(e=>({errors:{...e.errors,weight:t}})),!1}},deleteAllData:async()=>{e(e=>({loading:{...e.loading,global:!0},errors:{...e.errors,global:null}}));try{await An(),e({weightRecords:[],dailyRecords:[],bpRecords:[],dailyFields:[],loading:{weight:!1,daily:!1,bp:!1,fields:!1,global:!1},errors:{weight:null,daily:null,bp:null,fields:null,global:null},cache:{weight:{lastUpdated:new Date,isStale:!1},daily:{lastUpdated:new Date,isStale:!1},bp:{lastUpdated:new Date,isStale:!1},fields:{lastUpdated:new Date,isStale:!1}}})}catch(t){const r=so(t,"全データ削除に失敗しました");throw e(e=>({loading:{...e.loading,global:!1},errors:{...e.errors,global:r}})),t}},refreshAllData:async()=>{e(e=>({cache:{weight:{...e.cache.weight,isStale:!0},daily:{...e.cache.daily,isStale:!0},bp:{...e.cache.bp,isStale:!0},fields:{...e.cache.fields,isStale:!0}}})),await t().loadAllData()},clearError:t=>{e(e=>({errors:{...e.errors,[t]:null}}))},clearAllErrors:()=>{e(()=>({errors:{weight:null,daily:null,bp:null,fields:null,global:null}}))},getRecordsOfDay:(e,r)=>{const a=t();switch(r){case"weight":return a.weightRecords.filter(t=>t.date===e);case"daily":return a.dailyRecords.filter(t=>t.date===e);case"bp":return a.bpRecords.filter(t=>t.date===e);default:return[]}},isRecorded:(e,r)=>t().getRecordsOfDay(e,r).length>0,getWeightRecordsForGraph:()=>t().weightRecords.filter(e=>!e.excludeFromGraph).sort((e,t)=>e.date.localeCompare(t.date)),getLatestWeightRecord:()=>t().weightRecords.sort((e,t)=>t.date.localeCompare(e.date))[0]||null,getRecordStats:()=>{const e=t();return{weightCount:e.weightRecords.length,dailyCount:e.dailyRecords.length,bpCount:e.bpRecords.length,fieldsCount:e.dailyFields.length,totalCount:e.weightRecords.length+e.dailyRecords.length+e.bpRecords.length}}})),lo=()=>io(e=>e.weightRecords),co=()=>io(e=>e.dailyRecords),uo=()=>io(e=>e.loading),ho=()=>io(e=>e.errors);const mo=[{label:"2週間",days:14},{label:"1か月半",days:45},{label:"3か月",days:90},{label:"全データ",days:null}],fo=[{label:"体重",value:"weight"},{label:"体脂肪",value:"bodyComposition"},{label:"血圧",value:"bloodPressure"}],go={exercise:"🏃",meal:"🍽",sleep:"🛌"},po=["日","月","火","水","木","金","土"],bo=()=>{const[e,t]=D.useState(0),[a,n]=D.useState(!1),[o,s]=D.useState("weight"),{dailyRecords:i,goal:l,isLoading:d,error:c,getFilteredData:u,getFilteredBpData:h,getFilteredBodyCompositionData:k,getStatusStats:N}=function(){var e,t;const r=lo(),a=co(),n=uo(),o=ho(),s=io(e=>e.loadAllData),{goal:i,loadGoal:l}=Xn(),[d,c]=D.useState([]),[u,h]=D.useState(!1),[m,f]=D.useState(null),g=D.useCallback(async()=>{h(!0),f(null);try{const e=await Sn();c(e)}catch(e){f(e instanceof Error?e.message:"Unknown error")}finally{h(!1)}},[]);D.useEffect(()=>{s(),l(),g()},[g]);const p=D.useMemo(()=>{const e=[...r.map(e=>new Date(`${e.date}T${e.time}`).getTime()),...d.map(e=>new Date(`${e.date}T${e.time}`).getTime())];return e.length>0?Math.max(...e):0},[r,d]),b=D.useCallback((e,t)=>{let a=r.filter(e=>"number"==typeof e.weight&&(t||!e.excludeFromGraph)).sort((e,t)=>new Date(`${e.date}T${e.time}`).getTime()-new Date(`${t.date}T${t.time}`).getTime()).map(e=>({datetime:`${e.date}T${e.time}`,timestamp:new Date(`${e.date}T${e.time}`).getTime(),value:Number(e.weight),excluded:!!e.excludeFromGraph}));const n=[{label:"2週間",days:14},{label:"1か月半",days:45},{label:"3か月",days:90},{label:"全データ",days:null}][e];if(n.days&&p){const e=p-24*n.days*60*60*1e3;a=a.filter(t=>t.timestamp>=e)}return a},[r,p]),x=D.useCallback(e=>{let t=r.filter(e=>"number"==typeof e.bodyFat&&isFinite(e.bodyFat)||"number"==typeof e.waist&&isFinite(e.waist)).sort((e,t)=>new Date(`${e.date}T${e.time}`).getTime()-new Date(`${t.date}T${t.time}`).getTime()).map(e=>({datetime:`${e.date}T${e.time}`,timestamp:new Date(`${e.date}T${e.time}`).getTime(),bodyFat:"number"==typeof e.bodyFat&&isFinite(e.bodyFat)?e.bodyFat:null,waist:"number"==typeof e.waist&&isFinite(e.waist)?e.waist:null}));const a=[{label:"2週間",days:14},{label:"1か月半",days:45},{label:"3か月",days:90},{label:"全データ",days:null}][e];if(a.days&&p){const e=p-24*a.days*60*60*1e3;t=t.filter(t=>t.timestamp>=e)}return t},[r,p]),y=D.useCallback((e,t,r=!1)=>{let a=d.filter(e=>"number"==typeof e.systolic&&"number"==typeof e.diastolic&&(r||!e.excludeFromGraph)).sort((e,t)=>new Date(`${e.date}T${e.time}`).getTime()-new Date(`${t.date}T${t.time}`).getTime()).map(e=>({datetime:`${e.date}T${e.time}`,timestamp:new Date(`${e.date}T${e.time}`).getTime(),systolic:e.systolic,diastolic:e.diastolic,value:"systolic"===t?e.systolic:e.diastolic,excluded:!!e.excludeFromGraph}));const n=[{label:"2週間",days:14},{label:"1か月半",days:45},{label:"3か月",days:90},{label:"全データ",days:null}][e];if(n.days&&p){const e=p-24*n.days*60*60*1e3;a=a.filter(t=>t.timestamp>=e)}return a},[d,p]),w=D.useCallback(e=>{const t=[{label:"2週間",days:14},{label:"1か月半",days:45},{label:"3か月",days:90},{label:"全データ",days:null}];if(!a.length)return[];let r=null,n=null;if(t[e].days&&p)n=new Date(p),r=new Date(p),r.setDate(n.getDate()-t[e].days+1);else if(a.length>0){const e=[...a].sort((e,t)=>e.date.localeCompare(t.date));r=new Date(e[0].date),n=new Date(e[e.length-1].date)}if(!r||!n)return[];const o=[],s=new Date(r);for(;s<=n;)o.push(`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`),s.setDate(s.getDate()+1);return o},[a,p]),v=D.useCallback((e,t)=>{const r=w(t);let n=0,o=0;return r.forEach(t=>{const r=a.find(r=>r.fieldId===e&&r.date===t);!r||1!==r.value&&0!==r.value||(n++,1===r.value&&o++)}),{total:n,success:o,percent:n>0?Math.round(o/n*100):0}},[a,w]),k=n.global||n.weight||n.daily||u,N=(null==(e=o.weight)?void 0:e.message)||(null==(t=o.daily)?void 0:t.message)||m||null,j=D.useCallback(()=>{s(),l(),g()},[g]);return{weightRecords:r,bpRecords:d,dailyRecords:a,goal:i,latestTimestamp:p,isLoading:k,error:N,getFilteredData:b,getFilteredBpData:y,getFilteredBodyCompositionData:x,getPeriodDateList:w,getStatusStats:v,refetch:j}}(),j=D.useMemo(()=>{if("weight"===o)return u(e,a);if("bloodPressure"===o){return h(e,"systolic",a)}return k(e)},[u,h,k,e,a,o]),S=D.useMemo(()=>{if(!j.length)return[];const e=new Date(j[0].timestamp),t=new Date(j[j.length-1].timestamp);e.setHours(0,0,0,0),t.setHours(0,0,0,0);const r=[];for(let a=new Date(e);a<=t;a.setDate(a.getDate()+1))r.push(new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0).getTime());return r},[j]),M=D.useMemo(()=>{if(!j.length)return["auto","auto"];const e=new Date(j[0].timestamp),t=new Date(j[j.length-1].timestamp);return e.setHours(0,0,0,0),t.setHours(23,59,59,999),[e.getTime(),t.getTime()]},[j]),E=D.useMemo(()=>{if(0!==e||!j.length)return;const t=new Date(j[0].timestamp),r=new Date(j[j.length-1].timestamp);t.setHours(0,0,0,0),r.setHours(0,0,0,0);const a=[];for(let e=new Date(t);e<=r;e.setDate(e.getDate()+1))a.push(new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime());return a},[j,e]),C=e=>{const t=new Date(e),r=String(t.getMonth()+1).padStart(2,"0"),a=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0");return`${r}/${a}(${po[t.getDay()]}) ${n}:${o}`},T=D.useMemo(()=>{if(j.length<2)return null;if("weight"===o){const e=j,t=e.length;let r=0,a=0,n=0,o=0;for(const m of e)r+=m.timestamp,a+=m.value,n+=m.timestamp*m.timestamp,o+=m.timestamp*m.value;const s=r/t,i=a/t,l=n-r*s;if(0===l)return null;const d=(o-r*i)/l,c=i-d*s,u=e[0].timestamp,h=e[e.length-1].timestamp;return[{timestamp:u,weightTrend:d*u+c},{timestamp:h,weightTrend:d*h+c}]}return null},[j,o]),O=D.useMemo(()=>{if("bodyComposition"!==o||j.length<2)return null;const e=j.filter(e=>null!=e.bodyFat&&!isNaN(e.bodyFat)&&"number"==typeof e.bodyFat);if(e.length<2)return null;const t=e.length;let r=0,a=0,n=0,s=0;for(const o of e)r+=o.timestamp,a+=o.bodyFat,n+=o.timestamp*o.timestamp,s+=o.timestamp*o.bodyFat;const i=r/t,l=a/t,d=n-r*i;if(0===d)return null;const c=(s-r*l)/d,u=l-c*i,h=e[0].timestamp,m=e[e.length-1].timestamp;return[{timestamp:h,bodyFatTrend:c*h+u},{timestamp:m,bodyFatTrend:c*m+u}]},[j,o]),_=D.useMemo(()=>{if("bodyComposition"!==o||j.length<2)return null;const e=j.filter(e=>null!=e.waist&&!isNaN(e.waist)&&"number"==typeof e.waist);if(e.length<2)return null;const t=e.length;let r=0,a=0,n=0,s=0;for(const o of e)r+=o.timestamp,a+=o.waist,n+=o.timestamp*o.timestamp,s+=o.timestamp*o.waist;const i=r/t,l=a/t,d=n-r*i;if(0===d)return null;const c=(s-r*l)/d,u=l-c*i,h=e[0].timestamp,m=e[e.length-1].timestamp;return[{timestamp:h,waistTrend:c*h+u},{timestamp:m,waistTrend:c*m+u}]},[j,o]),R=D.useMemo(()=>{if("bloodPressure"!==o||j.length<2)return null;const e=j.filter(e=>null!=e.systolic&&!isNaN(e.systolic));if(e.length<2)return null;const t=e.length;let r=0,a=0,n=0,s=0;for(const o of e)r+=o.timestamp,a+=o.systolic,n+=o.timestamp*o.timestamp,s+=o.timestamp*o.systolic;const i=r/t,l=a/t,d=n-r*i;if(0===d)return null;const c=(s-r*l)/d,u=l-c*i,h=e[0].timestamp,m=e[e.length-1].timestamp;return[{timestamp:h,systolicTrend:c*h+u},{timestamp:m,systolicTrend:c*m+u}]},[j,o]),I=D.useMemo(()=>{if("bloodPressure"!==o||j.length<2)return null;const e=j.filter(e=>null!=e.diastolic&&!isNaN(e.diastolic));if(e.length<2)return null;const t=e.length;let r=0,a=0,n=0,s=0;for(const o of e)r+=o.timestamp,a+=o.diastolic,n+=o.timestamp*o.timestamp,s+=o.timestamp*o.diastolic;const i=r/t,l=a/t,d=n-r*i;if(0===d)return null;const c=(s-r*l)/d,u=l-c*i,h=e[0].timestamp,m=e[e.length-1].timestamp;return[{timestamp:h,diastolicTrend:c*h+u},{timestamp:m,diastolicTrend:c*m+u}]},[j,o]),A=e=>{const{x:t=0,y:a=0,payload:n}=e,o=n.value,s=new Date(o),i=po[s.getDay()];return r.jsx("g",{children:r.jsx("text",{x:t,y:a+10,textAnchor:"middle",fontSize:"12",children:`${s.getMonth()+1}/${s.getDate()}(${i})`})})};return d?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"データを読み込み中..."})]}):c?r.jsx("div",{className:"flex flex-col items-center justify-center py-8",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-w-md",children:[r.jsx("p",{className:"text-red-800 text-sm mb-2",children:"データの読み込みに失敗しました"}),r.jsx("p",{className:"text-red-600 text-xs",children:c})]})}):r.jsxs("div",{className:"flex flex-col items-center justify-start py-0 bg-transparent","data-testid":"record-graph",children:[r.jsx("div",{className:"w-full mx-auto bg-white dark:bg-gray-800 shadow flex justify-center items-center mb-2 py-1 px-2",children:fo.map(e=>r.jsx("button",{className:`flex-1 rounded-lg border font-semibold transition mx-0.5 text-xs leading-none flex items-center justify-center\n              ${o===e.value?"border-blue-400 text-blue-500 shadow":"border-gray-300 text-gray-500 hover:border-blue-300 hover:text-blue-400"}\n            `,style:{height:"24px",minHeight:"24px",maxHeight:"24px",padding:"0"},onClick:()=>s(e.value),children:e.label},e.value))}),r.jsx("div",{className:"w-full mx-auto bg-white dark:bg-gray-800 shadow flex justify-center items-center mb-4 p-2",children:mo.map((a,n)=>r.jsx("button",{className:`flex-1 rounded-lg border font-semibold transition mx-0.5 text-xs leading-none flex items-center justify-center\n              ${e===n?"border-orange-400 text-orange-500 shadow":"border-gray-300 text-gray-500 hover:border-orange-300 hover:text-orange-400"}\n            `,style:{height:"24px",minHeight:"24px",maxHeight:"24px",padding:"0"},onClick:()=>t(n),children:a.label},a.label))}),r.jsx("div",{className:"flex gap-4 items-center mb-2 flex-wrap justify-center",children:"weight"===o?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[r.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#f59e42",borderRadius:2,marginRight:6}}),"目標"]}),r.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[r.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#22c55e",borderRadius:2,marginRight:6}}),"傾向"]})]}):"bloodPressure"===o?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[r.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#ef4444",borderRadius:2,marginRight:6}}),"収縮期"]}),r.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[r.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#3b82f6",borderRadius:2,marginRight:6}}),"拡張期"]}),r.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[r.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#22c55e",borderRadius:2,marginRight:6}}),"傾向"]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[r.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#8b5cf6",borderRadius:2,marginRight:6}}),"体脂肪率"]}),r.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[r.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#f59e0b",borderRadius:2,marginRight:6}}),"腹囲"]}),r.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[r.jsx("span",{style:{display:"inline-block",width:18,height:2,background:"#8b5cf6",borderRadius:1,marginRight:6,borderStyle:"dashed",borderWidth:"1px 0",borderColor:"#8b5cf6"}}),"体脂肪傾向"]}),r.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[r.jsx("span",{style:{display:"inline-block",width:18,height:2,background:"#f59e0b",borderRadius:1,marginRight:6,borderStyle:"dashed",borderWidth:"1px 0",borderColor:"#f59e0b"}}),"腹囲傾向"]})]})}),r.jsxs("div",{className:"w-full h-[400px] bg-white dark:bg-gray-800 rounded-xl shadow p-1 relative",children:[("weight"===o||"bloodPressure"===o)&&r.jsxs("label",{className:"flex items-center absolute right-0 top-0 bg-white/80 dark:bg-gray-800/80 px-1 py-0 h-6 min-h-0 rounded-none leading-tight text-xs font-bold z-10 w-auto cursor-pointer select-none",children:[r.jsx("input",{type:"checkbox",className:"form-checkbox accent-blue-600 mr-1",checked:a,onChange:e=>n(e.target.checked)}),"除外値も表示"]}),r.jsx(m,{width:"100%",height:"100%",children:"bodyComposition"===o?r.jsxs(f,{data:j,margin:{top:20,right:30,left:0,bottom:20},children:[r.jsx(g,{stroke:"#eee",strokeDasharray:"5 5"}),r.jsx(p,{dataKey:"timestamp",type:"number",domain:M,tick:0===e?A:void 0,tickFormatter:0===e?void 0:C,ticks:E}),0===e&&S.map(e=>r.jsx(b,{x:e,stroke:"#888",strokeDasharray:"2 2",yAxisId:"left"},e)),r.jsx(x,{yAxisId:"left",domain:["auto","auto"],unit:"%"}),r.jsx(x,{yAxisId:"right",orientation:"right",domain:["auto","auto"],unit:"cm"}),r.jsx(y,{content:({active:e,payload:t,label:a})=>{var n;if(!e||!t||!t.length)return null;const o=null==(n=t[0])?void 0:n.payload,s=null==o?void 0:o.timestamp,i=s?new Date(s):null;return r.jsxs("div",{style:{background:"#fff",border:"1px solid #ccc",padding:8,borderRadius:8},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:i?C(s):""}),t.map((e,t)=>r.jsxs("div",{style:{color:e.color,fontSize:14},children:["bodyFat"===e.dataKey?"体脂肪率: ":"腹囲: ","number"==typeof e.value?e.value.toFixed(1):e.value,"bodyFat"===e.dataKey?"%":"cm"]},t))]})}}),r.jsx(w,{yAxisId:"left",type:"monotone",dataKey:"bodyFat",stroke:"#8b5cf6",strokeWidth:3,dot:{fill:"#8b5cf6",stroke:"#fff",strokeWidth:1,r:4},activeDot:!1,connectNulls:!1},"bodyFat-line"),r.jsx(w,{yAxisId:"right",type:"monotone",dataKey:"waist",stroke:"#f59e0b",strokeWidth:3,dot:{fill:"#f59e0b",stroke:"#fff",strokeWidth:1,r:4},activeDot:!1,connectNulls:!1},"waist-line"),O&&r.jsx(w,{yAxisId:"left",type:"linear",data:O,dataKey:"bodyFatTrend",stroke:"#8b5cf6",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"bodyFat-trend"),_&&r.jsx(w,{yAxisId:"right",type:"linear",data:_,dataKey:"waistTrend",stroke:"#f59e0b",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"waist-trend")]}):r.jsxs(v,{data:j,margin:{top:20,right:30,left:0,bottom:20},children:[r.jsx(g,{stroke:"#eee",strokeDasharray:"5 5"}),r.jsx(p,{dataKey:"timestamp",type:"number",domain:M,tick:0===e?A:void 0,tickFormatter:0===e?void 0:C,ticks:E}),0===e&&S.map(e=>r.jsx(b,{x:e,stroke:"#888",strokeDasharray:"2 2"},e)),"bodyComposition"===o?r.jsxs(r.Fragment,{children:[r.jsx(x,{yAxisId:"left",domain:["auto","auto"],unit:"%"}),r.jsx(x,{yAxisId:"right",orientation:"right",domain:["auto","auto"],unit:"cm"})]}):r.jsx(x,{domain:["auto","auto"],unit:"weight"===o?"kg":"mmHg"}),"weight"===o&&(()=>{if(!l)return null;const e="number"==typeof l.startWeight&&isFinite(l.startWeight),t="number"==typeof l.targetWeight&&isFinite(l.targetWeight),a="string"==typeof l.targetStart&&!isNaN(Date.parse(l.targetStart)),n="string"==typeof l.targetEnd&&!isNaN(Date.parse(l.targetEnd));if(!(e&&t&&a&&n))return null;const o=Date.parse(l.targetStart),s=l.startWeight,i=Date.parse(l.targetEnd),d=l.targetWeight;if(o>=i)return null;const[c,u]=M,h=Math.max(o,c),m=Math.min(i,u);if(h>m)return null;const f=e=>s+(d-s)*(e-o)/(i-o),g=[{timestamp:h,value:f(h)},{timestamp:m,value:f(m)}];return r.jsx(w,{type:"linear",data:g,dataKey:"value",stroke:"#f59e42",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"4 2",legendType:"none"},"weight-target")})(),r.jsx(y,{content:({active:e,payload:t,label:a})=>{var n;if(!e||!t||!t.length)return null;const s=null==(n=t[0])?void 0:n.payload,l=null==s?void 0:s.timestamp,d=l?new Date(l):null,c=d?`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`:"";return r.jsxs("div",{style:{background:"#fff",border:"1px solid #ccc",padding:8,borderRadius:8},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:(()=>{var e;if(!t||!Array.isArray(t)||0===t.length)return"";const r=null==(e=t[0])?void 0:e.payload;if(!r||"object"!=typeof r||null===r||!("timestamp"in r))return"";const a=r.timestamp,n=new Date(a),o=String(n.getMonth()+1).padStart(2,"0"),s=String(n.getDate()).padStart(2,"0"),i=String(n.getHours()).padStart(2,"0"),l=String(n.getMinutes()).padStart(2,"0");return`${o}/${s}(${po[n.getDay()]}) ${i}:${l}`})()}),"bodyComposition"!==o&&(t??[]).filter(e=>e&&"#f59e42"!==e.color&&"#22c55e"!==e.color).map((e,t)=>r.jsxs("div",{style:{color:e.color,fontSize:14},children:["number"==typeof e.value?e.value.toFixed("weight"===o?2:0):e.value,"weight"===o?"kg":"mmHg"]},t)),r.jsx("div",{style:{marginTop:6,fontSize:13},children:[{key:"exercise",label:"🏃‍♂️"},{key:"meal",label:"🍽"},{key:"sleep",label:"🛌"}].map(({key:e,label:t})=>{const a=i.find(t=>t.fieldId===e&&t.date===c);return void 0===a?null:r.jsxs("span",{style:{marginRight:8,verticalAlign:"middle",fontSize:"1.1em",display:"inline-flex",alignItems:"center"},children:[t,1===a.value?r.jsx(Pe,{style:{color:"#38bdf8",fontSize:"1.3em",marginLeft:2,verticalAlign:"middle"}}):r.jsx(qe,{style:{color:"#bbb",fontSize:"1.3em",marginLeft:2,verticalAlign:"middle"}})]},e)})})]})}}),"weight"===o?r.jsx(w,{type:"monotone",dataKey:"value",data:j,stroke:"#38bdf8",strokeWidth:3,dot:({cx:e,cy:t,payload:a})=>r.jsx("circle",{cx:e,cy:t,r:4,fill:a.excluded?"#f87171":"#38bdf8",stroke:"#fff",strokeWidth:1},(null==a?void 0:a.timestamp)??`${e}-${t}`),activeDot:!1},"weight-line"):r.jsxs(r.Fragment,{children:[r.jsx(w,{type:"monotone",dataKey:"systolic",data:j,stroke:"#ef4444",strokeWidth:3,dot:({cx:e,cy:t,payload:a})=>r.jsx("circle",{cx:e,cy:t,r:4,fill:a.excluded?"#f87171":"#ef4444",stroke:"#fff",strokeWidth:1},(null==a?void 0:a.timestamp)??`${e}-${t}`),activeDot:!1},"systolic-line"),r.jsx(w,{type:"monotone",dataKey:"diastolic",data:j,stroke:"#3b82f6",strokeWidth:3,dot:({cx:e,cy:t,payload:a})=>r.jsx("circle",{cx:e,cy:t,r:4,fill:a.excluded?"#f87171":"#3b82f6",stroke:"#fff",strokeWidth:1},(null==a?void 0:a.timestamp)??`${e}-${t}`),activeDot:!1},"diastolic-line"),R&&r.jsx(w,{type:"linear",data:R,dataKey:"systolicTrend",stroke:"#22c55e",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"systolic-trend"),I&&r.jsx(w,{type:"linear",data:I,dataKey:"diastolicTrend",stroke:"#22c55e",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"diastolic-trend")]}),"weight"===o&&T&&r.jsx(w,{type:"linear",data:T,dataKey:"weightTrend",stroke:"#22c55e",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"},"weight-trend")]})})]}),"weight"===o&&r.jsx("div",{className:"w-full flex flex-col items-start gap-1 mt-4 mb-2 text-left",children:["exercise","meal","sleep"].map(t=>{const a=N(t,e);let n="";l&&("exercise"===t&&l.exerciseGoal&&(n=`${l.exerciseGoal}`),"meal"===t&&l.dietGoal&&(n=`${l.dietGoal}`),"sleep"===t&&l.sleepGoal&&(n=`${l.sleepGoal}`));const o=go[t]??"";return a?r.jsxs("div",{className:"flex items-baseline text-xs sm:text-base text-blue-700 dark:text-blue-200 font-semibold whitespace-nowrap",children:[r.jsx("span",{className:"inline-block min-w-[2em] text-center",children:o}),r.jsx("span",{className:"inline-block min-w-[7em]",children:a.total>0?`${a.percent}% (${a.success}/${a.total}日)`:"記録なし"}),n&&r.jsx("span",{className:"ml-0 text-gray-500 dark:text-gray-300 text-xs sm:text-sm font-normal",children:n})]},t):r.jsxs("div",{className:"flex items-baseline text-xs sm:text-base text-blue-700 dark:text-blue-200 font-semibold whitespace-nowrap",children:[r.jsx("span",{className:"inline-block min-w-[2em] text-center",children:o}),r.jsx("span",{className:"inline-block min-w-[7em]",children:"記録なし"}),n&&r.jsx("span",{className:"ml-0 text-gray-500 dark:text-gray-300 text-xs sm:text-sm font-normal",children:n})]},t)})})]})},xo=[{min:0,max:18.5,color:"#6ec6f1",label:"低体重",range:"<18.5"},{min:18.5,max:25,color:"#7edfa0",label:"普通体重",range:"18.5-24.9"},{min:25,max:30,color:"#b6d97a",label:"肥満(1度)",range:"25-29.9"},{min:30,max:35,color:"#ffe066",label:"肥満(2度)",range:"30-34.9"},{min:35,max:40,color:"#ff9800",label:"肥満(3度)",range:"35-39.9"},{min:40,max:100,color:"#f44336",label:"肥満(4度)",range:"40.0+"}],yo=D.memo(function({currentWeight:e,goal:t,showWeightDiff:a=!0}){const n=e&&t&&t.height?e/Math.pow(t.height/100,2):null,o="number"!=typeof n||isNaN(n)?0:n,s=(()=>{if(null===n)return 0;let e=0;for(let t=0;t<xo.length;t++){const r=xo[t];if(n<r.max){return e+100/xo.length*((n-r.min)/(r.max-r.min))}e+=100/xo.length}return 100})(),[i,l]=D.useState(0);D.useEffect(()=>{if("number"!=typeof n||isNaN(n))return;const e=performance.now();requestAnimationFrame(function t(r){const a=r-e,n=Math.min(a/800,1);l(0+(o-0)*n),n<1?requestAnimationFrame(t):l(o)})},[o,n]);const[d,c]=D.useState(0);return D.useEffect(()=>{if(a&&t&&void 0!==t.startWeight&&null!==e&&e-t.startWeight<0){let r=function(e){const t=e-s,i=Math.min(t/o,1);c(n+(a-n)*i),i<1?requestAnimationFrame(r):c(a)};const a=e-t.startWeight,n=0,o=800,s=performance.now();requestAnimationFrame(r)}else c(0)},[t,e,a]),n&&t&&t.height?r.jsxs("div",{className:"w-full max-w-md mx-auto",children:[a&&r.jsxs("div",{className:"flex items-center justify-center mb-2",children:[r.jsxs("span",{className:"text-base font-semibold text-blue-700 dark:text-blue-200",children:["BMI"," ",r.jsx("span",{style:{display:"inline-block",minWidth:"4ch",textAlign:"right",fontFamily:"monospace"},children:i.toFixed(1)})]}),a&&d<0&&r.jsxs("span",{className:"ml-2 text-base font-semibold text-green-600 dark:text-green-400",children:["🏆",d.toFixed(1),"kg"]})]}),r.jsxs("div",{className:"flex flex-col items-center mb-2",children:[r.jsxs("div",{className:"relative w-full h-8 flex rounded overflow-hidden shadow",style:{minWidth:240},children:[xo.map(e=>r.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",style:{backgroundColor:e.color},title:`${e.label} (${e.range})`,children:r.jsx("span",{className:"text-[10px] font-bold text-gray-800 dark:text-gray-900",children:e.label})},e.label)),r.jsx("div",{className:"absolute top-0 text-red-600 text-lg font-bold",style:{left:`${s}%`,transform:"translateX(-50%)",lineHeight:"32px",fontSize:"20px",fontWeight:"bold",textShadow:"0 0 2px #fff, 0 0 2px #fff, 1px 1px 2px #0002",zIndex:2},"aria-label":"現在のBMI位置",children:"▼"})]}),r.jsx("div",{className:"w-full flex justify-between mt-1 px-1",children:xo.map(e=>r.jsx("span",{className:"text-[10px] text-gray-700 dark:text-gray-200",style:{flex:1,textAlign:"center"},children:e.range},e.label+"-range"))})]})]}):null}),wo=["朝一","朝食後","夕食前","夕食後","就寝前","運動後に測定","外食あり"],vo={weight:"",bodyFat:"",waist:"",time:ft(),note:"",excludeFromGraph:!1};const ko=({showTipsModal:e})=>{const{goal:t,loadGoal:a}=Xn(),m=D.useCallback(async()=>{const e=await wn.getAll();if(!e.success)throw new Error(e.error||"Failed to fetch records");return e.data||[]},[]),f=D.useCallback(async e=>{const t=await wn.add(e);if(!t.success)throw new Error(t.error||"Failed to add record")},[]),g=D.useCallback(async e=>{const t=await wn.update(e);if(!t.success)throw new Error(t.error||"Failed to update record")},[]),p=D.useCallback(async e=>{const t=await wn.delete(e);if(!t.success)throw new Error(t.error||"Failed to delete record")},[]),{records:b,isLoading:x,error:y,handleAdd:w,handleUpdate:v,handleDelete:k,clearError:N}=Wn({getAllRecords:m,addRecord:f,updateRecord:g,deleteRecord:p,onRecordAdded:e}),{selectedDate:j,setSelectedDate:M,centerDate:E,setCenterDate:C,today:T,recordDate:O,recordsOfDay:_,isRecorded:R}=Pn({records:b,getRecordDate:e=>e.date}),{formData:I,updateField:A,resetForm:P,createRecordFromForm:W}=Ln({initialValues:vo,createRecord:(e,t)=>({id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:t,time:e.time,weight:Number(e.weight),bodyFat:""!==e.bodyFat?Number(e.bodyFat):null,waist:""!==e.waist?Number(e.waist):null,note:e.note||null,excludeFromGraph:e.excludeFromGraph}),resetValues:vo}),L=D.useMemo(()=>{if(0===_.length)return null;const e=_.map(e=>Number(e.weight));return Math.min(...e)},[_]);S.useEffect(()=>{t&&t.height||a()},[t,a]);const F=I.weight||I.bodyFat||I.waist,B=D.useCallback(async()=>{if(F)try{const e=W(O);await w(e),P()}catch(e){}},[F,W,O,w,P]),$=function(){const[e,t]=D.useState(!1),{refs:r,floatingStyles:a,context:n}=o({open:e,onOpenChange:t,middleware:[c(6),u(),h()],placement:"bottom-end"}),m=s(n),f=i(n),g=l(n),{getReferenceProps:p,getFloatingProps:b}=d([m,f,g]);return{open:e,setOpen:t,refs:r,floatingStyles:a,getReferenceProps:p,getFloatingProps:b}}();return r.jsxs("div",{className:"bg-transparent",children:[r.jsx(za,{selectedDate:j,setSelectedDate:M,centerDate:E,setCenterDate:C,today:T,isRecorded:R,"data-testid":"date-picker"}),r.jsx("div",{className:"w-full max-w-md mx-auto mt-3 mb-3 flex justify-start pl-4",children:r.jsxs("span",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-white",children:[j.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),R(j)&&r.jsxs(r.Fragment,{children:[r.jsx(Pe,{className:"inline-block w-6 h-6 text-green-500 ml-2 align-middle","aria-label":"入力済み"}),L&&t&&t.height&&r.jsxs("span",{className:"ml-3 text-base font-semibold text-blue-700 dark:text-blue-200 align-middle",children:["BMI ",(L/Math.pow(t.height/100,2)).toFixed(1),t.startWeight&&L-t.startWeight<0&&r.jsxs("span",{className:"ml-2 text-base font-semibold text-green-600 dark:text-green-400",children:["🏆",(L-t.startWeight).toFixed(1),"kg"]})]})]})]})}),r.jsx(yo,{currentWeight:L,goal:t,showWeightDiff:!1}),r.jsxs("div",{className:"flex flex-col items-center justify-start min-h-[60vh]",children:[y&&r.jsx("div",{className:"w-full max-w-md mb-4",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[r.jsx("p",{className:"text-red-800 text-sm",children:y}),r.jsx("button",{onClick:N,className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"エラーを閉じる"})]})}),r.jsx("div",{className:"flex flex-col gap-2 w-full max-w-md",children:_.map(e=>r.jsxs("div",{className:"flex flex-col gap-1 bg-white dark:bg-gray-800 rounded-xl shadow p-2 mb-1",children:[r.jsxs("div",{className:"flex items-center w-full mb-1 justify-between",children:[r.jsx("input",{type:"time",className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-base bg-inherit text-gray-700 dark:text-gray-200 w-[6.5em]",value:e.time,onChange:t=>v({...e,time:t.target.value})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(nt,{variant:"danger",size:"sm",icon:Ze,"aria-label":"削除",onClick:()=>k(e.id),children:""}),r.jsxs(nt,{variant:e.excludeFromGraph?"secondary":"sky",size:"sm","aria-label":e.excludeFromGraph?"グラフ除外":"グラフ表示",onClick:()=>v({...e,excludeFromGraph:!e.excludeFromGraph}),children:["",r.jsxs("span",{className:"relative inline-block w-5 h-5",children:[r.jsx(Xe,{className:"w-5 h-5 text-white"}),e.excludeFromGraph&&r.jsx(ze,{className:"w-5 h-5 text-red-500 absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 w-full",children:[r.jsx(Ha,{value:e.weight,onChange:t=>v({...e,weight:Number(t)}),placeholder:"体重",step:"0.1",min:"0",width:"lg"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500",children:"kg"}),r.jsx(Ha,{value:e.bodyFat??"",onChange:t=>v({...e,bodyFat:""===t?null:Number(t)}),placeholder:"体脂肪",step:"0.1",min:"0",width:"lg"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500",children:"%"}),r.jsx(Ha,{value:e.waist??"",onChange:t=>v({...e,waist:""===t?null:Number(t)}),placeholder:"腹囲",step:"0.1",min:"0",width:"lg"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500",children:"cm"})]}),r.jsx("textarea",{className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-2 py-1 text-base bg-inherit text-gray-700 dark:text-gray-200 resize-none w-full pr-10 mb-0",value:e.note??"",onChange:t=>v({...e,note:t.target.value}),placeholder:"補足・メモ（任意）"})]},e.id))}),r.jsx("div",{className:"w-full max-w-md mt-2 mb-2",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow p-2 mb-0 flex flex-col gap-1",children:[r.jsxs("div",{className:"flex items-center w-full mb-1 justify-between",children:[r.jsx(Va,{value:I.time,onChange:e=>A("time",e)}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(nt,{variant:"success",size:"sm",icon:Pe,"aria-label":"保存",onClick:B,"data-testid":"save-btn",disabled:x||!F,children:""}),r.jsxs(nt,{variant:I.excludeFromGraph?"secondary":"sky",size:"sm","aria-label":I.excludeFromGraph?"グラフ除外":"グラフ表示",onClick:()=>A("excludeFromGraph",!I.excludeFromGraph),children:["",r.jsxs("span",{className:"relative inline-block w-5 h-5",children:[r.jsx(Xe,{className:"w-5 h-5 text-white"}),I.excludeFromGraph&&r.jsx(ze,{className:"w-5 h-5 text-red-500 absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 w-full mb-1",children:[r.jsx(Ha,{value:I.weight,onChange:e=>A("weight",e),placeholder:"体重",step:"0.1",min:"0",width:"lg"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500",children:"kg"}),r.jsx(Ha,{value:I.bodyFat,onChange:e=>A("bodyFat",e),placeholder:"体脂肪",step:"0.1",min:"0",width:"lg"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500",children:"%"}),r.jsx(Ha,{value:I.waist,onChange:e=>A("waist",e),placeholder:"腹囲",step:"0.1",min:"0",width:"lg"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500",children:"cm"})]}),r.jsxs("div",{className:"relative w-full mt-0",children:[r.jsx("textarea",{className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-2 py-1 text-base bg-inherit text-gray-700 dark:text-gray-200 resize-none w-full pr-10 mb-0",rows:1,value:I.note,onChange:e=>A("note",e.target.value),placeholder:"補足・メモ（任意）"}),r.jsx("div",{ref:$.refs.setReference,...$.getReferenceProps({}),className:"absolute right-2 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center text-yellow-400 cursor-pointer align-middle hover:opacity-80 focus:outline-none",tabIndex:0,"aria-label":"定型文を挿入",onClick:()=>$.setOpen(e=>!e),children:r.jsx(Ga,{className:"w-6 h-6"})}),$.open&&r.jsx(n,{children:r.jsx("div",{ref:$.refs.setFloating,style:$.floatingStyles,...$.getFloatingProps({className:"z-30 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-lg min-w-[180px] py-1"}),children:wo.map(e=>r.jsx("button",{type:"button",className:"block w-full text-left px-4 py-2 text-sm hover:bg-yellow-100 dark:hover:bg-yellow-900",onClick:()=>{A("note",e),$.setOpen(!1)},children:e},e))})})]})]})}),r.jsx("div",{className:"w-full max-w-md mx-auto mb-2 px-4",children:r.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 text-yellow-800 dark:text-yellow-100 p-3 rounded shadow-sm text-sm text-left",children:[r.jsx("strong",{children:"【ワンポイント】"})," ","体重はできるだけ毎日同じタイミング（例：朝起きてトイレ後、食事前など）で測ると、日々の変化がより正確にわかります。同じタイミングではない記録はグラフから除外できます。"]})})]})]})},Do=H(e=>({recordsOperation:{loading:!1,error:null},fieldsOperation:{loading:!1,error:null},clearRecordsError:()=>{e(e=>({recordsOperation:{...e.recordsOperation,error:null}}))},clearFieldsError:()=>{e(e=>({fieldsOperation:{...e.fieldsOperation,error:null}}))},deleteAllData:async()=>{e({recordsOperation:{loading:!0,error:null},fieldsOperation:{loading:!0,error:null}});try{await An(),e({recordsOperation:{loading:!1,error:null},fieldsOperation:{loading:!1,error:null}})}catch(t){const r=t instanceof en?t:new en(Ja.UNKNOWN,"全データ削除に失敗しました",t);throw e({recordsOperation:{loading:!1,error:r},fieldsOperation:{loading:!1,error:r}}),t}}})),No=({pageName:e})=>r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:e?`${e}を読み込み中...`:"ページを読み込み中..."}),dn]})});function jo(){const e=T(),[t,a]=D.useState(!1),n=()=>{a(!1)};D.useEffect(()=>{const e=e=>{"Escape"===e.key&&t&&n()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t]),D.useEffect(()=>{if(t){const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}},[t]);const o=[{path:"/weight",label:"体重",color:"teal"},{path:"/daily",label:"日課",color:"teal"},{path:"/bp",label:"血圧",color:"teal"},{path:"/graph",label:"グラフ",color:"blue"},{path:"/goal",label:"目標",color:"teal"},{path:"/export",label:"管理",color:"purple"}],s=t=>e.pathname===t;return r.jsxs("div",{className:"relative",children:[r.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-blue-600 text-white px-4 py-2 rounded-lg z-50 font-medium",children:"スキップリンク"}),r.jsxs("nav",{className:"hidden md:flex justify-between items-center gap-4 mb-12 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg mx-4 mt-4",role:"navigation","aria-label":"メインへ移動",children:[r.jsx("div",{className:"flex gap-4",children:o.map(e=>r.jsxs(O,{to:e.path,className:("purple"===e.color?"bg-purple-600 border-purple-600 hover:bg-purple-700 hover:border-purple-700":"bg-blue-500 border-blue-500 hover:bg-blue-600 hover:border-blue-600")+" !text-white px-4 py-2 rounded-lg shadow-md transition-colors duration-200 font-medium text-base border-2 hover:!text-white visited:!text-white active:!text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-current":s(e.path)?"page":void 0,"aria-label":e.label,children:[e.label,s(e.path)&&r.jsx("span",{className:"sr-only",children:"現在のページ"})]},e.path))}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Ee,{}),r.jsx(X,{className:"ml-2",debug:!1})]})]}),r.jsx("div",{className:"md:hidden flex w-full mb-4",children:r.jsxs("nav",{className:"flex w-full",children:[["/weight","/daily","/bp","/graph"].map((e,t,a)=>{const i=o.find(t=>t.path===e);return i?r.jsx(O,{to:i.path,className:`flex-1 text-center py-3 font-bold text-base transition-colors duration-200\n                  ${s(i.path)?"bg-blue-600 text-white mobile-nav-current":"bg-gray-100 dark:bg-gray-700 text-blue-700 dark:text-white hover:bg-blue-100 dark:hover:bg-blue-800 mobile-nav-link"}\n                  ${0===t?"rounded-l-xl":""}\n                  ${t===a.length?"rounded-r-xl":""}\n                  rounded-none focus:outline-none focus:ring-0 border-0`,"aria-current":s(i.path)?"page":void 0,"aria-label":i.label,style:{minWidth:0},onClick:n,children:i.label},i.path):null}),r.jsx("button",{onClick:()=>{a(!t)},className:"flex-1 text-center py-3 font-bold text-base bg-gray-100 dark:bg-gray-700 text-blue-700 dark:text-blue-200 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-r-xl border-0 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2","aria-label":t?"メニューを閉じる":"メニューを開く","aria-expanded":t,"aria-controls":"mobile-menu",style:{minWidth:0},children:r.jsx("span",{className:"inline-block align-middle",children:r.jsxs("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("rect",{y:"5",width:"24",height:"2",rx:"1",fill:"currentColor"}),r.jsx("rect",{y:"11",width:"24",height:"2",rx:"1",fill:"currentColor"}),r.jsx("rect",{y:"17",width:"24",height:"2",rx:"1",fill:"currentColor"})]})})})]})}),t&&r.jsx("div",{id:"mobile-menu",className:"md:hidden absolute top-full left-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg z-40 mb-4",role:"dialog","aria-modal":"true","aria-label":"モバイルメニュー",children:r.jsx("nav",{role:"navigation","aria-label":"モバイルメインナビゲーション",children:r.jsxs("div",{className:"flex flex-col",children:[o.map(e=>r.jsxs(O,{to:e.path,onClick:n,className:"px-4 py-3 font-medium text-base hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 border-b border-gray-100 dark:border-gray-600 "+(s(e.path)?"bg-blue-600 text-white":"purple"===e.color?"!text-purple-600 dark:!text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 focus:bg-purple-50 dark:focus:bg-purple-900/20 hover:!text-purple-600 dark:hover:!text-purple-400 visited:!text-purple-600 dark:visited:!text-purple-400 active:!text-purple-600 dark:active:!text-purple-400":"!text-blue-500 dark:!text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 focus:bg-blue-50 dark:focus:bg-blue-900/20 hover:!text-blue-500 dark:hover:!text-blue-400 visited:!text-blue-500 dark:visited:!text-blue-400 active:!text-blue-500 dark:active:!text-blue-400"),"aria-current":s(e.path)?"page":void 0,"aria-label":e.label,children:[e.label,s(e.path)&&r.jsx("span",{className:"sr-only",children:"現在のページ"})]},e.path)),r.jsxs("div",{className:"flex justify-center gap-2 px-4 py-3 border-t border-gray-100 dark:border-gray-600",children:[r.jsx(Ee,{className:"text-sm px-3 py-2"}),r.jsx(X,{className:"text-sm px-3 py-2",debug:!1})]})]})})}),t&&r.jsx("div",{className:"md:hidden fixed inset-0 z-30 backdrop-blur-sm",style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},onClick:n,"aria-hidden":"true"})]})}const So=D.lazy(()=>q(()=>import("./RecordExport-BKfb87q0.js").then(e=>e.R),__vite__mapDeps([0,1,2])));function Mo(){Do();const[e,t]=D.useState(!1),[a,n]=D.useState(""),[o,s]=D.useState(!1),i=()=>{if("1"===localStorage.getItem("disableTips"))return;const e=Te[Math.floor(Math.random()*Te.length)];n(e),t(!0)};D.useEffect(()=>{(async()=>{try{const e=[{fieldId:"exercise",name:"運動",order:6,display:!0},{fieldId:"meal",name:"食事",order:7,display:!0},{fieldId:"sleep",name:"睡眠",order:8,display:!0},{fieldId:"smoke",name:"喫煙",order:9,display:!1},{fieldId:"alcohol",name:"飲酒",order:10,display:!1}];if(0===(await _n()).length)for(const t of e)await On(t);s(!0)}catch(e){}})()},[]),D.useEffect(()=>{const e=new Date,t=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;localStorage.getItem("lastTipsDate")!==t&&i()},[]);return r.jsxs("div",{children:[r.jsx(Ce,{open:e,onClose:()=>{const e=new Date,r=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;localStorage.setItem("lastTipsDate",r),t(!1)},tipText:a}),r.jsx("header",{role:"banner",children:r.jsx(jo,{})}),r.jsx("main",{id:"main-content",role:"main",tabIndex:-1,children:o?r.jsx(D.Suspense,{fallback:r.jsx(No,{pageName:"日課"}),children:r.jsxs(M,{children:[r.jsx(E,{path:"/goal",element:r.jsx(D.Suspense,{fallback:r.jsx(No,{pageName:"目標"}),children:r.jsx(no,{})})}),r.jsx(E,{path:"/daily",element:r.jsx(D.Suspense,{fallback:r.jsx(No,{pageName:"日課"}),children:r.jsx(Gn,{})})}),r.jsx(E,{path:"/weight",element:r.jsx(D.Suspense,{fallback:r.jsx(No,{pageName:"体重"}),children:r.jsx(ko,{showTipsModal:i})})}),r.jsx(E,{path:"/bp",element:r.jsx(D.Suspense,{fallback:r.jsx(No,{pageName:"血圧"}),children:r.jsx(Bn,{})})}),r.jsx(E,{path:"/graph",element:r.jsx(D.Suspense,{fallback:r.jsx(No,{pageName:"グラフ"}),children:r.jsx(bo,{})})}),r.jsx(E,{path:"/export",element:r.jsx(D.Suspense,{fallback:r.jsx(No,{pageName:"管理"}),children:r.jsx(So,{showTipsModal:()=>{const e=Te[Math.floor(Math.random()*Te.length)];n(e),t(!0)}})})}),r.jsx(E,{path:"*",element:r.jsx(C,{to:"/weight",replace:!0})})]})}):r.jsx(No,{pageName:"データ初期化中"})})]})}function Eo(e){return r.jsx(Co,{...e})}class Co extends D.Component{constructor(e){super(e),t(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})}),t(this,"handleReload",()=>{window.location.reload()}),t(this,"handleCopy",async()=>{const{error:e,errorInfo:t}=this.state;if(!e)return;const r=`エラー名: ${e.name}\nエラーメッセージ: ${e.message}\n`+(t?`スタックトレース:\n${t.componentStack}`:"");await navigator.clipboard.writeText(r),this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),1500)}),this.state={hasError:!1,error:null,errorInfo:null,copied:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t})}render(){const{hasError:e,error:t,errorInfo:a}=this.state,{children:n,fallback:o}=this.props;return e&&t?o?o(t,this.handleReset):r.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[r.jsx("h2",{className:"text-xl font-bold text-red-800 dark:text-red-200 mb-2 text-center",children:"エラーが発生しました"}),r.jsxs("p",{className:"text-red-700 dark:text-red-300 mb-6 text-center max-w-md",children:["申し訳ありません。予期しないエラーが発生しました。",r.jsx("br",{}),"ページを再読み込みしてください。"]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx("button",{onClick:this.handleReset,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:"再試行"}),r.jsx("button",{onClick:this.handleReload,className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:"再読み込み"})]}),r.jsxs("details",{className:"mt-6 w-full max-w-2xl text-left",children:[r.jsxs("summary",{className:"cursor-pointer text-sm text-red-600 dark:text-red-400 font-medium flex items-center justify-between",children:[r.jsx("span",{children:"詳細"}),r.jsx("button",{type:"button",onClick:this.handleCopy,className:"ml-4 px-2 py-1 text-xs rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{minWidth:60},children:this.state.copied?"コピーしました":"コピー"})]}),r.jsxs("div",{className:"mt-2 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded text-xs font-mono overflow-auto max-h-40 text-left",children:[r.jsxs("div",{className:"mb-2 text-left",children:[r.jsx("strong",{children:"エラー名:"})," ",t.name]}),r.jsxs("div",{className:"mb-2 text-left",children:[r.jsx("strong",{children:"エラーメッセージ:"})," ",t.message]}),a&&r.jsxs("div",{className:"text-left",children:[r.jsx("strong",{children:"スタックトレース:"}),r.jsx("pre",{className:"whitespace-pre-wrap text-xs mt-1 text-left",children:a.componentStack})]})]})]})]}):n}}const To=H((e,t)=>({toasts:[],showToast:(r,a="info",n=3e3)=>{const o=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,s={id:o,type:a,message:r,duration:n};e(e=>({toasts:[...e.toasts,s]})),n&&n>0&&setTimeout(()=>{t().removeToast(o)},n)},showSuccess:(e,r=2e3)=>{t().showToast(e,"success",r)},showError:(e,r=5e3)=>{t().showToast(e,"error",r)},showWarning:(e,r=4e3)=>{t().showToast(e,"warning",r)},showInfo:(e,r=3e3)=>{t().showToast(e,"info",r)},removeToast:t=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==t)}))},clearAll:()=>{e({toasts:[]})}})),Oo=()=>{const{toasts:e,removeToast:t}=To(),a=D.useRef(null);D.useEffect(()=>{if(e.length>0){const t=e[e.length-1];if("error"===t.type||"warning"===t.type){const e=document.querySelector(`[data-toast-id="${t.id}"]`);e&&e.focus()}}},[e]);const n=e=>{switch(e){case"success":return r.jsx(Ae,{className:"w-5 h-5 text-green-600 dark:text-green-400","aria-hidden":"true"});case"error":return r.jsx(Ve,{className:"w-5 h-5 text-red-600 dark:text-red-400","aria-hidden":"true"});case"warning":return r.jsx(Le,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400","aria-hidden":"true"});case"info":return r.jsx(Ye,{className:"w-5 h-5 text-blue-600 dark:text-blue-400","aria-hidden":"true"})}},o=e=>{switch(e){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700 text-green-800 dark:text-green-200";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700 text-red-800 dark:text-red-200";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-200";case"info":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-200"}},s=e=>{switch(e){case"success":return"成功";case"error":return"エラー";case"warning":return"警告";case"info":return"情報"}};return 0===e.length?null:r.jsx("div",{ref:a,className:"fixed top-4 right-4 z-50 space-y-2",role:"region","aria-label":"情報","aria-live":"polite","aria-atomic":"false",children:e.map(e=>r.jsx("div",{"data-toast-id":e.id,className:`${o(e.type)} border rounded-lg p-4 shadow-lg max-w-sm transform transition-all duration-300 ease-in-out animate-in slide-in-from-right-5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400`,role:"error"===e.type||"warning"===e.type?"alert":"status","aria-label":`${s(e.type)}: ${e.message}`,tabIndex:"error"===e.type||"warning"===e.type?0:-1,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:n(e.type)}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("p",{className:"text-sm font-medium leading-5",children:[r.jsxs("span",{className:"sr-only",children:[s(e.type),": "]}),e.message]})}),r.jsx("button",{onClick:()=>t(e.id),className:"flex-shrink-0 text-gray-400 dark:text-slate-400 bg-gray-100 dark:bg-slate-700 hover:text-gray-600 dark:hover:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 rounded-full p-1","aria-label":"閉じる",children:r.jsx(qe,{className:"w-4 h-4","aria-hidden":"true"})})]})},e.id))})},_o=31536e6,Ro="error";function Io(e,t,r){if(!("error"===e||"warn"===e&&["debug","info","warn"].includes(Ro)||"info"===e&&["debug","info"].includes(Ro)||"debug"===e&&"debug"===Ro))return;(new Date).toISOString(),e.toUpperCase()}function Ao(e,t=_o){return Date.now()-e>t}async function Po(){try{Io("info"),"indexedDB"in window&&await async function(){Io("debug")}(),function(){const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);if(r){const t=localStorage.getItem(r);if(t)try{const a=JSON.parse(t);a.timestamp&&Ao(a.timestamp)&&e.push(r)}catch{(localStorage.getItem(r)&&r.startsWith("cache_")||r.startsWith("temp_"))&&e.push(r)}}}e.forEach(e=>{localStorage.removeItem(e),Io("debug")})}(),function(){const e=[];for(let t=0;t<sessionStorage.length;t++){const r=sessionStorage.key(t);r&&(r.startsWith("temp_")||r.startsWith("cache_"))&&e.push(r)}e.forEach(e=>{sessionStorage.removeItem(e),Io("debug")})}(),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CLEANUP_EXPIRED_CACHE"}),Io("info")}catch(e){Io("error")}}Io("info"),setInterval(Po,36e5),window.addEventListener("beforeunload",()=>{Po().catch(e=>{Io("error")})}),window.addEventListener("securitypolicyviolation",e=>{Io("error",0,(e.violatedDirective,e.blockedURI,e.disposition))}),Io("info"),document.addEventListener("contextmenu",e=>{});const Wo={open:!1};setInterval(function(){window.outerHeight-window.innerHeight>160||window.outerWidth-window.innerWidth>160?Wo.open||(Wo.open=!0):Wo.open=!1},500);const Lo=(e,t)=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent(`performance:${e}`,{detail:t}))},Fo=performance.now(),Bo=e=>{var t;let r;if(r=e instanceof ErrorEvent?{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:null==(t=e.error)?void 0:t.stack,timestamp:(new Date).toLocaleString(),userAgent:navigator.userAgent,url:window.location.href}:{reason:e.reason,promise:String(e.promise),timestamp:(new Date).toLocaleString(),userAgent:navigator.userAgent,url:window.location.href},"undefined"!=typeof performance){const e={timing:performance.timing,navigation:performance.navigation,memory:performance.memory};r.performance=e}const a={...r,userAgent:navigator.userAgent.substring(0,100),url:new URL(window.location.href).pathname};Lo("error",a)};window.addEventListener("error",Bo),window.addEventListener("unhandledrejection",Bo);const $o=(()=>{const e="/aloe-wellness-log/";return e.replace(/\/$/,"")})();function Yo(e){const t=document.createElement("div");t.style.position="fixed",t.style.bottom="32px",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.zIndex="9999",document.body.appendChild(t),t.innerHTML='\n    <div style="background:#059669;color:#fff;padding:16px 24px;border-radius:12px;box-shadow:0 2px 8px #0002;display:flex;align-items:center;gap:16px;font-size:1rem;">\n      <span>新しいバージョンがあります。<br>再読み込みで最新に更新できます。</span>\n      <button id="sw-update-btn" style="background:#fff;color:#059669;font-weight:bold;padding:8px 16px;border:none;border-radius:8px;cursor:pointer;">再読み込み</button>\n    </div>\n  ';t.querySelector("#sw-update-btn").onclick=()=>{e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}}Z.createRoot(document.getElementById("root")).render(r.jsxs(Eo,{children:[r.jsx(Oo,{}),r.jsx(_,{basename:$o,children:r.jsx(Mo,{})})]})),window.addEventListener("load",()=>{const e=performance.now()-Fo;Lo("initialLoad",{loadTime:e})}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{const e=`${"/aloe-wellness-log/".replace(/\/$/,"")}/sw.js`;navigator.serviceWorker.register(e).then(e=>{e.waiting&&Yo(e),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&Yo(e)})})}).catch(e=>{})}),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()});export{nt as B,Ye as H,q as _,Le as a,Ve as b,Ae as c,Sn as d,Tn as e,_n as f,Nn as g,_e as h,dn as i,We as j,On as k,Dn as l,jn as m,Cn as n,Oe as o,$e as p,Ze as q,pn as r,Ue as s,Do as u};
