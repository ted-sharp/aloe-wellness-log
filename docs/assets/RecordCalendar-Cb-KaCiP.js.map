{"version":3,"file":"RecordCalendar-Cb-KaCiP.js","sources":["../../aloe-wellness-log-react/src/pages/RecordCalendar.tsx"],"sourcesContent":["import { useEffect, useMemo, useState } from 'react';\nimport Calendar from 'react-calendar';\nimport 'react-calendar/dist/Calendar.css';\nimport { HiCheckCircle, HiClock, HiXCircle } from 'react-icons/hi2';\nimport { useI18n } from '../hooks/useI18n';\nimport { useRecordsStore } from '../store/records';\nimport type { RecordItem } from '../types/record';\nimport { isDev } from '../utils/devTools';\nimport {\n  performanceMonitor,\n  trackDatabaseOperation,\n} from '../utils/performanceMonitor';\nimport { truncateText } from '../utils/textUtils';\n\nexport default function RecordCalendar() {\n  const { t, translateFieldName, currentLanguage, formatDate } = useI18n();\n  const { records, fields, loadRecords, loadFields } = useRecordsStore();\n  const [selectedDate, setSelectedDate] = useState<Date | null>(null);\n  const [expandedTexts, setExpandedTexts] = useState<Set<string>>(new Set());\n\n  // ÁèæÂú®„ÅÆË®ÄË™û„Åã„Çâlocale„ÇíÊ±∫ÂÆö\n  const currentLocale = currentLanguage === 'ja' ? 'ja-JP' : 'en-US';\n\n  // „Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÁõ£Ë¶ñ„ÅÆÂàùÊúüÂåñ\n  useEffect(() => {\n    performanceMonitor.trackRender.start('RecordCalendar');\n    return () => {\n      performanceMonitor.trackRender.end('RecordCalendar');\n    };\n  });\n\n  // „Éá„Éº„ÇøË™≠„ÅøËæº„ÅøÔºà„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÁõ£Ë¶ñ‰ªò„ÅçÔºâ\n  useEffect(() => {\n    const loadData = async () => {\n      try {\n        await trackDatabaseOperation('load-fields-calendar', async () => {\n          await loadFields();\n        });\n\n        await trackDatabaseOperation('load-records-calendar', async () => {\n          await loadRecords();\n        });\n      } catch (error) {\n        console.error('Data loading error:', error);\n      }\n    };\n\n    loadData();\n  }, [loadFields, loadRecords]);\n\n  // fieldId„Åã„ÇâÈ†ÖÁõÆÂêç„ÉªÂûã„ÇíÂèñÂæóÔºàRecordList„Å®Âêå„ÅòÈñ¢Êï∞Ôºâ\n  const getField = (fieldId: string) => {\n    if (fieldId === 'notes') {\n      return {\n        fieldId: 'notes',\n        name: translateFieldName('notes'),\n        type: 'string' as const,\n        order: 0,\n      };\n    }\n\n    // ÂÑ™ÂÖàÈ†Ü‰Ωç1: fieldId„ÅßÊ§úÁ¥¢\n    let field = fields.find(f => f.fieldId === fieldId);\n\n    // ÂÑ™ÂÖàÈ†Ü‰Ωç2: name„ÅßÊ§úÁ¥¢ÔºàfieldId„ÅßË¶ã„Å§„Åã„Çâ„Å™„ÅÑÂ†¥ÂêàÔºâ\n    if (!field) {\n      field = fields.find(f => f.name === fieldId);\n    }\n\n    return field;\n  };\n\n  const _toggleTextExpansion = (recordId: string) => {\n    setExpandedTexts(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(recordId)) {\n        newSet.delete(recordId);\n      } else {\n        newSet.add(recordId);\n      }\n      return newSet;\n    });\n  };\n\n  const isTextExpanded = (recordId: string) => {\n    return expandedTexts.has(recordId);\n  };\n\n  // È†ÖÁõÆ„ÅÆÈ†ÜÂ∫è„ÇíÂà∂Âæ°„Åô„ÇãÈñ¢Êï∞ÔºàRecordList„Å®Âêå„ÅòÈñ¢Êï∞Ôºâ\n  const sortRecordsByFieldOrder = (records: RecordItem[]) => {\n    return [...records].sort((a, b) => {\n      const fieldA = getField(a.fieldId);\n      const fieldB = getField(b.fieldId);\n\n      // orderÂ±ûÊÄß„Åß‰∏¶„Å≥Êõø„ÅàÔºàÂ∞è„Åï„ÅÑ„Åª„Å©‰∏ä„Å´Ë°®Á§∫Ôºâ\n      const orderA = fieldA?.order ?? 999;\n      const orderB = fieldB?.order ?? 999;\n\n      return orderA - orderB;\n    });\n  };\n\n  // Êó•‰ªò„Åî„Å®„Å´Ë®òÈå≤„Åå„ÅÇ„Çã„Åã„Å©„ÅÜ„Åã„ÇíÂà§ÂÆöÔºà„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÁõ£Ë¶ñ‰ªò„ÅçÔºâ\n  const recordDates = useMemo(() => {\n    const startTime = performance.now();\n    const set = new Set(records.map(r => r.date));\n\n    const duration = performance.now() - startTime;\n    if (isDev && duration > 10) {\n      console.warn(\n        `üêå Slow record dates calculation: ${duration.toFixed(2)}ms for ${\n          records.length\n        } records`\n      );\n    }\n\n    return set;\n  }, [records]);\n\n  // ÈÅ∏ÊäûÊó•„ÅÆË®òÈå≤‰∏ÄË¶ßÔºà„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÁõ£Ë¶ñ‰ªò„ÅçÔºâ\n  const selectedRecords = useMemo(() => {\n    const startTime = performance.now();\n\n    if (!selectedDate) return [];\n    // „Çø„Ç§„É†„Çæ„Éº„É≥„ÇíËÄÉÊÖÆ„Åó„ÅüÊó•‰ªòÊñáÂ≠óÂàó„Çí‰ΩúÊàê\n    const year = selectedDate.getFullYear();\n    const month = String(selectedDate.getMonth() + 1).padStart(2, '0');\n    const day = String(selectedDate.getDate()).padStart(2, '0');\n    const dateStr = `${year}-${month}-${day}`;\n    const result = records.filter(r => r.date === dateStr);\n\n    const duration = performance.now() - startTime;\n    if (isDev && duration > 10) {\n      console.warn(\n        `üêå Slow selected records filtering: ${duration.toFixed(2)}ms for ${\n          records.length\n        } records`\n      );\n    }\n\n    return result;\n  }, [records, selectedDate]);\n\n  // ÈÅ∏ÊäûÊó•„ÅÆË®òÈå≤„ÇíÊôÇÂàª„Åî„Å®„Å´„Ç∞„É´„Éº„ÉóÂåñÔºà„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÁõ£Ë¶ñ‰ªò„ÅçÔºâ\n  const groupedSelectedRecords = useMemo(() => {\n    const startTime = performance.now();\n\n    if (selectedRecords.length === 0) return {};\n\n    // ÊôÇÂàª„ÅßÈôçÈ†Ü„ÇΩ„Éº„ÉàÔºàÊñ∞„Åó„ÅÑÈ†ÜÔºâ\n    const sortedRecords = [...selectedRecords].sort((a, b) => {\n      const aKey = `${a.date} ${a.time}`;\n      const bKey = `${b.date} ${b.time}`;\n      return bKey.localeCompare(aKey);\n    });\n\n    // Êó•‰ªò„ÉªÊôÇÂàª„Åî„Å®„Å´„Ç∞„É´„Éº„ÉóÂåñ\n    const groupMap: Record<string, RecordItem[]> = {};\n    const result = sortedRecords.reduce((acc, rec) => {\n      const key = `${rec.date} ${rec.time}`;\n      if (!acc[key]) acc[key] = [];\n      acc[key].push(rec);\n      return acc;\n    }, groupMap);\n\n    const duration = performance.now() - startTime;\n    if (isDev && duration > 10) {\n      console.warn(\n        `üêå Slow record grouping: ${duration.toFixed(2)}ms for ${\n          selectedRecords.length\n        } records`\n      );\n    }\n\n    return result;\n  }, [selectedRecords]);\n\n  // Êó•‰ªòÈÅ∏Êäû„ÅÆ„Éè„É≥„Éâ„É©„ÉºÔºà„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÁõ£Ë¶ñ‰ªò„ÅçÔºâ\n  const handleDateChange = (date: Date | null) => {\n    const interactionId =\n      performanceMonitor.trackInteraction.start('date-select');\n    setSelectedDate(date);\n    performanceMonitor.trackInteraction.end(interactionId, 'date-select');\n  };\n\n  // „ÉÜ„Ç≠„Çπ„ÉàÂ±ïÈñã„ÅÆ„Éè„É≥„Éâ„É©„ÉºÔºà„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÁõ£Ë¶ñ‰ªò„ÅçÔºâ\n  const handleToggleTextExpansion = (recordId: string) => {\n    const interactionId =\n      performanceMonitor.trackInteraction.start('text-expand');\n    _toggleTextExpansion(recordId);\n    performanceMonitor.trackInteraction.end(interactionId, 'text-expand');\n  };\n\n  // ÈñãÁô∫Áí∞Â¢É„Åß„ÅÆ„Éë„Éï„Ç©„Éº„Éû„É≥„ÇπÊÉÖÂ†±Ë°®Á§∫\n  useEffect(() => {\n    if (!isDev) return;\n\n    const logPerformanceInfo = () => {\n      console.group('üîç RecordCalendar Performance Info');\n      console.log(`üìä Total Records: ${records.length}`);\n      console.log(`üìä Total Fields: ${fields.length}`);\n      console.log(`üìä Record Dates Count: ${recordDates.size}`);\n      console.log(`üìä Selected Records: ${selectedRecords.length}`);\n      console.log(\n        `üìä Grouped Records: ${\n          Object.keys(groupedSelectedRecords).length\n        } groups`\n      );\n      console.log(`üìä Expanded Texts: ${expandedTexts.size}`);\n      console.log(\n        `üìä Selected Date: ${\n          selectedDate ? selectedDate.toISOString().split('T')[0] : 'none'\n        }`\n      );\n      console.groupEnd();\n    };\n\n    const timeout = setTimeout(logPerformanceInfo, 2000);\n    return () => clearTimeout(timeout);\n  }, [\n    records.length,\n    fields.length,\n    recordDates.size,\n    selectedRecords.length,\n    Object.keys(groupedSelectedRecords).length,\n    expandedTexts.size,\n    selectedDate,\n  ]);\n\n  return (\n    <div className=\"max-w-md mx-auto\">\n      <h1 className=\"text-3xl font-bold text-gray-800 dark:text-white mb-12\">\n        {t('pages.calendar.title')}\n      </h1>\n\n      <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6 mb-8\">\n        <style>{`\n          .react-calendar {\n            width: 100%;\n            background: transparent;\n            border: none;\n            font-family: inherit;\n          }\n          .react-calendar__tile {\n            padding: 12px 8px;\n            background: transparent;\n            border-radius: 8px;\n            transition: all 0.2s;\n            position: relative;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            text-align: center;\n            color: #374151;\n          }\n          @media (prefers-color-scheme: dark) {\n            .react-calendar__tile {\n              color: #d1d5db;\n            }\n          }\n          .react-calendar__tile:enabled:hover,\n          .react-calendar__tile:enabled:focus {\n            background-color: #dbeafe;\n          }\n          @media (prefers-color-scheme: dark) {\n            .react-calendar__tile:enabled:hover,\n            .react-calendar__tile:enabled:focus {\n              background-color: #1e3a8a;\n            }\n          }\n          .react-calendar__tile--active {\n            background: #2563eb !important;\n            color: white !important;\n          }\n          .react-calendar__tile--active .record-border {\n            border-color: white !important;\n          }\n          .react-calendar__navigation button {\n            color: #374151;\n            font-weight: 500;\n            font-size: 16px;\n            padding: 8px 16px;\n          }\n          @media (prefers-color-scheme: dark) {\n            .react-calendar__navigation button {\n              color: #d1d5db;\n            }\n          }\n          .react-calendar__navigation button:enabled:hover,\n          .react-calendar__navigation button:enabled:focus {\n            background-color: #f3f4f6;\n            border-radius: 8px;\n          }\n          @media (prefers-color-scheme: dark) {\n            .react-calendar__navigation button:enabled:hover,\n            .react-calendar__navigation button:enabled:focus {\n              background-color: #374151;\n            }\n          }\n          .react-calendar__month-view__weekdays {\n            font-weight: 600;\n            color: #6b7280;\n          }\n          @media (prefers-color-scheme: dark) {\n            .react-calendar__month-view__weekdays {\n              color: #9ca3af;\n            }\n          }\n        `}</style>\n        <Calendar\n          onChange={date => handleDateChange(date as Date)}\n          value={selectedDate}\n          locale={currentLocale}\n          tileContent={({ date, view }) => {\n            if (view === 'month') {\n              // „Çø„Ç§„É†„Çæ„Éº„É≥„ÇíËÄÉÊÖÆ„Åó„ÅüÊó•‰ªòÊñáÂ≠óÂàó„Çí‰ΩúÊàê\n              const year = date.getFullYear();\n              const month = String(date.getMonth() + 1).padStart(2, '0');\n              const day = String(date.getDate()).padStart(2, '0');\n              const dateStr = `${year}-${month}-${day}`;\n              if (recordDates.has(dateStr)) {\n                return (\n                  <div className=\"absolute inset-0 border-2 border-blue-600 rounded-lg pointer-events-none record-border\" />\n                );\n              }\n            }\n            return null;\n          }}\n        />\n      </div>\n\n      {selectedDate && (\n        <div>\n          <h2 className=\"text-2xl font-semibold text-gray-800 dark:text-white mb-8\">\n            {formatDate(selectedDate, {\n              year: 'numeric',\n              month: 'long',\n              day: 'numeric',\n              weekday: 'long',\n            })}{' '}\n            {t('pages.calendar.recordsFor')}\n          </h2>\n          {selectedRecords.length === 0 ? (\n            <div className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6 text-center text-gray-500 dark:text-gray-400\">\n              <p className=\"text-lg\">{t('pages.calendar.noRecords')}</p>\n            </div>\n          ) : (\n            <div className=\"space-y-8\">\n              {Object.entries(groupedSelectedRecords).map(\n                ([datetime, recs]) => (\n                  <div\n                    key={datetime}\n                    className=\"bg-white dark:bg-gray-800 rounded-2xl shadow-md p-6\"\n                  >\n                    <div className=\"text-2xl font-semibold text-gray-800 dark:text-white mb-6 border-b border-gray-200 dark:border-gray-600 pb-4 flex items-center gap-2\">\n                      <HiClock className=\"w-6 h-6 text-blue-600 dark:text-blue-400\" />\n                      {recs[0].time}\n                    </div>\n                    <ul className=\"space-y-4\">\n                      {sortRecordsByFieldOrder(recs).map(rec => {\n                        const field = getField(rec.fieldId);\n                        return (\n                          <li\n                            key={rec.id}\n                            className=\"bg-gray-50 dark:bg-gray-700 rounded-lg p-4 hover:bg-gray-100 dark:hover:bg-gray-600 transition-colors duration-200\"\n                          >\n                            {field?.fieldId === 'notes' ? (\n                              // ÂÇôËÄÉ„ÅØÁ∏¶Ê£íÂå∫Âàá„Çä„ÅÆÂ∑¶ÂØÑ„Åõ„É¨„Ç§„Ç¢„Ç¶„Éà\n                              <div className=\"flex items-stretch gap-2\">\n                                <div className=\"text-xl font-medium text-gray-700 dark:text-gray-300 pr-2 border-r border-gray-200 dark:border-gray-500 flex-shrink-0\">\n                                  {field ? field.name : rec.fieldId}\n                                </div>\n                                <div className=\"text-lg text-gray-800 dark:text-white font-semibold pl-2 flex-1 min-w-0\">\n                                  {typeof rec.value === 'string' &&\n                                  rec.value.length > 30 ? (\n                                    <button\n                                      onClick={() =>\n                                        handleToggleTextExpansion(rec.id)\n                                      }\n                                      className=\"text-left hover:text-blue-600 transition-colors break-words w-full\"\n                                      title={t('common.clickToExpand')}\n                                    >\n                                      {isTextExpanded(rec.id)\n                                        ? rec.value\n                                        : truncateText(rec.value)}\n                                    </button>\n                                  ) : (\n                                    <span className=\"break-words\">\n                                      {rec.value}\n                                    </span>\n                                  )}\n                                </div>\n                              </div>\n                            ) : (\n                              // ÂÇôËÄÉ‰ª•Â§ñ„ÅØÁúü„Çì‰∏≠„ÅßÂå∫Âàá„Å£„Å¶Âè≥ÂØÑ„Åõ„ÉªÂ∑¶ÂØÑ„Åõ„É¨„Ç§„Ç¢„Ç¶„Éà\n                              <div className=\"grid grid-cols-2 gap-2 items-stretch\">\n                                <div className=\"text-xl font-medium text-gray-700 dark:text-gray-300 text-right pr-2 border-r border-gray-200 dark:border-gray-500\">\n                                  {field ? field.name : rec.fieldId}\n                                </div>\n                                <div className=\"text-lg text-gray-800 dark:text-white font-semibold pl-2 text-left\">\n                                  {typeof rec.value === 'boolean' ? (\n                                    rec.value ? (\n                                      <span className=\"inline-flex items-center gap-2 text-green-600\">\n                                        <HiCheckCircle className=\"w-6 h-6\" />\n                                        {t('fields.yes')}\n                                      </span>\n                                    ) : (\n                                      <span className=\"inline-flex items-center gap-2 text-red-600\">\n                                        <HiXCircle className=\"w-6 h-6\" />\n                                        {t('fields.no')}\n                                      </span>\n                                    )\n                                  ) : (\n                                    <span className=\"break-words\">\n                                      {rec.value}\n                                      {field?.unit &&\n                                        typeof rec.value !== 'boolean' && (\n                                          <span className=\"text-gray-600 dark:text-gray-400 ml-1\">\n                                            {field.unit}\n                                          </span>\n                                        )}\n                                    </span>\n                                  )}\n                                </div>\n                              </div>\n                            )}\n                          </li>\n                        );\n                      })}\n                    </ul>\n                  </div>\n                )\n              )}\n            </div>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["RecordCalendar","t","translateFieldName","currentLanguage","formatDate","useI18n","records","fields","loadRecords","loadFields","useRecordsStore","selectedDate","setSelectedDate","useState","expandedTexts","setExpandedTexts","Set","currentLocale","useEffect","performanceMonitor","trackRender","start","end","async","trackDatabaseOperation","error","console","loadData","getField","fieldId","name","type","order","field","find","f","recordDates","useMemo","performance","now","set","map","r","date","selectedRecords","dateStr","getFullYear","String","getMonth","padStart","getDate","result","filter","groupedSelectedRecords","length","sort","a","b","aKey","time","localeCompare","reduce","acc","rec","key","push","handleToggleTextExpansion","recordId","interactionId","trackInteraction","prev","newSet","has","delete","add","_toggleTextExpansion","size","Object","keys","jsxs","className","children","jsx","Calendar","onChange","handleDateChange","value","locale","tileContent","view","year","month","day","weekday","entries","datetime","recs","HiClock","fieldA","fieldB","onClick","id","title","truncateText","HiCheckCircle","HiXCircle","unit"],"mappings":"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"}