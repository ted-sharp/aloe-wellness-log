const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BpRecord-DwFhMLDZ.js","assets/ui-vendor-BuGzxEnB.js","assets/react-vendor-9hcqHTTy.js","assets/state-vendor-DgseLVVv.js","assets/useRecordForm-0iepFUhf.js","assets/icons-vendor-BLJDdPqg.js","assets/Button-Dy_TAhW8.js","assets/useDateSelection-eeehhdif.js","assets/DailyRecord-BPr0x3ha.js","assets/dnd-vendor-B-r8cpST.js","assets/GoalInput-DL13hKKt.js","assets/RecordGraph-BLBr9Fsg.js","assets/WeightRecord-Co8ej8Q-.js","assets/RecordExport-BCscZL1g.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,r,a)=>((t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a)(t,"symbol"!=typeof r?r+"":r,a);import{j as r,r as a}from"./ui-vendor-BuGzxEnB.js";import{e as s,a as n,r as o,g as i,f as c,h as l,N as d,u,L as h,B as g}from"./react-vendor-9hcqHTTy.js";import{G as m}from"./icons-vendor-BLJDdPqg.js";import{m as f,r as p,c as w,a as y,b,d as v,o as x}from"./state-vendor-DgseLVVv.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var E,_={};var T=function(){if(E)return _;E=1;var e=s();return _.createRoot=e.createRoot,_.hydrateRoot=e.hydrateRoot,_}();const R={},D=function(e,t,r){let a=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),s=(null==r?void 0:r.nonce)||(null==r?void 0:r.getAttribute("nonce"));a=e(t.map(e=>{if((e=function(e){return"/aloe-wellness-log/"+e}(e))in R)return;R[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,s&&a.setAttribute("nonce",s),document.head.appendChild(a),t?new Promise((t,r)=>{a.addEventListener("load",t),a.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})},k=({className:e="",onInstall:t,onCancel:a,debug:s=!1})=>{const[o,i]=n.useState(null),[c,l]=n.useState(!1),[d,u]=n.useState(!1),[h,g]=n.useState(!1);n.useEffect(()=>{(()=>{const e=window.matchMedia("(display-mode: standalone)").matches,t=!0===navigator.standalone;(e||t)&&g(!0)})();const e=e=>{e.preventDefault(),i(e),l(!0)},r=()=>{g(!0),l(!1),i(null),null==t||t()};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",r),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",r)}},[t]);return s||h||!c?null:r.jsxs("button",{onClick:async()=>{if(o){u(!0);try{await o.prompt();const{outcome:e}=await o.userChoice;"dismissed"===e&&(null==a||a()),i(null),l(!1)}catch(e){}finally{u(!1)}}},disabled:d,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 ${e}`,"aria-label":"アプリをインストール",title:"アプリをインストール",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),d?"インストール中...":"アプリをインストール"]})};function S(e){return m({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M2 2h2v2H2z"},child:[]},{tag:"path",attr:{d:"M6 0v6H0V0zM5 1H1v4h4zM4 12H2v2h2z"},child:[]},{tag:"path",attr:{d:"M6 10v6H0v-6zm-5 1v4h4v-4zm11-9h2v2h-2z"},child:[]},{tag:"path",attr:{d:"M10 0v6h6V0zm5 1v4h-4V1zM8 1V0h1v2H8v2H7V1zm0 5V4h1v2zM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8zm0 0v1H2V8H1v1H0V7h3v1zm10 1h-1V7h1zm-1 0h-1v2h2v-1h-1zm-4 0h2v1h-1v1h-1zm2 3v-1h-1v1h-1v1H9v1h3v-2zm0 0h3v1h-2v1h-1zm-4-1v1h1v-2H7v1z"},child:[]},{tag:"path",attr:{d:"M7 12h1v3h4v1H7zm9 2v2h-3v-1h2v-1z"},child:[]}]})(e)}function A(e){return m({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(e)}var O,N,C,I,P,M,L,j,B,W,F,G,V,z,U,H,Z,$,Y={};function q(){return N?O:(N=1,O={L:1,M:0,Q:3,H:2})}function K(){return I?C:(I=1,C={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8})}function Q(){if(G)return F;G=1;for(var e={glog:function(t){if(t<1)throw new Error("glog("+t+")");return e.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},t=0;t<8;t++)e.EXP_TABLE[t]=1<<t;for(t=8;t<256;t++)e.EXP_TABLE[t]=e.EXP_TABLE[t-4]^e.EXP_TABLE[t-5]^e.EXP_TABLE[t-6]^e.EXP_TABLE[t-8];for(t=0;t<255;t++)e.LOG_TABLE[e.EXP_TABLE[t]]=t;return F=e}function X(){if(z)return V;z=1;var e=Q();function t(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&0==e[r];)r++;this.num=new Array(e.length-r+t);for(var a=0;a<e.length-r;a++)this.num[a]=e[a+r]}return t.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(r){for(var a=new Array(this.getLength()+r.getLength()-1),s=0;s<this.getLength();s++)for(var n=0;n<r.getLength();n++)a[s+n]^=e.gexp(e.glog(this.get(s))+e.glog(r.get(n)));return new t(a,0)},mod:function(r){if(this.getLength()-r.getLength()<0)return this;for(var a=e.glog(this.get(0))-e.glog(r.get(0)),s=new Array(this.getLength()),n=0;n<this.getLength();n++)s[n]=this.get(n);for(n=0;n<r.getLength();n++)s[n]^=e.gexp(e.glog(r.get(n))+a);return new t(s,0).mod(r)}},V=t}function J(){if($)return Z;$=1;var e=function(){if(M)return P;M=1;var e=K();function t(t){this.mode=e.MODE_8BIT_BYTE,this.data=t}return t.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},P=t}(),t=function(){if(j)return L;j=1;var e=q();function t(e,t){this.totalCount=e,this.dataCount=t}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(e,r){var a=t.getRsBlockTable(e,r);if(null==a)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+r);for(var s=a.length/3,n=new Array,o=0;o<s;o++)for(var i=a[3*o+0],c=a[3*o+1],l=a[3*o+2],d=0;d<i;d++)n.push(new t(c,l));return n},t.getRsBlockTable=function(r,a){switch(a){case e.L:return t.RS_BLOCK_TABLE[4*(r-1)+0];case e.M:return t.RS_BLOCK_TABLE[4*(r-1)+1];case e.Q:return t.RS_BLOCK_TABLE[4*(r-1)+2];case e.H:return t.RS_BLOCK_TABLE[4*(r-1)+3];default:return}},L=t}(),r=function(){if(W)return B;function e(){this.buffer=new Array,this.length=0}return W=1,e.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},B=e}(),a=function(){if(H)return U;H=1;var e=K(),t=X(),r=Q(),a=0,s=1,n=2,o=3,i=4,c=5,l=6,d=7,u={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;u.getBCHDigit(t)-u.getBCHDigit(u.G15)>=0;)t^=u.G15<<u.getBCHDigit(t)-u.getBCHDigit(u.G15);return(e<<10|t)^u.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;u.getBCHDigit(t)-u.getBCHDigit(u.G18)>=0;)t^=u.G18<<u.getBCHDigit(t)-u.getBCHDigit(u.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return u.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case a:return(t+r)%2==0;case s:return t%2==0;case n:return r%3==0;case o:return(t+r)%3==0;case i:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case c:return t*r%2+t*r%3==0;case l:return(t*r%2+t*r%3)%2==0;case d:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var a=new t([1],0),s=0;s<e;s++)a=a.multiply(new t([1,r.gexp(s)],0));return a},getLengthInBits:function(t,r){if(1<=r&&r<10)switch(t){case e.MODE_NUMBER:return 10;case e.MODE_ALPHA_NUM:return 9;case e.MODE_8BIT_BYTE:case e.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(r<27)switch(t){case e.MODE_NUMBER:return 12;case e.MODE_ALPHA_NUM:return 11;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(r<41))throw new Error("type:"+r);switch(t){case e.MODE_NUMBER:return 14;case e.MODE_ALPHA_NUM:return 13;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,a=0;a<t;a++)for(var s=0;s<t;s++){for(var n=0,o=e.isDark(a,s),i=-1;i<=1;i++)if(!(a+i<0||t<=a+i))for(var c=-1;c<=1;c++)s+c<0||t<=s+c||0==i&&0==c||o==e.isDark(a+i,s+c)&&n++;n>5&&(r+=3+n-5)}for(a=0;a<t-1;a++)for(s=0;s<t-1;s++){var l=0;e.isDark(a,s)&&l++,e.isDark(a+1,s)&&l++,e.isDark(a,s+1)&&l++,e.isDark(a+1,s+1)&&l++,0!=l&&4!=l||(r+=3)}for(a=0;a<t;a++)for(s=0;s<t-6;s++)e.isDark(a,s)&&!e.isDark(a,s+1)&&e.isDark(a,s+2)&&e.isDark(a,s+3)&&e.isDark(a,s+4)&&!e.isDark(a,s+5)&&e.isDark(a,s+6)&&(r+=40);for(s=0;s<t;s++)for(a=0;a<t-6;a++)e.isDark(a,s)&&!e.isDark(a+1,s)&&e.isDark(a+2,s)&&e.isDark(a+3,s)&&e.isDark(a+4,s)&&!e.isDark(a+5,s)&&e.isDark(a+6,s)&&(r+=40);var d=0;for(s=0;s<t;s++)for(a=0;a<t;a++)e.isDark(a,s)&&d++;return r+Math.abs(100*d/t/t-50)/5*10}};return U=u}(),s=X();function n(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var o=n.prototype;return o.addData=function(t){var r=new e(t);this.dataList.push(r),this.dataCache=null},o.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},o.getModuleCount=function(){return this.moduleCount},o.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var s=t.getRSBlocks(e,this.errorCorrectLevel),n=new r,o=0,i=0;i<s.length;i++)o+=s[i].dataCount;for(i=0;i<this.dataList.length;i++){var c=this.dataList[i];n.put(c.mode,4),n.put(c.getLength(),a.getLengthInBits(c.mode,e)),c.write(n)}if(n.getLengthInBits()<=8*o)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},o.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var a=0;a<this.moduleCount;a++)this.modules[r][a]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=n.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},o.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(this.modules[e+r][t+a]=0<=r&&r<=6&&(0==a||6==a)||0<=a&&a<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=a&&a<=4)},o.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var s=a.getLostPoint(this);(0==r||e>s)&&(e=s,t=r)}return t},o.createMovieClip=function(e,t,r){var a=e.createEmptyMovieClip(t,r);this.make();for(var s=0;s<this.modules.length;s++)for(var n=1*s,o=0;o<this.modules[s].length;o++){var i=1*o;this.modules[s][o]&&(a.beginFill(0,100),a.moveTo(i,n),a.lineTo(i+1,n),a.lineTo(i+1,n+1),a.lineTo(i,n+1),a.endFill())}return a},o.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},o.setupPositionAdjustPattern=function(){for(var e=a.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var s=e[t],n=e[r];if(null==this.modules[s][n])for(var o=-2;o<=2;o++)for(var i=-2;i<=2;i++)this.modules[s+o][n+i]=-2==o||2==o||-2==i||2==i||0==o&&0==i}},o.setupTypeNumber=function(e){for(var t=a.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var s=!e&&1==(t>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=s}for(r=0;r<18;r++){s=!e&&1==(t>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=s}},o.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,s=a.getBCHTypeInfo(r),n=0;n<15;n++){var o=!e&&1==(s>>n&1);n<6?this.modules[n][8]=o:n<8?this.modules[n+1][8]=o:this.modules[this.moduleCount-15+n][8]=o}for(n=0;n<15;n++){o=!e&&1==(s>>n&1);n<8?this.modules[8][this.moduleCount-n-1]=o:n<9?this.modules[8][15-n-1+1]=o:this.modules[8][15-n-1]=o}this.modules[this.moduleCount-8][8]=!e},o.mapData=function(e,t){for(var r=-1,s=this.moduleCount-1,n=7,o=0,i=this.moduleCount-1;i>0;i-=2)for(6==i&&i--;;){for(var c=0;c<2;c++)if(null==this.modules[s][i-c]){var l=!1;o<e.length&&(l=1==(e[o]>>>n&1)),a.getMask(t,s,i-c)&&(l=!l),this.modules[s][i-c]=l,-1==--n&&(o++,n=7)}if((s+=r)<0||this.moduleCount<=s){s-=r,r=-r;break}}},n.PAD0=236,n.PAD1=17,n.createData=function(e,s,o){for(var i=t.getRSBlocks(e,s),c=new r,l=0;l<o.length;l++){var d=o[l];c.put(d.mode,4),c.put(d.getLength(),a.getLengthInBits(d.mode,e)),d.write(c)}var u=0;for(l=0;l<i.length;l++)u+=i[l].dataCount;if(c.getLengthInBits()>8*u)throw new Error("code length overflow. ("+c.getLengthInBits()+">"+8*u+")");for(c.getLengthInBits()+4<=8*u&&c.put(0,4);c.getLengthInBits()%8!=0;)c.putBit(!1);for(;!(c.getLengthInBits()>=8*u||(c.put(n.PAD0,8),c.getLengthInBits()>=8*u));)c.put(n.PAD1,8);return n.createBytes(c,i)},n.createBytes=function(e,t){for(var r=0,n=0,o=0,i=new Array(t.length),c=new Array(t.length),l=0;l<t.length;l++){var d=t[l].dataCount,u=t[l].totalCount-d;n=Math.max(n,d),o=Math.max(o,u),i[l]=new Array(d);for(var h=0;h<i[l].length;h++)i[l][h]=255&e.buffer[h+r];r+=d;var g=a.getErrorCorrectPolynomial(u),m=new s(i[l],g.getLength()-1).mod(g);c[l]=new Array(g.getLength()-1);for(h=0;h<c[l].length;h++){var f=h+m.getLength()-c[l].length;c[l][h]=f>=0?m.get(f):0}}var p=0;for(h=0;h<t.length;h++)p+=t[h].totalCount;var w=new Array(p),y=0;for(h=0;h<n;h++)for(l=0;l<t.length;l++)h<i[l].length&&(w[y++]=i[l][h]);for(h=0;h<o;h++)for(l=0;l<t.length;l++)h<c[l].length&&(w[y++]=c[l][h]);return w},Z=n}var ee,te,re={};function ae(){if(ee)return re;ee=1,Object.defineProperty(re,"__esModule",{value:!0});var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},t=n(a()),r=o(),s=n(r);function n(e){return e&&e.__esModule?e:{default:e}}var i={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},c=(0,r.forwardRef)(function(t,r){var a=t.bgColor,n=t.bgD,o=t.fgD,i=t.fgColor,c=t.size,l=t.title,d=t.viewBoxSize,u=t.xmlns,h=void 0===u?"http://www.w3.org/2000/svg":u,g=function(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return s.default.createElement("svg",e({},g,{height:c,ref:r,viewBox:"0 0 "+d+" "+d,width:c,xmlns:h}),l?s.default.createElement("title",null,l):null,s.default.createElement("path",{d:n,fill:a}),s.default.createElement("path",{d:o,fill:i}))});return c.displayName="QRCodeSvg",c.propTypes=i,re.default=c,re}const se=i(function(){if(te)return Y;te=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.QRCode=void 0;var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},t=l(a()),r=l(q()),s=l(J()),n=o(),i=l(n),c=l(ae());function l(e){return e&&e.__esModule?e:{default:e}}var d={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},u=(0,n.forwardRef)(function(t,a){var n=t.bgColor,o=void 0===n?"#FFFFFF":n,l=t.fgColor,d=void 0===l?"#000000":l,u=t.level,h=void 0===u?"L":u,g=t.size,m=void 0===g?256:g,f=t.value,p=function(e,t){var r={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a]);return r}(t,["bgColor","fgColor","level","size","value"]),w=new s.default(-1,r.default[h]);w.addData(f),w.make();var y=w.modules;return i.default.createElement(c.default,e({},p,{bgColor:o,bgD:y.map(function(e,t){return e.map(function(e,r){return e?"":"M "+r+" "+t+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:d,fgD:y.map(function(e,t){return e.map(function(e,r){return e?"M "+r+" "+t+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:a,size:m,viewBoxSize:y.length}))});return Y.QRCode=u,u.displayName="QRCode",u.propTypes=d,Y.default=u,Y}()),ne=({url:e="https://ted-sharp.github.io/aloe-wellness-log/",className:t=""})=>{const[a,s]=n.useState(!1),o=()=>s(!1);return r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>s(!0),className:`inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:ring-offset-2 transition-colors ${t}`,title:"QRコードを表示",children:[r.jsx(S,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"QRコード"})]}),a&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm",style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 m-4 max-w-sm w-full shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"QRコードを表示"}),r.jsx("button",{onClick:o,className:"bg-gray-200/80 dark:bg-gray-700/70 text-gray-400 dark:text-gray-300 hover:bg-gray-300/90 dark:hover:bg-gray-600/80 transition-colors rounded-full p-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800","aria-label":"閉じる",children:r.jsx(A,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow-inner border border-gray-200 dark:border-gray-600",children:r.jsx(se,{value:e,size:200,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:"QRコードをスキャン"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 break-all",children:e})]}),r.jsx("button",{onClick:()=>{navigator.clipboard.writeText(e);const t=document.activeElement,r=t.textContent;t.textContent="コピーしました！",setTimeout(()=>{t.textContent=r},2e3)},className:"px-4 py-2 text-sm font-medium text-emerald-700 dark:text-emerald-300 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-700 rounded-md hover:bg-emerald-100 dark:hover:bg-emerald-900/30 focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:ring-offset-2 transition-colors",children:"URLをコピー"})]}),r.jsx("button",{onClick:o,className:"w-full mt-4 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:focus:ring-gray-400 focus:ring-offset-2 transition-colors",children:"閉じる"})]})})]})},oe=({open:e,onClose:t,tipText:a})=>{const[s,o]=n.useState(!1);n.useEffect(()=>{o("1"===localStorage.getItem("disableTips"))},[e]);return e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-2 sm:px-0 backdrop-blur-sm",style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},onClick:t,children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 max-w-md w-full flex flex-col items-center",onClick:e=>e.stopPropagation(),children:[r.jsx("h2",{className:"text-xl font-bold mb-3 text-gray-800 dark:text-white",children:"本日のTIPS"}),r.jsx("div",{className:"text-gray-700 dark:text-gray-200 mb-6 text-left whitespace-pre-line",children:a}),r.jsxs("div",{className:"flex items-center mt-2",children:[r.jsx("input",{id:"modal-disable-tips-checkbox",type:"checkbox",className:"mr-2 w-5 h-5 accent-purple-600",checked:s,onChange:e=>{const t=e.target.checked;o(t),localStorage.setItem("disableTips",t?"1":"0")}}),r.jsx("label",{htmlFor:"modal-disable-tips-checkbox",className:"text-sm text-gray-800 dark:text-gray-200 select-none cursor-pointer",children:"今後TIPSを自動表示しない"})]})]})}):null},ie=["夕食は寝る3時間前までに済ませましょう。 遅い時間の食事は空腹感を強め、消費カロリーを減らし、脂肪の蓄積を促す可能性があります。寝る直前の食事を避けることで、体脂肪の増加リスクを下げる効果が期待できます。","砂糖入り飲料は控えて水やお茶に置き換えましょう。 清涼飲料水やジュースなど甘い飲み物の摂取は体重増加や肥満と強く関連しており、日常的に水を飲む人は総摂取カロリーが約9%少ないとの報告があります。水や無糖のお茶で水分補給する習慣がダイエットに役立ちます。","食事の30分前にコップ1杯の水を飲みましょう。 食前に水を500ml程度飲むと満腹感が高まり、同じ食事制限でもより体重が減少しやすいことが研究で示されています。食事前の水分摂取は食べ過ぎ防止に効果的です。","食物繊維をたっぷり摂取しましょう。 野菜、果物、全粒穀物、豆類などに多く含まれる食物繊維は満腹感を持続させ、総カロリー摂取を抑える効果があります。食物繊維の摂取量が多い人ほど減量中の体重減少幅が大きく、ダイエットの継続率も高いと報告されています。","毎食にタンパク質を含めましょう。 肉・魚・卵・大豆製品・乳製品など良質なたんぱく質は、満腹ホルモンの分泌を促し、筋肉量を維持するのに役立ちます。高タンパク食は脂肪を減らしつつ筋肉の減少を抑えることで代謝低下を防ぎ、減量やリバウンド防止に有効とされています。","極端な食事抜きは避け、朝食を含め規則正しく食べましょう。 朝食を抜く習慣は肥満や生活習慣病のリスク増加と関連しており、朝食を全く食べない人は肥満になるリスクが高いとのメタ分析結果があります。一日3食バランスよく摂ることで過度な空腹を防ぎ、ドカ食いの予防につながります。","ゆっくり、よく噛んで食べましょう。 食事に20分以上かけてゆっくり噛むことで満腹シグナルが脳に伝わりやすくなり、結果として食事量を減らせます。実際に早食いの人はゆっくり食べる人より肥満になりやすい傾向があり、よく噛むことで摂取カロリーが約10～15%減少したとの研究もあります","「ながら食べ」をやめ、食事に集中しましょう。 テレビを見たりスマホを操作しながらの食事は、自分がどれだけ食べているか気づきにくくなり、食べ過ぎにつながります。研究でも、食事中のテレビ視聴はその後の食事での余分なカロリー摂取を増やすことが報告されています。","野菜やスープから先に手をつけましょう。 食事の最初にサラダや野菜スープなど低カロリー食品を摂ると、早い段階で満腹感が得られて食べ過ぎを防ぎやすくなります。ボリュームのある野菜から食べ始めることで、後に続く主菜や高カロリー食品の摂取量を自然に減らす効果が期待できます。","高カロリー食品は小皿に取り分けて食べましょう。 大きなお皿や袋から直接食べると適量を超えて摂取しがちです。小さい器に盛り付けることで見た目の満足感が得られ、実際に提供量を減らすと1日の総摂取カロリーが平均235kcal減少したという報告もあります。お菓子も小分け包装のものを選ぶなど工夫しましょう。","外食はメニュー選びと食べ方に工夫をしましょう。 外食時には揚げ物よりも焼き物・蒸し物を選ぶ、ソースやドレッシングは別添えにして必要な分だけ使う、主菜の一部を残すか持ち帰るなどの工夫でカロリーを大幅に減らせます。外食の頻度そのものも適度に抑えると、総摂取カロリー管理に役立ちます。","甘い物や好物も計画的に少量楽しみましょう。 大好きなスイーツなどを完全に我慢し続けるとストレスが溜まり暴食につながることがあります。例えば「週末に一度だけ少し食べる」などルールを決め、少量を味わって満足することで、長期的に見るとダイエットの継続に寄与します。","アルコールの摂取量に気をつけましょう。 アルコール飲料はカロリーが高いうえ食欲を刺激しがちです。飲む場合も頻度や量を控えめにし、糖分の多いカクテルより蒸留酒のソーダ割りや辛口ワインなど比較的低カロリーな選択をするといった工夫を心がけてください。","栄養密度の高い食品を選びましょう。 同じカロリーなら、ビタミン・ミネラルや食物繊維を多く含む食品（例えばポテトチップではなく果物やナッツ類）を選ぶことで、身体に必要な栄養を摂取しつつ満足感を得られます。栄養バランスの良い食事は空腹感を和らげ、間食の欲求を減らす効果があります。","加工度の低い「ホールフード」を中心に摂りましょう。 ケーキやスナック菓子、ファストフードなどの超加工食品ばかりの食事では、知らず知らずのうちにカロリー過多になり体重増加を招きやすいです。一方、未加工またはシンプルに調理した食品中心の食事に切り替えると自然と摂取カロリーが減り、体重減少につながることが示されています。食品選択の際は原材料のシンプルなものを優先しましょう。","中等度の有酸素運動を週150分以上目指しましょう。 ウォーキングや軽いジョギング、サイクリングなどの有酸素運動は、消費エネルギーを増やすだけでなく食欲や血糖コントロールの改善にも役立ちます。定期的な運動習慣を身につけることが長期的な体重管理成功の最良の予測因子の一つであることが知られています。","筋力トレーニングを週2～3回取り入れましょう。 抵抗運動（ウェイトトレーニングなど）は筋肉量の維持・増加に役立ち、基礎代謝の低下を防ぎます。減量中に筋トレを組み合わせると筋肉の減少が抑えられ、脂肪だけを効率的に減らすことにつながります。また筋力が向上し、引き締まった体づくりにも有効です。","日常生活でこまめに身体を動かす工夫をしましょう。 エレベーターではなく階段を使う、バス停や駅では一つ手前で降りて歩く、家事や掃除で体を動かすなど、日常の中で非運動性熱産生（NEAT）を増やすことが大切です。小さな積み重ねでも1日の消費カロリーを底上げし、脂肪が蓄積しにくい体質づくりに役立ちます。","長時間座りっぱなしを避けましょう。 デスクワークなどで何時間も座ったままでいるとエネルギー消費が低下しがちです。1時間に一度は立ち上がってストレッチをしたり数分歩いたりして、血行や代謝をリセットしましょう。こまめに姿勢を変える習慣が、体重増加の予防に繋がります。","自分が楽しめる運動を見つけましょう。 ランニングが苦手ならダンスや水泳、サイクリングなど他の有酸素運動を、ジム通いが続かないなら自宅でできるエクササイズや動画プログラムを試すなど、好きになれる身体活動を探してみてください。楽しいと感じる運動は習慣化しやすく、消費カロリーの継続的な増加に寄与します。","「ながら運動」で日常に活動量をプラスしましょう。 テレビを見ながらストレッチをする、電話しながら足踏みする、通勤時に一駅分歩くなど、日常生活の中に運動を組み込む工夫をします。忙しい人でも小さな運動を積み重ねることで、一日の総消費エネルギーを増やすことができます。","運動の頻度・強度は徐々に高めましょう。 運動習慣のない人がいきなりハードな運動を始めるとケガや挫折の原因になります。最初は軽い運動から始め、慣れてきたら少しずつ時間や強度を上げていきましょう。例えば最初は1回15分のウォーキングから開始し、徐々に30分に延ばすなど段階的に負荷を上げると安全かつ効果的です。","日々の歩数を記録し、目標設定しましょう。 スマホのアプリや万歩計を使って自分の平均歩数を把握し、少し高い目標歩数（例：プラス1000歩/日）を設定します。歩数目標を意識することで通勤や買い物で歩く機会を増やせて、結果的に消費カロリーアップに繋がります。","達成可能な減量目標を立てましょう。最初の目標は現在体重の5～10%減を目安にし、ペースは1週間あたり0.5～1kg減量程度が適切です。急激に体重を減らそうとすると筋肉まで落ちたりリバウンドしやすくなります。無理のない目標設定が長続きのコツです。","体重は定期的に測定しましょう。毎日または少なくとも週1回は同じ条件で体重を測り、記録します。頻繁な自己計測によって体重の変化に早く気づきやすくなり、週1回以上体重測定する人はそうでない人に比べ体重管理が良好であることが示されています。増加傾向にいち早く対処できるため、リバウンド防止にも有用です。","食事内容や活動量を記録する習慣をつけましょう。手書きの食事日記やスマホアプリで、毎日の食事・間食・運動を記録します。自分の行動を「見える化」する自己モニタリングは行動変容の中心的手法であり、記録を付ける人は付けない人より一貫して減量効果が高いことが報告されています。書き出すことで思わぬ過食に気づきやすくなり、改善に役立ちます。","十分な睡眠時間を確保しましょう。大人は1日7～9時間の睡眠が推奨されており、慢性的な睡眠不足は食欲ホルモンのバランスを崩し過食を招きやすくなります。実際、睡眠時間の短い人ほど太りやすい傾向があり、逆に適切な睡眠は減量中の空腹感を和らげ体重管理を助けます。毎晩規則的な睡眠リズムを心がけてください。","ストレスを上手に発散しましょう。慢性的なストレスはコルチゾールというホルモンの分泌を増やし、食欲増進や脂肪蓄積を招くことが分かっています。ストレスを感じたときは深呼吸やストレッチ、散歩、趣味の時間を持つなど食べ物以外の方法で発散する工夫をしましょう。ストレス解消はメンタルヘルスだけでなくダイエット成功にも重要です。","周囲のサポートを活用しましょう。家族や友人にダイエット宣言をして協力してもらったり、一緒に運動する仲間を見つけたりすると継続しやすくなります。社会的サポートは減量の成功率を高める強力な要因です。恥ずかしがらず周囲に目標を共有し、励まし合える環境を整えましょう。","「完璧主義」より「継続」を目指しましょう。時には計画通りにいかない日があっても落ち込みすぎず、すぐ気持ちを切り替えて軌道修正することが大切です。減量の過程では停滞期や体重の小さな増減は誰にでも起こります。一度の挫折で投げ出さず、長い目で良い習慣を積み重ねることが成功への近道です。","食べる以外の「ストレス解消法」を持ちましょう。悩んだり退屈したりしたときにお菓子に手が伸びてしまう人は、代わりにできる行動（音楽を聴く、日記を書く、短い散歩をする、人に話す等）をあらかじめ用意しておきます。ストレスによるやけ食いを防ぐには、食以外のコーピング手段を持つことが有効です。","空腹のサインに耳を傾けましょう。お腹が空いているときだけ食べ、満腹感を得たら残りは保存する習慣をつけます。「まだ食べられるけど満腹ではない（腹八分目）」段階で箸を置くよう意識することで、総摂取カロリーを減らすことができます。自分の身体の空腹・満腹信号を尊重することが大切です。","食事は決まった場所・環境でとりましょう。例えば「仕事中はデスクで食べず、ダイニングテーブルで食べる」「歩きながら物を食べない」などルールを決めます。食べることに集中できる環境を整えると満足感が高まり、知らぬ間の過剰摂取を防げます。","ご褒美は食べ物以外で設定しましょう。減量目標の達成や運動継続のご褒美に、服や本、マッサージなど自分の好きな非食物報酬を与えるとモチベーション維持に効果的です。「○kg減ったら新しい靴を買う」など具体的なご褒美プランを立てておくと、日々の努力の励みになります。","環境を整えて「つい食べ」を防ぎましょう。家ではお菓子やジャンクフードをテーブルの上など見える場所に置かないようにし、代わりにフルーツやナッツを置いておくといった工夫をします。人は目に付く食べ物につられて食べがちなので、視界に入るものをヘルシーな食品に変えることで自然と摂取カロリーを減らせます。","買い物は満腹時に計画的に行いましょう。空腹の状態でスーパーに行くと高カロリーのお菓子や出来合い食品を衝動買いしやすくなります。事前に購入リストを作り、食後に買い物に行くようにすることで不要な高カロリー食品の購入を減らせます。健康的な食材を常備しやすくなり、結果的にダイエットの助けとなります。","減量方法は「続けられるか」で判断しましょう。特定の食品だけに頼るダイエットや極端な短期集中減量法はリスクが高く、減った体重を維持できる人はごくわずか（1～3%程度）であるとされています。「明日も明後日も続けられる習慣か？」を基準に取り入れる方法を選びましょう。ダイエットは一過性の努力ではなく、生活習慣の改善として捉えることが成功の秘訣です。","停滞期も想定しておきましょう。減量を続けていると、ある程度体重が減ったところで体重がなかなか動かなくなる停滞期が訪れることがあります。これは身体が新しい状態に慣れ適応しているサインです。停滞期に入っても焦らず、今までの良い習慣を継続してください。必要に応じて食事内容や運動強度を見直しつつ、身体の変化を根気強く待ちましょう。","減量後も健康的な習慣を続けましょう。目標体重に到達した後こそ、リバウンド防止の正念場です。達成したからといって元の生活に戻すのではなく、取り入れた良い習慣（例えば定期的な運動や野菜中心の食事、体重測定など）はそのまま維持しましょう。減量期と維持期ではアプローチを多少調整しつつも、「習慣自体は一生続ける」つもりでいることが大切です。","ポジティブ思考を持ちましょう。体重の数値や見た目の変化ばかりにとらわれず、健康的な行動ができた自分を褒める習慣を持ってください。階段を上っただけでも「よくやった」と自分に声をかけ、小さな成功体験の積み重ねを意識します。前向きなマインドはストレスを減らし、長期的な減量の成功率を高めます。","食事時間を規則正しく保ちましょう。体内時計（概日リズム）に合わせて毎日同じ時間帯に食事をとることで、代謝が最適化されます。実際に不規則な食事時間の人は規則正しい人と比較して肥満リスクが約2.3倍高く、インスリン抵抗性も悪化しやすいことが日本の大規模疫学研究で明らかになっています。特に夜遅い時間（午後9時以降）の食事は体重増加と強く関連するため、可能な限り夕食は早めの時間帯に済ませることが重要です。","週に150-300分の中強度有酸素運動に加え、週2回以上の筋力トレーニングを組み合わせましょう。WHO（世界保健機関）が推奨するこの運動量を満たしている人は、座りがちな生活をしている人と比較して死亡リスクが28-35%低く、心血管疾患リスクも大幅に減少することが100万人以上を対象とした大規模メタ解析で確認されています。有酸素運動と筋力トレーニングの組み合わせは、それぞれ単独で行うより体重減少効果が約40%高いとの報告もあります。","オメガ3脂肪酸を積極的に摂取しましょう。青魚（サバ、イワシ、サケなど）を週2回以上食べる人は、ほとんど食べない人と比較して内臓脂肪面積が平均で約15%少ないことが日本人を対象とした研究で示されています。EPAやDHAなどのオメガ3脂肪酸は炎症を抑制し、脂肪細胞の代謝を改善する作用があります。魚が苦手な場合は亜麻仁油やえごま油、くるみなどの植物性オメガ3も効果的です。","食物繊維を1日25-35g以上摂取しましょう。食物繊維摂取量が10g増加するごとに体重が平均1.9kg減少し、ウエスト周囲径も1.2cm減少することが6ヶ月間の介入試験で確認されています。また、食物繊維豊富な食事は腸内の短鎖脂肪酸産生を促進し、食欲抑制ホルモンGLP-1の分泌を増加させます。野菜、果物、全粒穀物、豆類から多様な食物繊維を摂取することで、満腹感の持続と体重管理の両方に効果を発揮します。","食事の記録をつけましょう。スマートフォンアプリや日記で食事内容を記録する人は、記録しない人と比較して6ヶ月間で平均2.3倍多く体重が減少することが、1,685名を対象とした大規模研究で明らかになっています。食事記録は自分の食行動を客観視する「セルフモニタリング」効果があり、無意識の間食や食べ過ぎに気づきやすくなります。写真を撮るだけでも効果があるため、手軽な方法から始めてみましょう。","良質な睡眠のために就寝前2時間はブルーライトを避けましょう。スマートフォンやパソコンの画面から発せられるブルーライトは、睡眠ホルモンであるメラトニンの分泌を約23%抑制し、睡眠の質を低下させます。睡眠不足は食欲ホルモン（グレリン、レプチン）のバランスを崩し、体重増加リスクを約30%高めることが複数の研究で示されています。就寝2時間前からはデジタルデバイスの使用を控え、読書や軽いストレッチなどでリラックスタイムを過ごしましょう。","立位での活動時間を増やしましょう。1日の立位時間を3時間延長することで、年間約144kcal（体重約0.7kg相当）の追加消費が可能であることが代謝測定研究で確認されています。また、座位時間が1日10時間を超えると、それ以下の人と比較して内臓脂肪蓄積リスクが約40%増加します。デスクワーク中も1時間ごとに3-5分立つ、電話は立って取る、階段を積極的に使うなどの工夫で、日常的なエネルギー消費を底上げできます。","間食は計画的に摂りましょう。間食を完全に我慢するより、1日の総摂取カロリーの10-15%以内（約150-200kcal）で計画的に摂取する方が、長期的な体重管理に成功しやすいことが行動変容研究で示されています。ナッツ類15-20g、ヨーグルト100g、果物1個程度が適量の目安です。間食により空腹感をコントロールすることで、主食での過食を防ぎ、1日の総摂取カロリーを安定させることができます。","ソーシャルサポートを活用しましょう。家族や友人と一緒に健康的な生活習慣に取り組む人は、一人で取り組む人と比較して6ヶ月後の体重減少量が平均で2.7kg多いことが、複数のランダム化比較試験のメタ解析で確認されています。また、オンラインコミュニティへの参加も同様の効果があります。目標を共有し、進捗を報告し合い、励まし合える環境を作ることで、モチベーション維持と習慣継続の成功率が大幅に向上します。"],ce=()=>{const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},le=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,de="selectedDate",ue=e=>`${e.getDate()}`,he=e=>["日","月","火","水","木","金","土"][e.getDay()],ge=(e,t)=>{const r=[],a=new Date(e);for(;a<=t;)r.push(new Date(a)),a.setDate(a.getDate()+1);return r},me=()=>le(new Date);const fe=new class{constructor(){t(this,"selectedDate",me()),t(this,"centerDate",me()),t(this,"today",me()),t(this,"setSelectedDate",e=>{try{const t=new Date(e);if(isNaN(t.getTime()))return;localStorage.setItem(de,e),p(()=>{this.selectedDate=e,this.centerDate=e})}catch(t){}}),t(this,"setCenterDate",e=>{try{const t=new Date(e);if(isNaN(t.getTime()))return;this.centerDate=e}catch(t){}}),t(this,"setToday",()=>{const e=me();this.today=e}),t(this,"initializeFromStorage",()=>{try{const e=localStorage.getItem(de);if(e){const t=new Date(e);isNaN(t.getTime())?localStorage.removeItem(de):p(()=>{this.selectedDate=e,this.centerDate=e})}}catch(e){try{localStorage.removeItem(de)}catch(t){}}}),t(this,"isToday",e=>(e||this.selectedDate)===this.today),t(this,"isPast",e=>e<this.today),t(this,"isFuture",e=>e>this.today),t(this,"formatSelectedDate",(e="short")=>{switch(e){case"iso":case"short":default:return this.selectedDate;case"long":return new Date(this.selectedDate).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})}}),f(this)}get isSelectedDateToday(){return this.selectedDate===this.today}},pe={NAME:"aloe-wellness-log",VERSION:4,RETRY_ATTEMPTS:3,RETRY_DELAY:1e3,TRANSACTION_TIMEOUT:3e4},we={GOAL:"goal",WEIGHT_RECORDS:"weight_records",BP_RECORDS:"bp_records",DAILY_RECORDS:"daily_records",DAILY_FIELDS:"daily_fields"},ye=[{name:we.GOAL,keyPath:"id"},{name:we.WEIGHT_RECORDS,keyPath:"id",indexes:[{name:"dateIndex",keyPath:"date",options:{unique:!1}},{name:"excludeFromGraphIndex",keyPath:"excludeFromGraph",options:{unique:!1}}]},{name:we.BP_RECORDS,keyPath:"id",indexes:[{name:"dateIndex",keyPath:"date",options:{unique:!1}},{name:"fieldIdIndex",keyPath:"fieldId",options:{unique:!1}},{name:"excludeFromGraphIndex",keyPath:"excludeFromGraph",options:{unique:!1}}]},{name:we.DAILY_RECORDS,keyPath:"id"},{name:we.DAILY_FIELDS,keyPath:"fieldId"}],be=Object.freeze(Object.defineProperty({__proto__:null,DATABASE_CONFIG:pe,STORE_CONFIGS:ye,STORE_NAMES:we},Symbol.toStringTag,{value:"Module"}));var ve=(e=>(e.CONNECTION_FAILED="connection_failed",e.TRANSACTION_FAILED="transaction_failed",e.DATA_CORRUPTED="data_corrupted",e.QUOTA_EXCEEDED="quota_exceeded",e.VERSION_ERROR="version_error",e.UNKNOWN="unknown",e))(ve||{});class xe extends Error{constructor(e,t,r,a=!0){super(t),this.type=e,this.originalError=r,this.retryable=a,this.name="DbError"}toJSON(){return{name:this.name,type:this.type,message:this.message,retryable:this.retryable,originalError:this.originalError}}getUserFriendlyMessage(){switch(this.type){case"connection_failed":return"データベースへの接続に失敗しました。ページを再読み込みしてください。";case"quota_exceeded":return"ストレージ容量が不足しています。不要なデータを削除してください。";case"version_error":return"データベースのバージョンが競合しています。他のタブを閉じて再試行してください。";case"data_corrupted":return"データが破損しています。サポートにお問い合わせください。";case"transaction_failed":return"データベース操作が失敗しました。しばらく待ってから再試行してください。";default:return"データベースエラーが発生しました。しばらく待ってから再試行してください。"}}}function Ee(e){if(e instanceof xe)return e;if(e instanceof DOMException)switch(e.name){case"QuotaExceededError":return new xe("quota_exceeded","ストレージ容量が不足しています",e,!1);case"VersionError":return new xe("version_error","データベースのバージョンが競合しています",e,!1);case"InvalidStateError":case"TransactionInactiveError":return new xe("transaction_failed","データベーストランザクションが失敗しました",e);case"DataError":case"ConstraintError":return new xe("data_corrupted","データが破損しているか、制約違反です",e,!1);default:return new xe("unknown",`データベースエラー: ${e.message}`,e)}return e instanceof Error?new xe("connection_failed",`データベース接続に失敗しました: ${e.message}`,e):new xe("unknown","予期しないエラーが発生しました",e)}function _e(e){return e instanceof xe?e.retryable:!(e instanceof DOMException&&["QuotaExceededError","VersionError","DataError","ConstraintError"].includes(e.name))}const Te=class e{constructor(){t(this,"dbInstance",null),t(this,"connectionPromise",null)}static getInstance(){return e.instance||(e.instance=new e),e.instance}async getConnection(){if(this.dbInstance&&this.dbInstance.objectStoreNames.length>0)return this.dbInstance;if(this.connectionPromise)return this.connectionPromise;this.connectionPromise=this.createConnection();try{return this.dbInstance=await this.connectionPromise,this.dbInstance}catch(e){throw this.connectionPromise=null,e}}async createConnection(){return this.withRetry(async()=>new Promise((e,t)=>{try{const r=indexedDB.open(pe.NAME,pe.VERSION);r.onupgradeneeded=e=>{const t=e.target.result;this.upgradeDatabase(t,e.oldVersion,e.newVersion||pe.VERSION)},r.onsuccess=()=>{const t=r.result;t.onerror=e=>{},t.onclose=()=>{this.dbInstance=null,this.connectionPromise=null},e(t)},r.onerror=()=>{t(new xe(ve.CONNECTION_FAILED,"データベースを開けませんでした",r.error))},r.onblocked=()=>{t(new xe(ve.CONNECTION_FAILED,"データベースが他のタブによってブロックされています",void 0,!1))}}catch(r){t(Ee(r))}}))}upgradeDatabase(e,t,r){ye.forEach(t=>{let r;if(e.objectStoreNames.contains(t.name)){const a=e.transaction([t.name],"versionchange");r=a.objectStore(t.name)}else r=e.createObjectStore(t.name,{keyPath:t.keyPath,autoIncrement:t.autoIncrement||!1});t.indexes&&t.indexes.forEach(e=>{r.indexNames.contains(e.name)||r.createIndex(e.name,e.keyPath,e.options)})})}async executeTransaction(e,t,r){return this.withRetry(async()=>{const a=await this.getConnection();return new Promise((s,n)=>{try{const o=a.transaction(e,t),i=setTimeout(()=>{o.abort(),n(new xe(ve.TRANSACTION_FAILED,"トランザクションがタイムアウトしました"))},pe.TRANSACTION_TIMEOUT);o.oncomplete=()=>{clearTimeout(i)},o.onerror=()=>{clearTimeout(i),n(Ee(o.error))},o.onabort=()=>{clearTimeout(i),n(new xe(ve.TRANSACTION_FAILED,"トランザクションが中断されました"))};const c=Array.isArray(e)?e.map(e=>o.objectStore(e)):o.objectStore(e);r(o,c).then(s).catch(n)}catch(o){n(Ee(o))}})})}async withRetry(e,t=pe.RETRY_ATTEMPTS,r=pe.RETRY_DELAY){let a;for(let n=1;n<=t;n++)try{return await e()}catch(s){if(a=Ee(s),!_e(a))throw a;if(n===t)throw a;await new Promise(e=>setTimeout(e,r*Math.pow(2,n-1)))}throw a}close(){this.dbInstance&&(this.dbInstance.close(),this.dbInstance=null),this.connectionPromise=null}isConnected(){return null!==this.dbInstance&&this.dbInstance.objectStoreNames.length>0}getDatabaseInfo(){return this.dbInstance?{name:this.dbInstance.name,version:this.dbInstance.version,stores:Array.from(this.dbInstance.objectStoreNames),connected:this.isConnected()}:null}};t(Te,"instance");let Re=Te;const De=Re.getInstance(),ke=(e,t,r)=>De.executeTransaction(e,t,r),Se=Object.freeze(Object.defineProperty({__proto__:null,DatabaseConnectionManager:Re,dbConnection:De,executeTransaction:ke},Symbol.toStringTag,{value:"Module"})),Ae=!1,Oe={enableRenderTracking:!0,enableMemoryTracking:!0,enableInteractionTracking:!0,enableDatabaseTracking:!0,sampleRate:.1,reportInterval:3e4};const Ne=new class{constructor(e=Oe){t(this,"metrics",[]),t(this,"maxMetrics",1e3),t(this,"config"),this.config=e}addMetric(e){Math.random()>this.config.sampleRate||(this.metrics.push({...e,timestamp:Date.now()}),this.metrics.length>this.maxMetrics&&(this.metrics=this.metrics.slice(-this.maxMetrics)))}getMetrics(){return[...this.metrics]}getAverageMetrics(e=3e5){const t=Date.now(),r=this.metrics.filter(r=>r.timestamp>t-e);if(0===r.length)return{};const a=r.reduce((e,t)=>({renderTime:e.renderTime+t.renderTime,componentCount:e.componentCount+t.componentCount,reRenderCount:e.reRenderCount+t.reRenderCount,loadTime:e.loadTime+t.loadTime,interactionToNext:e.interactionToNext+t.interactionToNext,inputDelay:e.inputDelay+t.inputDelay,dbOperationTime:e.dbOperationTime+t.dbOperationTime,recordCount:e.recordCount+t.recordCount}),{renderTime:0,componentCount:0,reRenderCount:0,loadTime:0,interactionToNext:0,inputDelay:0,dbOperationTime:0,recordCount:0}),s=r.length;return{renderTime:a.renderTime/s,componentCount:a.componentCount/s,reRenderCount:a.reRenderCount/s,loadTime:a.loadTime/s,interactionToNext:a.interactionToNext/s,inputDelay:a.inputDelay/s,dbOperationTime:a.dbOperationTime/s,recordCount:a.recordCount/s}}clearMetrics(){this.metrics=[]}};class Ce{constructor(){t(this,"renderStartTimes",new Map),t(this,"componentCounts",new Map),t(this,"reRenderCounts",new Map)}startRender(e){}endRender(e){}trackReRender(e,t){}getStats(){const e={};for(const[t,r]of this.componentCounts)e[t]={count:r,reRenders:this.reRenderCounts.get(t)||0};return e}clearStats(){this.renderStartTimes.clear(),this.componentCounts.clear(),this.reRenderCounts.clear()}}class Ie{constructor(){t(this,"lastMemoryCheck",0),t(this,"memoryCheckInterval",5e3)}getCurrentMemoryUsage(){try{if("undefined"!=typeof performance&&"memory"in performance){const e=performance.memory;if(e)return{used:Math.round(e.usedJSHeapSize/1024/1024),total:Math.round(e.totalJSHeapSize/1024/1024),limit:Math.round(e.jsHeapSizeLimit/1024/1024)}}}catch(e){}return null}checkMemoryUsage(){const e=Date.now();if(e-this.lastMemoryCheck<this.memoryCheckInterval)return;this.lastMemoryCheck=e;const t=this.getCurrentMemoryUsage();if(t){const e=t.used/t.limit*100;e>80&&(t.used,e.toFixed(1))}}startMemoryMonitoring(){}}class Pe{constructor(){t(this,"operationStartTimes",new Map)}startOperation(e,t){this.operationStartTimes.set(e,performance.now())}endOperation(e,t,r){const a=this.operationStartTimes.get(e);if(a){const t=performance.now()-a;return this.operationStartTimes.delete(e),t>100&&t.toFixed(2),t.toFixed(2),t}return 0}}class Me{constructor(){t(this,"interactionStartTimes",new Map)}startInteraction(e){const t=`${e}-${Date.now()}`;return this.interactionStartTimes.set(t,performance.now()),t}endInteraction(e,t){const r=this.interactionStartTimes.get(e);if(r){const t=performance.now()-r;return this.interactionStartTimes.delete(e),t>100&&t.toFixed(2),t.toFixed(2),t}return 0}}const Le=new class{constructor(e=Oe){t(this,"renderTracker",new Ce),t(this,"memoryTracker",new Ie),t(this,"dbTracker",new Pe),t(this,"interactionTracker",new Me),t(this,"config"),t(this,"reportingInterval"),t(this,"trackRender",{start:e=>{this.config.enableRenderTracking&&this.renderTracker.startRender(e)},end:e=>{this.config.enableRenderTracking&&this.renderTracker.endRender(e)},reRender:(e,t)=>{this.config.enableRenderTracking&&this.renderTracker.trackReRender(e,t)}}),t(this,"trackDatabase",{start:(e,t)=>{this.config.enableDatabaseTracking&&this.dbTracker.startOperation(e,t)},end:(e,t,r)=>this.config.enableDatabaseTracking?this.dbTracker.endOperation(e,t,r):0}),t(this,"trackInteraction",{start:e=>this.config.enableInteractionTracking?this.interactionTracker.startInteraction(e):"",end:(e,t)=>this.config.enableInteractionTracking?this.interactionTracker.endInteraction(e,t):0}),this.config=e}startMonitoring(){this.config.enableMemoryTracking&&this.memoryTracker.startMemoryMonitoring()}stopMonitoring(){this.reportingInterval&&(clearInterval(this.reportingInterval),this.reportingInterval=void 0)}getMetrics(){return Ne.getMetrics()}clearMetrics(){Ne.clearMetrics(),this.renderTracker.clearStats()}updateConfig(e){this.config={...this.config,...e}}};async function je(e,t,r){const a=function(e){const t=Date.now(),r=Math.random().toString(36).substr(2,9);return`${e}-${t}-${r}`}(e),s=performance.now();Le.trackDatabase.start(a,e);try{const s=await t();performance.now();return Date.now(),Le.trackDatabase.end(a,e,r),s}catch(n){throw performance.now(),n instanceof Error&&n.name,Le.trackDatabase.end(a,e,r),n}}const Be=Object.freeze(Object.defineProperty({__proto__:null,trackDbOperation:je},Symbol.toStringTag,{value:"Module"}));class We{constructor(e,t="aloe-wellness-log",r=4){this.storeName=e,this.dbName=t,this.dbVersion=r}async openDatabase(){return new Promise((e,t)=>{const r=indexedDB.open(this.dbName,this.dbVersion);r.onerror=()=>{var e;t(new Error(`Database connection failed: ${null==(e=r.error)?void 0:e.message}`))},r.onsuccess=()=>{e(r.result)},r.onupgradeneeded=e=>{const t=e.target.result;this.upgradeDatabase(t,e.oldVersion,e.newVersion||this.dbVersion)}})}async executeTransaction(e,t){const r=(await this.openDatabase()).transaction([this.storeName],e),a=r.objectStore(this.storeName);return new Promise((e,s)=>{r.onerror=()=>{var e;s(new Error(`Transaction failed: ${null==(e=r.error)?void 0:e.message}`))},t(a).then(e).catch(s)})}generateId(){return`${Date.now()}_${Math.random().toString(36).substr(2,9)}`}}new class extends We{constructor(){super("weight_records")}upgradeDatabase(e,t,r){if(!e.objectStoreNames.contains(this.storeName)){const t=e.createObjectStore(this.storeName,{keyPath:"id"});t.createIndex("date","date",{unique:!1}),t.createIndex("weight","weight",{unique:!1})}}async getAll(){try{const e=await this.executeTransaction("readonly",async e=>new Promise((t,r)=>{const a=e.getAll();a.onsuccess=()=>t(a.result),a.onerror=()=>r(a.error)}));return{success:!0,data:e,recordsAffected:e.length}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async getById(e){try{const t=await this.executeTransaction("readonly",async t=>new Promise((r,a)=>{const s=t.get(e);s.onsuccess=()=>r(s.result),s.onerror=()=>a(s.error)}));return t?{success:!0,data:t}:{success:!1,error:"Record not found"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async add(e){try{const t={...e,id:this.generateId()};return await this.executeTransaction("readwrite",async e=>new Promise((r,a)=>{const s=e.add(t);s.onsuccess=()=>r(),s.onerror=()=>a(s.error)})),{success:!0,data:t,recordsAffected:1}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async update(e){try{return await this.executeTransaction("readwrite",async t=>new Promise((r,a)=>{const s=t.put(e);s.onsuccess=()=>r(),s.onerror=()=>a(s.error)})),{success:!0,data:e,recordsAffected:1}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async delete(e){try{return await this.executeTransaction("readwrite",async t=>new Promise((r,a)=>{const s=t.delete(e);s.onsuccess=()=>r(),s.onerror=()=>a(s.error)})),{success:!0,recordsAffected:1}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async deleteAll(){try{return await this.executeTransaction("readwrite",async e=>new Promise((t,r)=>{const a=e.clear();a.onsuccess=()=>t(),a.onerror=()=>r(a.error)})),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async search(e){try{const t=await this.getAll();if(!t.success||!t.data)return t;let r=t.data;if(e.where&&(r=r.filter(t=>Object.entries(e.where).every(([e,r])=>t[e]===r))),e.orderBy&&r.sort((t,r)=>{const a=t[e.orderBy],s=r[e.orderBy];if(null==a&&null==s)return 0;if(null==a)return 1;if(null==s)return-1;const n=a<s?-1:a>s?1:0;return"desc"===e.order?-n:n}),e.offset||e.limit){const t=e.offset||0,a=e.limit?t+e.limit:void 0;r=r.slice(t,a)}return{success:!0,data:r,recordsAffected:r.length}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async count(){try{return{success:!0,data:await this.executeTransaction("readonly",async e=>new Promise((t,r)=>{const a=e.count();a.onsuccess=()=>t(a.result),a.onerror=()=>r(a.error)}))}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async getStats(){try{const e=await this.count();if(!e.success)return{success:!1,error:"Failed to get count"};const t=await this.getAll();if(!t.success||!t.data)return{success:!1,error:"Failed to get records for stats"};const r=t.data.length>0?new Date(Math.max(...t.data.map(e=>new Date(e.date).getTime()))):void 0;return{success:!0,data:{recordCount:e.data,lastModified:r,size:JSON.stringify(t.data).length}}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async getByDateRange(e,t){return this.search({where:{},orderBy:"date",order:"asc"}).then(r=>{if(!r.success||!r.data)return r;const a=r.data.filter(r=>r.date>=e&&r.date<=t);return{...r,data:a,recordsAffected:a.length}})}async getLatest(e=10){return this.search({orderBy:"date",order:"desc",limit:e})}};const Fe=new class extends We{constructor(){super(we.WEIGHT_RECORDS)}upgradeDatabase(e,t,r){if(!e.objectStoreNames.contains(this.storeName)){const t=e.createObjectStore(this.storeName,{keyPath:"id"});t.createIndex("date","date",{unique:!1}),t.createIndex("weight","weight",{unique:!1}),t.createIndex("excludeFromGraph","excludeFromGraph",{unique:!1})}}async getByDateRange(e,t){return je("get-weight-records-by-date-range",async()=>{try{const r=await ke(this.storeName,"readonly",async(r,a)=>{const s=a.index("date"),n=IDBKeyRange.bound(e,t);return new Promise((e,t)=>{const r=s.getAll(n);r.onsuccess=()=>e(r.result),r.onerror=()=>t(r.error)})});return{success:!0,data:r,recordsAffected:r.length}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error"}}})}async getAll(){return je("get-all-weight-records",async()=>{try{const e=await ke(this.storeName,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.getAll();a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})});return{success:!0,data:e,recordsAffected:e.length}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}})}async getById(e){return je("get-weight-record-by-id",async()=>{try{const t=await ke(this.storeName,"readonly",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s=a.get(e);s.onsuccess=()=>t(s.result),s.onerror=()=>r(s.error)})});return t?{success:!0,data:t}:{success:!1,error:"Record not found"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}})}async add(e){return je("add-weight-record",async()=>{try{const t={...e,id:this.generateId()};return await ke(this.storeName,"readwrite",async(e,r)=>{const a=r;return new Promise((e,r)=>{const s=a.add(t);s.onsuccess=()=>e(),s.onerror=()=>r(s.error)})}),{success:!0,data:t,recordsAffected:1}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},1)}async update(e){return je("update-weight-record",async()=>{try{return await ke(this.storeName,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s=a.put(e);s.onsuccess=()=>t(),s.onerror=()=>r(s.error)})}),{success:!0,data:e,recordsAffected:1}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},1)}async delete(e){return je("delete-weight-record",async()=>{try{return await ke(this.storeName,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s=a.delete(e);s.onsuccess=()=>t(),s.onerror=()=>r(s.error)})}),{success:!0,recordsAffected:1}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}},1)}async deleteAll(){return je("delete-all-weight-records",async()=>{try{return await ke(this.storeName,"readwrite",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.clear();a.onsuccess=()=>e(),a.onerror=()=>t(a.error)})}),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}})}async search(e){return je("search-weight-records",async()=>{try{const t=await this.getAll();if(!t.success||!t.data)return t;let r=t.data;if(e.where&&(r=r.filter(t=>Object.entries(e.where).every(([e,r])=>t[e]===r))),e.dateRange&&(r=r.filter(t=>t.date>=e.dateRange.start&&t.date<=e.dateRange.end)),void 0!==e.excludeFromGraph&&(r=r.filter(t=>Boolean(t.excludeFromGraph)===e.excludeFromGraph)),e.weightRange&&(r=r.filter(t=>t.weight>=e.weightRange.min&&t.weight<=e.weightRange.max)),e.orderBy&&r.sort((t,r)=>{const a=t[e.orderBy],s=r[e.orderBy];if(null==a&&null==s)return 0;if(null==a)return 1;if(null==s)return-1;const n=a<s?-1:a>s?1:0;return"desc"===e.order?-n:n}),e.offset||e.limit){const t=e.offset||0,a=e.limit?t+e.limit:void 0;r=r.slice(t,a)}return{success:!0,data:r,recordsAffected:r.length}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}})}async count(){return je("count-weight-records",async()=>{try{return{success:!0,data:await ke(this.storeName,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.count();a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})})}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}})}async getStats(){return je("get-weight-record-stats",async()=>{try{const e=await this.getAll();if(!e.success||!e.data)return{success:!1,error:"Failed to get records for stats"};const t=e.data;if(0===t.length)return{success:!0,data:{recordCount:0,totalRecords:0,averageWeight:0,minWeight:0,maxWeight:0,weightTrend:"stable",recordsThisMonth:0,recordsThisWeek:0}};const r=t.map(e=>e.weight),a=Math.min(...r),s=Math.max(...r),n=r.reduce((e,t)=>e+t,0)/r.length,o=t.sort((e,t)=>t.date.localeCompare(e.date)),i=o[0],c=o.slice(0,5);let l="stable";if(c.length>=2){const e=c[c.length-1].weight,t=c[0].weight-e;t>.5?l="increasing":t<-.5&&(l="decreasing")}const d=new Date,u=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`,h=new Date(d.setDate(d.getDate()-d.getDay())).toISOString().slice(0,10),g=t.filter(e=>e.date.startsWith(u)).length,m=t.filter(e=>e.date>=h).length;return{success:!0,data:{recordCount:t.length,totalRecords:t.length,averageWeight:n,minWeight:a,maxWeight:s,weightTrend:l,lastRecord:i,recordsThisMonth:g,recordsThisWeek:m}}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}})}async getLatest(e=10){return this.search({orderBy:"date",order:"desc",limit:e})}async getForGraph(){return this.search({excludeFromGraph:!1,orderBy:"date",order:"asc"})}},Ge=class e{constructor(){t(this,"storeName",we.GOAL),t(this,"GOAL_ID","singleton")}static getInstance(){return e.instance||(e.instance=new e),e.instance}async setGoal(e){return je("set-goal",async()=>{try{const t=this.validateGoalData(e);return t?{success:!1,error:t}:(await ke(this.storeName,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s={...e,id:this.GOAL_ID},n=a.put(s);n.onsuccess=()=>t(),n.onerror=()=>r(n.error)})}),{success:!0,data:e})}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}})}async getGoal(){return je("get-goal",async()=>{try{const e=await ke(this.storeName,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.get(this.GOAL_ID);a.onsuccess=()=>e(a.result),a.onerror=()=>t(a.error)})});if(!e)return{success:!1,error:"Goal not found"};const{id:t,...r}=e;return{success:!0,data:r}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}})}async hasGoal(){try{const e=await this.getGoal();return e.success&&!!e.data}catch{return!1}}async clearGoal(){return je("clear-goal",async()=>{try{return await ke(this.storeName,"readwrite",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.delete(this.GOAL_ID);a.onsuccess=()=>e(),a.onerror=()=>t(a.error)})}),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"Unknown error"}}})}async getGoalProgress(e){return je("get-goal-progress",async()=>{try{const t=await this.getGoal();if(!t.success||!t.data)return{success:!0,data:{hasGoal:!1,progressPercentage:0,isGoalAchieved:!1}};const r=t.data;if(void 0===e)return{success:!0,data:{hasGoal:!0,targetWeight:r.targetWeight,progressPercentage:0,isGoalAchieved:!1}};const a=r.currentWeight||e,s=r.targetWeight,n=Math.abs(e-s);let o=0;if(a>s){const t=a-s;o=t>0?(a-e)/t*100:0}else{const t=s-a;o=t>0?(e-a)/t*100:0}o=Math.max(0,Math.min(100,o));const i=n<=.5;let c,l;if(!i&&r.targetDate){const e=new Date(r.targetDate),t=new Date;l=Math.ceil((e.getTime()-t.getTime())/864e5),l>0&&(c=r.targetDate)}return{success:!0,data:{hasGoal:!0,targetWeight:s,currentWeight:e,remainingWeight:n,progressPercentage:o,isGoalAchieved:i,daysToTarget:l,estimatedCompletionDate:c}}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error"}}})}validateGoalData(e){if(!e.targetWeight||e.targetWeight<=0)return"目標体重が正しく設定されていません";if(e.targetWeight<20||e.targetWeight>300)return"目標体重は20kg〜300kgの範囲で設定してください";if(e.currentWeight&&(e.currentWeight<20||e.currentWeight>300))return"現在の体重は20kg〜300kgの範囲で設定してください";if(e.targetDate){const t=new Date(e.targetDate);if(t<=new Date)return"目標日は今日より後の日付を設定してください";const r=new Date;if(r.setFullYear(r.getFullYear()+1),t>r)return"目標日は1年以内の日付を推奨します"}return null}async validateGoalHealth(e){const t=[],r=[];if(e.currentWeight&&e.targetWeight){const a=Math.abs(e.currentWeight-e.targetWeight),s=e.currentWeight>e.targetWeight;if(a>20&&(t.push("20kg以上の体重変化は健康に影響を与える可能性があります"),r.push("段階的な目標設定を検討してください")),e.targetDate){const n=Math.ceil((new Date(e.targetDate).getTime()-(new Date).getTime())/864e5);if(n>0){const e=a/n*7;s&&e>1?(t.push("週1kg以上の減量は健康に負担をかける可能性があります"),r.push("週0.5kg程度の減量を目安にしてください")):!s&&e>.5&&(t.push("急激な体重増加は健康に影響する可能性があります"),r.push("週0.25kg程度の増量を目安にしてください"))}}if(e.height&&e.height>0){const a=e.height/100,s=e.targetWeight/(a*a);s<18.5?(t.push("目標BMIが低体重の範囲です"),r.push("健康的な体重範囲での目標設定を検討してください")):s>25&&(t.push("目標BMIが標準範囲を超えています"),r.push("健康的な体重範囲での目標設定を検討してください"))}}return{isHealthy:0===t.length,warnings:t,recommendations:r}}};t(Ge,"instance");const Ve=Ge.getInstance();async function ze(e){const t=await Fe.add(e);if(!t.success)throw new Error(t.error||"Failed to add weight record")}async function Ue(){const e=await Fe.getAll();if(!e.success)throw new Error(e.error||"Failed to get weight records");return e.data||[]}async function He(e){const{executeTransaction:t}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return a("add-bp-record",async()=>{await t(r.BP_RECORDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s=a.put(e);s.onsuccess=()=>t(),s.onerror=()=>r(s.error)})})})}async function Ze(){const{executeTransaction:e}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:t}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:r}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return r("get-all-bp-records",async()=>e(t.BP_RECORDS,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.getAll();a.onsuccess=()=>e(a.result||[]),a.onerror=()=>t(a.error)})}))}async function $e(e){const{executeTransaction:t}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return a("update-bp-record",async()=>{await t(r.BP_RECORDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s=a.put(e);s.onsuccess=()=>t(),s.onerror=()=>r(s.error)})})})}async function Ye(e){const{executeTransaction:t}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return a("delete-bp-record",async()=>{await t(r.BP_RECORDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s=a.delete(e);s.onsuccess=()=>t(),s.onerror=()=>r(s.error)})})})}async function qe(e){const{executeTransaction:t}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return a("add-daily-record",async()=>{await t(r.DAILY_RECORDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s=a.put(e);s.onsuccess=()=>t(),s.onerror=()=>r(s.error)})})})}async function Ke(){const{executeTransaction:e}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:t}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:r}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return r("get-all-daily-records",async()=>e(t.DAILY_RECORDS,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.getAll();a.onsuccess=()=>e(a.result||[]),a.onerror=()=>t(a.error)})}))}async function Qe(e){const{executeTransaction:t}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return a("update-daily-record",async()=>{await t(r.DAILY_RECORDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s=a.put(e);s.onsuccess=()=>t(),s.onerror=()=>r(s.error)})})})}async function Xe(e){const{executeTransaction:t}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return a("delete-daily-record",async()=>{await t(r.DAILY_RECORDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s=a.delete(e);s.onsuccess=()=>t(),s.onerror=()=>r(s.error)})})})}async function Je(e){const{executeTransaction:t}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return a("add-daily-field",async()=>{await t(r.DAILY_FIELDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s=a.put(e);s.onsuccess=()=>t(),s.onerror=()=>r(s.error)})})})}async function et(){const{executeTransaction:e}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:t}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:r}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return r("get-all-daily-fields",async()=>e(t.DAILY_FIELDS,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const a=r.getAll();a.onsuccess=()=>e(a.result||[]),a.onerror=()=>t(a.error)})}))}async function tt(e){const{executeTransaction:t}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return a("update-daily-field",async()=>{await t(r.DAILY_FIELDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s=a.put(e);s.onsuccess=()=>t(),s.onerror=()=>r(s.error)})})})}async function rt(e){const{executeTransaction:t}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:r}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:a}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return a("delete-daily-field",async()=>{await t(r.DAILY_FIELDS,"readwrite",async(t,r)=>{const a=r;return new Promise((t,r)=>{const s=a.delete(e);s.onsuccess=()=>t(),s.onerror=()=>r(s.error)})})})}const at=new class{constructor(){t(this,"goal",null),t(this,"isLoading",!1),t(this,"error",null),t(this,"setLoading",e=>{this.isLoading=e}),t(this,"setError",e=>{this.error=e}),t(this,"isCheckpointDate",e=>{const t=e.toISOString().split("T")[0];return this.checkpointDates.includes(t)}),t(this,"setGoal",async e=>{this.setLoading(!0),this.setError(null);try{const t=await Ve.setGoal(e);p(()=>{if(!t.success)throw this.error=t.error||"Failed to set goal",new Error(this.error);this.goal=e})}catch(t){throw p(()=>{this.error=t instanceof Error?t.message:"Unknown error"}),t}finally{p(()=>{this.setLoading(!1)})}}),t(this,"clearGoal",async()=>{this.setLoading(!0),this.setError(null);try{const e=await Ve.clearGoal();p(()=>{if(!e.success)throw this.error=e.error||"Failed to clear goal",new Error(this.error);this.goal=null})}catch(e){throw p(()=>{this.error=e instanceof Error?e.message:"Unknown error"}),e}finally{p(()=>{this.setLoading(!1)})}}),t(this,"loadGoal",async()=>{this.setLoading(!0),this.setError(null);try{const e=await Ve.getGoal();p(()=>{e&&e.success?this.goal=e.data||null:(this.goal=null,this.error=(null==e?void 0:e.error)||"Failed to load goal")})}catch(e){p(()=>{this.goal=null,this.error=e instanceof Error?e.message:"Unknown error"})}finally{p(()=>{this.setLoading(!1)})}}),t(this,"clearError",()=>{this.setError(null)}),f(this,{setGoal:y,clearGoal:y,loadGoal:y,clearError:y,hasGoal:w,isReady:w,goalProgress:w,isGoalAchieved:w,remainingWeight:w,checkpointDates:w,goalSummary:w})}get hasGoal(){return null!==this.goal}get isReady(){return!this.isLoading&&null===this.error}get goalProgress(){if(!this.goal||!this.goal.currentWeight||!this.goal.targetWeight)return 0;const e=this.goal.startWeight||this.goal.currentWeight,t=this.goal.targetWeight-e,r=this.goal.currentWeight-e;return 0===t?100:Math.max(0,Math.min(100,r/t*100))}get isGoalAchieved(){if(!this.goal||!this.goal.currentWeight||!this.goal.targetWeight)return!1;return this.goal.targetWeight<(this.goal.startWeight||this.goal.currentWeight)?this.goal.currentWeight<=this.goal.targetWeight:this.goal.currentWeight>=this.goal.targetWeight}get remainingWeight(){return this.goal&&this.goal.currentWeight&&this.goal.targetWeight?Math.abs(this.goal.targetWeight-this.goal.currentWeight):0}get checkpointDates(){var e;if(!(null==(e=this.goal)?void 0:e.targetStart))return[];const t=new Date(this.goal.targetStart),r=[],a=new Date(t);a.setDate(t.getDate()+14),r.push(a.toISOString().split("T")[0]);const s=new Date(t);s.setMonth(t.getMonth()+1),r.push(s.toISOString().split("T")[0]);const n=new Date(t);n.setMonth(t.getMonth()+2),r.push(n.toISOString().split("T")[0]);const o=new Date(t);return o.setMonth(t.getMonth()+3),r.push(o.toISOString().split("T")[0]),r}get goalSummary(){return{hasGoal:this.hasGoal,progress:this.goalProgress,achieved:this.isGoalAchieved,remaining:this.remainingWeight,isLoading:this.isLoading,error:this.error,checkpointDates:this.checkpointDates}}},st=()=>({goal:at.goal,setGoal:at.setGoal,clearGoal:at.clearGoal,loadGoal:at.loadGoal,isLoading:at.isLoading,error:at.error,hasGoal:at.hasGoal,isReady:at.isReady,clearError:at.clearError});const nt=new class{constructor(){t(this,"weightRecords",[]),t(this,"dailyRecords",[]),t(this,"bpRecords",[]),t(this,"dailyFields",[]),t(this,"loading",{weight:!1,daily:!1,bp:!1,fields:!1,global:!1}),t(this,"errors",{weight:null,daily:null,bp:null,fields:null,global:null}),t(this,"cache",{weight:{lastUpdated:null,isStale:!1},daily:{lastUpdated:null,isStale:!1},bp:{lastUpdated:null,isStale:!1},fields:{lastUpdated:null,isStale:!1}}),t(this,"CACHE_DURATION",3e5),t(this,"getRecordsByDateRange",(e,t)=>w(()=>this.weightRecords.filter(r=>r.date>=e&&r.date<=t)).get()),t(this,"getDailyRecordStats",(e,t=30)=>w(()=>{const r=new Date,a=new Date(r);a.setDate(a.getDate()-t+1);const s=a.toISOString().split("T")[0],n=r.toISOString().split("T")[0],o=this.dailyRecords.filter(t=>t.fieldId===e&&t.date>=s&&t.date<=n),i=o.filter(e=>1===e.value).length,c=o.length;return{total:c,achieved:i,rate:c>0?i/c*100:0}}).get()),t(this,"getRecordsByDateRangeOptimized",(e,t,r)=>w(()=>{switch(r){case"weight":return this.weightRecords.filter(r=>r.date>=e&&r.date<=t);case"bp":return this.bpRecords.filter(r=>r.date>=e&&r.date<=t);case"daily":return this.dailyRecords.filter(r=>r.date>=e&&r.date<=t);default:return[]}}).get()),t(this,"loadWeightRecords",async()=>{if(!(this.loading.weight||!this.isStale("weight")&&this.weightRecords.length>0)){this.setLoading("weight",!0),this.setError("weight",null);try{const e=await Ue();p(()=>{this.weightRecords=e,this.updateCache("weight")})}catch(e){const t=e instanceof xe?e:new xe(ve.UNKNOWN,"Failed to load weight records",e);p(()=>{this.setError("weight",t)})}finally{p(()=>{this.setLoading("weight",!1)})}}}),t(this,"loadDailyRecords",async()=>{if(!(this.loading.daily||!this.isStale("daily")&&this.dailyRecords.length>0)){this.setLoading("daily",!0),this.setError("daily",null);try{const e=await Ke();p(()=>{this.dailyRecords=e,this.updateCache("daily")})}catch(e){const t=e instanceof xe?e:new xe(ve.UNKNOWN,"Failed to load daily records",e);p(()=>{this.setError("daily",t)})}finally{p(()=>{this.setLoading("daily",!1)})}}}),t(this,"loadBpRecords",async()=>{if(!(this.loading.bp||!this.isStale("bp")&&this.bpRecords.length>0)){this.setLoading("bp",!0),this.setError("bp",null);try{const e=await Ze();p(()=>{this.bpRecords=e,this.updateCache("bp")})}catch(e){const t=e instanceof xe?e:new xe(ve.UNKNOWN,"Failed to load bp records",e);p(()=>{this.setError("bp",t)})}finally{p(()=>{this.setLoading("bp",!1)})}}}),t(this,"loadDailyFields",async()=>{if(!(this.loading.fields||!this.isStale("fields")&&this.dailyFields.length>0)){this.setLoading("fields",!0),this.setError("fields",null);try{const e=await et();p(()=>{this.dailyFields=e,this.updateCache("fields")})}catch(e){const t=e instanceof xe?e:new xe(ve.UNKNOWN,"Failed to load daily fields",e);p(()=>{this.setError("fields",t)})}finally{p(()=>{this.setLoading("fields",!1)})}}}),t(this,"loadAllData",async()=>{this.setLoading("global",!0),this.setError("global",null);try{await Promise.all([this.loadWeightRecords(),this.loadDailyRecords(),this.loadBpRecords(),this.loadDailyFields()])}catch(e){const t=e instanceof xe?e:new xe(ve.UNKNOWN,"Failed to load all data",e);p(()=>{this.setError("global",t)})}finally{p(()=>{this.setLoading("global",!1)})}}),t(this,"addWeightRecord",async e=>{try{const t={...e,id:`weight_${Date.now()}`};return await ze(t),p(()=>{this.weightRecords.push(t),this.updateCache("weight")}),t}catch(t){const e=t instanceof xe?t:new xe(ve.UNKNOWN,"Failed to add weight record",t);return p(()=>{this.setError("weight",e)}),null}}),t(this,"updateWeightRecord",async e=>{try{return await async function(e){const t=await Fe.update(e);if(!t.success)throw new Error(t.error||"Failed to update weight record")}(e),p(()=>{const t=this.weightRecords.findIndex(t=>t.id===e.id);-1!==t&&(this.weightRecords[t]=e,this.updateCache("weight"))}),!0}catch(t){const e=t instanceof xe?t:new xe(ve.UNKNOWN,"Failed to update weight record",t);return p(()=>{this.setError("weight",e)}),!1}}),t(this,"deleteWeightRecord",async e=>{try{return await async function(e){const t=await Fe.delete(e);if(!t.success)throw new Error(t.error||"Failed to delete weight record")}(e),p(()=>{this.weightRecords=this.weightRecords.filter(t=>t.id!==e),this.updateCache("weight")}),!0}catch(t){const e=t instanceof xe?t:new xe(ve.UNKNOWN,"Failed to delete weight record",t);return p(()=>{this.setError("weight",e)}),!1}}),t(this,"deleteAllData",async()=>{this.setLoading("global",!0),this.setError("global",null);try{await async function(){const{executeTransaction:e}=await D(async()=>{const{executeTransaction:e}=await Promise.resolve().then(()=>Se);return{executeTransaction:e}},void 0),{STORE_NAMES:t}=await D(async()=>{const{STORE_NAMES:e}=await Promise.resolve().then(()=>be);return{STORE_NAMES:e}},void 0),{trackDbOperation:r}=await D(async()=>{const{trackDbOperation:e}=await Promise.resolve().then(()=>Be);return{trackDbOperation:e}},void 0);return r("delete-all-data",async()=>{await e([t.GOAL,t.WEIGHT_RECORDS,t.BP_RECORDS,t.DAILY_RECORDS,t.DAILY_FIELDS],"readwrite",async(e,t)=>{const r=t,[a,s,n,o,i]=r;return new Promise((e,t)=>{let r=0;const c=()=>{r++,5===r&&e()},l=e=>t(e),d=a.clear();d.onsuccess=c,d.onerror=()=>l(d.error);const u=s.clear();u.onsuccess=c,u.onerror=()=>l(u.error);const h=n.clear();h.onsuccess=c,h.onerror=()=>l(h.error);const g=o.clear();g.onsuccess=c,g.onerror=()=>l(g.error);const m=i.clear();m.onsuccess=c,m.onerror=()=>l(m.error)})})})}(),p(()=>{this.weightRecords=[],this.dailyRecords=[],this.bpRecords=[],this.dailyFields=[],Object.keys(this.cache).forEach(e=>{this.cache[e]={lastUpdated:null,isStale:!1}})})}catch(e){const t=e instanceof xe?e:new xe(ve.UNKNOWN,"Failed to delete all data",e);throw p(()=>{this.setError("global",t)}),e}finally{p(()=>{this.setLoading("global",!1)})}}),t(this,"refreshAllData",async()=>{Object.keys(this.cache).forEach(e=>{this.cache[e].isStale=!0}),await this.loadAllData()}),t(this,"clearError",e=>{this.setError(e,null)}),t(this,"clearAllErrors",()=>{Object.keys(this.errors).forEach(e=>{this.errors[e]=null})}),t(this,"getRecordsOfDay",(e,t)=>{switch(t){case"weight":return this.weightRecords.filter(t=>t.date===e);case"daily":return this.dailyRecords.filter(t=>t.date===e);case"bp":return this.bpRecords.filter(t=>t.date===e);default:return[]}}),t(this,"isRecorded",(e,t)=>this.getRecordsOfDay(e,t).length>0),f(this)}get recordStats(){return w(()=>({weightCount:this.weightRecords.length,dailyCount:this.dailyRecords.length,bpCount:this.bpRecords.length,fieldsCount:this.dailyFields.length,totalCount:this.weightRecords.length+this.dailyRecords.length+this.bpRecords.length})).get()}get latestWeightRecord(){return w(()=>0===this.weightRecords.length?null:this.weightRecords.slice().sort((e,t)=>{const r=t.date.localeCompare(e.date);return 0!==r?r:t.time.localeCompare(e.time)})[0]).get()}get weightRecordsForGraph(){return w(()=>this.weightRecords.filter(e=>!e.excludeFromGraph).sort((e,t)=>{const r=e.date.localeCompare(t.date);return 0!==r?r:e.time.localeCompare(t.time)})).get()}get processedWeightRecordsForGraph(){return w(()=>{const e=new Map;return this.weightRecords.map(t=>{const r=`${t.date}T${t.time}`,a=new Date(r).getTime(),s=e.get(a)||0,n=a+s;return e.set(a,s+1),{...t,timestamp:n}}).sort((e,t)=>e.timestamp-t.timestamp)}).get()}get processedBpRecordsForGraph(){return w(()=>{const e=new Map;return this.bpRecords.map(t=>{const r=`${t.date}T${t.time}`,a=new Date(r).getTime(),s=e.get(a)||0,n=a+s;return e.set(a,s+1),{...t,timestamp:n}}).sort((e,t)=>e.timestamp-t.timestamp)}).get()}get processedBodyCompositionForGraph(){return w(()=>{const e=new Map;return this.weightRecords.filter(e=>void 0!==e.bodyFat&&null!==e.bodyFat||void 0!==e.waist&&null!==e.waist).map(t=>{const r=`${t.date}T${t.time}`,a=new Date(r).getTime(),s=e.get(a)||0,n=a+s;return e.set(a,s+1),{...t,timestamp:n,bodyFat:t.bodyFat??void 0,waist:t.waist??void 0}}).sort((e,t)=>e.timestamp-t.timestamp)}).get()}isStale(e){const t=this.cache[e];if(!t.lastUpdated)return!0;return(new Date).getTime()-t.lastUpdated.getTime()>this.CACHE_DURATION}updateCache(e){this.cache[e]={lastUpdated:new Date,isStale:!1}}setLoading(e,t){this.loading[e]=t}setError(e,t){this.errors[e]=t}},ot=()=>({weightRecords:nt.weightRecords,dailyRecords:nt.dailyRecords,bpRecords:nt.bpRecords,dailyFields:nt.dailyFields,loading:nt.loading,errors:nt.errors,recordStats:nt.recordStats,latestWeightRecord:nt.latestWeightRecord,weightRecordsForGraph:nt.weightRecordsForGraph,processedWeightRecordsForGraph:nt.processedWeightRecordsForGraph,processedBpRecordsForGraph:nt.processedBpRecordsForGraph,processedBodyCompositionForGraph:nt.processedBodyCompositionForGraph,loadWeightRecords:nt.loadWeightRecords,loadDailyRecords:nt.loadDailyRecords,loadBpRecords:nt.loadBpRecords,loadDailyFields:nt.loadDailyFields,loadAllData:nt.loadAllData,addWeightRecord:nt.addWeightRecord,updateWeightRecord:nt.updateWeightRecord,deleteWeightRecord:nt.deleteWeightRecord,deleteAllData:nt.deleteAllData,refreshAllData:nt.refreshAllData,clearError:nt.clearError,clearAllErrors:nt.clearAllErrors,getRecordsOfDay:nt.getRecordsOfDay,isRecorded:nt.isRecorded,getDailyRecordStats:nt.getDailyRecordStats,getRecordsByDateRangeOptimized:nt.getRecordsByDateRangeOptimized});const it=new class{constructor(){t(this,"toasts",[]),t(this,"showToast",(e,t="info",r=3e3)=>{const a=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,s={id:a,type:t,message:e,duration:r,timestamp:Date.now()};this.toasts.push(s),r&&r>0&&setTimeout(()=>{this.removeToast(a)},r)}),t(this,"showSuccess",(e,t=2e3)=>{this.showToast(e,"success",t)}),t(this,"showError",(e,t=5e3)=>{this.showToast(e,"error",t)}),t(this,"showWarning",(e,t=4e3)=>{this.showToast(e,"warning",t)}),t(this,"showInfo",(e,t=3e3)=>{this.showToast(e,"info",t)}),t(this,"removeToast",e=>{p(()=>{this.toasts=this.toasts.filter(t=>t.id!==e)})}),t(this,"clearAll",()=>{this.toasts=[]}),f(this,{showToast:y,showSuccess:y,showError:y,showWarning:y,showInfo:y,removeToast:y,clearAll:y,hasToasts:w,activeToasts:w,errorToasts:w,successToasts:w,warningToasts:w,infoToasts:w,toastCounts:w,oldestToast:w,newestToast:w,hasErrors:w,hasWarnings:w,toastSummary:w})}get hasToasts(){return this.toasts.length>0}get activeToasts(){return this.toasts}get errorToasts(){return this.toasts.filter(e=>"error"===e.type)}get successToasts(){return this.toasts.filter(e=>"success"===e.type)}get warningToasts(){return this.toasts.filter(e=>"warning"===e.type)}get infoToasts(){return this.toasts.filter(e=>"info"===e.type)}get toastCounts(){const e={success:0,error:0,warning:0,info:0};return this.toasts.forEach(t=>{e[t.type]++}),e}get oldestToast(){return 0===this.toasts.length?null:this.toasts.reduce((e,t)=>{const r=e.timestamp||0;return(t.timestamp||0)<r?t:e})}get newestToast(){return 0===this.toasts.length?null:this.toasts.reduce((e,t)=>{const r=e.timestamp||0;return(t.timestamp||0)>r?t:e})}get hasErrors(){return this.errorToasts.length>0}get hasWarnings(){return this.warningToasts.length>0}get toastSummary(){return{total:this.toasts.length,byType:this.toastCounts,hasErrors:this.hasErrors,hasWarnings:this.hasWarnings,oldest:this.oldestToast,newest:this.newestToast}}};b({enforceActions:"always",computedRequiresReaction:!1,reactionRequiresObservable:!0,observableRequiresReaction:!1,disableErrorBoundaries:!0});const ct=new class{constructor(){t(this,"dateStore",fe),t(this,"goalStore",at),t(this,"recordsStore",nt),t(this,"toastStore",it),t(this,"_state","uninitialized"),t(this,"_initializationPromise",null),t(this,"_cleanupFunctions",[]),t(this,"_reactions",[]),t(this,"reset",async()=>{try{this.toastStore.clearAll(),this.goalStore.clearError(),this.recordsStore.clearAllErrors(),this.toastStore.showSuccess("ストアをリセットしました")}catch(e){this.toastStore.showError("ストアのリセットに失敗しました")}}),this._setupReactions()}get state(){return this._state}get isInitialized(){return"ready"===this._state}get isInitializing(){return"initializing"===this._state}get hasError(){return"error"===this._state}_setupReactions(){const e=v(()=>({goal:this.goalStore.goal,error:this.goalStore.error}),({goal:e,error:t})=>{t&&this.toastStore.showError(`目標設定エラー: ${t}`)},{name:"GoalErrorReaction"}),t=v(()=>Object.values(this.recordsStore.errors).some(Boolean),e=>{e&&this.toastStore.showError("データ操作中にエラーが発生しました")},{name:"RecordsErrorReaction"});this._reactions.push(e,t)}async initialize(){if(this._initializationPromise)return await this._initializationPromise;if("ready"===this._state)return()=>{};this._state="initializing",this._initializationPromise=this._performInitialization();try{const e=await this._initializationPromise;return this._state="ready",e}catch(e){throw this._state="error",this._initializationPromise=null,e}}async _performInitialization(){try{const e=(()=>{fe.setToday(),fe.initializeFromStorage();const e=setInterval(()=>{me()!==fe.today&&fe.setToday()},36e5);return()=>{clearInterval(e)}})();this._cleanupFunctions.push(e);const t=[this.goalStore.loadGoal(),this.recordsStore.loadAllData()];return await Promise.all(t),()=>{this._cleanup()}}catch(e){throw this.toastStore.showError("ストアの初期化に失敗しました"),e}}_cleanup(){this._reactions.forEach(e=>e()),this._reactions=[],this._cleanupFunctions.forEach(e=>{try{e()}catch(t){}}),this._cleanupFunctions=[]}_logStoreStats(){}dispose(){this._cleanup(),this._state="uninitialized",this._initializationPromise=null}},lt=n.lazy(()=>D(()=>import("./BpRecord-DwFhMLDZ.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),dt=n.lazy(()=>D(()=>import("./DailyRecord-BPr0x3ha.js"),__vite__mapDeps([8,1,2,9,3,5,6,7]))),ut=n.lazy(()=>D(()=>import("./GoalInput-DL13hKKt.js"),__vite__mapDeps([10,1,2,3,6,5]))),ht=n.lazy(()=>D(()=>import("./RecordGraph-BLBr9Fsg.js"),__vite__mapDeps([11,1,2,5,3]))),gt=n.lazy(()=>D(()=>import("./WeightRecord-Co8ej8Q-.js"),__vite__mapDeps([12,1,2,3,4,5,6,7]))),mt=({pageName:e})=>r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",role:"status","aria-live":"polite","aria-label":e?`${e}を読み込み中`:"ページを読み込み中",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600","aria-hidden":"true"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:e?`${e}を読み込み中...`:"ページを読み込み中..."}),Ae]})});function ft(){const e=u(),[t,a]=n.useState(!1),s=()=>{a(!1)};n.useEffect(()=>{const e=e=>{"Escape"===e.key&&t&&s()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t]),n.useEffect(()=>{if(t){const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}},[t]);const o=[{path:"/weight",label:"体重",color:"teal"},{path:"/daily",label:"日課",color:"teal"},{path:"/bp",label:"血圧",color:"teal"},{path:"/graph",label:"グラフ",color:"blue"},{path:"/goal",label:"目標",color:"teal"},{path:"/export",label:"管理",color:"purple"}],i=t=>e.pathname===t;return r.jsxs("div",{className:"relative",children:[r.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-blue-600 text-white px-4 py-2 rounded-lg z-50 font-medium",children:"スキップリンク"}),r.jsxs("nav",{className:"hidden md:flex justify-between items-center gap-4 mb-12 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg mx-4 mt-4",role:"navigation","aria-label":"メインへ移動",children:[r.jsx("div",{className:"flex gap-4",children:o.map(e=>r.jsxs(h,{to:e.path,className:("purple"===e.color?"bg-purple-600 border-purple-600 hover:bg-purple-700 hover:border-purple-700":"bg-blue-500 border-blue-500 hover:bg-blue-600 hover:border-blue-600")+" !text-white px-4 py-2 rounded-lg shadow-md transition-colors duration-200 font-medium text-base border-2 hover:!text-white visited:!text-white active:!text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-current":i(e.path)?"page":void 0,"aria-label":e.label,children:[e.label,i(e.path)&&r.jsx("span",{className:"sr-only",children:"現在のページ"})]},e.path))}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(ne,{}),r.jsx(k,{className:"ml-2",debug:!1})]})]}),r.jsx("div",{className:"md:hidden flex w-full mb-4",children:r.jsxs("nav",{className:"flex w-full",children:[["/weight","/daily","/bp","/graph"].map((e,t,a)=>{const n=o.find(t=>t.path===e);return n?r.jsx(h,{to:n.path,className:`flex-1 text-center py-3 font-bold text-base transition-colors duration-200\n                  ${i(n.path)?"bg-blue-600 text-white mobile-nav-current":"bg-gray-100 dark:bg-gray-700 text-blue-700 dark:text-white hover:bg-blue-100 dark:hover:bg-blue-800 mobile-nav-link"}\n                  ${0===t?"rounded-l-xl":""}\n                  ${t===a.length?"rounded-r-xl":""}\n                  rounded-none focus:outline-none focus:ring-0 border-0`,"aria-current":i(n.path)?"page":void 0,"aria-label":n.label,style:{minWidth:0},onClick:s,children:n.label},n.path):null}),r.jsx("button",{onClick:()=>{a(!t)},className:"flex-1 text-center py-3 font-bold text-base bg-gray-100 dark:bg-gray-700 text-blue-700 dark:text-blue-200 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-r-xl border-0 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2","aria-label":t?"メニューを閉じる":"メニューを開く","aria-expanded":t,"aria-controls":"mobile-menu",style:{minWidth:0},children:r.jsx("span",{className:"inline-block align-middle",children:r.jsxs("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("rect",{y:"5",width:"24",height:"2",rx:"1",fill:"currentColor"}),r.jsx("rect",{y:"11",width:"24",height:"2",rx:"1",fill:"currentColor"}),r.jsx("rect",{y:"17",width:"24",height:"2",rx:"1",fill:"currentColor"})]})})})]})}),t&&r.jsx("div",{id:"mobile-menu",className:"md:hidden absolute top-full left-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg z-40 mb-4",role:"dialog","aria-modal":"true","aria-label":"モバイルメニュー",children:r.jsx("nav",{role:"navigation","aria-label":"モバイルメインナビゲーション",children:r.jsxs("div",{className:"flex flex-col",children:[o.map(e=>r.jsxs(h,{to:e.path,onClick:s,className:"px-4 py-3 font-medium text-base hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 border-b border-gray-100 dark:border-gray-600 "+(i(e.path)?"bg-blue-600 text-white":"purple"===e.color?"!text-purple-600 dark:!text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 focus:bg-purple-50 dark:focus:bg-purple-900/20 hover:!text-purple-600 dark:hover:!text-purple-400 visited:!text-purple-600 dark:visited:!text-purple-400 active:!text-purple-600 dark:active:!text-purple-400":"!text-blue-500 dark:!text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 focus:bg-blue-50 dark:focus:bg-blue-900/20 hover:!text-blue-500 dark:hover:!text-blue-400 visited:!text-blue-500 dark:visited:!text-blue-400 active:!text-blue-500 dark:active:!text-blue-400"),"aria-current":i(e.path)?"page":void 0,"aria-label":e.label,children:[e.label,i(e.path)&&r.jsx("span",{className:"sr-only",children:"現在のページ"})]},e.path)),r.jsxs("div",{className:"flex justify-center gap-2 px-4 py-3 border-t border-gray-100 dark:border-gray-600",children:[r.jsx(ne,{className:"text-sm px-3 py-2"}),r.jsx(k,{className:"text-sm px-3 py-2",debug:!1})]})]})})}),t&&r.jsx("div",{className:"md:hidden fixed inset-0 z-30 backdrop-blur-sm",style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},onClick:s,"aria-hidden":"true"})]})}const pt=n.lazy(()=>D(()=>import("./RecordExport-BCscZL1g.js"),__vite__mapDeps([13,1,2,5,3])));function wt(){const[e,t]=n.useState(!1),[a,s]=n.useState(""),[o,i]=n.useState(!1),u=()=>{if("1"===localStorage.getItem("disableTips"))return;const e=ie[Math.floor(Math.random()*ie.length)];s(e),t(!0)};n.useEffect(()=>{(async()=>{try{const e=await ct.initialize(),t=[{fieldId:"exercise",name:"運動",order:6,display:!0},{fieldId:"meal",name:"食事",order:7,display:!0},{fieldId:"sleep",name:"睡眠",order:8,display:!0},{fieldId:"smoke",name:"喫煙",order:9,display:!1},{fieldId:"alcohol",name:"飲酒",order:10,display:!1}];if(0===(await et()).length)for(const r of t)await Je(r);return i(!0),()=>{e()}}catch(e){}})()},[]),n.useEffect(()=>{const e=new Date,t=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;localStorage.getItem("lastTipsDate")!==t&&u()},[]);return r.jsxs("div",{children:[r.jsx(oe,{open:e,onClose:()=>{const e=new Date,r=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;localStorage.setItem("lastTipsDate",r),t(!1)},tipText:a}),r.jsx("header",{role:"banner",children:r.jsx(ft,{})}),r.jsx("main",{id:"main-content",role:"main",tabIndex:-1,children:o?r.jsx(n.Suspense,{fallback:r.jsx(mt,{pageName:"日課"}),children:r.jsxs(c,{children:[r.jsx(l,{path:"/goal",element:r.jsx(n.Suspense,{fallback:r.jsx(mt,{pageName:"目標"}),children:r.jsx(ut,{})})}),r.jsx(l,{path:"/daily",element:r.jsx(n.Suspense,{fallback:r.jsx(mt,{pageName:"日課"}),children:r.jsx(dt,{})})}),r.jsx(l,{path:"/weight",element:r.jsx(n.Suspense,{fallback:r.jsx(mt,{pageName:"体重"}),children:r.jsx(gt,{showTipsModal:u})})}),r.jsx(l,{path:"/bp",element:r.jsx(n.Suspense,{fallback:r.jsx(mt,{pageName:"血圧"}),children:r.jsx(lt,{})})}),r.jsx(l,{path:"/graph",element:r.jsx(n.Suspense,{fallback:r.jsx(mt,{pageName:"グラフ"}),children:r.jsx(ht,{})})}),r.jsx(l,{path:"/export",element:r.jsx(n.Suspense,{fallback:r.jsx(mt,{pageName:"管理"}),children:r.jsx(pt,{showTipsModal:()=>{const e=ie[Math.floor(Math.random()*ie.length)];s(e),t(!0)}})})}),r.jsx(l,{path:"*",element:r.jsx(d,{to:"/weight",replace:!0})})]})}):r.jsx(mt,{pageName:"データ初期化中"})})]})}function yt(e){return r.jsx(bt,{...e})}class bt extends n.Component{constructor(e){super(e),t(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})}),t(this,"handleReload",()=>{window.location.reload()}),t(this,"handleCopy",async()=>{const{error:e,errorInfo:t}=this.state;if(!e)return;const r=`エラー名: ${e.name}\nエラーメッセージ: ${e.message}\n`+(t?`スタックトレース:\n${t.componentStack}`:"");await navigator.clipboard.writeText(r),this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),1500)}),this.state={hasError:!1,error:null,errorInfo:null,copied:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t})}render(){const{hasError:e,error:t,errorInfo:a}=this.state,{children:s,fallback:n}=this.props;return e&&t?n?n(t,this.handleReset):r.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[r.jsx("h2",{className:"text-xl font-bold text-red-800 dark:text-red-200 mb-2 text-center",children:"エラーが発生しました"}),r.jsxs("p",{className:"text-red-700 dark:text-red-300 mb-6 text-center max-w-md",children:["申し訳ありません。予期しないエラーが発生しました。",r.jsx("br",{}),"ページを再読み込みしてください。"]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx("button",{onClick:this.handleReset,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:"再試行"}),r.jsx("button",{onClick:this.handleReload,className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:"再読み込み"})]}),r.jsxs("details",{className:"mt-6 w-full max-w-2xl text-left",children:[r.jsxs("summary",{className:"cursor-pointer text-sm text-red-600 dark:text-red-400 font-medium flex items-center justify-between",children:[r.jsx("span",{children:"詳細"}),r.jsx("button",{type:"button",onClick:this.handleCopy,className:"ml-4 px-2 py-1 text-xs rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{minWidth:60},children:this.state.copied?"コピーしました":"コピー"})]}),r.jsxs("div",{className:"mt-2 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded text-xs font-mono overflow-auto max-h-40 text-left",children:[r.jsxs("div",{className:"mb-2 text-left",children:[r.jsx("strong",{children:"エラー名:"})," ",t.name]}),r.jsxs("div",{className:"mb-2 text-left",children:[r.jsx("strong",{children:"エラーメッセージ:"})," ",t.message]}),a&&r.jsxs("div",{className:"text-left",children:[r.jsx("strong",{children:"スタックトレース:"}),r.jsx("pre",{className:"whitespace-pre-wrap text-xs mt-1 text-left",children:a.componentStack})]})]})]})]}):s}}function vt(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"},child:[]}]})(e)}function xt(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.47 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06l-3.22-3.22V16.5a.75.75 0 0 1-1.5 0V4.81L8.03 8.03a.75.75 0 0 1-1.06-1.06l4.5-4.5ZM3 15.75a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"},child:[]}]})(e)}function Et(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"},child:[]}]})(e)}function _t(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"},child:[]}]})(e)}function Tt(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"},child:[]}]})(e)}function Rt(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"},child:[]}]})(e)}function Dt(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625Z"},child:[]},{tag:"path",attr:{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"},child:[]}]})(e)}function kt(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"},child:[]}]})(e)}function St(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM22.676 12.553a11.249 11.249 0 0 1-2.631 4.31l-3.099-3.099a5.25 5.25 0 0 0-6.71-6.71L7.759 4.577a11.217 11.217 0 0 1 4.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113Z"},child:[]},{tag:"path",attr:{d:"M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0 1 15.75 12ZM12.53 15.713l-4.243-4.244a3.75 3.75 0 0 0 4.244 4.243Z"},child:[]},{tag:"path",attr:{d:"M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 0 0-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 0 1 6.75 12Z"},child:[]}]})(e)}function At(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"},child:[]}]})(e)}function Ot(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"},child:[]}]})(e)}function Nt(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"},child:[]}]})(e)}function Ct(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"m6.72 5.66 11.62 11.62A8.25 8.25 0 0 0 6.72 5.66Zm10.56 12.68L5.66 6.72a8.25 8.25 0 0 0 11.62 11.62ZM5.105 5.106c3.807-3.808 9.98-3.808 13.788 0 3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788Z",clipRule:"evenodd"},child:[]}]})(e)}function It(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"},child:[]}]})(e)}function Pt(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"},child:[]}]})(e)}function Mt(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z",clipRule:"evenodd"},child:[]}]})(e)}function Lt(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"},child:[]}]})(e)}function jt(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"},child:[]}]})(e)}function Bt(e){return m({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"},child:[]}]})(e)}const Wt=x(()=>{const{toasts:e,removeToast:t}={toasts:it.toasts,showToast:it.showToast,showSuccess:it.showSuccess,showError:it.showError,showWarning:it.showWarning,showInfo:it.showInfo,removeToast:it.removeToast,clearAll:it.clearAll,hasToasts:it.hasToasts,activeToasts:it.activeToasts,errorToasts:it.errorToasts,successToasts:it.successToasts,warningToasts:it.warningToasts,infoToasts:it.infoToasts,toastCounts:it.toastCounts,hasErrors:it.hasErrors,hasWarnings:it.hasWarnings,toastSummary:it.toastSummary},a=n.useRef(null);n.useEffect(()=>{if(e.length>0){const t=e[e.length-1];if("error"===t.type||"warning"===t.type){const e=document.querySelector(`[data-toast-id="${t.id}"]`);e&&e.focus()}}},[e]);const s=e=>{switch(e){case"success":return r.jsx(Tt,{className:"w-5 h-5 text-green-600 dark:text-green-400","aria-hidden":"true"});case"error":return r.jsx(jt,{className:"w-5 h-5 text-red-600 dark:text-red-400","aria-hidden":"true"});case"warning":return r.jsx(kt,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400","aria-hidden":"true"});case"info":return r.jsx(Nt,{className:"w-5 h-5 text-blue-600 dark:text-blue-400","aria-hidden":"true"})}},o=e=>{switch(e){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700 text-green-800 dark:text-green-200";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700 text-red-800 dark:text-red-200";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-200";case"info":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-200"}},i=e=>{switch(e){case"success":return"成功";case"error":return"エラー";case"warning":return"警告";case"info":return"情報"}};return 0===e.length?null:r.jsx("div",{ref:a,className:"fixed top-4 right-4 z-50 space-y-2",role:"region","aria-label":"情報","aria-live":"polite","aria-atomic":"false",children:e.map(e=>r.jsx("div",{"data-toast-id":e.id,className:`${o(e.type)} border rounded-lg p-4 shadow-lg max-w-sm transform transition-all duration-300 ease-in-out animate-in slide-in-from-right-5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400`,role:"error"===e.type||"warning"===e.type?"alert":"status","aria-label":`${i(e.type)}: ${e.message}`,tabIndex:"error"===e.type||"warning"===e.type?0:-1,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:s(e.type)}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("p",{className:"text-sm font-medium leading-5",children:[r.jsxs("span",{className:"sr-only",children:[i(e.type),": "]}),e.message]})}),r.jsx("button",{onClick:()=>t(e.id),className:"flex-shrink-0 text-gray-400 dark:text-slate-400 bg-gray-100 dark:bg-slate-700 hover:text-gray-600 dark:hover:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 rounded-full p-1","aria-label":"閉じる",children:r.jsx(Bt,{className:"w-4 h-4","aria-hidden":"true"})})]})},e.id))})}),Ft=31536e6,Gt="error";function Vt(e,t,r){if(!("error"===e||"warn"===e&&["debug","info","warn"].includes(Gt)||"info"===e&&["debug","info"].includes(Gt)||"debug"===e&&"debug"===Gt))return;(new Date).toISOString(),e.toUpperCase()}function zt(e,t=Ft){return Date.now()-e>t}async function Ut(){try{Vt("info"),"indexedDB"in window&&await async function(){Vt("debug")}(),function(){const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);if(r){const t=localStorage.getItem(r);if(t)try{const a=JSON.parse(t);a.timestamp&&zt(a.timestamp)&&e.push(r)}catch{(localStorage.getItem(r)&&r.startsWith("cache_")||r.startsWith("temp_"))&&e.push(r)}}}e.forEach(e=>{localStorage.removeItem(e),Vt("debug")})}(),function(){const e=[];for(let t=0;t<sessionStorage.length;t++){const r=sessionStorage.key(t);r&&(r.startsWith("temp_")||r.startsWith("cache_"))&&e.push(r)}e.forEach(e=>{sessionStorage.removeItem(e),Vt("debug")})}(),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CLEANUP_EXPIRED_CACHE"}),Vt("info")}catch(e){Vt("error")}}Vt("info"),setInterval(Ut,36e5),window.addEventListener("beforeunload",()=>{Ut().catch(e=>{Vt("error")})}),window.addEventListener("securitypolicyviolation",e=>{Vt("error",0,(e.violatedDirective,e.blockedURI,e.disposition))}),Vt("info"),document.addEventListener("contextmenu",e=>{});const Ht={open:!1};setInterval(function(){window.outerHeight-window.innerHeight>160||window.outerWidth-window.innerWidth>160?Ht.open||(Ht.open=!0):Ht.open=!1},500);const Zt=(e,t)=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent(`performance:${e}`,{detail:t}))},$t=performance.now(),Yt=e=>{var t;let r;if(r=e instanceof ErrorEvent?{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:null==(t=e.error)?void 0:t.stack,timestamp:(new Date).toLocaleString(),userAgent:navigator.userAgent,url:window.location.href}:{reason:e.reason,promise:String(e.promise),timestamp:(new Date).toLocaleString(),userAgent:navigator.userAgent,url:window.location.href},"undefined"!=typeof performance){const e={timing:performance.timing,navigation:performance.navigation,memory:performance.memory};r.performance=e}const a={...r,userAgent:navigator.userAgent.substring(0,100),url:new URL(window.location.href).pathname};Zt("error",a)};window.addEventListener("error",Yt),window.addEventListener("unhandledrejection",Yt);const qt=(()=>{const e="/aloe-wellness-log/";return e.replace(/\/$/,"")})();function Kt(e){const t=document.createElement("div");t.style.position="fixed",t.style.bottom="32px",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.zIndex="9999",document.body.appendChild(t),t.innerHTML='\n    <div style="background:#059669;color:#fff;padding:16px 24px;border-radius:12px;box-shadow:0 2px 8px #0002;display:flex;align-items:center;gap:16px;font-size:1rem;">\n      <span>新しいバージョンがあります。<br>再読み込みで最新に更新できます。</span>\n      <button id="sw-update-btn" style="background:#fff;color:#059669;font-weight:bold;padding:8px 16px;border:none;border-radius:8px;cursor:pointer;">再読み込み</button>\n    </div>\n  ';t.querySelector("#sw-update-btn").onclick=()=>{e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}}T.createRoot(document.getElementById("root")).render(r.jsxs(yt,{children:[r.jsx(Wt,{}),r.jsx(g,{basename:qt,children:r.jsx(wt,{})})]})),window.addEventListener("load",()=>{const e=performance.now()-$t;Zt("initialLoad",{loadTime:e})}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{const e=`${"/aloe-wellness-log/".replace(/\/$/,"")}/sw.js`;navigator.serviceWorker.register(e).then(e=>{e.waiting&&Kt(e),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&Kt(e)})})}).catch(e=>{})}),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()});export{ot as A,Fe as B,ge as C,at as D,ue as E,he as F,_t as G,Rt as H,Ae as I,xt as J,Dt as K,ze as L,vt as M,Ot as N,kt as O,Le as P,Nt as Q,jt as R,de as S,D as _,He as a,Ze as b,Lt as c,Ye as d,Ct as e,St as f,ce as g,At as h,Et as i,et as j,Ke as k,Je as l,le as m,Xe as n,Qe as o,qe as p,rt as q,tt as r,Bt as s,Pt as t,$e as u,Tt as v,It as w,Mt as x,st as y,Ue as z};
