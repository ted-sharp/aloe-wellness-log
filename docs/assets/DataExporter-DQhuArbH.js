import{j as e}from"./ui-vendor-J9A7wRLG.js";import{a as t}from"./react-vendor-C4GzcRrE.js";import{B as a,h as s,m as r,l as n,L as l,M as o}from"./index-cuACJ16C.js";import{B as c}from"./Button-DQwbRege.js";import"./icons-vendor-DCv9Y2bB.js";import"./state-vendor-RA6ewXRt.js";const i=t.memo(function({onStatusChange:i}){const{exportAsJSON:d}=(()=>{const e=t.useCallback(e=>`${e.getFullYear()}${String(e.getMonth()+1).padStart(2,"0")}${String(e.getDate()).padStart(2,"0")}${String(e.getHours()).padStart(2,"0")}${String(e.getMinutes()).padStart(2,"0")}${String(e.getSeconds()).padStart(2,"0")}`,[]),l=t.useCallback((e,t)=>{const a=URL.createObjectURL(e),s=document.createElement("a");s.href=a,s.download=t,s.click(),URL.revokeObjectURL(a)},[]),o=t.useCallback(async()=>{const[e,t,l,o]=await Promise.all([a(),s(),r(),n()]);return{weightRecords:e,bpRecords:t,dailyRecords:l,dailyFields:o}},[]);return{exportAsJSON:t.useCallback(async t=>{try{null==t||t("データをエクスポート中...");const a=await o(),s=JSON.stringify(a,null,2),r=new Blob([s],{type:"application/json"}),n=`records-v2-${e(new Date)}.json`;l(r,n),null==t||t("JSONエクスポートが完了しました")}catch(a){null==t||t(`エクスポートエラー: ${a instanceof Error?a.message:"Unknown error"}`)}},[o,e,l]),getAllData:o,formatDateForFilename:e,downloadFile:l}})(),m=t.useCallback(async()=>{await d(i)},[d,i]);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow p-6",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 text-gray-700 dark:text-gray-200 flex items-center gap-2 justify-center",children:[e.jsx(l,{className:"w-6 h-6"}),"データエクスポート"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4 flex justify-center",children:e.jsx("div",{className:"text-left max-w-md",children:e.jsx("p",{children:"記録したデータをJSONファイルとしてダウンロードできます。"})})}),e.jsx("div",{className:"flex flex-wrap gap-2 justify-center",children:e.jsx(c,{variant:"primary",icon:o,onClick:m,children:"JSONファイルでエクスポート"})})]})]})});export{i as default};
