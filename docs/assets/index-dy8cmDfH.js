const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/RecordExport-B6AsUDs0.js","assets/ui-vendor-Bpjs_4Uy.js","assets/react-vendor-9hcqHTTy.js","assets/icons-vendor-BLJDdPqg.js","assets/dnd-vendor-B-r8cpST.js","assets/state-vendor-CZRBIdKG.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,r,n)=>((t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n)(t,"symbol"!=typeof r?r+"":r,n);import{j as r,r as n,F as a,u as o,a as s,b as i,c as l,d,o as c,f as u,s as m,R as h,L as f,C as g,X as p,e as x,Y as b,g as y,T as v}from"./ui-vendor-Bpjs_4Uy.js";import{e as w,a as k,r as N,g as j,d as M,f as D,h as C,N as S,u as E,L as T,B as O}from"./react-vendor-9hcqHTTy.js";import{G as W}from"./icons-vendor-BLJDdPqg.js";import{u as L,C as I,a as P,b as R,D as B,c as A,S as $,v as F,d as _,P as z}from"./dnd-vendor-B-r8cpST.js";import{c as Y}from"./state-vendor-CZRBIdKG.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var H,Z={};var q=function(){if(H)return Z;H=1;var e=w();return Z.createRoot=e.createRoot,Z.hydrateRoot=e.hydrateRoot,Z}();const G={},U={primary:"bg-blue-500 hover:bg-blue-600 focus:ring-blue-500 text-white",success:"bg-green-600 hover:bg-green-700 focus:ring-green-600 text-white",warning:"bg-amber-500 hover:bg-amber-600 focus:ring-amber-500 text-white",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-600 text-white",secondary:"bg-gray-400 hover:bg-gray-500 focus:ring-gray-400 text-white",purple:"bg-purple-600 hover:bg-purple-700 focus:ring-purple-600 text-white",teal:"bg-teal-500 hover:bg-teal-600 focus:ring-teal-500 text-white",sky:"bg-sky-500 hover:bg-sky-600 focus:ring-sky-500 text-white"},V={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"},X="rounded-lg font-medium shadow-md transition-all duration-200 flex items-center justify-center gap-2 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",Q=({variant:e="primary",size:t="md",icon:n,iconPosition:a="left",loading:o=!1,fullWidth:s=!1,className:i="",children:l,disabled:d,...c})=>{const u=d||o,m=[X,U[e],V[t],s?"w-full":"w-auto","hover:shadow-lg",i].join(" "),h="lg"===t?"w-6 h-6":"sm"===t?"w-4 h-4":"w-5 h-5";return r.jsx("button",{className:m,disabled:u,...c,children:o?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`animate-spin rounded-full border-2 border-current border-t-transparent ${h}`}),"読み込み中..."]}):r.jsxs(r.Fragment,{children:[n&&"left"===a&&r.jsx(n,{className:h,"aria-hidden":"true"}),l,n&&"right"===a&&r.jsx(n,{className:h,"aria-hidden":"true"})]})})},K=({className:e="",onInstall:t,onCancel:n,debug:a=!1})=>{const[o,s]=k.useState(null),[i,l]=k.useState(!1),[d,c]=k.useState(!1),[u,m]=k.useState(!1);k.useEffect(()=>{(()=>{const e=window.matchMedia("(display-mode: standalone)").matches,t=!0===navigator.standalone;(e||t)&&m(!0)})();const e=e=>{e.preventDefault(),s(e),l(!0)},r=()=>{m(!0),l(!1),s(null),null==t||t()};return window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",r),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",r)}},[t]);return a||u||!i?null:r.jsxs("button",{onClick:async()=>{if(o){c(!0);try{await o.prompt();const{outcome:e}=await o.userChoice;"dismissed"===e&&(null==n||n()),s(null),l(!1)}catch(e){}finally{c(!1)}}},disabled:d,className:`inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 ${e}`,"aria-label":"アプリをインストール",title:"アプリをインストール",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),d?"インストール中...":"アプリをインストール"]})};function J(e){return W({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M2 2h2v2H2z"},child:[]},{tag:"path",attr:{d:"M6 0v6H0V0zM5 1H1v4h4zM4 12H2v2h2z"},child:[]},{tag:"path",attr:{d:"M6 10v6H0v-6zm-5 1v4h4v-4zm11-9h2v2h-2z"},child:[]},{tag:"path",attr:{d:"M10 0v6h6V0zm5 1v4h-4V1zM8 1V0h1v2H8v2H7V1zm0 5V4h1v2zM6 8V7h1V6h1v2h1V7h5v1h-4v1H7V8zm0 0v1H2V8H1v1H0V7h3v1zm10 1h-1V7h1zm-1 0h-1v2h2v-1h-1zm-4 0h2v1h-1v1h-1zm2 3v-1h-1v1h-1v1H9v1h3v-2zm0 0h3v1h-2v1h-1zm-4-1v1h1v-2H7v1z"},child:[]},{tag:"path",attr:{d:"M7 12h1v3h4v1H7zm9 2v2h-3v-1h2v-1z"},child:[]}]})(e)}function ee(e){return W({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"m289.94 256 95-95A24 24 0 0 0 351 127l-95 95-95-95a24 24 0 0 0-34 34l95 95-95 95a24 24 0 1 0 34 34l95-95 95 95a24 24 0 0 0 34-34z"},child:[]}]})(e)}var te,re,ne,ae,oe,se,ie,le,de,ce,ue,me,he,fe,ge,pe,xe,be,ye={};function ve(){return re?te:(re=1,te={L:1,M:0,Q:3,H:2})}function we(){return ae?ne:(ae=1,ne={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8})}function ke(){if(me)return ue;me=1;for(var e={glog:function(t){if(t<1)throw new Error("glog("+t+")");return e.LOG_TABLE[t]},gexp:function(t){for(;t<0;)t+=255;for(;t>=256;)t-=255;return e.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},t=0;t<8;t++)e.EXP_TABLE[t]=1<<t;for(t=8;t<256;t++)e.EXP_TABLE[t]=e.EXP_TABLE[t-4]^e.EXP_TABLE[t-5]^e.EXP_TABLE[t-6]^e.EXP_TABLE[t-8];for(t=0;t<255;t++)e.LOG_TABLE[e.EXP_TABLE[t]]=t;return ue=e}function Ne(){if(fe)return he;fe=1;var e=ke();function t(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&0==e[r];)r++;this.num=new Array(e.length-r+t);for(var n=0;n<e.length-r;n++)this.num[n]=e[n+r]}return t.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(r){for(var n=new Array(this.getLength()+r.getLength()-1),a=0;a<this.getLength();a++)for(var o=0;o<r.getLength();o++)n[a+o]^=e.gexp(e.glog(this.get(a))+e.glog(r.get(o)));return new t(n,0)},mod:function(r){if(this.getLength()-r.getLength()<0)return this;for(var n=e.glog(this.get(0))-e.glog(r.get(0)),a=new Array(this.getLength()),o=0;o<this.getLength();o++)a[o]=this.get(o);for(o=0;o<r.getLength();o++)a[o]^=e.gexp(e.glog(r.get(o))+n);return new t(a,0).mod(r)}},he=t}function je(){if(be)return xe;be=1;var e=function(){if(se)return oe;se=1;var e=we();function t(t){this.mode=e.MODE_8BIT_BYTE,this.data=t}return t.prototype={getLength:function(e){return this.data.length},write:function(e){for(var t=0;t<this.data.length;t++)e.put(this.data.charCodeAt(t),8)}},oe=t}(),t=function(){if(le)return ie;le=1;var e=ve();function t(e,t){this.totalCount=e,this.dataCount=t}return t.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],t.getRSBlocks=function(e,r){var n=t.getRsBlockTable(e,r);if(null==n)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+r);for(var a=n.length/3,o=new Array,s=0;s<a;s++)for(var i=n[3*s+0],l=n[3*s+1],d=n[3*s+2],c=0;c<i;c++)o.push(new t(l,d));return o},t.getRsBlockTable=function(r,n){switch(n){case e.L:return t.RS_BLOCK_TABLE[4*(r-1)+0];case e.M:return t.RS_BLOCK_TABLE[4*(r-1)+1];case e.Q:return t.RS_BLOCK_TABLE[4*(r-1)+2];case e.H:return t.RS_BLOCK_TABLE[4*(r-1)+3];default:return}},ie=t}(),r=function(){if(ce)return de;function e(){this.buffer=new Array,this.length=0}return ce=1,e.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},de=e}(),n=function(){if(pe)return ge;pe=1;var e=we(),t=Ne(),r=ke(),n=0,a=1,o=2,s=3,i=4,l=5,d=6,c=7,u={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;u.getBCHDigit(t)-u.getBCHDigit(u.G15)>=0;)t^=u.G15<<u.getBCHDigit(t)-u.getBCHDigit(u.G15);return(e<<10|t)^u.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;u.getBCHDigit(t)-u.getBCHDigit(u.G18)>=0;)t^=u.G18<<u.getBCHDigit(t)-u.getBCHDigit(u.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return u.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case n:return(t+r)%2==0;case a:return t%2==0;case o:return r%3==0;case s:return(t+r)%3==0;case i:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case l:return t*r%2+t*r%3==0;case d:return(t*r%2+t*r%3)%2==0;case c:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var n=new t([1],0),a=0;a<e;a++)n=n.multiply(new t([1,r.gexp(a)],0));return n},getLengthInBits:function(t,r){if(1<=r&&r<10)switch(t){case e.MODE_NUMBER:return 10;case e.MODE_ALPHA_NUM:return 9;case e.MODE_8BIT_BYTE:case e.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(r<27)switch(t){case e.MODE_NUMBER:return 12;case e.MODE_ALPHA_NUM:return 11;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(r<41))throw new Error("type:"+r);switch(t){case e.MODE_NUMBER:return 14;case e.MODE_ALPHA_NUM:return 13;case e.MODE_8BIT_BYTE:return 16;case e.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,n=0;n<t;n++)for(var a=0;a<t;a++){for(var o=0,s=e.isDark(n,a),i=-1;i<=1;i++)if(!(n+i<0||t<=n+i))for(var l=-1;l<=1;l++)a+l<0||t<=a+l||0==i&&0==l||s==e.isDark(n+i,a+l)&&o++;o>5&&(r+=3+o-5)}for(n=0;n<t-1;n++)for(a=0;a<t-1;a++){var d=0;e.isDark(n,a)&&d++,e.isDark(n+1,a)&&d++,e.isDark(n,a+1)&&d++,e.isDark(n+1,a+1)&&d++,0!=d&&4!=d||(r+=3)}for(n=0;n<t;n++)for(a=0;a<t-6;a++)e.isDark(n,a)&&!e.isDark(n,a+1)&&e.isDark(n,a+2)&&e.isDark(n,a+3)&&e.isDark(n,a+4)&&!e.isDark(n,a+5)&&e.isDark(n,a+6)&&(r+=40);for(a=0;a<t;a++)for(n=0;n<t-6;n++)e.isDark(n,a)&&!e.isDark(n+1,a)&&e.isDark(n+2,a)&&e.isDark(n+3,a)&&e.isDark(n+4,a)&&!e.isDark(n+5,a)&&e.isDark(n+6,a)&&(r+=40);var c=0;for(a=0;a<t;a++)for(n=0;n<t;n++)e.isDark(n,a)&&c++;return r+Math.abs(100*c/t/t-50)/5*10}};return ge=u}(),a=Ne();function o(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var s=o.prototype;return s.addData=function(t){var r=new e(t);this.dataList.push(r),this.dataCache=null},s.isDark=function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},s.getModuleCount=function(){return this.moduleCount},s.make=function(){if(this.typeNumber<1){var e=1;for(e=1;e<40;e++){for(var a=t.getRSBlocks(e,this.errorCorrectLevel),o=new r,s=0,i=0;i<a.length;i++)s+=a[i].dataCount;for(i=0;i<this.dataList.length;i++){var l=this.dataList[i];o.put(l.mode,4),o.put(l.getLength(),n.getLengthInBits(l.mode,e)),l.write(o)}if(o.getLengthInBits()<=8*s)break}this.typeNumber=e}this.makeImpl(!1,this.getBestMaskPattern())},s.makeImpl=function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++)this.modules[r][n]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=o.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},s.setupPositionProbePattern=function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var n=-1;n<=7;n++)t+n<=-1||this.moduleCount<=t+n||(this.modules[e+r][t+n]=0<=r&&r<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=n&&n<=4)},s.getBestMaskPattern=function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var a=n.getLostPoint(this);(0==r||e>a)&&(e=a,t=r)}return t},s.createMovieClip=function(e,t,r){var n=e.createEmptyMovieClip(t,r);this.make();for(var a=0;a<this.modules.length;a++)for(var o=1*a,s=0;s<this.modules[a].length;s++){var i=1*s;this.modules[a][s]&&(n.beginFill(0,100),n.moveTo(i,o),n.lineTo(i+1,o),n.lineTo(i+1,o+1),n.lineTo(i,o+1),n.endFill())}return n},s.setupTimingPattern=function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},s.setupPositionAdjustPattern=function(){for(var e=n.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var a=e[t],o=e[r];if(null==this.modules[a][o])for(var s=-2;s<=2;s++)for(var i=-2;i<=2;i++)this.modules[a+s][o+i]=-2==s||2==s||-2==i||2==i||0==s&&0==i}},s.setupTypeNumber=function(e){for(var t=n.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var a=!e&&1==(t>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=a}for(r=0;r<18;r++){a=!e&&1==(t>>r&1);this.modules[r%3+this.moduleCount-8-3][Math.floor(r/3)]=a}},s.setupTypeInfo=function(e,t){for(var r=this.errorCorrectLevel<<3|t,a=n.getBCHTypeInfo(r),o=0;o<15;o++){var s=!e&&1==(a>>o&1);o<6?this.modules[o][8]=s:o<8?this.modules[o+1][8]=s:this.modules[this.moduleCount-15+o][8]=s}for(o=0;o<15;o++){s=!e&&1==(a>>o&1);o<8?this.modules[8][this.moduleCount-o-1]=s:o<9?this.modules[8][15-o-1+1]=s:this.modules[8][15-o-1]=s}this.modules[this.moduleCount-8][8]=!e},s.mapData=function(e,t){for(var r=-1,a=this.moduleCount-1,o=7,s=0,i=this.moduleCount-1;i>0;i-=2)for(6==i&&i--;;){for(var l=0;l<2;l++)if(null==this.modules[a][i-l]){var d=!1;s<e.length&&(d=1==(e[s]>>>o&1)),n.getMask(t,a,i-l)&&(d=!d),this.modules[a][i-l]=d,-1==--o&&(s++,o=7)}if((a+=r)<0||this.moduleCount<=a){a-=r,r=-r;break}}},o.PAD0=236,o.PAD1=17,o.createData=function(e,a,s){for(var i=t.getRSBlocks(e,a),l=new r,d=0;d<s.length;d++){var c=s[d];l.put(c.mode,4),l.put(c.getLength(),n.getLengthInBits(c.mode,e)),c.write(l)}var u=0;for(d=0;d<i.length;d++)u+=i[d].dataCount;if(l.getLengthInBits()>8*u)throw new Error("code length overflow. ("+l.getLengthInBits()+">"+8*u+")");for(l.getLengthInBits()+4<=8*u&&l.put(0,4);l.getLengthInBits()%8!=0;)l.putBit(!1);for(;!(l.getLengthInBits()>=8*u||(l.put(o.PAD0,8),l.getLengthInBits()>=8*u));)l.put(o.PAD1,8);return o.createBytes(l,i)},o.createBytes=function(e,t){for(var r=0,o=0,s=0,i=new Array(t.length),l=new Array(t.length),d=0;d<t.length;d++){var c=t[d].dataCount,u=t[d].totalCount-c;o=Math.max(o,c),s=Math.max(s,u),i[d]=new Array(c);for(var m=0;m<i[d].length;m++)i[d][m]=255&e.buffer[m+r];r+=c;var h=n.getErrorCorrectPolynomial(u),f=new a(i[d],h.getLength()-1).mod(h);l[d]=new Array(h.getLength()-1);for(m=0;m<l[d].length;m++){var g=m+f.getLength()-l[d].length;l[d][m]=g>=0?f.get(g):0}}var p=0;for(m=0;m<t.length;m++)p+=t[m].totalCount;var x=new Array(p),b=0;for(m=0;m<o;m++)for(d=0;d<t.length;d++)m<i[d].length&&(x[b++]=i[d][m]);for(m=0;m<s;m++)for(d=0;d<t.length;d++)m<l[d].length&&(x[b++]=l[d][m]);return x},xe=o}var Me,De,Ce={};function Se(){if(Me)return Ce;Me=1,Object.defineProperty(Ce,"__esModule",{value:!0});var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t=o(n()),r=N(),a=o(r);function o(e){return e&&e.__esModule?e:{default:e}}var s={bgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,bgD:t.default.string.isRequired,fgColor:t.default.oneOfType([t.default.object,t.default.string]).isRequired,fgD:t.default.string.isRequired,size:t.default.number.isRequired,title:t.default.string,viewBoxSize:t.default.number.isRequired,xmlns:t.default.string},i=(0,r.forwardRef)(function(t,r){var n=t.bgColor,o=t.bgD,s=t.fgD,i=t.fgColor,l=t.size,d=t.title,c=t.viewBoxSize,u=t.xmlns,m=void 0===u?"http://www.w3.org/2000/svg":u,h=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(t,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return a.default.createElement("svg",e({},h,{height:l,ref:r,viewBox:"0 0 "+c+" "+c,width:l,xmlns:m}),d?a.default.createElement("title",null,d):null,a.default.createElement("path",{d:o,fill:n}),a.default.createElement("path",{d:s,fill:i}))});return i.displayName="QRCodeSvg",i.propTypes=s,Ce.default=i,Ce}const Ee=j(function(){if(De)return ye;De=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.QRCode=void 0;var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t=l(n()),r=l(ve()),a=l(je()),o=N(),s=l(o),i=l(Se());function l(e){return e&&e.__esModule?e:{default:e}}var d={bgColor:t.default.oneOfType([t.default.object,t.default.string]),fgColor:t.default.oneOfType([t.default.object,t.default.string]),level:t.default.string,size:t.default.number,value:t.default.string.isRequired},c=(0,o.forwardRef)(function(t,n){var o=t.bgColor,l=void 0===o?"#FFFFFF":o,d=t.fgColor,c=void 0===d?"#000000":d,u=t.level,m=void 0===u?"L":u,h=t.size,f=void 0===h?256:h,g=t.value,p=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(t,["bgColor","fgColor","level","size","value"]),x=new a.default(-1,r.default[m]);x.addData(g),x.make();var b=x.modules;return s.default.createElement(i.default,e({},p,{bgColor:l,bgD:b.map(function(e,t){return e.map(function(e,r){return e?"":"M "+r+" "+t+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:c,fgD:b.map(function(e,t){return e.map(function(e,r){return e?"M "+r+" "+t+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:n,size:f,viewBoxSize:b.length}))});return ye.QRCode=c,c.displayName="QRCode",c.propTypes=d,ye.default=c,ye}()),Te=({url:e="https://ted-sharp.github.io/aloe-wellness-log/",className:t=""})=>{const[n,a]=k.useState(!1),o=()=>a(!1);return r.jsxs(r.Fragment,{children:[r.jsxs("button",{onClick:()=>a(!0),className:`inline-flex items-center gap-2 px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:ring-offset-2 transition-colors ${t}`,title:"QRコードを表示",children:[r.jsx(J,{className:"w-4 h-4"}),r.jsx("span",{className:"hidden sm:inline",children:"QRコード"})]}),n&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center backdrop-blur-sm",style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-6 m-4 max-w-sm w-full shadow-xl",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"QRコードを表示"}),r.jsx("button",{onClick:o,className:"bg-gray-200/80 dark:bg-gray-700/70 text-gray-400 dark:text-gray-300 hover:bg-gray-300/90 dark:hover:bg-gray-600/80 transition-colors rounded-full p-1 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800","aria-label":"閉じる",children:r.jsx(ee,{className:"w-5 h-5"})})]}),r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"bg-white dark:bg-gray-700 p-4 rounded-lg shadow-inner border border-gray-200 dark:border-gray-600",children:r.jsx(Ee,{value:e,size:200,style:{height:"auto",maxWidth:"100%",width:"100%"},viewBox:"0 0 256 256"})}),r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:"QRコードをスキャン"}),r.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 break-all",children:e})]}),r.jsx("button",{onClick:()=>{navigator.clipboard.writeText(e);const t=document.activeElement,r=t.textContent;t.textContent="コピーしました！",setTimeout(()=>{t.textContent=r},2e3)},className:"px-4 py-2 text-sm font-medium text-emerald-700 dark:text-emerald-300 bg-emerald-50 dark:bg-emerald-900/20 border border-emerald-200 dark:border-emerald-700 rounded-md hover:bg-emerald-100 dark:hover:bg-emerald-900/30 focus:outline-none focus:ring-2 focus:ring-emerald-500 dark:focus:ring-emerald-400 focus:ring-offset-2 transition-colors",children:"URLをコピー"})]}),r.jsx("button",{onClick:o,className:"w-full mt-4 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-gray-100 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-200 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 dark:focus:ring-gray-400 focus:ring-offset-2 transition-colors",children:"閉じる"})]})})]})},Oe=({open:e,onClose:t,tipText:n})=>{const[a,o]=k.useState(!1);k.useEffect(()=>{o("1"===localStorage.getItem("disableTips"))},[e]);return e?r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center px-2 sm:px-0 backdrop-blur-sm",style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},onClick:t,children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6 max-w-md w-full flex flex-col items-center",onClick:e=>e.stopPropagation(),children:[r.jsx("h2",{className:"text-xl font-bold mb-3 text-gray-800 dark:text-white",children:"本日のTIPS"}),r.jsx("div",{className:"text-gray-700 dark:text-gray-200 mb-6 text-left whitespace-pre-line",children:n}),r.jsxs("div",{className:"flex items-center mt-2",children:[r.jsx("input",{id:"modal-disable-tips-checkbox",type:"checkbox",className:"mr-2 w-5 h-5 accent-purple-600",checked:a,onChange:e=>{o(e.target.checked),localStorage.setItem("disableTips",e.target.checked?"1":"0")}}),r.jsx("label",{htmlFor:"modal-disable-tips-checkbox",className:"text-sm text-gray-800 dark:text-gray-200 select-none cursor-pointer",children:"今後TIPSを自動表示しない"})]})]})}):null},We=["夕食は寝る3時間前までに済ませましょう。 遅い時間の食事は空腹感を強め、消費カロリーを減らし、脂肪の蓄積を促す可能性があります。寝る直前の食事を避けることで、体脂肪の増加リスクを下げる効果が期待できます。","砂糖入り飲料は控えて水やお茶に置き換えましょう。 清涼飲料水やジュースなど甘い飲み物の摂取は体重増加や肥満と強く関連しており、日常的に水を飲む人は総摂取カロリーが約9%少ないとの報告があります。水や無糖のお茶で水分補給する習慣がダイエットに役立ちます。","食事の30分前にコップ1杯の水を飲みましょう。 食前に水を500ml程度飲むと満腹感が高まり、同じ食事制限でもより体重が減少しやすいことが研究で示されています。食事前の水分摂取は食べ過ぎ防止に効果的です。","食物繊維をたっぷり摂取しましょう。 野菜、果物、全粒穀物、豆類などに多く含まれる食物繊維は満腹感を持続させ、総カロリー摂取を抑える効果があります。食物繊維の摂取量が多い人ほど減量中の体重減少幅が大きく、ダイエットの継続率も高いと報告されています。","毎食にタンパク質を含めましょう。 肉・魚・卵・大豆製品・乳製品など良質なたんぱく質は、満腹ホルモンの分泌を促し、筋肉量を維持するのに役立ちます。高タンパク食は脂肪を減らしつつ筋肉の減少を抑えることで代謝低下を防ぎ、減量やリバウンド防止に有効とされています。","極端な食事抜きは避け、朝食を含め規則正しく食べましょう。 朝食を抜く習慣は肥満や生活習慣病のリスク増加と関連しており、朝食を全く食べない人は肥満になるリスクが高いとのメタ分析結果があります。一日3食バランスよく摂ることで過度な空腹を防ぎ、ドカ食いの予防につながります。","ゆっくり、よく噛んで食べましょう。 食事に20分以上かけてゆっくり噛むことで満腹シグナルが脳に伝わりやすくなり、結果として食事量を減らせます。実際に早食いの人はゆっくり食べる人より肥満になりやすい傾向があり、よく噛むことで摂取カロリーが約10～15%減少したとの研究もあります","「ながら食べ」をやめ、食事に集中しましょう。 テレビを見たりスマホを操作しながらの食事は、自分がどれだけ食べているか気づきにくくなり、食べ過ぎにつながります。研究でも、食事中のテレビ視聴はその後の食事での余分なカロリー摂取を増やすことが報告されています。","野菜やスープから先に手をつけましょう。 食事の最初にサラダや野菜スープなど低カロリー食品を摂ると、早い段階で満腹感が得られて食べ過ぎを防ぎやすくなります。ボリュームのある野菜から食べ始めることで、後に続く主菜や高カロリー食品の摂取量を自然に減らす効果が期待できます。","高カロリー食品は小皿に取り分けて食べましょう。 大きなお皿や袋から直接食べると適量を超えて摂取しがちです。小さい器に盛り付けることで見た目の満足感が得られ、実際に提供量を減らすと1日の総摂取カロリーが平均235kcal減少したという報告もあります。お菓子も小分け包装のものを選ぶなど工夫しましょう。","外食はメニュー選びと食べ方に工夫をしましょう。 外食時には揚げ物よりも焼き物・蒸し物を選ぶ、ソースやドレッシングは別添えにして必要な分だけ使う、主菜の一部を残すか持ち帰るなどの工夫でカロリーを大幅に減らせます。外食の頻度そのものも適度に抑えると、総摂取カロリー管理に役立ちます。","甘い物や好物も計画的に少量楽しみましょう。 大好きなスイーツなどを完全に我慢し続けるとストレスが溜まり暴食につながることがあります。例えば「週末に一度だけ少し食べる」などルールを決め、少量を味わって満足することで、長期的に見るとダイエットの継続に寄与します。","アルコールの摂取量に気をつけましょう。 アルコール飲料はカロリーが高いうえ食欲を刺激しがちです。飲む場合も頻度や量を控えめにし、糖分の多いカクテルより蒸留酒のソーダ割りや辛口ワインなど比較的低カロリーな選択をするといった工夫を心がけてください。","栄養密度の高い食品を選びましょう。 同じカロリーなら、ビタミン・ミネラルや食物繊維を多く含む食品（例えばポテトチップではなく果物やナッツ類）を選ぶことで、身体に必要な栄養を摂取しつつ満足感を得られます。栄養バランスの良い食事は空腹感を和らげ、間食の欲求を減らす効果があります。","加工度の低い「ホールフード」を中心に摂りましょう。 ケーキやスナック菓子、ファストフードなどの超加工食品ばかりの食事では、知らず知らずのうちにカロリー過多になり体重増加を招きやすいです。一方、未加工またはシンプルに調理した食品中心の食事に切り替えると自然と摂取カロリーが減り、体重減少につながることが示されています。食品選択の際は原材料のシンプルなものを優先しましょう。","中等度の有酸素運動を週150分以上目指しましょう。 ウォーキングや軽いジョギング、サイクリングなどの有酸素運動は、消費エネルギーを増やすだけでなく食欲や血糖コントロールの改善にも役立ちます。定期的な運動習慣を身につけることが長期的な体重管理成功の最良の予測因子の一つであることが知られています。","筋力トレーニングを週2～3回取り入れましょう。 抵抗運動（ウェイトトレーニングなど）は筋肉量の維持・増加に役立ち、基礎代謝の低下を防ぎます。減量中に筋トレを組み合わせると筋肉の減少が抑えられ、脂肪だけを効率的に減らすことにつながります。また筋力が向上し、引き締まった体づくりにも有効です。","日常生活でこまめに身体を動かす工夫をしましょう。 エレベーターではなく階段を使う、バス停や駅では一つ手前で降りて歩く、家事や掃除で体を動かすなど、日常の中で非運動性熱産生（NEAT）を増やすことが大切です。小さな積み重ねでも1日の消費カロリーを底上げし、脂肪が蓄積しにくい体質づくりに役立ちます。","長時間座りっぱなしを避けましょう。 デスクワークなどで何時間も座ったままでいるとエネルギー消費が低下しがちです。1時間に一度は立ち上がってストレッチをしたり数分歩いたりして、血行や代謝をリセットしましょう。こまめに姿勢を変える習慣が、体重増加の予防に繋がります。","自分が楽しめる運動を見つけましょう。 ランニングが苦手ならダンスや水泳、サイクリングなど他の有酸素運動を、ジム通いが続かないなら自宅でできるエクササイズや動画プログラムを試すなど、好きになれる身体活動を探してみてください。楽しいと感じる運動は習慣化しやすく、消費カロリーの継続的な増加に寄与します。","「ながら運動」で日常に活動量をプラスしましょう。 テレビを見ながらストレッチをする、電話しながら足踏みする、通勤時に一駅分歩くなど、日常生活の中に運動を組み込む工夫をします。忙しい人でも小さな運動を積み重ねることで、一日の総消費エネルギーを増やすことができます。","運動の頻度・強度は徐々に高めましょう。 運動習慣のない人がいきなりハードな運動を始めるとケガや挫折の原因になります。最初は軽い運動から始め、慣れてきたら少しずつ時間や強度を上げていきましょう。例えば最初は1回15分のウォーキングから開始し、徐々に30分に延ばすなど段階的に負荷を上げると安全かつ効果的です。","日々の歩数を記録し、目標設定しましょう。 スマホのアプリや万歩計を使って自分の平均歩数を把握し、少し高い目標歩数（例：プラス1000歩/日）を設定します。歩数目標を意識することで通勤や買い物で歩く機会を増やせて、結果的に消費カロリーアップに繋がります。","達成可能な減量目標を立てましょう。最初の目標は現在体重の5～10%減を目安にし、ペースは1週間あたり0.5～1kg減量程度が適切です。急激に体重を減らそうとすると筋肉まで落ちたりリバウンドしやすくなります。無理のない目標設定が長続きのコツです。","体重は定期的に測定しましょう。毎日または少なくとも週1回は同じ条件で体重を測り、記録します。頻繁な自己計測によって体重の変化に早く気づきやすくなり、週1回以上体重測定する人はそうでない人に比べ体重管理が良好であることが示されています。増加傾向にいち早く対処できるため、リバウンド防止にも有用です。","食事内容や活動量を記録する習慣をつけましょう。手書きの食事日記やスマホアプリで、毎日の食事・間食・運動を記録します。自分の行動を「見える化」する自己モニタリングは行動変容の中心的手法であり、記録を付ける人は付けない人より一貫して減量効果が高いことが報告されています。書き出すことで思わぬ過食に気づきやすくなり、改善に役立ちます。","十分な睡眠時間を確保しましょう。大人は1日7～9時間の睡眠が推奨されており、慢性的な睡眠不足は食欲ホルモンのバランスを崩し過食を招きやすくなります。実際、睡眠時間の短い人ほど太りやすい傾向があり、逆に適切な睡眠は減量中の空腹感を和らげ体重管理を助けます。毎晩規則的な睡眠リズムを心がけてください。","ストレスを上手に発散しましょう。慢性的なストレスはコルチゾールというホルモンの分泌を増やし、食欲増進や脂肪蓄積を招くことが分かっています。ストレスを感じたときは深呼吸やストレッチ、散歩、趣味の時間を持つなど食べ物以外の方法で発散する工夫をしましょう。ストレス解消はメンタルヘルスだけでなくダイエット成功にも重要です。","周囲のサポートを活用しましょう。家族や友人にダイエット宣言をして協力してもらったり、一緒に運動する仲間を見つけたりすると継続しやすくなります。社会的サポートは減量の成功率を高める強力な要因です。恥ずかしがらず周囲に目標を共有し、励まし合える環境を整えましょう。","「完璧主義」より「継続」を目指しましょう。時には計画通りにいかない日があっても落ち込みすぎず、すぐ気持ちを切り替えて軌道修正することが大切です。減量の過程では停滞期や体重の小さな増減は誰にでも起こります。一度の挫折で投げ出さず、長い目で良い習慣を積み重ねることが成功への近道です。","食べる以外の「ストレス解消法」を持ちましょう。悩んだり退屈したりしたときにお菓子に手が伸びてしまう人は、代わりにできる行動（音楽を聴く、日記を書く、短い散歩をする、人に話す等）をあらかじめ用意しておきます。ストレスによるやけ食いを防ぐには、食以外のコーピング手段を持つことが有効です。","空腹のサインに耳を傾けましょう。お腹が空いているときだけ食べ、満腹感を得たら残りは保存する習慣をつけます。「まだ食べられるけど満腹ではない（腹八分目）」段階で箸を置くよう意識することで、総摂取カロリーを減らすことができます。自分の身体の空腹・満腹信号を尊重することが大切です。","食事は決まった場所・環境でとりましょう。例えば「仕事中はデスクで食べず、ダイニングテーブルで食べる」「歩きながら物を食べない」などルールを決めます。食べることに集中できる環境を整えると満足感が高まり、知らぬ間の過剰摂取を防げます。","ご褒美は食べ物以外で設定しましょう。減量目標の達成や運動継続のご褒美に、服や本、マッサージなど自分の好きな非食物報酬を与えるとモチベーション維持に効果的です。「○kg減ったら新しい靴を買う」など具体的なご褒美プランを立てておくと、日々の努力の励みになります。","環境を整えて「つい食べ」を防ぎましょう。家ではお菓子やジャンクフードをテーブルの上など見える場所に置かないようにし、代わりにフルーツやナッツを置いておくといった工夫をします。人は目に付く食べ物につられて食べがちなので、視界に入るものをヘルシーな食品に変えることで自然と摂取カロリーを減らせます。","買い物は満腹時に計画的に行いましょう。空腹の状態でスーパーに行くと高カロリーのお菓子や出来合い食品を衝動買いしやすくなります。事前に購入リストを作り、食後に買い物に行くようにすることで不要な高カロリー食品の購入を減らせます。健康的な食材を常備しやすくなり、結果的にダイエットの助けとなります。","減量方法は「続けられるか」で判断しましょう。特定の食品だけに頼るダイエットや極端な短期集中減量法はリスクが高く、減った体重を維持できる人はごくわずか（1～3%程度）であるとされています。「明日も明後日も続けられる習慣か？」を基準に取り入れる方法を選びましょう。ダイエットは一過性の努力ではなく、生活習慣の改善として捉えることが成功の秘訣です。","停滞期も想定しておきましょう。減量を続けていると、ある程度体重が減ったところで体重がなかなか動かなくなる停滞期が訪れることがあります。これは身体が新しい状態に慣れ適応しているサインです。停滞期に入っても焦らず、今までの良い習慣を継続してください。必要に応じて食事内容や運動強度を見直しつつ、身体の変化を根気強く待ちましょう。","減量後も健康的な習慣を続けましょう。目標体重に到達した後こそ、リバウンド防止の正念場です。達成したからといって元の生活に戻すのではなく、取り入れた良い習慣（例えば定期的な運動や野菜中心の食事、体重測定など）はそのまま維持しましょう。減量期と維持期ではアプローチを多少調整しつつも、「習慣自体は一生続ける」つもりでいることが大切です。","ポジティブ思考を持ちましょう。体重の数値や見た目の変化ばかりにとらわれず、健康的な行動ができた自分を褒める習慣を持ってください。階段を上っただけでも「よくやった」と自分に声をかけ、小さな成功体験の積み重ねを意識します。前向きなマインドはストレスを減らし、長期的な減量の成功率を高めます。"];function Le(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 2.25a.75.75 0 0 1 .75.75v11.69l3.22-3.22a.75.75 0 1 1 1.06 1.06l-4.5 4.5a.75.75 0 0 1-1.06 0l-4.5-4.5a.75.75 0 1 1 1.06-1.06l3.22 3.22V3a.75.75 0 0 1 .75-.75Zm-9 13.5a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"},child:[]}]})(e)}function Ie(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M11.47 2.47a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06l-3.22-3.22V16.5a.75.75 0 0 1-1.5 0V4.81L8.03 8.03a.75.75 0 0 1-1.06-1.06l4.5-4.5ZM3 15.75a.75.75 0 0 1 .75.75v2.25a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5V16.5a.75.75 0 0 1 1.5 0v2.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V16.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"},child:[]}]})(e)}function Pe(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z",clipRule:"evenodd"},child:[]}]})(e)}function Re(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M12.75 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM7.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM8.25 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM9.75 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM10.5 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM12 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM12.75 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM14.25 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 17.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 15.75a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5ZM15 12.75a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0ZM16.5 13.5a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"},child:[]}]})(e)}function Be(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"},child:[]}]})(e)}function Ae(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M19.916 4.626a.75.75 0 0 1 .208 1.04l-9 13.5a.75.75 0 0 1-1.154.114l-6-6a.75.75 0 0 1 1.06-1.06l5.353 5.353 8.493-12.74a.75.75 0 0 1 1.04-.207Z",clipRule:"evenodd"},child:[]}]})(e)}function $e(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625Z"},child:[]},{tag:"path",attr:{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"},child:[]}]})(e)}function Fe(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"},child:[]}]})(e)}function _e(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M3.53 2.47a.75.75 0 0 0-1.06 1.06l18 18a.75.75 0 1 0 1.06-1.06l-18-18ZM22.676 12.553a11.249 11.249 0 0 1-2.631 4.31l-3.099-3.099a5.25 5.25 0 0 0-6.71-6.71L7.759 4.577a11.217 11.217 0 0 1 4.242-.827c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113Z"},child:[]},{tag:"path",attr:{d:"M15.75 12c0 .18-.013.357-.037.53l-4.244-4.243A3.75 3.75 0 0 1 15.75 12ZM12.53 15.713l-4.243-4.244a3.75 3.75 0 0 0 4.244 4.243Z"},child:[]},{tag:"path",attr:{d:"M6.75 12c0-.619.107-1.213.304-1.764l-3.1-3.1a11.25 11.25 0 0 0-2.63 4.31c-.12.362-.12.752 0 1.114 1.489 4.467 5.704 7.69 10.675 7.69 1.5 0 2.933-.294 4.242-.827l-2.477-2.477A5.25 5.25 0 0 1 6.75 12Z"},child:[]}]})(e)}function ze(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"},child:[]},{tag:"path",attr:{fillRule:"evenodd",d:"M1.323 11.447C2.811 6.976 7.028 3.75 12.001 3.75c4.97 0 9.185 3.223 10.675 7.69.12.362.12.752 0 1.113-1.487 4.471-5.705 7.697-10.677 7.697-4.97 0-9.186-3.223-10.675-7.69a1.762 1.762 0 0 1 0-1.113ZM17.25 12a5.25 5.25 0 1 1-10.5 0 5.25 5.25 0 0 1 10.5 0Z",clipRule:"evenodd"},child:[]}]})(e)}function Ye(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M19.5 21a3 3 0 0 0 3-3v-4.5a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3V18a3 3 0 0 0 3 3h15ZM1.5 10.146V6a3 3 0 0 1 3-3h5.379a2.25 2.25 0 0 1 1.59.659l2.122 2.121c.14.141.331.22.53.22H19.5a3 3 0 0 1 3 3v1.146A4.483 4.483 0 0 0 19.5 9h-15a4.483 4.483 0 0 0-3 1.146Z"},child:[]}]})(e)}function He(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm8.706-1.442c1.146-.573 2.437.463 2.126 1.706l-.709 2.836.042-.02a.75.75 0 0 1 .67 1.34l-.04.022c-1.147.573-2.438-.463-2.127-1.706l.71-2.836-.042.02a.75.75 0 1 1-.671-1.34l.041-.022ZM12 9a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z",clipRule:"evenodd"},child:[]}]})(e)}function Ze(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"m6.72 5.66 11.62 11.62A8.25 8.25 0 0 0 6.72 5.66Zm10.56 12.68L5.66 6.72a8.25 8.25 0 0 0 11.62 11.62ZM5.105 5.106c3.807-3.808 9.98-3.808 13.788 0 3.808 3.807 3.808 9.98 0 13.788-3.807 3.808-9.98 3.808-13.788 0-3.808-3.807-3.808-9.98 0-13.788Z",clipRule:"evenodd"},child:[]}]})(e)}function qe(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{d:"M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"},child:[]}]})(e)}function Ge(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"},child:[]}]})(e)}function Ue(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M9 4.5a.75.75 0 0 1 .721.544l.813 2.846a3.75 3.75 0 0 0 2.576 2.576l2.846.813a.75.75 0 0 1 0 1.442l-2.846.813a3.75 3.75 0 0 0-2.576 2.576l-.813 2.846a.75.75 0 0 1-1.442 0l-.813-2.846a3.75 3.75 0 0 0-2.576-2.576l-2.846-.813a.75.75 0 0 1 0-1.442l2.846-.813A3.75 3.75 0 0 0 7.466 7.89l.813-2.846A.75.75 0 0 1 9 4.5ZM18 1.5a.75.75 0 0 1 .728.568l.258 1.036c.236.94.97 1.674 1.91 1.91l1.036.258a.75.75 0 0 1 0 1.456l-1.036.258c-.94.236-1.674.97-1.91 1.91l-.258 1.036a.75.75 0 0 1-1.456 0l-.258-1.036a2.625 2.625 0 0 0-1.91-1.91l-1.036-.258a.75.75 0 0 1 0-1.456l1.036-.258a2.625 2.625 0 0 0 1.91-1.91l.258-1.036A.75.75 0 0 1 18 1.5ZM16.5 15a.75.75 0 0 1 .712.513l.394 1.183c.15.447.5.799.948.948l1.183.395a.75.75 0 0 1 0 1.422l-1.183.395c-.447.15-.799.5-.948.948l-.395 1.183a.75.75 0 0 1-1.422 0l-.395-1.183a1.5 1.5 0 0 0-.948-.948l-1.183-.395a.75.75 0 0 1 0-1.422l1.183-.395c.447-.15.799-.5.948-.948l.395-1.183A.75.75 0 0 1 16.5 15Z",clipRule:"evenodd"},child:[]}]})(e)}function Ve(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M16.5 4.478v.227a48.816 48.816 0 0 1 3.878.512.75.75 0 1 1-.256 1.478l-.209-.035-1.005 13.07a3 3 0 0 1-2.991 2.77H8.084a3 3 0 0 1-2.991-2.77L4.087 6.66l-.209.035a.75.75 0 0 1-.256-1.478A48.567 48.567 0 0 1 7.5 4.705v-.227c0-1.564 1.213-2.9 2.816-2.951a52.662 52.662 0 0 1 3.369 0c1.603.051 2.815 1.387 2.815 2.951Zm-6.136-1.452a51.196 51.196 0 0 1 3.273 0C14.39 3.05 15 3.684 15 4.478v.113a49.488 49.488 0 0 0-6 0v-.113c0-.794.609-1.428 1.364-1.452Zm-.355 5.945a.75.75 0 1 0-1.5.058l.347 9a.75.75 0 1 0 1.499-.058l-.346-9Zm5.48.058a.75.75 0 1 0-1.498-.058l-.347 9a.75.75 0 0 0 1.5.058l.345-9Z",clipRule:"evenodd"},child:[]}]})(e)}function Xe(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z",clipRule:"evenodd"},child:[]}]})(e)}function Qe(e){return W({attr:{viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"},child:[]}]})(e)}const Ke=[{min:0,max:90,color:"#6ec6f1",label:"低",range:"<90"},{min:90,max:120,color:"#7edfa0",label:"正常",range:"90-119"},{min:120,max:130,color:"#e6f7b2",label:"正常高値",range:"120-129"},{min:130,max:140,color:"#fff59d",label:"高値",range:"130-139"},{min:140,max:160,color:"#ffb74d",label:"Ⅰ度",range:"140-159"},{min:160,max:180,color:"#ff7043",label:"Ⅱ度",range:"160-179"},{min:180,max:300,color:"#d32f2f",label:"Ⅲ度",range:"180+"}],Je=[{min:0,max:60,color:"#6ec6f1",label:"低",range:"<60"},{min:60,max:80,color:"#7edfa0",label:"正常",range:"60-79"},{min:80,max:90,color:"#fff59d",label:"高値",range:"80-89"},{min:90,max:100,color:"#ffb74d",label:"Ⅰ度",range:"90-99"},{min:100,max:110,color:"#ff7043",label:"Ⅱ度",range:"100-109"},{min:110,max:200,color:"#d32f2f",label:"Ⅲ度",range:"110+"}];function et(e,t){if(null==t)return 0;let r=0;for(let n=0;n<e.length;n++){const a=e[n];if(t<a.max){return r+100/e.length*((t-a.min)/(a.max-a.min))}r+=100/e.length}return 100}const tt=({recordsOfDay:e})=>{const t=e.length?Math.min(...e.map(e=>e.systolic)):null,n=e.length?Math.min(...e.map(e=>e.diastolic)):null,a=et(Ke,t),o=et(Je,n);return r.jsxs("div",{className:"w-full max-w-md mx-auto flex flex-col items-center gap-2 mb-2",children:[r.jsxs("div",{className:"w-full flex flex-col items-center",children:[r.jsxs("div",{className:"relative w-full h-7 flex rounded overflow-hidden shadow",style:{minWidth:240},children:[Ke.map(e=>r.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",style:{background:e.color,minWidth:0},children:r.jsx("span",{className:"text-[10px] font-bold text-gray-800 dark:text-gray-900 select-none",style:{lineHeight:1},children:e.label})},e.label)),null!=t&&r.jsx("div",{className:"absolute left-0 top-0 w-full pointer-events-none",style:{height:"100%"},children:r.jsx("div",{style:{position:"absolute",left:`calc(${a}% - 0.65em)`,top:"50%",transform:"translateY(-50%)",color:"#dc2626",fontSize:"1.3em",textShadow:"0 0 2px #fff, 0 0 2px #fff, 1px 1px 2px #0002",zIndex:2},"aria-label":"現在の収縮期位置",children:"▼"})})]}),r.jsx("div",{className:"w-full flex justify-between mt-0.5 px-1",children:Ke.map(e=>r.jsx("span",{className:"text-[10px] text-gray-700 dark:text-gray-200",style:{minWidth:0},children:e.range},e.label+"-range"))})]}),r.jsxs("div",{className:"w-full flex flex-col items-center",children:[r.jsxs("div",{className:"relative w-full h-7 flex rounded overflow-hidden shadow",style:{minWidth:240},children:[Je.map(e=>r.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",style:{background:e.color,minWidth:0},children:r.jsx("span",{className:"text-[10px] font-bold text-gray-800 dark:text-gray-900 select-none",style:{lineHeight:1},children:e.label})},e.label)),null!=n&&r.jsx("div",{className:"absolute left-0 top-0 w-full pointer-events-none",style:{height:"100%"},children:r.jsx("div",{style:{position:"absolute",left:`calc(${o}% - 0.65em)`,top:"50%",transform:"translateY(-50%)",color:"#dc2626",fontSize:"1.3em",textShadow:"0 0 2px #fff, 0 0 2px #fff, 1px 1px 2px #0002",zIndex:2},"aria-label":"現在の拡張期位置",children:"▼"})})]}),r.jsx("div",{className:"w-full flex justify-between mt-0.5 px-1",children:Je.map(e=>r.jsx("span",{className:"text-[10px] text-gray-700 dark:text-gray-200",style:{minWidth:0},children:e.range},e.label+"-range"))})]})]})},rt=()=>{const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`},nt=e=>`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,at="selectedDate",ot=e=>`${e.getDate()}`,st=e=>["日","月","火","水","木","金","土"][e.getDay()],it=90,lt=30,dt=60,ct=30,ut=10,mt=30,ht="text-red-500",ft="text-blue-500",gt="",pt=()=>{const e=new Date;return e.setHours(0,0,0,0),e},xt=(e,t)=>{const r=new Date(e),n="forward"===t?lt:-30;return r.setDate(e.getDate()+n),r},bt=(e,t,r,n,a,o)=>{const s=nt(t),i=nt(n),l=nt(r);return e.map((t,r)=>{const n=nt(t),d=n===s,c=n===i,u=n===l,m=r>0?e[r-1]:null,h=0===r||!!m&&t.getMonth()!==m.getMonth(),f=(e=>{switch(e){case 0:return ht;case 6:return ft;default:return gt}})(t.getDay());return{date:t,isSelected:d,isToday:c,isCenter:u,showMonth:h,weekdayColor:f,status:a?a(t):(null==o?void 0:o(t))?"green":"none",index:r}})},yt=e=>{const[t,r]=k.useState(()=>(e=>{const t=new Date(e);t.setDate(e.getDate()-it);const r=new Date(e);return r.setDate(e.getDate()+it),{minDate:t,maxDate:r}})(e)),n=k.useRef(null),a=k.useRef(0);k.useEffect(()=>{const{minDate:n,maxDate:a}=t;let o=!1,s={...t};e<n&&(s.minDate=xt(e,"backward"),o=!0),e>a&&(s.maxDate=xt(e,"forward"),o=!0),o&&r(s)},[e]);const o=k.useCallback((e,t)=>{r("left"===e?e=>({...e,minDate:xt(e.minDate,"backward")}):e=>({...e,maxDate:xt(e.maxDate,"forward")})),n.current=e,a.current=t},[]);return{dateRange:t,lastEdgeRef:n,prevWidthRef:a,expandRange:o}},vt=({onScrollEdge:e})=>{const t=k.useRef(null),r=k.useCallback(e=>{const r=t.current;r&&Math.abs(e.deltaY)>Math.abs(e.deltaX)&&(r.scrollLeft+=e.deltaY,e.preventDefault())},[]),n=k.useCallback(()=>{const r=t.current;if(!r)return;const{scrollLeft:n,scrollWidth:a,clientWidth:o}=r,{isAtLeft:s,isAtRight:i}=((e,t,r)=>({isAtLeft:e<=dt,isAtRight:e+r+dt>=t}))(n,a,o);i&&e("right",a),s&&e("left",a)},[e]);return k.useEffect(()=>{const e=t.current;if(e)return e.addEventListener("wheel",r,{passive:!1}),()=>{e.removeEventListener("wheel",r)}},[r]),k.useEffect(()=>{const e=t.current;if(e)return e.addEventListener("scroll",n,{passive:!0}),()=>{e.removeEventListener("scroll",n)}},[n]),{containerRef:t}},wt=k.memo(({dateItem:e,onSelect:t})=>{const{date:n,isSelected:a,isToday:o,isCenter:s,weekdayColor:i,status:l,index:d}=e,c=k.useMemo(()=>`${"\n      flex flex-col items-center justify-center \n      min-w-12 w-12 max-w-12 h-12 \n      px-0 py-0 mt-2 mb-2 \n      rounded-full transition-colors duration-150 shadow-md\n      hover:bg-blue-200 dark:hover:bg-blue-700 \n      focus:outline-none focus:ring-2 focus:ring-blue-400\n    ".trim()} ${a?"bg-blue-600 text-white shadow-lg scale-105 z-10":o?"bg-blue-100 text-blue-700":"bg-white text-gray-700 dark:bg-gray-800 dark:text-gray-200"} ${s&&!a?"scale-105":""}`,[a,o,s]),u=k.useMemo(()=>`inline-block w-2 h-2 rounded-full ${"green"===l?"bg-green-500":"red"===l?"bg-red-500":""}`.trim(),[l]),m=k.useMemo(()=>{const e=nt(n),t=ot(n);return`${e} ${st(n)} ${t}日 ${"green"===l?"記録済み":"red"===l?"注意":""} ${a?"選択中":""} ${o?"今日":""}`.trim()},[n,l,a,o]);return r.jsxs("button",{"data-date-idx":d,"data-date":nt(n),onClick:()=>t(n),className:c,style:{position:"relative",scrollSnapAlign:"center",border:"none"},"aria-current":a?"date":void 0,"aria-label":m,role:"gridcell",tabIndex:a?0:-1,children:[r.jsx("span",{className:`text-xs font-medium ${i}`,"aria-hidden":"true",children:st(n)}),r.jsx("span",{className:"text-lg font-bold","aria-hidden":"true",children:ot(n)}),r.jsx("span",{className:u,"aria-hidden":"true",role:"presentation"})]})},(e,t)=>{const r=e.dateItem,n=t.dateItem;return r.date.getTime()===n.date.getTime()&&r.isSelected===n.isSelected&&r.isToday===n.isToday&&r.isCenter===n.isCenter&&r.status===n.status&&r.showMonth===n.showMonth&&e.onSelect===t.onSelect}),kt=k.memo(({date:e})=>{const t="\n    flex flex-col items-center justify-center \n    min-w-14 w-14 max-w-14 h-14 \n    px-0 py-0 m-1 \n    rounded-xl bg-gray-100 dark:bg-gray-700 \n    text-gray-500 dark:text-gray-300 \n    text-xs font-bold \n    select-none cursor-default \n    border border-gray-300 dark:border-gray-600\n  ".trim();return r.jsxs("span",{className:t,"aria-hidden":"true",style:{scrollSnapAlign:"center"},children:[e.getMonth()+1,"月"]})},(e,t)=>e.date.getMonth()===t.date.getMonth()&&e.date.getFullYear()===t.date.getFullYear()),Nt={},jt={};function Mt(e,t){try{const r=(Nt[e]||(Nt[e]=new Intl.DateTimeFormat("en-GB",{timeZone:e,hour:"numeric",timeZoneName:"longOffset"}).format))(t).split("GMT")[1]||"";return r in jt?jt[r]:Ct(r,r.split(":"))}catch{if(e in jt)return jt[e];const t=null==e?void 0:e.match(Dt);return t?Ct(e,t.slice(1)):NaN}}const Dt=/([+-]\d\d):?(\d\d)?/;function Ct(e,t){const r=+t[0],n=+(t[1]||0);return jt[e]=r>0?60*r+n:60*r-n}class St extends Date{constructor(...e){super(),e.length>1&&"string"==typeof e[e.length-1]&&(this.timeZone=e.pop()),this.internal=new Date,isNaN(Mt(this.timeZone,this))?this.setTime(NaN):e.length?"number"==typeof e[0]&&(1===e.length||2===e.length&&"number"!=typeof e[1])?this.setTime(e[0]):"string"==typeof e[0]?this.setTime(+new Date(e[0])):e[0]instanceof Date?this.setTime(+e[0]):(this.setTime(+new Date(...e)),Ot(this),Tt(this)):this.setTime(Date.now())}static tz(e,...t){return t.length?new St(...t,e):new St(Date.now(),e)}withTimeZone(e){return new St(+this,e)}getTimezoneOffset(){return-Mt(this.timeZone,this)}setTime(e){return Date.prototype.setTime.apply(this,arguments),Tt(this),+this}[Symbol.for("constructDateFrom")](e){return new St(+new Date(e),this.timeZone)}}const Et=/^(get|set)(?!UTC)/;function Tt(e){e.internal.setTime(+e),e.internal.setUTCMinutes(e.internal.getUTCMinutes()-e.getTimezoneOffset())}function Ot(e){const t=Mt(e.timeZone,e),r=new Date(+e);r.setUTCHours(r.getUTCHours()-1);const n=-new Date(+e).getTimezoneOffset(),a=n- -new Date(+r).getTimezoneOffset(),o=Date.prototype.getHours.apply(e)!==e.internal.getUTCHours();a&&o&&e.internal.setUTCMinutes(e.internal.getUTCMinutes()+a);const s=n-t;s&&Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+s);const i=Mt(e.timeZone,e),l=-new Date(+e).getTimezoneOffset()-i-s;if(i!==t&&l){Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+l);const t=i-Mt(e.timeZone,e);t&&(e.internal.setUTCMinutes(e.internal.getUTCMinutes()+t),Date.prototype.setUTCMinutes.call(e,Date.prototype.getUTCMinutes.call(e)+t))}}Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(!Et.test(e))return;const t=e.replace(Et,"$1UTC");St.prototype[t]&&(e.startsWith("get")?St.prototype[e]=function(){return this.internal[t]()}:(St.prototype[e]=function(){var e;return Date.prototype[t].apply(this.internal,arguments),e=this,Date.prototype.setFullYear.call(e,e.internal.getUTCFullYear(),e.internal.getUTCMonth(),e.internal.getUTCDate()),Date.prototype.setHours.call(e,e.internal.getUTCHours(),e.internal.getUTCMinutes(),e.internal.getUTCSeconds(),e.internal.getUTCMilliseconds()),Ot(e),+this},St.prototype[t]=function(){return Date.prototype[t].apply(this,arguments),Tt(this),+this}))});class Wt extends St{static tz(e,...t){return t.length?new Wt(...t,e):new Wt(Date.now(),e)}toISOString(){const[e,t,r]=this.tzComponents(),n=`${e}${t}:${r}`;return this.internal.toISOString().slice(0,-1)+n}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[e,t,r,n]=this.internal.toUTCString().split(" ");return`${null==e?void 0:e.slice(0,-1)} ${r} ${t} ${n}`}toTimeString(){const e=this.internal.toUTCString().split(" ")[4],[t,r,n]=this.tzComponents();return`${e} GMT${t}${r}${n} (${a=this.timeZone,o=this,new Intl.DateTimeFormat("en-GB",{timeZone:a,timeZoneName:"long"}).format(o).slice(12)})`;var a,o}toLocaleString(e,t){return Date.prototype.toLocaleString.call(this,e,{...t,timeZone:(null==t?void 0:t.timeZone)||this.timeZone})}toLocaleDateString(e,t){return Date.prototype.toLocaleDateString.call(this,e,{...t,timeZone:(null==t?void 0:t.timeZone)||this.timeZone})}toLocaleTimeString(e,t){return Date.prototype.toLocaleTimeString.call(this,e,{...t,timeZone:(null==t?void 0:t.timeZone)||this.timeZone})}tzComponents(){const e=this.getTimezoneOffset();return[e>0?"-":"+",String(Math.floor(Math.abs(e)/60)).padStart(2,"0"),String(Math.abs(e)%60).padStart(2,"0")]}withTimeZone(e){return new Wt(+this,e)}[Symbol.for("constructDateFrom")](e){return new Wt(+new Date(e),this.timeZone)}}var Lt,It,Pt,Rt,Bt,At,$t,Ft;(It=Lt||(Lt={})).Root="root",It.Chevron="chevron",It.Day="day",It.DayButton="day_button",It.CaptionLabel="caption_label",It.Dropdowns="dropdowns",It.Dropdown="dropdown",It.DropdownRoot="dropdown_root",It.Footer="footer",It.MonthGrid="month_grid",It.MonthCaption="month_caption",It.MonthsDropdown="months_dropdown",It.Month="month",It.Months="months",It.Nav="nav",It.NextMonthButton="button_next",It.PreviousMonthButton="button_previous",It.Week="week",It.Weeks="weeks",It.Weekday="weekday",It.Weekdays="weekdays",It.WeekNumber="week_number",It.WeekNumberHeader="week_number_header",It.YearsDropdown="years_dropdown",(Rt=Pt||(Pt={})).disabled="disabled",Rt.hidden="hidden",Rt.outside="outside",Rt.focused="focused",Rt.today="today",(At=Bt||(Bt={})).range_end="range_end",At.range_middle="range_middle",At.range_start="range_start",At.selected="selected",(Ft=$t||($t={})).weeks_before_enter="weeks_before_enter",Ft.weeks_before_exit="weeks_before_exit",Ft.weeks_after_enter="weeks_after_enter",Ft.weeks_after_exit="weeks_after_exit",Ft.caption_after_enter="caption_after_enter",Ft.caption_after_exit="caption_after_exit",Ft.caption_before_enter="caption_before_enter",Ft.caption_before_exit="caption_before_exit";const _t=6048e5,zt=Symbol.for("constructDateFrom");function Yt(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&zt in e?e[zt](t):e instanceof Date?new e.constructor(t):new Date(t)}function Ht(e,t){return Yt(t||e,e)}function Zt(e,t,r){const n=Ht(e,null==r?void 0:r.in);return isNaN(t)?Yt(e,NaN):t?(n.setDate(n.getDate()+t),n):n}function qt(e,t,r){const n=Ht(e,null==r?void 0:r.in);if(isNaN(t))return Yt(e,NaN);if(!t)return n;const a=n.getDate(),o=Yt(e,n.getTime());o.setMonth(n.getMonth()+t+1,0);return a>=o.getDate()?o:(n.setFullYear(o.getFullYear(),o.getMonth(),a),n)}let Gt={};function Ut(){return Gt}function Vt(e,t){var r,n,a,o;const s=Ut(),i=(null==t?void 0:t.weekStartsOn)??(null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.weekStartsOn)??s.weekStartsOn??(null==(o=null==(a=s.locale)?void 0:a.options)?void 0:o.weekStartsOn)??0,l=Ht(e,null==t?void 0:t.in),d=l.getDay(),c=(d<i?7:0)+d-i;return l.setDate(l.getDate()-c),l.setHours(0,0,0,0),l}function Xt(e,t){return Vt(e,{...t,weekStartsOn:1})}function Qt(e,t){const r=Ht(e,null==t?void 0:t.in),n=r.getFullYear(),a=Yt(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const o=Xt(a),s=Yt(r,0);s.setFullYear(n,0,4),s.setHours(0,0,0,0);const i=Xt(s);return r.getTime()>=o.getTime()?n+1:r.getTime()>=i.getTime()?n:n-1}function Kt(e){const t=Ht(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Jt(e,...t){const r=Yt.bind(null,t.find(e=>"object"==typeof e));return t.map(r)}function er(e,t){const r=Ht(e,null==t?void 0:t.in);return r.setHours(0,0,0,0),r}function tr(e,t,r){const[n,a]=Jt(null==r||r.in,e,t),o=er(n),s=er(a),i=+o-Kt(o),l=+s-Kt(s);return Math.round((i-l)/864e5)}function rr(e){return e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e)}function nr(e,t){const{start:r,end:n}=function(e,t){const[r,n]=Jt(0,t.start,t.end);return{start:r,end:n}}(null==t||t.in,e);let a=+r>+n;const o=a?+r:+n,s=a?n:r;s.setHours(0,0,0,0),s.setDate(1);const i=[];for(;+s<=o;)i.push(Yt(r,s)),s.setMonth(s.getMonth()+1);return a?i.reverse():i}function ar(e,t){const r=Ht(e,null==t?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function or(e,t){var r,n,a,o;const s=Ut(),i=(null==t?void 0:t.weekStartsOn)??(null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.weekStartsOn)??s.weekStartsOn??(null==(o=null==(a=s.locale)?void 0:a.options)?void 0:o.weekStartsOn)??0,l=Ht(e,null==t?void 0:t.in),d=l.getDay(),c=6+(d<i?-7:0)-(d-i);return l.setDate(l.getDate()+c),l.setHours(23,59,59,999),l}const sr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function ir(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const lr={date:ir({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:ir({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:ir({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},dr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function cr(e){return(t,r)=>{let n;if("formatting"===((null==r?void 0:r.context)?String(r.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=(null==r?void 0:r.width)?String(r.width):t;n=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=(null==r?void 0:r.width)?String(r.width):e.defaultWidth;n=e.values[a]||e.values[t]}return n[e.argumentCallback?e.argumentCallback(t):t]}}function ur(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],o=t.match(a);if(!o)return null;const s=o[0],i=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(i)?function(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r;return}(i,e=>e.test(s)):function(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r;return}(i,e=>e.test(s));let d;d=e.valueCallback?e.valueCallback(l):l,d=r.valueCallback?r.valueCallback(d):d;return{value:d,rest:t.slice(s.length)}}}function mr(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],o=t.match(e.parsePattern);if(!o)return null;let s=e.valueCallback?e.valueCallback(o[0]):o[0];s=r.valueCallback?r.valueCallback(s):s;return{value:s,rest:t.slice(a.length)}}}const hr={code:"en-US",formatDistance:(e,t,r)=>{let n;const a=sr[e];return n="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),(null==r?void 0:r.addSuffix)?r.comparison&&r.comparison>0?"in "+n:n+" ago":n},formatLong:lr,formatRelative:(e,t,r,n)=>dr[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},era:cr({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:cr({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:cr({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:cr({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:cr({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:mr({matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)}),era:ur({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:ur({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:ur({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:ur({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:ur({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function fr(e,t){const r=Ht(e,null==t?void 0:t.in),n=+Xt(r)-+function(e,t){const r=Qt(e,t),n=Yt(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Xt(n)}(r);return Math.round(n/_t)+1}function gr(e,t){var r,n,a,o;const s=Ht(e,null==t?void 0:t.in),i=s.getFullYear(),l=Ut(),d=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(o=null==(a=l.locale)?void 0:a.options)?void 0:o.firstWeekContainsDate)??1,c=Yt((null==t?void 0:t.in)||e,0);c.setFullYear(i+1,0,d),c.setHours(0,0,0,0);const u=Vt(c,t),m=Yt((null==t?void 0:t.in)||e,0);m.setFullYear(i,0,d),m.setHours(0,0,0,0);const h=Vt(m,t);return+s>=+u?i+1:+s>=+h?i:i-1}function pr(e,t){const r=Ht(e,null==t?void 0:t.in),n=+Vt(r,t)-+function(e,t){var r,n,a,o;const s=Ut(),i=(null==t?void 0:t.firstWeekContainsDate)??(null==(n=null==(r=null==t?void 0:t.locale)?void 0:r.options)?void 0:n.firstWeekContainsDate)??s.firstWeekContainsDate??(null==(o=null==(a=s.locale)?void 0:a.options)?void 0:o.firstWeekContainsDate)??1,l=gr(e,t),d=Yt((null==t?void 0:t.in)||e,0);return d.setFullYear(l,0,i),d.setHours(0,0,0,0),Vt(d,t)}(r,t);return Math.round(n/_t)+1}function xr(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const br={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return xr("yy"===t?n%100:n,t.length)},M(e,t){const r=e.getMonth();return"M"===t?String(r+1):xr(r+1,2)},d:(e,t)=>xr(e.getDate(),t.length),a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];default:return"am"===r?"a.m.":"p.m."}},h:(e,t)=>xr(e.getHours()%12||12,t.length),H:(e,t)=>xr(e.getHours(),t.length),m:(e,t)=>xr(e.getMinutes(),t.length),s:(e,t)=>xr(e.getSeconds(),t.length),S(e,t){const r=t.length,n=e.getMilliseconds();return xr(Math.trunc(n*Math.pow(10,r-3)),t.length)}},yr="midnight",vr="noon",wr="morning",kr="afternoon",Nr="evening",jr="night",Mr={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if("yo"===t){const t=e.getFullYear(),n=t>0?t:1-t;return r.ordinalNumber(n,{unit:"year"})}return br.y(e,t)},Y:function(e,t,r,n){const a=gr(e,n),o=a>0?a:1-a;if("YY"===t){return xr(o%100,2)}return"Yo"===t?r.ordinalNumber(o,{unit:"year"}):xr(o,t.length)},R:function(e,t){return xr(Qt(e),t.length)},u:function(e,t){return xr(e.getFullYear(),t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return xr(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return xr(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return br.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return xr(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=pr(e,n);return"wo"===t?r.ordinalNumber(a,{unit:"week"}):xr(a,t.length)},I:function(e,t,r){const n=fr(e);return"Io"===t?r.ordinalNumber(n,{unit:"week"}):xr(n,t.length)},d:function(e,t,r){return"do"===t?r.ordinalNumber(e.getDate(),{unit:"date"}):br.d(e,t)},D:function(e,t,r){const n=function(e,t){const r=Ht(e,null==t?void 0:t.in);return tr(r,ar(r))+1}(e);return"Do"===t?r.ordinalNumber(n,{unit:"dayOfYear"}):xr(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(o);case"ee":return xr(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),o=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(o);case"cc":return xr(o,t.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=0===n?7:n;switch(t){case"i":return String(a);case"ii":return xr(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});default:return r.dayPeriod(n,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(a=12===n?vr:0===n?yr:n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(a=n>=17?Nr:n>=12?kr:n>=4?wr:jr,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),r.ordinalNumber(t,{unit:"hour"})}return br.h(e,t)},H:function(e,t,r){return"Ho"===t?r.ordinalNumber(e.getHours(),{unit:"hour"}):br.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return"Ko"===t?r.ordinalNumber(n,{unit:"hour"}):xr(n,t.length)},k:function(e,t,r){let n=e.getHours();return 0===n&&(n=24),"ko"===t?r.ordinalNumber(n,{unit:"hour"}):xr(n,t.length)},m:function(e,t,r){return"mo"===t?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):br.m(e,t)},s:function(e,t,r){return"so"===t?r.ordinalNumber(e.getSeconds(),{unit:"second"}):br.s(e,t)},S:function(e,t){return br.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(0===n)return"Z";switch(t){case"X":return Cr(n);case"XXXX":case"XX":return Sr(n);default:return Sr(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Cr(n);case"xxxx":case"xx":return Sr(n);default:return Sr(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Dr(n,":");default:return"GMT"+Sr(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Dr(n,":");default:return"GMT"+Sr(n,":")}},t:function(e,t,r){return xr(Math.trunc(+e/1e3),t.length)},T:function(e,t,r){return xr(+e,t.length)}};function Dr(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),o=n%60;return 0===o?r+String(a):r+String(a)+t+xr(o,2)}function Cr(e,t){if(e%60==0){return(e>0?"-":"+")+xr(Math.abs(e)/60,2)}return Sr(e,t)}function Sr(e,t=""){const r=e>0?"-":"+",n=Math.abs(e);return r+xr(Math.trunc(n/60),2)+t+xr(n%60,2)}const Er=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},Tr=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Or={p:Tr,P:(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return Er(e,t);let o;switch(n){case"P":o=t.dateTime({width:"short"});break;case"PP":o=t.dateTime({width:"medium"});break;case"PPP":o=t.dateTime({width:"long"});break;default:o=t.dateTime({width:"full"})}return o.replace("{{date}}",Er(n,t)).replace("{{time}}",Tr(a,t))}},Wr=/^D+$/,Lr=/^Y+$/,Ir=["D","DD","YY","YYYY"];const Pr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Br=/^'([^]*?)'?$/,Ar=/''/g,$r=/[a-zA-Z]/;function Fr(e,t,r){var n,a,o,s,i,l,d,c;const u=Ut(),m=(null==r?void 0:r.locale)??u.locale??hr,h=(null==r?void 0:r.firstWeekContainsDate)??(null==(a=null==(n=null==r?void 0:r.locale)?void 0:n.options)?void 0:a.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(s=null==(o=u.locale)?void 0:o.options)?void 0:s.firstWeekContainsDate)??1,f=(null==r?void 0:r.weekStartsOn)??(null==(l=null==(i=null==r?void 0:r.locale)?void 0:i.options)?void 0:l.weekStartsOn)??u.weekStartsOn??(null==(c=null==(d=u.locale)?void 0:d.options)?void 0:c.weekStartsOn)??0,g=Ht(e,null==r?void 0:r.in);if(!function(e){return!(!rr(e)&&"number"!=typeof e||isNaN(+Ht(e)))}(g))throw new RangeError("Invalid time value");let p=t.match(Rr).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,Or[t])(e,m.formatLong)}return e}).join("").match(Pr).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:_r(e)};if(Mr[t])return{isToken:!0,value:e};if(t.match($r))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});m.localize.preprocessor&&(p=m.localize.preprocessor(g,p));const x={firstWeekContainsDate:h,weekStartsOn:f,locale:m};return p.map(n=>{if(!n.isToken)return n.value;const a=n.value;(!(null==r?void 0:r.useAdditionalWeekYearTokens)&&function(e){return Lr.test(e)}(a)||!(null==r?void 0:r.useAdditionalDayOfYearTokens)&&function(e){return Wr.test(e)}(a))&&function(e,t,r){const n=function(e,t,r){const n="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,r);if(Ir.includes(e))throw new RangeError(n)}(a,t,String(e));return(0,Mr[a[0]])(g,a,m.localize,x)}).join("")}function _r(e){const t=e.match(Br);return t?t[1].replace(Ar,"'"):e}function zr(e,t,r){const n=Ht(e,null==r?void 0:r.in),a=n.getFullYear(),o=n.getDate(),s=Yt(e,0);s.setFullYear(a,t,15),s.setHours(0,0,0,0);const i=function(e,t){const r=Ht(e,null==t?void 0:t.in),n=r.getFullYear(),a=r.getMonth(),o=Yt(r,0);return o.setFullYear(n,a+1,0),o.setHours(0,0,0,0),o.getDate()}(s);return n.setMonth(t,Math.min(o,i)),n}function Yr(e,t){const r=t.startOfMonth(e),n=r.getDay();return 1===n?r:0===n?t.addDays(r,-6):t.addDays(r,-1*(n-1))}class Hr{constructor(e,t){this.Date=Date,this.today=()=>{var e;return(null==(e=this.overrides)?void 0:e.today)?this.overrides.today():this.options.timeZone?Wt.tz(this.options.timeZone):new this.Date},this.newDate=(e,t,r)=>{var n;return(null==(n=this.overrides)?void 0:n.newDate)?this.overrides.newDate(e,t,r):this.options.timeZone?new Wt(e,t,r,this.options.timeZone):new Date(e,t,r)},this.addDays=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.addDays)?this.overrides.addDays(e,t):Zt(e,t)},this.addMonths=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.addMonths)?this.overrides.addMonths(e,t):qt(e,t)},this.addWeeks=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.addWeeks)?this.overrides.addWeeks(e,t):function(e,t,r){return Zt(e,7*t,r)}(e,t)},this.addYears=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.addYears)?this.overrides.addYears(e,t):function(e,t,r){return qt(e,12*t,r)}(e,t)},this.differenceInCalendarDays=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.differenceInCalendarDays)?this.overrides.differenceInCalendarDays(e,t):tr(e,t)},this.differenceInCalendarMonths=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.differenceInCalendarMonths)?this.overrides.differenceInCalendarMonths(e,t):function(e,t,r){const[n,a]=Jt(null==r||r.in,e,t);return 12*(n.getFullYear()-a.getFullYear())+(n.getMonth()-a.getMonth())}(e,t)},this.eachMonthOfInterval=e=>{var t;return(null==(t=this.overrides)?void 0:t.eachMonthOfInterval)?this.overrides.eachMonthOfInterval(e):nr(e)},this.endOfBroadcastWeek=e=>{var t;return(null==(t=this.overrides)?void 0:t.endOfBroadcastWeek)?this.overrides.endOfBroadcastWeek(e):function(e,t){const r=Yr(e,t),n=function(e,t){const r=t.startOfMonth(e),n=r.getDay()>0?r.getDay():7,a=t.addDays(e,1-n),o=t.addDays(a,34);return t.getMonth(e)===t.getMonth(o)?5:4}(e,t);return t.addDays(r,7*n-1)}(e,this)},this.endOfISOWeek=e=>{var t;return(null==(t=this.overrides)?void 0:t.endOfISOWeek)?this.overrides.endOfISOWeek(e):function(e,t){return or(e,{...t,weekStartsOn:1})}(e)},this.endOfMonth=e=>{var t;return(null==(t=this.overrides)?void 0:t.endOfMonth)?this.overrides.endOfMonth(e):function(e,t){const r=Ht(e,null==t?void 0:t.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}(e)},this.endOfWeek=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.endOfWeek)?this.overrides.endOfWeek(e,t):or(e,this.options)},this.endOfYear=e=>{var t;return(null==(t=this.overrides)?void 0:t.endOfYear)?this.overrides.endOfYear(e):function(e,t){const r=Ht(e,null==t?void 0:t.in),n=r.getFullYear();return r.setFullYear(n+1,0,0),r.setHours(23,59,59,999),r}(e)},this.format=(e,t,r)=>{var n;const a=(null==(n=this.overrides)?void 0:n.format)?this.overrides.format(e,t,this.options):Fr(e,t,this.options);return this.options.numerals&&"latn"!==this.options.numerals?this.replaceDigits(a):a},this.getISOWeek=e=>{var t;return(null==(t=this.overrides)?void 0:t.getISOWeek)?this.overrides.getISOWeek(e):fr(e)},this.getMonth=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.getMonth)?this.overrides.getMonth(e,this.options):function(e,t){return Ht(e,null==t?void 0:t.in).getMonth()}(e,this.options)},this.getYear=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.getYear)?this.overrides.getYear(e,this.options):function(e,t){return Ht(e,null==t?void 0:t.in).getFullYear()}(e,this.options)},this.getWeek=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.getWeek)?this.overrides.getWeek(e,this.options):pr(e,this.options)},this.isAfter=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.isAfter)?this.overrides.isAfter(e,t):function(e,t){return+Ht(e)>+Ht(t)}(e,t)},this.isBefore=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.isBefore)?this.overrides.isBefore(e,t):function(e,t){return+Ht(e)<+Ht(t)}(e,t)},this.isDate=e=>{var t;return(null==(t=this.overrides)?void 0:t.isDate)?this.overrides.isDate(e):rr(e)},this.isSameDay=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.isSameDay)?this.overrides.isSameDay(e,t):function(e,t,r){const[n,a]=Jt(null==r||r.in,e,t);return+er(n)===+er(a)}(e,t)},this.isSameMonth=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.isSameMonth)?this.overrides.isSameMonth(e,t):function(e,t,r){const[n,a]=Jt(null==r||r.in,e,t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}(e,t)},this.isSameYear=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.isSameYear)?this.overrides.isSameYear(e,t):function(e,t,r){const[n,a]=Jt(null==r||r.in,e,t);return n.getFullYear()===a.getFullYear()}(e,t)},this.max=e=>{var t;return(null==(t=this.overrides)?void 0:t.max)?this.overrides.max(e):function(e,t){let r,n=null==t?void 0:t.in;return e.forEach(e=>{n||"object"!=typeof e||(n=Yt.bind(null,e));const t=Ht(e,n);(!r||r<t||isNaN(+t))&&(r=t)}),Yt(n,r||NaN)}(e)},this.min=e=>{var t;return(null==(t=this.overrides)?void 0:t.min)?this.overrides.min(e):function(e,t){let r,n=null==t?void 0:t.in;return e.forEach(e=>{n||"object"!=typeof e||(n=Yt.bind(null,e));const t=Ht(e,n);(!r||r>t||isNaN(+t))&&(r=t)}),Yt(n,r||NaN)}(e)},this.setMonth=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.setMonth)?this.overrides.setMonth(e,t):zr(e,t)},this.setYear=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.setYear)?this.overrides.setYear(e,t):function(e,t,r){const n=Ht(e,null==r?void 0:r.in);return isNaN(+n)?Yt(e,NaN):(n.setFullYear(t),n)}(e,t)},this.startOfBroadcastWeek=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.startOfBroadcastWeek)?this.overrides.startOfBroadcastWeek(e,this):Yr(e,this)},this.startOfDay=e=>{var t;return(null==(t=this.overrides)?void 0:t.startOfDay)?this.overrides.startOfDay(e):er(e)},this.startOfISOWeek=e=>{var t;return(null==(t=this.overrides)?void 0:t.startOfISOWeek)?this.overrides.startOfISOWeek(e):Xt(e)},this.startOfMonth=e=>{var t;return(null==(t=this.overrides)?void 0:t.startOfMonth)?this.overrides.startOfMonth(e):function(e,t){const r=Ht(e,null==t?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}(e)},this.startOfWeek=(e,t)=>{var r;return(null==(r=this.overrides)?void 0:r.startOfWeek)?this.overrides.startOfWeek(e,this.options):Vt(e,this.options)},this.startOfYear=e=>{var t;return(null==(t=this.overrides)?void 0:t.startOfYear)?this.overrides.startOfYear(e):ar(e)},this.options={locale:hr,...e},this.overrides=t}getDigitMap(){const{numerals:e="latn"}=this.options,t=new Intl.NumberFormat("en-US",{numberingSystem:e}),r={};for(let n=0;n<10;n++)r[n.toString()]=t.format(n);return r}replaceDigits(e){const t=this.getDigitMap();return e.replace(/\d/g,e=>t[e]||e)}formatNumber(e){return this.replaceDigits(e.toString())}}const Zr=new Hr;class qr{constructor(e,t,r=Zr){this.date=e,this.displayMonth=t,this.outside=Boolean(t&&!r.isSameMonth(e,t)),this.dateLib=r}isEqualTo(e){return this.dateLib.isSameDay(e.date,this.date)&&this.dateLib.isSameMonth(e.displayMonth,this.displayMonth)}}class Gr{constructor(e,t){this.date=e,this.weeks=t}}class Ur{constructor(e,t){this.days=t,this.weekNumber=e}}function Vr(e,t,r=!1,n=Zr){let{from:a,to:o}=e;const{differenceInCalendarDays:s,isSameDay:i}=n;if(a&&o){s(o,a)<0&&([a,o]=[o,a]);return s(t,a)>=(r?1:0)&&s(o,t)>=(r?1:0)}return!r&&o?i(o,t):!(r||!a)&&i(a,t)}function Xr(e){return Boolean(e&&"object"==typeof e&&"before"in e&&"after"in e)}function Qr(e){return Boolean(e&&"object"==typeof e&&"from"in e)}function Kr(e){return Boolean(e&&"object"==typeof e&&"after"in e)}function Jr(e){return Boolean(e&&"object"==typeof e&&"before"in e)}function en(e){return Boolean(e&&"object"==typeof e&&"dayOfWeek"in e)}function tn(e,t){return Array.isArray(e)&&e.every(t.isDate)}function rn(e,t,r=Zr){const n=Array.isArray(t)?t:[t],{isSameDay:a,differenceInCalendarDays:o,isAfter:s}=r;return n.some(t=>{if("boolean"==typeof t)return t;if(r.isDate(t))return a(e,t);if(tn(t,r))return t.includes(e);if(Qr(t))return Vr(t,e,!1,r);if(en(t))return Array.isArray(t.dayOfWeek)?t.dayOfWeek.includes(e.getDay()):t.dayOfWeek===e.getDay();if(Xr(t)){const r=o(t.before,e)>0,n=o(t.after,e)<0;return s(t.before,t.after)?n&&r:r||n}return Kr(t)?o(e,t.after)>0:Jr(t)?o(t.before,e)>0:"function"==typeof t&&t(e)})}const nn=k.createContext(void 0);function an(){const e=k.useContext(nn);if(void 0===e)throw new Error("useDayPicker() must be used within a custom component.");return e}const on=Object.freeze(Object.defineProperty({__proto__:null,Button:function(e){return M.createElement("button",{...e})},CaptionLabel:function(e){return M.createElement("span",{...e})},Chevron:function(e){const{size:t=24,orientation:r="left",className:n}=e;return M.createElement("svg",{className:n,width:t,height:t,viewBox:"0 0 24 24"},"up"===r&&M.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),"down"===r&&M.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),"left"===r&&M.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),"right"===r&&M.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))},Day:function(e){const{day:t,modifiers:r,...n}=e;return M.createElement("td",{...n})},DayButton:function(e){const{day:t,modifiers:r,...n}=e,a=M.useRef(null);return M.useEffect(()=>{var e;r.focused&&(null==(e=a.current)||e.focus())},[r.focused]),M.createElement("button",{ref:a,...n})},Dropdown:function(e){const{options:t,className:r,components:n,classNames:a,...o}=e,s=[a[Lt.Dropdown],r].join(" "),i=null==t?void 0:t.find(({value:e})=>e===o.value);return M.createElement("span",{"data-disabled":o.disabled,className:a[Lt.DropdownRoot]},M.createElement(n.Select,{className:s,...o},null==t?void 0:t.map(({value:e,label:t,disabled:r})=>M.createElement(n.Option,{key:e,value:e,disabled:r},t))),M.createElement("span",{className:a[Lt.CaptionLabel],"aria-hidden":!0},null==i?void 0:i.label,M.createElement(n.Chevron,{orientation:"down",size:18,className:a[Lt.Chevron]})))},DropdownNav:function(e){return M.createElement("div",{...e})},Footer:function(e){return M.createElement("div",{...e})},Month:function(e){const{calendarMonth:t,displayIndex:r,...n}=e;return M.createElement("div",{...n},e.children)},MonthCaption:function(e){const{calendarMonth:t,displayIndex:r,...n}=e;return M.createElement("div",{...n})},MonthGrid:function(e){return M.createElement("table",{...e})},Months:function(e){return M.createElement("div",{...e})},MonthsDropdown:function(e){const{components:t}=an();return M.createElement(t.Dropdown,{...e})},Nav:function(e){const{onPreviousClick:t,onNextClick:r,previousMonth:n,nextMonth:a,...o}=e,{components:s,classNames:i,labels:{labelPrevious:l,labelNext:d}}=an(),c=k.useCallback(e=>{a&&(null==r||r(e))},[a,r]),u=k.useCallback(e=>{n&&(null==t||t(e))},[n,t]);return M.createElement("nav",{...o},M.createElement(s.PreviousMonthButton,{type:"button",className:i[Lt.PreviousMonthButton],tabIndex:n?void 0:-1,"aria-disabled":!n||void 0,"aria-label":l(n),onClick:u},M.createElement(s.Chevron,{disabled:!n||void 0,className:i[Lt.Chevron],orientation:"left"})),M.createElement(s.NextMonthButton,{type:"button",className:i[Lt.NextMonthButton],tabIndex:a?void 0:-1,"aria-disabled":!a||void 0,"aria-label":d(a),onClick:c},M.createElement(s.Chevron,{disabled:!a||void 0,orientation:"right",className:i[Lt.Chevron]})))},NextMonthButton:function(e){const{components:t}=an();return M.createElement(t.Button,{...e})},Option:function(e){return M.createElement("option",{...e})},PreviousMonthButton:function(e){const{components:t}=an();return M.createElement(t.Button,{...e})},Root:function(e){const{rootRef:t,...r}=e;return M.createElement("div",{...r,ref:t})},Select:function(e){return M.createElement("select",{...e})},Week:function(e){const{week:t,...r}=e;return M.createElement("tr",{...r})},WeekNumber:function(e){const{week:t,...r}=e;return M.createElement("th",{...r})},WeekNumberHeader:function(e){return M.createElement("th",{...e})},Weekday:function(e){return M.createElement("th",{...e})},Weekdays:function(e){return M.createElement("thead",{"aria-hidden":!0},M.createElement("tr",{...e}))},Weeks:function(e){return M.createElement("tbody",{...e})},YearsDropdown:function(e){const{components:t}=an();return M.createElement(t.Dropdown,{...e})}},Symbol.toStringTag,{value:"Module"}));function sn(){const e={};for(const t in Lt)e[Lt[t]]=`rdp-${Lt[t]}`;for(const t in Pt)e[Pt[t]]=`rdp-${Pt[t]}`;for(const t in Bt)e[Bt[t]]=`rdp-${Bt[t]}`;for(const t in $t)e[$t[t]]=`rdp-${$t[t]}`;return e}function ln(e,t,r){return(r??new Hr(t)).format(e,"LLLL y")}const dn=ln;function cn(e,t=Zr){return t.format(e,"yyyy")}const un=cn,mn=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:ln,formatDay:function(e,t,r){return(r??new Hr(t)).format(e,"d")},formatMonthCaption:dn,formatMonthDropdown:function(e,t=Zr){return t.format(e,"LLLL")},formatWeekNumber:function(e,t=Zr){return e<10?t.formatNumber(`0${e.toLocaleString()}`):t.formatNumber(`${e.toLocaleString()}`)},formatWeekNumberHeader:function(){return""},formatWeekdayName:function(e,t,r){return(r??new Hr(t)).format(e,"cccccc")},formatYearCaption:un,formatYearDropdown:cn},Symbol.toStringTag,{value:"Module"}));function hn(e,t,r){return(r??new Hr(t)).format(e,"LLLL y")}const fn=hn;function gn(e,t,r,n){let a=(n??new Hr(r)).format(e,"PPPP");return t.today&&(a=`Today, ${a}`),t.selected&&(a=`${a}, selected`),a}const pn=gn;const xn=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:fn,labelDay:pn,labelDayButton:gn,labelGrid:hn,labelGridcell:function(e,t,r,n){let a=(n??new Hr(r)).format(e,"PPPP");return(null==t?void 0:t.today)&&(a=`Today, ${a}`),a},labelMonthDropdown:function(e){return"Choose the Month"},labelNav:function(){return""},labelNext:function(e){return"Go to the Next Month"},labelPrevious:function(e){return"Go to the Previous Month"},labelWeekNumber:function(e,t){return`Week ${e}`},labelWeekNumberHeader:function(e){return"Week Number"},labelWeekday:function(e,t,r){return(r??new Hr(t)).format(e,"cccc")},labelYearDropdown:function(e){return"Choose the Year"}},Symbol.toStringTag,{value:"Module"})),bn=e=>e instanceof HTMLElement?e:null,yn=e=>[...e.querySelectorAll("[data-animated-month]")??[]],vn=e=>bn(e.querySelector("[data-animated-caption]")),wn=e=>bn(e.querySelector("[data-animated-weeks]"));function kn(e,t,{classNames:r,months:n,focused:a,dateLib:o}){const s=k.useRef(null),i=k.useRef(n),l=k.useRef(!1);k.useLayoutEffect(()=>{const d=i.current;if(i.current=n,!(t&&e.current&&e.current instanceof HTMLElement&&0!==n.length&&0!==d.length&&n.length===d.length))return;const c=o.isSameMonth(n[0].date,d[0].date),u=o.isAfter(n[0].date,d[0].date),m=u?r[$t.caption_after_enter]:r[$t.caption_before_enter],h=u?r[$t.weeks_after_enter]:r[$t.weeks_before_enter],f=s.current,g=e.current.cloneNode(!0);if(g instanceof HTMLElement){yn(g).forEach(e=>{if(!(e instanceof HTMLElement))return;const t=bn(e.querySelector("[data-animated-month]"));t&&e.contains(t)&&e.removeChild(t);const r=vn(e);r&&r.classList.remove(m);const n=wn(e);n&&n.classList.remove(h)}),s.current=g}else s.current=null;if(l.current||c||a)return;const p=f instanceof HTMLElement?yn(f):[],x=yn(e.current);if(x&&x.every(e=>e instanceof HTMLElement)&&p&&p.every(e=>e instanceof HTMLElement)){l.current=!0,e.current.style.isolation="isolate";const t=(b=e.current,bn(b.querySelector("[data-animated-nav]")));t&&(t.style.zIndex="1"),x.forEach((n,a)=>{const o=p[a];if(!o)return;n.style.position="relative",n.style.overflow="hidden";const s=vn(n);s&&s.classList.add(m);const i=wn(n);i&&i.classList.add(h);const d=()=>{l.current=!1,e.current&&(e.current.style.isolation=""),t&&(t.style.zIndex=""),s&&s.classList.remove(m),i&&i.classList.remove(h),n.style.position="",n.style.overflow="",n.contains(o)&&n.removeChild(o)};o.style.pointerEvents="none",o.style.position="absolute",o.style.overflow="hidden",o.setAttribute("aria-hidden","true");const c=(e=>bn(e.querySelector("[data-animated-weekdays]")))(o);c&&(c.style.opacity="0");const f=vn(o);f&&(f.classList.add(u?r[$t.caption_before_exit]:r[$t.caption_after_exit]),f.addEventListener("animationend",d));const g=wn(o);g&&g.classList.add(u?r[$t.weeks_before_exit]:r[$t.weeks_after_exit]),n.insertBefore(o,n.firstChild)})}var b})}function Nn(e,t,r,n){const{month:a,defaultMonth:o,today:s=n.today(),numberOfMonths:i=1}=e;let l=a||o||s;const{differenceInCalendarMonths:d,addMonths:c,startOfMonth:u}=n;if(r&&d(r,l)<i-1){l=c(r,-1*(i-1))}return t&&d(l,t)<0&&(l=t),u(l)}function jn(e,t){const[r,n]=k.useState(e);return[void 0===t?r:t,n]}function Mn(e,t){const[r,n]=function(e,t){let{startMonth:r,endMonth:n}=e;const{startOfYear:a,startOfDay:o,startOfMonth:s,endOfMonth:i,addYears:l,endOfYear:d,newDate:c,today:u}=t,{fromYear:m,toYear:h,fromMonth:f,toMonth:g}=e;!r&&f&&(r=f),!r&&m&&(r=t.newDate(m,0,1)),!n&&g&&(n=g),!n&&h&&(n=c(h,11,31));const p="dropdown"===e.captionLayout||"dropdown-years"===e.captionLayout;return r?r=s(r):m?r=c(m,0,1):!r&&p&&(r=a(l(e.today??u(),-100))),n?n=i(n):h?n=c(h,11,31):!n&&p&&(n=d(e.today??u())),[r?o(r):r,n?o(n):n]}(e,t),{startOfMonth:a,endOfMonth:o}=t,s=Nn(e,r,n,t),[i,l]=jn(s,e.month?s:void 0);k.useEffect(()=>{const a=Nn(e,r,n,t);l(a)},[e.timeZone]);const d=function(e,t,r,n){const{numberOfMonths:a=1}=r,o=[];for(let s=0;s<a;s++){const r=n.addMonths(e,s);if(t&&r>t)break;o.push(r)}return o}(i,n,e,t),c=function(e,t,r,n){const a=e[0],o=e[e.length-1],{ISOWeek:s,fixedWeeks:i,broadcastCalendar:l}=r??{},{addDays:d,differenceInCalendarDays:c,differenceInCalendarMonths:u,endOfBroadcastWeek:m,endOfISOWeek:h,endOfMonth:f,endOfWeek:g,isAfter:p,startOfBroadcastWeek:x,startOfISOWeek:b,startOfWeek:y}=n,v=l?x(a,n):s?b(a):y(a),w=c(l?m(o):s?h(f(o)):g(f(o)),v),k=u(o,a)+1,N=[];for(let M=0;M<=w;M++){const e=d(v,M);if(t&&p(e,t))break;N.push(e)}const j=(l?35:42)*k;if(i&&N.length<j){const e=j-N.length;for(let t=0;t<e;t++){const e=d(N[N.length-1],1);N.push(e)}}return N}(d,e.endMonth?o(e.endMonth):void 0,e,t),u=function(e,t,r,n){const{addDays:a,endOfBroadcastWeek:o,endOfISOWeek:s,endOfMonth:i,endOfWeek:l,getISOWeek:d,getWeek:c,startOfBroadcastWeek:u,startOfISOWeek:m,startOfWeek:h}=n,f=e.reduce((e,f)=>{const g=r.broadcastCalendar?u(f,n):r.ISOWeek?m(f):h(f),p=r.broadcastCalendar?o(f):r.ISOWeek?s(i(f)):l(i(f)),x=t.filter(e=>e>=g&&e<=p),b=r.broadcastCalendar?35:42;if(r.fixedWeeks&&x.length<b){const e=t.filter(e=>{const t=b-x.length;return e>p&&e<=a(p,t)});x.push(...e)}const y=x.reduce((e,t)=>{const a=r.ISOWeek?d(t):c(t),o=e.find(e=>e.weekNumber===a),s=new qr(t,f,n);return o?o.days.push(s):e.push(new Ur(a,[s])),e},[]),v=new Gr(f,y);return e.push(v),e},[]);return r.reverseMonths?f.reverse():f}(d,c,e,t),m=function(e){return e.reduce((e,t)=>[...e,...t.weeks],[])}(u),h=function(e){const t=[];return e.reduce((e,r)=>[...e,...r.weeks.reduce((e,t)=>[...e,...t.days],t)],t)}(u),f=function(e,t,r,n){if(r.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:o}=r,{startOfMonth:s,addMonths:i,differenceInCalendarMonths:l}=n,d=a?o??1:1,c=s(e);return t&&l(c,t)<=0?void 0:i(c,-d)}(i,r,e,t),g=function(e,t,r,n){if(r.disableNavigation)return;const{pagedNavigation:a,numberOfMonths:o=1}=r,{startOfMonth:s,addMonths:i,differenceInCalendarMonths:l}=n,d=a?o:1,c=s(e);return t&&l(t,e)<o?void 0:i(c,d)}(i,n,e,t),{disableNavigation:p,onMonthChange:x}=e,b=e=>{if(p)return;let t=a(e);r&&t<a(r)&&(t=a(r)),n&&t>a(n)&&(t=a(n)),l(t),null==x||x(t)};return{months:u,weeks:m,days:h,navStart:r,navEnd:n,previousMonth:f,nextMonth:g,goToMonth:b,goToDay:e=>{(e=>m.some(t=>t.days.some(t=>t.isEqualTo(e))))(e)||b(e.date)}}}var Dn,Cn;function Sn(e){return!e[Pt.disabled]&&!e[Pt.hidden]&&!e[Pt.outside]}function En(e,t,r,n,a,o,s,i=0){if(i>365)return;const l=function(e,t,r,n,a,o,s){const{ISOWeek:i,broadcastCalendar:l}=o,{addDays:d,addMonths:c,addWeeks:u,addYears:m,endOfBroadcastWeek:h,endOfISOWeek:f,endOfWeek:g,max:p,min:x,startOfBroadcastWeek:b,startOfISOWeek:y,startOfWeek:v}=s;let w={day:d,week:u,month:c,year:m,startOfWeek:e=>l?b(e,s):i?y(e):v(e),endOfWeek:e=>l?h(e):i?f(e):g(e)}[e](r,"after"===t?1:-1);return"before"===t&&n?w=p([n,w]):"after"===t&&a&&(w=x([a,w])),w}(e,t,r.date,n,a,o,s),d=Boolean(o.disabled&&rn(l,o.disabled,s)),c=Boolean(o.hidden&&rn(l,o.hidden,s)),u=new qr(l,l,s);return d||c?En(e,t,u,n,a,o,s,i+1):u}function Tn(e,t,r,n,a){const{autoFocus:o}=e,[s,i]=k.useState(),l=function(e,t,r,n){let a,o=-1;for(const s of e){const e=t(s);Sn(e)&&(e[Pt.focused]&&o<Dn.FocusedModifier?(a=s,o=Dn.FocusedModifier):(null==n?void 0:n.isEqualTo(s))&&o<Dn.LastFocused?(a=s,o=Dn.LastFocused):r(s.date)&&o<Dn.Selected?(a=s,o=Dn.Selected):e[Pt.today]&&o<Dn.Today&&(a=s,o=Dn.Today))}return a||(a=e.find(e=>Sn(t(e)))),a}(t.days,r,n||(()=>!1),s),[d,c]=k.useState(o?l:void 0);return{isFocusTarget:e=>Boolean(null==l?void 0:l.isEqualTo(e)),setFocused:c,focused:d,blur:()=>{i(d),c(void 0)},moveFocus:(r,n)=>{if(!d)return;const o=En(r,n,d,t.navStart,t.navEnd,e,a);o&&(t.goToDay(o),c(o))}}}function On(e,t,r=Zr){return Vr(e,t.from,!1,r)||Vr(e,t.to,!1,r)||Vr(t,e.from,!1,r)||Vr(t,e.to,!1,r)}function Wn(e,t,r=Zr){const n=Array.isArray(t)?t:[t];if(n.filter(e=>"function"!=typeof e).some(t=>{if("boolean"==typeof t)return t;if(r.isDate(t))return Vr(e,t,!1,r);if(tn(t,r))return t.some(t=>Vr(e,t,!1,r));if(Qr(t))return!(!t.from||!t.to)&&On(e,{from:t.from,to:t.to},r);if(en(t))return function(e,t,r=Zr){const n=Array.isArray(t)?t:[t];let a=e.from;const o=r.differenceInCalendarDays(e.to,e.from),s=Math.min(o,6);for(let i=0;i<=s;i++){if(n.includes(a.getDay()))return!0;a=r.addDays(a,1)}return!1}(e,t.dayOfWeek,r);if(Xr(t)){return r.isAfter(t.before,t.after)?On(e,{from:r.addDays(t.after,1),to:r.addDays(t.before,-1)},r):rn(e.from,t,r)||rn(e.to,t,r)}return!(!Kr(t)&&!Jr(t))&&(rn(e.from,t,r)||rn(e.to,t,r))}))return!0;const a=n.filter(e=>"function"==typeof e);if(a.length){let t=e.from;const n=r.differenceInCalendarDays(e.to,e.from);for(let e=0;e<=n;e++){if(a.some(e=>e(t)))return!0;t=r.addDays(t,1)}}return!1}function Ln(e,t){const{disabled:r,excludeDisabled:n,selected:a,required:o,onSelect:s}=e,[i,l]=jn(a,s?a:void 0),d=s?a:i;return{selected:d,select:(a,i,c)=>{const{min:u,max:m}=e,h=a?function(e,t,r=0,n=0,a=!1,o=Zr){const{from:s,to:i}=t||{},{isSameDay:l,isAfter:d,isBefore:c}=o;let u;if(s||i){if(s&&!i)u=l(s,e)?a?{from:s,to:void 0}:void 0:c(e,s)?{from:e,to:s}:{from:s,to:e};else if(s&&i)if(l(s,e)&&l(i,e))u=a?{from:s,to:i}:void 0;else if(l(s,e))u={from:s,to:r>0?void 0:e};else if(l(i,e))u={from:e,to:r>0?void 0:e};else if(c(e,s))u={from:e,to:i};else if(d(e,s))u={from:s,to:e};else{if(!d(e,i))throw new Error("Invalid range");u={from:s,to:e}}}else u={from:e,to:r>0?void 0:e};if((null==u?void 0:u.from)&&(null==u?void 0:u.to)){const t=o.differenceInCalendarDays(u.to,u.from);(n>0&&t>n||r>1&&t<r)&&(u={from:e,to:void 0})}return u}(a,d,u,m,o,t):void 0;return n&&r&&(null==h?void 0:h.from)&&h.to&&Wn({from:h.from,to:h.to},r,t)&&(h.from=a,h.to=void 0),s||l(h),null==s||s(h,a,i,c),h},isSelected:e=>d&&Vr(d,e,!1,t)}}function In(e,t){const r=function(e,t){const{selected:r,required:n,onSelect:a}=e,[o,s]=jn(r,a?r:void 0),i=a?r:o,{isSameDay:l}=t;return{selected:i,select:(e,t,r)=>{let o=e;return!n&&i&&i&&l(e,i)&&(o=void 0),a||s(o),null==a||a(o,e,t,r),o},isSelected:e=>!!i&&l(i,e)}}(e,t),n=function(e,t){const{selected:r,required:n,onSelect:a}=e,[o,s]=jn(r,a?r:void 0),i=a?r:o,{isSameDay:l}=t,d=e=>(null==i?void 0:i.some(t=>l(t,e)))??!1,{min:c,max:u}=e;return{selected:i,select:(e,t,r)=>{let o=[...i??[]];if(d(e)){if((null==i?void 0:i.length)===c)return;if(n&&1===(null==i?void 0:i.length))return;o=null==i?void 0:i.filter(t=>!l(t,e))}else o=(null==i?void 0:i.length)===u?[e]:[...o,e];return a||s(o),null==a||a(o,e,t,r),o},isSelected:d}}(e,t),a=Ln(e,t);switch(e.mode){case"single":return r;case"multiple":return n;case"range":return a;default:return}}function Pn(e){var t;let r=e;r.timeZone&&(r={...e},r.today&&(r.today=new Wt(r.today,r.timeZone)),r.month&&(r.month=new Wt(r.month,r.timeZone)),r.defaultMonth&&(r.defaultMonth=new Wt(r.defaultMonth,r.timeZone)),r.startMonth&&(r.startMonth=new Wt(r.startMonth,r.timeZone)),r.endMonth&&(r.endMonth=new Wt(r.endMonth,r.timeZone)),"single"===r.mode&&r.selected?r.selected=new Wt(r.selected,r.timeZone):"multiple"===r.mode&&r.selected?r.selected=null==(t=r.selected)?void 0:t.map(e=>new Wt(e,r.timeZone)):"range"===r.mode&&r.selected&&(r.selected={from:r.selected.from?new Wt(r.selected.from,r.timeZone):void 0,to:r.selected.to?new Wt(r.selected.to,r.timeZone):void 0}));const{components:n,formatters:a,labels:o,dateLib:s,locale:i,classNames:l}=k.useMemo(()=>{const e={...hr,...r.locale};return{dateLib:new Hr({locale:e,weekStartsOn:r.broadcastCalendar?1:r.weekStartsOn,firstWeekContainsDate:r.firstWeekContainsDate,useAdditionalWeekYearTokens:r.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:r.useAdditionalDayOfYearTokens,timeZone:r.timeZone,numerals:r.numerals},r.dateLib),components:(n=r.components,{...on,...n}),formatters:(t=r.formatters,(null==t?void 0:t.formatMonthCaption)&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),(null==t?void 0:t.formatYearCaption)&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...mn,...t}),labels:{...xn,...r.labels},locale:e,classNames:{...sn(),...r.classNames}};var t,n},[r.locale,r.broadcastCalendar,r.weekStartsOn,r.firstWeekContainsDate,r.useAdditionalWeekYearTokens,r.useAdditionalDayOfYearTokens,r.timeZone,r.numerals,r.dateLib,r.components,r.formatters,r.labels,r.classNames]),{captionLayout:d,mode:c,navLayout:u,numberOfMonths:m=1,onDayBlur:h,onDayClick:f,onDayFocus:g,onDayKeyDown:p,onDayMouseEnter:x,onDayMouseLeave:b,onNextClick:y,onPrevClick:v,showWeekNumber:w,styles:N}=r,{formatCaption:j,formatDay:D,formatMonthDropdown:C,formatWeekNumber:S,formatWeekNumberHeader:E,formatWeekdayName:T,formatYearDropdown:O}=a,W=Mn(r,s),{days:L,months:I,navStart:P,navEnd:R,previousMonth:B,nextMonth:A,goToMonth:$}=W,F=function(e,t,r,n,a){const{disabled:o,hidden:s,modifiers:i,showOutsideDays:l,broadcastCalendar:d,today:c}=t,{isSameDay:u,isSameMonth:m,startOfMonth:h,isBefore:f,endOfMonth:g,isAfter:p}=a,x=r&&h(r),b=n&&g(n),y={[Pt.focused]:[],[Pt.outside]:[],[Pt.disabled]:[],[Pt.hidden]:[],[Pt.today]:[]},v={};for(const w of e){const{date:e,displayMonth:t}=w,r=Boolean(t&&!m(e,t)),n=Boolean(x&&f(e,x)),h=Boolean(b&&p(e,b)),g=Boolean(o&&rn(e,o,a)),k=Boolean(s&&rn(e,s,a))||n||h||!d&&!l&&r||d&&!1===l&&r,N=u(e,c??a.today());r&&y.outside.push(w),g&&y.disabled.push(w),k&&y.hidden.push(w),N&&y.today.push(w),i&&Object.keys(i).forEach(t=>{const r=null==i?void 0:i[t];r&&rn(e,r,a)&&(v[t]?v[t].push(w):v[t]=[w])})}return e=>{const t={[Pt.focused]:!1,[Pt.disabled]:!1,[Pt.hidden]:!1,[Pt.outside]:!1,[Pt.today]:!1},r={};for(const n in y){const r=y[n];t[n]=r.some(t=>t===e)}for(const n in v)r[n]=v[n].some(t=>t===e);return{...t,...r}}}(L,r,P,R,s),{isSelected:_,select:z,selected:Y}=In(r,s)??{},{blur:H,focused:Z,isFocusTarget:q,moveFocus:G,setFocused:U}=Tn(r,W,F,_??(()=>!1),s),{labelDayButton:V,labelGridcell:X,labelGrid:Q,labelMonthDropdown:K,labelNav:J,labelPrevious:ee,labelNext:te,labelWeekday:re,labelWeekNumber:ne,labelWeekNumberHeader:ae,labelYearDropdown:oe}=o,se=k.useMemo(()=>function(e,t){const r=e.today(),n=t?e.startOfISOWeek(r):e.startOfWeek(r),a=[];for(let o=0;o<7;o++){const t=e.addDays(n,o);a.push(t)}return a}(s,r.ISOWeek),[s,r.ISOWeek]),ie=void 0!==c||void 0!==f,le=k.useCallback(()=>{B&&($(B),null==v||v(B))},[B,$,v]),de=k.useCallback(()=>{A&&($(A),null==y||y(A))},[$,A,y]),ce=k.useCallback((e,t)=>r=>{r.preventDefault(),r.stopPropagation(),U(e),null==z||z(e.date,t,r),null==f||f(e.date,t,r)},[z,f,U]),ue=k.useCallback((e,t)=>r=>{U(e),null==g||g(e.date,t,r)},[g,U]),me=k.useCallback((e,t)=>r=>{H(),null==h||h(e.date,t,r)},[H,h]),he=k.useCallback((e,t)=>n=>{const a={ArrowLeft:[n.shiftKey?"month":"day","rtl"===r.dir?"after":"before"],ArrowRight:[n.shiftKey?"month":"day","rtl"===r.dir?"before":"after"],ArrowDown:[n.shiftKey?"year":"week","after"],ArrowUp:[n.shiftKey?"year":"week","before"],PageUp:[n.shiftKey?"year":"month","before"],PageDown:[n.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(a[n.key]){n.preventDefault(),n.stopPropagation();const[e,t]=a[n.key];G(e,t)}null==p||p(e.date,t,n)},[G,p,r.dir]),fe=k.useCallback((e,t)=>r=>{null==x||x(e.date,t,r)},[x]),ge=k.useCallback((e,t)=>r=>{null==b||b(e.date,t,r)},[b]),pe=k.useCallback(e=>t=>{const r=Number(t.target.value),n=s.setMonth(s.startOfMonth(e),r);$(n)},[s,$]),xe=k.useCallback(e=>t=>{const r=Number(t.target.value),n=s.setYear(s.startOfMonth(e),r);$(n)},[s,$]),{className:be,style:ye}=k.useMemo(()=>({className:[l[Lt.Root],r.className].filter(Boolean).join(" "),style:{...null==N?void 0:N[Lt.Root],...r.style}}),[l,r.className,r.style,N]),ve=function(e){const t={"data-mode":e.mode??void 0,"data-required":"required"in e?e.required:void 0,"data-multiple-months":e.numberOfMonths&&e.numberOfMonths>1||void 0,"data-week-numbers":e.showWeekNumber||void 0,"data-broadcast-calendar":e.broadcastCalendar||void 0,"data-nav-layout":e.navLayout||void 0};return Object.entries(e).forEach(([e,r])=>{e.startsWith("data-")&&(t[e]=r)}),t}(r),we=k.useRef(null);kn(we,Boolean(r.animate),{classNames:l,months:I,focused:Z,dateLib:s});const ke={dayPickerProps:r,selected:Y,select:z,isSelected:_,months:I,nextMonth:A,previousMonth:B,goToMonth:$,getModifiers:F,components:n,classNames:l,styles:N,labels:o,formatters:a};return M.createElement(nn.Provider,{value:ke},M.createElement(n.Root,{rootRef:r.animate?we:void 0,className:be,style:ye,dir:r.dir,id:r.id,lang:r.lang,nonce:r.nonce,title:r.title,role:r.role,"aria-label":r["aria-label"],...ve},M.createElement(n.Months,{className:l[Lt.Months],style:null==N?void 0:N[Lt.Months]},!r.hideNavigation&&!u&&M.createElement(n.Nav,{"data-animated-nav":r.animate?"true":void 0,className:l[Lt.Nav],style:null==N?void 0:N[Lt.Nav],"aria-label":J(),onPreviousClick:le,onNextClick:de,previousMonth:B,nextMonth:A}),I.map((e,t)=>{const o=function(e,t,r,n,a){const{startOfMonth:o,startOfYear:s,endOfYear:i,eachMonthOfInterval:l,getMonth:d}=a;return l({start:s(e),end:i(e)}).map(e=>{const s=n.formatMonthDropdown(e,a);return{value:d(e),label:s,disabled:t&&e<o(t)||r&&e>o(r)||!1}})}(e.date,P,R,a,s),h=function(e,t,r,n){if(!e)return;if(!t)return;const{startOfYear:a,endOfYear:o,addYears:s,getYear:i,isBefore:l,isSameYear:d}=n,c=a(e),u=o(t),m=[];let h=c;for(;l(h,u)||d(h,u);)m.push(h),h=s(h,1);return m.map(e=>{const t=r.formatYearDropdown(e,n);return{value:i(e),label:t,disabled:!1}})}(P,R,a,s);return M.createElement(n.Month,{"data-animated-month":r.animate?"true":void 0,className:l[Lt.Month],style:null==N?void 0:N[Lt.Month],key:t,displayIndex:t,calendarMonth:e},"around"===u&&!r.hideNavigation&&0===t&&M.createElement(n.PreviousMonthButton,{type:"button",className:l[Lt.PreviousMonthButton],tabIndex:B?void 0:-1,"aria-disabled":!B||void 0,"aria-label":ee(B),onClick:le,"data-animated-button":r.animate?"true":void 0},M.createElement(n.Chevron,{disabled:!B||void 0,className:l[Lt.Chevron],orientation:"rtl"===r.dir?"right":"left"})),M.createElement(n.MonthCaption,{"data-animated-caption":r.animate?"true":void 0,className:l[Lt.MonthCaption],style:null==N?void 0:N[Lt.MonthCaption],calendarMonth:e,displayIndex:t},(null==d?void 0:d.startsWith("dropdown"))?M.createElement(n.DropdownNav,{className:l[Lt.Dropdowns],style:null==N?void 0:N[Lt.Dropdowns]},"dropdown"===d||"dropdown-months"===d?M.createElement(n.MonthsDropdown,{className:l[Lt.MonthsDropdown],"aria-label":K(),classNames:l,components:n,disabled:Boolean(r.disableNavigation),onChange:pe(e.date),options:o,style:null==N?void 0:N[Lt.Dropdown],value:s.getMonth(e.date)}):M.createElement("span",null,C(e.date,s)),"dropdown"===d||"dropdown-years"===d?M.createElement(n.YearsDropdown,{className:l[Lt.YearsDropdown],"aria-label":oe(s.options),classNames:l,components:n,disabled:Boolean(r.disableNavigation),onChange:xe(e.date),options:h,style:null==N?void 0:N[Lt.Dropdown],value:s.getYear(e.date)}):M.createElement("span",null,O(e.date,s)),M.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},j(e.date,s.options,s))):M.createElement(n.CaptionLabel,{className:l[Lt.CaptionLabel],role:"status","aria-live":"polite"},j(e.date,s.options,s))),"around"===u&&!r.hideNavigation&&t===m-1&&M.createElement(n.NextMonthButton,{type:"button",className:l[Lt.NextMonthButton],tabIndex:A?void 0:-1,"aria-disabled":!A||void 0,"aria-label":te(A),onClick:de,"data-animated-button":r.animate?"true":void 0},M.createElement(n.Chevron,{disabled:!A||void 0,className:l[Lt.Chevron],orientation:"rtl"===r.dir?"left":"right"})),t===m-1&&"after"===u&&!r.hideNavigation&&M.createElement(n.Nav,{"data-animated-nav":r.animate?"true":void 0,className:l[Lt.Nav],style:null==N?void 0:N[Lt.Nav],"aria-label":J(),onPreviousClick:le,onNextClick:de,previousMonth:B,nextMonth:A}),M.createElement(n.MonthGrid,{role:"grid","aria-multiselectable":"multiple"===c||"range"===c,"aria-label":Q(e.date,s.options,s)||void 0,className:l[Lt.MonthGrid],style:null==N?void 0:N[Lt.MonthGrid]},!r.hideWeekdays&&M.createElement(n.Weekdays,{"data-animated-weekdays":r.animate?"true":void 0,className:l[Lt.Weekdays],style:null==N?void 0:N[Lt.Weekdays]},w&&M.createElement(n.WeekNumberHeader,{"aria-label":ae(s.options),className:l[Lt.WeekNumberHeader],style:null==N?void 0:N[Lt.WeekNumberHeader],scope:"col"},E()),se.map((e,t)=>M.createElement(n.Weekday,{"aria-label":re(e,s.options,s),className:l[Lt.Weekday],key:t,style:null==N?void 0:N[Lt.Weekday],scope:"col"},T(e,s.options,s)))),M.createElement(n.Weeks,{"data-animated-weeks":r.animate?"true":void 0,className:l[Lt.Weeks],style:null==N?void 0:N[Lt.Weeks]},e.weeks.map((e,t)=>M.createElement(n.Week,{className:l[Lt.Week],key:e.weekNumber,style:null==N?void 0:N[Lt.Week],week:e},w&&M.createElement(n.WeekNumber,{week:e,style:null==N?void 0:N[Lt.WeekNumber],"aria-label":ne(e.weekNumber,{locale:i}),className:l[Lt.WeekNumber],scope:"row",role:"rowheader"},S(e.weekNumber,s)),e.days.map(e=>{const{date:t}=e,a=F(e);if(a[Pt.focused]=!a.hidden&&Boolean(null==Z?void 0:Z.isEqualTo(e)),a[Bt.selected]=(null==_?void 0:_(t))||a.selected,Qr(Y)){const{from:e,to:r}=Y;a[Bt.range_start]=Boolean(e&&r&&s.isSameDay(t,e)),a[Bt.range_end]=Boolean(e&&r&&s.isSameDay(t,r)),a[Bt.range_middle]=Vr(Y,t,!0,s)}const o=function(e,t={},r={}){let n={...null==t?void 0:t[Lt.Day]};return Object.entries(e).filter(([,e])=>!0===e).forEach(([e])=>{n={...n,...null==r?void 0:r[e]}}),n}(a,N,r.modifiersStyles),i=function(e,t,r={}){return Object.entries(e).filter(([,e])=>!0===e).reduce((e,[n])=>(r[n]?e.push(r[n]):t[Pt[n]]?e.push(t[Pt[n]]):t[Bt[n]]&&e.push(t[Bt[n]]),e),[t[Lt.Day]])}(a,l,r.modifiersClassNames),d=ie||a.hidden?void 0:X(t,a,s.options,s);return M.createElement(n.Day,{key:`${s.format(t,"yyyy-MM-dd")}_${s.format(e.displayMonth,"yyyy-MM")}`,day:e,modifiers:a,className:i.join(" "),style:o,role:"gridcell","aria-selected":a.selected||void 0,"aria-label":d,"data-day":s.format(t,"yyyy-MM-dd"),"data-month":e.outside?s.format(t,"yyyy-MM"):void 0,"data-selected":a.selected||void 0,"data-disabled":a.disabled||void 0,"data-hidden":a.hidden||void 0,"data-outside":e.outside||void 0,"data-focused":a.focused||void 0,"data-today":a.today||void 0},!a.hidden&&ie?M.createElement(n.DayButton,{className:l[Lt.DayButton],style:null==N?void 0:N[Lt.DayButton],type:"button",day:e,modifiers:a,disabled:a.disabled||void 0,tabIndex:q(e)?0:-1,"aria-label":V(t,a,s.options,s),onClick:ce(e,a),onBlur:me(e,a),onFocus:ue(e,a),onKeyDown:he(e,a),onMouseEnter:fe(e,a),onMouseLeave:ge(e,a)},D(t,s.options,s)):!a.hidden&&D(e.date,s.options,s))}))))))})),r.footer&&M.createElement(n.Footer,{className:l[Lt.Footer],style:null==N?void 0:N[Lt.Footer],role:"status","aria-live":"polite"},r.footer)))}(Cn=Dn||(Dn={}))[Cn.Today=0]="Today",Cn[Cn.Selected=1]="Selected",Cn[Cn.LastFocused=2]="LastFocused",Cn[Cn.FocusedModifier=3]="FocusedModifier";const Rn={lessThanXSeconds:{one:"1秒未満",other:"{{count}}秒未満",oneWithSuffix:"約1秒",otherWithSuffix:"約{{count}}秒"},xSeconds:{one:"1秒",other:"{{count}}秒"},halfAMinute:"30秒",lessThanXMinutes:{one:"1分未満",other:"{{count}}分未満",oneWithSuffix:"約1分",otherWithSuffix:"約{{count}}分"},xMinutes:{one:"1分",other:"{{count}}分"},aboutXHours:{one:"約1時間",other:"約{{count}}時間"},xHours:{one:"1時間",other:"{{count}}時間"},xDays:{one:"1日",other:"{{count}}日"},aboutXWeeks:{one:"約1週間",other:"約{{count}}週間"},xWeeks:{one:"1週間",other:"{{count}}週間"},aboutXMonths:{one:"約1か月",other:"約{{count}}か月"},xMonths:{one:"1か月",other:"{{count}}か月"},aboutXYears:{one:"約1年",other:"約{{count}}年"},xYears:{one:"1年",other:"{{count}}年"},overXYears:{one:"1年以上",other:"{{count}}年以上"},almostXYears:{one:"1年近く",other:"{{count}}年近く"}},Bn={date:ir({formats:{full:"y年M月d日EEEE",long:"y年M月d日",medium:"y/MM/dd",short:"y/MM/dd"},defaultWidth:"full"}),time:ir({formats:{full:"H時mm分ss秒 zzzz",long:"H:mm:ss z",medium:"H:mm:ss",short:"H:mm"},defaultWidth:"full"}),dateTime:ir({formats:{full:"{{date}} {{time}}",long:"{{date}} {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},defaultWidth:"full"})},An={lastWeek:"先週のeeeeのp",yesterday:"昨日のp",today:"今日のp",tomorrow:"明日のp",nextWeek:"翌週のeeeeのp",other:"P"},$n={code:"ja",formatDistance:(e,t,r)=>{let n;r=r||{};const a=Rn[e];return n="string"==typeof a?a:1===t?r.addSuffix&&a.oneWithSuffix?a.oneWithSuffix:a.one:r.addSuffix&&a.otherWithSuffix?a.otherWithSuffix.replace("{{count}}",String(t)):a.other.replace("{{count}}",String(t)),r.addSuffix?r.comparison&&r.comparison>0?n+"後":n+"前":n},formatLong:Bn,formatRelative:(e,t,r,n)=>An[e],localize:{ordinalNumber:(e,t)=>{const r=Number(e);switch(String(null==t?void 0:t.unit)){case"year":return`${r}年`;case"quarter":return`第${r}四半期`;case"month":return`${r}月`;case"week":return`第${r}週`;case"date":return`${r}日`;case"hour":return`${r}時`;case"minute":return`${r}分`;case"second":return`${r}秒`;default:return`${r}`}},era:cr({values:{narrow:["BC","AC"],abbreviated:["紀元前","西暦"],wide:["紀元前","西暦"]},defaultWidth:"wide"}),quarter:cr({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["第1四半期","第2四半期","第3四半期","第4四半期"]},defaultWidth:"wide",argumentCallback:e=>Number(e)-1}),month:cr({values:{narrow:["1","2","3","4","5","6","7","8","9","10","11","12"],abbreviated:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],wide:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"]},defaultWidth:"wide"}),day:cr({values:{narrow:["日","月","火","水","木","金","土"],short:["日","月","火","水","木","金","土"],abbreviated:["日","月","火","水","木","金","土"],wide:["日曜日","月曜日","火曜日","水曜日","木曜日","金曜日","土曜日"]},defaultWidth:"wide"}),dayPeriod:cr({values:{narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},defaultWidth:"wide",formattingValues:{narrow:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},abbreviated:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"},wide:{am:"午前",pm:"午後",midnight:"深夜",noon:"正午",morning:"朝",afternoon:"午後",evening:"夜",night:"深夜"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:mr({matchPattern:/^第?\d+(年|四半期|月|週|日|時|分|秒)?/i,parsePattern:/\d+/i,valueCallback:function(e){return parseInt(e,10)}}),era:ur({matchPatterns:{narrow:/^(B\.?C\.?|A\.?D\.?)/i,abbreviated:/^(紀元[前後]|西暦)/i,wide:/^(紀元[前後]|西暦)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^B/i,/^A/i],any:[/^(紀元前)/i,/^(西暦|紀元後)/i]},defaultParseWidth:"any"}),quarter:ur({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^Q[1234]/i,wide:/^第[1234一二三四１２３４]四半期/i},defaultMatchWidth:"wide",parsePatterns:{any:[/(1|一|１)/i,/(2|二|２)/i,/(3|三|３)/i,/(4|四|４)/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:ur({matchPatterns:{narrow:/^([123456789]|1[012])/,abbreviated:/^([123456789]|1[012])月/i,wide:/^([123456789]|1[012])月/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^1\D/,/^2/,/^3/,/^4/,/^5/,/^6/,/^7/,/^8/,/^9/,/^10/,/^11/,/^12/]},defaultParseWidth:"any"}),day:ur({matchPatterns:{narrow:/^[日月火水木金土]/,short:/^[日月火水木金土]/,abbreviated:/^[日月火水木金土]/,wide:/^[日月火水木金土]曜日/},defaultMatchWidth:"wide",parsePatterns:{any:[/^日/,/^月/,/^火/,/^水/,/^木/,/^金/,/^土/]},defaultParseWidth:"any"}),dayPeriod:ur({matchPatterns:{any:/^(AM|PM|午前|午後|正午|深夜|真夜中|夜|朝)/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^(A|午前)/i,pm:/^(P|午後)/i,midnight:/^深夜|真夜中/i,noon:/^正午/i,morning:/^朝/i,afternoon:/^午後/i,evening:/^夜/i,night:/^深夜/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}},Fn=k.memo(({isOpen:e,onClose:t,selectedDate:n,onSelect:a,onCenterScroll:o,isRecorded:s})=>{if(!e)return null;return r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/30 backdrop-blur-sm",role:"dialog","aria-modal":"true",onClick:e=>{e.target===e.currentTarget&&t()},children:r.jsxs("div",{className:"bg-white/90 dark:bg-gray-800/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-gray-200/50 dark:border-gray-700/50 pt-8 p-4 sm:pt-10 sm:p-6 w-[95vw] max-w-md relative",onClick:e=>e.stopPropagation(),children:[r.jsx("button",{type:"button",onClick:t,className:"absolute top-0 right-0 m-2 text-gray-400 hover:text-gray-700 dark:hover:text-gray-200 bg-transparent shadow-none border-none rounded-full transition-colors focus:outline-none hover:bg-gray-200/60 dark:hover:bg-white/10","aria-label":"閉じる",children:r.jsx("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:r.jsx("path",{stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",d:"M6 6l12 12M6 18L18 6"})})}),r.jsx(Pn,{mode:"single",selected:n,locale:$n,weekStartsOn:0,onSelect:e=>{e&&(a(e),o(),t())},formatters:{formatCaption:e=>`${e.getFullYear()}年${e.getMonth()+1}月`},modifiers:{recorded:e=>!!s&&s(e),today:e=>{const t=new Date;return e.toDateString()===t.toDateString()}},modifiersClassNames:{recorded:"relative after:absolute after:bottom-0.5 after:left-1/2 after:-translate-x-1/2 after:w-1.5 after:h-1.5 after:bg-green-500 after:rounded-full",today:"ring-2 ring-blue-400 ring-offset-1"},classNames:{...sn(),root:`${sn().root} dark:text-gray-100`,caption_label:`${sn().caption_label} text-lg font-medium text-gray-900 dark:text-gray-100`,nav:`${sn().nav||""} border border-gray-200 dark:border-gray-700 bg-transparent hover:bg-gray-100 dark:hover:bg-gray-800`,day:`${sn().day} hover:bg-blue-50 dark:hover:bg-blue-900/30`,selected:`${sn().selected||""} bg-gradient-to-br from-blue-500 to-blue-600 text-white shadow-lg hover:from-blue-600 hover:to-blue-700 dark:from-blue-400 dark:to-blue-500`,today:`${sn().today||""} bg-gradient-to-br from-gray-100 to-gray-200 text-gray-900 dark:from-gray-700 dark:to-gray-800 dark:text-gray-100 font-semibold`,outside:`${sn().outside||""} text-gray-400 opacity-50 dark:text-gray-600`,disabled:`${sn().disabled||""} text-gray-400 opacity-50 dark:text-gray-600`},components:{Chevron:({orientation:e,...t})=>"left"===e?r.jsx("span",{className:"text-2xl text-blue-500 dark:text-blue-300",...t,children:"◀"}):r.jsx("span",{className:"text-2xl text-blue-500 dark:text-blue-300",...t,children:"▶"})}})]})})},(e,t)=>e.isOpen===t.isOpen&&e.selectedDate.getTime()===t.selectedDate.getTime()&&e.onClose===t.onClose&&e.onSelect===t.onSelect&&e.onCenterScroll===t.onCenterScroll&&e.isRecorded===t.isRecorded),_n=({selectedDate:e,setSelectedDate:t,centerDate:n,setCenterDate:a,today:o=pt(),isRecorded:s,getDateStatus:i})=>{const[l,d]=k.useState(!1),{dateRange:c,lastEdgeRef:u,prevWidthRef:m,expandRange:h}=yt(n),{containerRef:f}=vt({onScrollEdge:h}),{touchRef:g}=(({setCenterDate:e})=>{const t=k.useRef(null),r=k.useRef({startX:null,startY:null}),n=k.useCallback(e=>{const t=e.touches[0];r.current={startX:t.clientX,startY:t.clientY}},[]),a=k.useCallback(t=>{const{startX:n,startY:a}=r.current;if(null===n||null===a)return;const o=t.changedTouches[0],s=o.clientX-n,i=o.clientY-a;if(Math.abs(s)>Math.abs(i)&&Math.abs(s)>ct){const t=new Date,r=new Date(t);s<0?r.setDate(t.getDate()+1):r.setDate(t.getDate()-1),e(r)}r.current={startX:null,startY:null}},[e]);return k.useEffect(()=>{const e=t.current;if(e)return e.addEventListener("touchstart",n,{passive:!0}),e.addEventListener("touchend",a,{passive:!0}),()=>{e.removeEventListener("touchstart",n),e.removeEventListener("touchend",a)}},[n,a]),{touchRef:t}})({setCenterDate:a}),{requestCenterScroll:p}=(({centerDate:e,containerRef:t})=>{const[r,n]=k.useState(!1);k.useEffect(()=>{n(!0)},[]);const a=k.useCallback(()=>{const a=t.current;if(!a||!r)return;let o=0;const s=()=>{const t=a.querySelector(`button[data-date='${nt(e)}']`);if(t){const e=(r=a.getBoundingClientRect(),(i=t.getBoundingClientRect()).left+i.width/2-(r.left+r.width/2));a.scrollBy({left:e,behavior:"smooth"}),n(!1)}else o<ut?(o++,setTimeout(s,mt)):n(!1);var r,i};s()},[e,t,r]);return k.useEffect(()=>{a()},[a]),{requestCenterScroll:k.useCallback(()=>{n(!0)},[])}})({centerDate:n,containerRef:f});(({containerRef:e,lastEdgeRef:t,prevWidthRef:r,dateRange:n})=>{k.useLayoutEffect(()=>{const n=e.current;if(!n||!t.current)return;const a=r.current??0,o=n.scrollWidth-a;"left"===t.current&&o>0&&(n.scrollLeft+=o),t.current&&(t.current=null)},[e,t,r,n])})({containerRef:f,lastEdgeRef:u,prevWidthRef:m,dateRange:c});const x=k.useMemo(()=>((e,t)=>{const r=[],n=new Date(e);for(;n<=t;)r.push(new Date(n)),n.setDate(n.getDate()+1);return r})(c.minDate,c.maxDate),[c.minDate,c.maxDate]),b=k.useMemo(()=>bt(x,e,n,o,i,s),[x,e,n,o,i,s]),y=k.useCallback(e=>{t(e)},[t]),v=k.useCallback(e=>{t(e),a(e),p()},[t,a,p]),w=k.useCallback(()=>d(!0),[]),N=k.useCallback(()=>d(!1),[]);return r.jsxs("div",{"data-testid":"date-picker",children:[r.jsxs("div",{ref:g,className:"w-full flex items-center justify-center pt-2 pb-2 bg-white/80 dark:bg-gray-900/80 shadow-md sticky top-0 z-10",children:[r.jsx("button",{type:"button",onClick:w,className:"ml-2 mr-1 flex items-center justify-center w-12 h-12 rounded-full border-2 border-blue-400 bg-white dark:bg-gray-800 hover:bg-blue-100 dark:hover:bg-blue-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-400","aria-label":"カレンダーを開く",children:r.jsx(Re,{className:"w-7 h-7 text-blue-600 dark:text-blue-400"})}),r.jsxs("div",{ref:f,className:"flex-1 flex gap-1 mx-1 overflow-x-auto justify-center scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none",scrollSnapType:"x mandatory",WebkitOverflowScrolling:"touch"},children:[r.jsx("style",{children:"\n            .scrollbar-hide::-webkit-scrollbar, \n            .scrollbar-none::-webkit-scrollbar, \n            .scrollbar-fake::-webkit-scrollbar {\n              display: none !important;\n            }\n          "}),b.map(e=>r.jsxs(M.Fragment,{children:[e.showMonth&&r.jsx(kt,{date:e.date}),r.jsx(wt,{dateItem:e,onSelect:y})]},`${e.date.getTime()}`))]})]}),r.jsx(Fn,{isOpen:l,onClose:N,selectedDate:e,onSelect:v,onCenterScroll:p,isRecorded:s})]})},zn=k.memo(function({value:e,onChange:t,placeholder:n,step:a="0.1",min:o,max:s,width:i="md",className:l="",disabled:d=!1,"data-testid":c}){const u=((e="md")=>{switch(e){case"sm":return"w-16";case"md":default:return"w-20";case"lg":return"w-24"}})(i);return r.jsx("input",{type:"number",className:`h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-lg font-mono font-semibold bg-inherit text-gray-700 dark:text-gray-200 placeholder:font-normal placeholder:text-sm placeholder-gray-400 ${u} ${l}`,value:e,onChange:e=>t(e.target.value),placeholder:n,step:a,min:o,max:s,disabled:d,"data-testid":c})});function Yn(e){return W({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"},child:[]}]})(e)}function Hn(e){return W({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 2v11h3v9l7-12h-4l4-8z"},child:[]}]})(e)}function Zn(e){return W({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 17h1m16 0h1m-15.4 -6.4l.7 .7m12.1 -.7l-.7 .7m-9.7 5.7a4 4 0 0 1 8 0"},child:[]},{tag:"path",attr:{d:"M3 21l18 0"},child:[]},{tag:"path",attr:{d:"M12 9v-6l3 3m-6 0l3 -3"},child:[]}]})(e)}const qn=k.memo(function({value:e,onChange:t,className:n=""}){return r.jsxs("div",{className:`flex gap-2 ${n}`,children:[r.jsx("input",{type:"time",className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-base bg-inherit text-gray-700 dark:text-gray-200 w-[6.5em]",value:e,onChange:e=>t(e.target.value)}),r.jsx("button",{type:"button",className:"h-10 px-3 rounded-xl bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-300/20 dark:hover:bg-yellow-300/40 border border-yellow-300 text-yellow-500 dark:text-yellow-200 focus:outline-none focus:ring-2 focus:ring-yellow-400 shadow flex items-center justify-center transition-colors duration-150",title:"朝7時にセット","aria-label":"朝7時にセット",onClick:()=>{t("07:00")},children:r.jsx(Zn,{className:"w-6 h-6"})}),r.jsx("button",{type:"button",className:"h-10 px-3 rounded-xl bg-yellow-100 hover:bg-yellow-200 dark:bg-yellow-300/20 dark:hover:bg-yellow-300/40 border border-yellow-300 text-yellow-500 dark:text-yellow-200 focus:outline-none focus:ring-2 focus:ring-yellow-400 shadow flex items-center justify-center transition-colors duration-150",title:"現在時刻にセット","aria-label":"現在時刻にセット",onClick:()=>{t((()=>{const e=new Date;return`${String(e.getHours()).padStart(2,"0")}:${String(e.getMinutes()).padStart(2,"0")}`})())},children:r.jsx(Hn,{className:"w-6 h-6"})})]})}),Gn=!1,Un={enableRenderTracking:!0,enableMemoryTracking:!0,enableInteractionTracking:!0,enableDatabaseTracking:!0,sampleRate:.1,reportInterval:3e4};const Vn=new class{constructor(e=Un){t(this,"metrics",[]),t(this,"maxMetrics",1e3),t(this,"config"),this.config=e}addMetric(e){Math.random()>this.config.sampleRate||(this.metrics.push({...e,timestamp:Date.now()}),this.metrics.length>this.maxMetrics&&(this.metrics=this.metrics.slice(-this.maxMetrics)))}getMetrics(){return[...this.metrics]}getAverageMetrics(e=3e5){const t=Date.now(),r=this.metrics.filter(r=>r.timestamp>t-e);if(0===r.length)return{};const n=r.reduce((e,t)=>({renderTime:e.renderTime+t.renderTime,componentCount:e.componentCount+t.componentCount,reRenderCount:e.reRenderCount+t.reRenderCount,loadTime:e.loadTime+t.loadTime,interactionToNext:e.interactionToNext+t.interactionToNext,inputDelay:e.inputDelay+t.inputDelay,dbOperationTime:e.dbOperationTime+t.dbOperationTime,recordCount:e.recordCount+t.recordCount}),{renderTime:0,componentCount:0,reRenderCount:0,loadTime:0,interactionToNext:0,inputDelay:0,dbOperationTime:0,recordCount:0}),a=r.length;return{renderTime:n.renderTime/a,componentCount:n.componentCount/a,reRenderCount:n.reRenderCount/a,loadTime:n.loadTime/a,interactionToNext:n.interactionToNext/a,inputDelay:n.inputDelay/a,dbOperationTime:n.dbOperationTime/a,recordCount:n.recordCount/a}}clearMetrics(){this.metrics=[]}};class Xn{constructor(){t(this,"renderStartTimes",new Map),t(this,"componentCounts",new Map),t(this,"reRenderCounts",new Map)}startRender(e){}endRender(e){}trackReRender(e,t){}getStats(){const e={};for(const[t,r]of this.componentCounts)e[t]={count:r,reRenders:this.reRenderCounts.get(t)||0};return e}clearStats(){this.renderStartTimes.clear(),this.componentCounts.clear(),this.reRenderCounts.clear()}}class Qn{constructor(){t(this,"lastMemoryCheck",0),t(this,"memoryCheckInterval",5e3)}getCurrentMemoryUsage(){try{if("undefined"!=typeof performance&&"memory"in performance){const e=performance.memory;if(e)return{used:Math.round(e.usedJSHeapSize/1024/1024),total:Math.round(e.totalJSHeapSize/1024/1024),limit:Math.round(e.jsHeapSizeLimit/1024/1024)}}}catch(e){}return null}checkMemoryUsage(){const e=Date.now();if(e-this.lastMemoryCheck<this.memoryCheckInterval)return;this.lastMemoryCheck=e;const t=this.getCurrentMemoryUsage();if(t){const e=t.used/t.limit*100;e>80&&(t.used,e.toFixed(1))}}startMemoryMonitoring(){}}class Kn{constructor(){t(this,"operationStartTimes",new Map)}startOperation(e,t){this.operationStartTimes.set(e,performance.now())}endOperation(e,t,r){const n=this.operationStartTimes.get(e);if(n){const t=performance.now()-n;return this.operationStartTimes.delete(e),t>100&&t.toFixed(2),t.toFixed(2),t}return 0}}class Jn{constructor(){t(this,"interactionStartTimes",new Map)}startInteraction(e){const t=`${e}-${Date.now()}`;return this.interactionStartTimes.set(t,performance.now()),t}endInteraction(e,t){const r=this.interactionStartTimes.get(e);if(r){const t=performance.now()-r;return this.interactionStartTimes.delete(e),t>100&&t.toFixed(2),t.toFixed(2),t}return 0}}const ea=new class{constructor(e=Un){t(this,"renderTracker",new Xn),t(this,"memoryTracker",new Qn),t(this,"dbTracker",new Kn),t(this,"interactionTracker",new Jn),t(this,"config"),t(this,"reportingInterval"),t(this,"trackRender",{start:e=>{this.config.enableRenderTracking&&this.renderTracker.startRender(e)},end:e=>{this.config.enableRenderTracking&&this.renderTracker.endRender(e)},reRender:(e,t)=>{this.config.enableRenderTracking&&this.renderTracker.trackReRender(e,t)}}),t(this,"trackDatabase",{start:(e,t)=>{this.config.enableDatabaseTracking&&this.dbTracker.startOperation(e,t)},end:(e,t,r)=>this.config.enableDatabaseTracking?this.dbTracker.endOperation(e,t,r):0}),t(this,"trackInteraction",{start:e=>this.config.enableInteractionTracking?this.interactionTracker.startInteraction(e):"",end:(e,t)=>this.config.enableInteractionTracking?this.interactionTracker.endInteraction(e,t):0}),this.config=e}startMonitoring(){this.config.enableMemoryTracking&&this.memoryTracker.startMemoryMonitoring()}stopMonitoring(){this.reportingInterval&&(clearInterval(this.reportingInterval),this.reportingInterval=void 0)}getMetrics(){return Vn.getMetrics()}clearMetrics(){Vn.clearMetrics(),this.renderTracker.clearStats()}updateConfig(e){this.config={...this.config,...e}}},ta="goal",ra="weight_records",na="bp_records",aa="daily_records",oa="daily_fields";var sa=(e=>(e.CONNECTION_FAILED="connection_failed",e.TRANSACTION_FAILED="transaction_failed",e.DATA_CORRUPTED="data_corrupted",e.QUOTA_EXCEEDED="quota_exceeded",e.VERSION_ERROR="version_error",e.UNKNOWN="unknown",e))(sa||{});class ia extends Error{constructor(e,t,r,n=!0){super(t),this.type=e,this.originalError=r,this.retryable=n,this.name="DbError"}}async function la(e,t,r){const n=`${e}-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;ea.trackDatabase.start(n,e);try{const a=await t();ea.trackDatabase.end(n,e,r);return a}catch(a){throw ea.trackDatabase.end(n,e,r),a}}function da(e){if(e instanceof ia)return e;if(e instanceof DOMException)switch(e.name){case"QuotaExceededError":return new ia("quota_exceeded","ストレージ容量が不足しています",e,!1);case"VersionError":return new ia("version_error","データベースのバージョンが競合しています",e,!1);case"InvalidStateError":case"TransactionInactiveError":return new ia("transaction_failed","データベーストランザクションが失敗しました",e);case"DataError":case"ConstraintError":return new ia("data_corrupted","データが破損しているか、制約違反です",e,!1);default:return new ia("unknown",`データベースエラー: ${e.message}`,e)}return new ia("connection_failed","データベース接続に失敗しました",e)}async function ca(e,t=3,r=1e3){let n;for(let o=1;o<=t;o++)try{return await e()}catch(a){if(n=da(a),!n.retryable)throw n;if(o===t)throw n;await new Promise(e=>setTimeout(e,r*o))}throw n}async function ua(e,t,r){return ca(async()=>{const n=await ca(()=>new Promise((e,t)=>{try{const r=indexedDB.open("aloe-wellness-log",4);r.onupgradeneeded=()=>{const e=r.result;if(e.objectStoreNames.contains(ta)||e.createObjectStore(ta,{keyPath:"id"}),!e.objectStoreNames.contains(ra)){const t=e.createObjectStore(ra,{keyPath:"id"});t.createIndex("dateIndex","date",{unique:!1}),t.createIndex("excludeFromGraphIndex","excludeFromGraph",{unique:!1})}if(!e.objectStoreNames.contains(na)){const t=e.createObjectStore(na,{keyPath:"id"});t.createIndex("dateIndex","date",{unique:!1}),t.createIndex("fieldIdIndex","fieldId",{unique:!1})}e.objectStoreNames.contains(aa)||e.createObjectStore(aa,{keyPath:"id"}),e.objectStoreNames.contains(oa)||e.createObjectStore(oa,{keyPath:"fieldId"})},r.onsuccess=()=>{const t=r.result;t.onerror=e=>{},t.onclose=()=>{},e(t)},r.onerror=()=>{t(new ia("connection_failed","データベースを開けませんでした",r.error))},r.onblocked=()=>{t(new ia("connection_failed","データベースが他のタブによってブロックされています",void 0,!1))}}catch(r){t(da(r))}}));return new Promise((a,o)=>{try{const s=n.transaction(e,t),i=setTimeout(()=>{s.abort(),o(new ia("transaction_failed","トランザクションがタイムアウトしました"))},3e4);s.oncomplete=()=>{clearTimeout(i)},s.onerror=()=>{clearTimeout(i),o(da(s.error))},s.onabort=()=>{clearTimeout(i),o(new ia("transaction_failed","トランザクションが中断されました"))};const l=Array.isArray(e)?e.map(e=>s.objectStore(e)):s.objectStore(e);r(s,l).then(a).catch(o)}catch(s){o(da(s))}})})}async function ma(e){return la("add-weight-record",async()=>ua(ra,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.put(e);a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}),1)}async function ha(){return la("get-all-weight-records",async()=>ua(ra,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const n=r.getAll();n.onsuccess=()=>{const t=n.result;Array.isArray(t)?e(t):e([])},n.onerror=()=>t(da(n.error))})}))}async function fa(e){return la("update-weight-record",async()=>ua(ra,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.put(e);a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}),1)}async function ga(e){return la("delete-weight-record",async()=>ua(ra,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.delete(e);a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}),1)}async function pa(e){return la("add-bp-record",async()=>ua(na,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.put(e);a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}),1)}async function xa(){return la("get-all-bp-records",async()=>ua(na,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const n=r.getAll();n.onsuccess=()=>{const t=n.result;Array.isArray(t)?e(t):e([])},n.onerror=()=>t(da(n.error))})}))}async function ba(e){return la("update-bp-record",async()=>ua(na,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.put(e);a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}),1)}async function ya(e){return la("delete-bp-record",async()=>ua(na,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.delete(e);a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}),1)}async function va(e){return la("add-daily-record",async()=>ua(aa,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.put(e);a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}),1)}async function wa(){return la("get-all-daily-records",async()=>ua(aa,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const n=r.getAll();n.onsuccess=()=>{const t=n.result;Array.isArray(t)?e(t):e([])},n.onerror=()=>t(da(n.error))})}))}async function ka(e){return la("add-daily-field",async()=>ua(oa,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.put(e);a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}),1)}async function Na(){return la("get-all-daily-fields",async()=>ua(oa,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const n=r.getAll();n.onsuccess=()=>{const t=n.result;Array.isArray(t)?e(t):e([])},n.onerror=()=>t(da(n.error))})}))}async function ja(e){return la("update-daily-field",async()=>ua(oa,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.put(e);a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}),1)}async function Ma(e){return la("delete-daily-field",async()=>ua(oa,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.delete(e);a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}),1)}function Da({records:e,getRecordDate:t}){const r=new Date,[n,a]=k.useState(()=>{const e=localStorage.getItem(at);return e?new Date(e):r}),[o,s]=k.useState(()=>{const e=localStorage.getItem(at);return e?new Date(e):r}),i=k.useMemo(()=>nt(o),[o]),l=k.useMemo(()=>e.filter(e=>t(e)===i),[e,i,t]),d=k.useCallback(r=>{const n=nt(r);return e.some(e=>t(e)===n)},[e,t]);return k.useEffect(()=>{localStorage.setItem(at,o.toISOString())},[o]),k.useEffect(()=>{a(o)},[o]),{selectedDate:o,setSelectedDate:s,centerDate:n,setCenterDate:a,today:r,recordDate:i,recordsOfDay:l,isRecorded:d}}function Ca({getAllRecords:e,addRecord:t,updateRecord:r,deleteRecord:n,onRecordAdded:a}){const[o,s]=k.useState([]),[i,l]=k.useState(!0),[d,c]=k.useState(null),u=k.useCallback(async()=>{try{l(!0),c(null);const t=await e();s(t)}catch(t){c(t instanceof Error?t.message:"記録の取得に失敗しました")}finally{l(!1)}},[e]);k.useEffect(()=>{u()},[u]);const m=k.useCallback(async e=>{try{c(null),await t(e),await u(),null==a||a()}catch(r){throw c(r instanceof Error?r.message:"記録の追加に失敗しました"),r}},[t,u,a]),h=k.useCallback(async e=>{try{c(null),await r(e),await u()}catch(t){throw c(t instanceof Error?t.message:"記録の更新に失敗しました"),t}},[r,u]),f=k.useCallback(async e=>{try{if(c(null),!window.confirm("本当に削除しますか？"))return;await n(e),await u()}catch(t){throw c(t instanceof Error?t.message:"記録の削除に失敗しました"),t}},[n,u]),g=k.useCallback(()=>{c(null)},[]);return{records:o,isLoading:i,error:d,handleAdd:m,handleUpdate:h,handleDelete:f,refetchRecords:u,clearError:g}}function Sa({initialValues:e,createRecord:t,resetValues:r}){const[n,a]=k.useState(e),o=k.useCallback((e,t)=>{a(r=>({...r,[e]:t}))},[]),s=k.useCallback(()=>{a({...e,...r,time:rt()})},[e,r]),i=k.useCallback(e=>t(n,e),[n,t]);return{formData:n,setFormData:a,updateField:o,resetForm:s,createRecordFromForm:i}}const Ea={systolic:"",diastolic:"",heartRate:"",time:rt(),note:""},Ta=()=>{const{records:e,isLoading:t,error:n,handleAdd:a,handleUpdate:o,handleDelete:s,clearError:i}=Ca({getAllRecords:xa,addRecord:pa,updateRecord:ba,deleteRecord:ya}),{selectedDate:l,setSelectedDate:d,centerDate:c,setCenterDate:u,today:m,recordDate:h,recordsOfDay:f,isRecorded:g}=Da({records:e,getRecordDate:e=>e.date}),{formData:p,updateField:x,resetForm:b,createRecordFromForm:y}=Sa({initialValues:Ea,createRecord:(e,t)=>({id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:t,time:e.time,systolic:Number(e.systolic),diastolic:Number(e.diastolic),heartRate:""!==e.heartRate?Number(e.heartRate):null,note:e.note||null}),resetValues:Ea}),v=k.useCallback(async()=>{if(p.systolic&&p.diastolic)try{const e=y(h);await a(e),b()}catch(e){}},[p.systolic,p.diastolic,y,h,a,b]);return r.jsxs("div",{className:"bg-transparent",children:[r.jsx(_n,{selectedDate:l,setSelectedDate:d,centerDate:c,setCenterDate:u,today:m,isRecorded:g,"data-testid":"date-picker"}),r.jsx("div",{className:"w-full max-w-md mx-auto mt-3 mb-3 flex justify-start pl-4",children:r.jsxs("span",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-white",children:[l.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),g(l)&&r.jsx(Ae,{className:"inline-block w-6 h-6 text-green-500 ml-2 align-middle","aria-label":"入力済み"})]})}),r.jsx(tt,{recordsOfDay:f}),r.jsxs("div",{className:"flex flex-col items-center justify-start min-h-[60vh]",children:[n&&r.jsx("div",{className:"w-full max-w-md mb-4",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[r.jsx("p",{className:"text-red-800 text-sm",children:n}),r.jsx("button",{onClick:i,className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"エラーを閉じる"})]})}),r.jsx("div",{className:"flex flex-col gap-2 w-full max-w-md",children:f.map(e=>r.jsxs("div",{className:"flex flex-col gap-1 bg-white dark:bg-gray-800 rounded-xl shadow p-2 mb-1",children:[r.jsxs("div",{className:"flex items-center w-full mb-1 justify-between",children:[r.jsx("input",{type:"time",className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-base bg-inherit text-gray-700 dark:text-gray-200 w-[6.5em]",value:e.time,onChange:t=>o({...e,time:t.target.value})}),r.jsx(Q,{variant:"danger",size:"sm",icon:Ve,"aria-label":"削除",onClick:()=>s(e.id),children:""})]}),r.jsxs("div",{className:"flex items-center gap-1 w-full",children:[r.jsx(zn,{value:e.systolic,onChange:t=>o({...e,systolic:Number(t)}),placeholder:"収縮",step:"1",min:"0",max:"300",width:"md"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500 text-sm",children:"mmHg"}),r.jsx(zn,{value:e.diastolic,onChange:t=>o({...e,diastolic:Number(t)}),placeholder:"拡張",step:"1",min:"0",max:"200",width:"md"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500 text-sm",children:"mmHg"}),r.jsx(zn,{value:e.heartRate??"",onChange:t=>o({...e,heartRate:""===t?null:Number(t)}),placeholder:"心拍",step:"1",min:"0",max:"300",width:"md"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500 text-sm",children:"bpm"})]}),r.jsx("textarea",{className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-2 py-1 text-base bg-inherit text-gray-700 dark:text-gray-200 resize-none w-full pr-2 mb-0",value:e.note??"",onChange:t=>o({...e,note:t.target.value}),placeholder:"補足・メモ（任意）"})]},e.id))}),r.jsx("div",{className:"w-full max-w-md mt-2 mb-2",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow p-2 mb-0 flex flex-col gap-1",children:[r.jsxs("div",{className:"flex items-center w-full mb-1 justify-between",children:[r.jsx(qn,{value:p.time,onChange:e=>x("time",e)}),r.jsx(Q,{variant:"success",size:"sm",icon:Ae,"aria-label":"保存",onClick:v,"data-testid":"save-btn",disabled:t||!p.systolic||!p.diastolic,children:""})]}),r.jsxs("div",{className:"flex items-center gap-1 w-full mb-1",children:[r.jsx(zn,{value:p.systolic,onChange:e=>x("systolic",e),placeholder:"収縮",step:"1",min:"0",max:"300",width:"md"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500 text-sm",children:"mmHg"}),r.jsx(zn,{value:p.diastolic,onChange:e=>x("diastolic",e),placeholder:"拡張",step:"1",min:"0",max:"200",width:"md"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500 text-sm",children:"mmHg"}),r.jsx(zn,{value:p.heartRate,onChange:e=>x("heartRate",e),placeholder:"心拍",step:"1",min:"0",max:"300",width:"md"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500 text-sm",children:"bpm"})]}),r.jsx("textarea",{className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-2 py-1 text-base bg-inherit text-gray-700 dark:text-gray-200 resize-none w-full pr-2 mb-0",rows:1,value:p.note,onChange:e=>x("note",e.target.value),placeholder:"補足・メモ（任意）"})]})}),r.jsx("div",{className:"w-full max-w-md mx-auto mb-2 px-4",children:r.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 text-yellow-800 dark:text-yellow-100 p-3 rounded shadow-sm text-sm text-left",children:[r.jsx("strong",{children:"【ワンポイント】"})," ","血圧は安静時に測定し、可能であれば毎日同じ時間帯（朝・夜など）に記録することをお勧めします。運動後や食事直後の測定は避けましょう。"]})})]})]})};function Oa(e){return W({attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M216 23.86c0-23.8-30.65-32.77-44.15-13.04C48 191.85 224 200 224 288c0 35.63-29.11 64.46-64.85 63.99-35.17-.45-63.15-29.77-63.15-64.94v-85.51c0-21.7-26.47-32.23-41.43-16.5C27.8 213.16 0 261.33 0 320c0 105.87 86.13 192 192 192s192-86.13 192-192c0-170.29-168-193-168-296.14z"},child:[]}]})(e)}function Wa(e,t=800){const[r,n]=k.useState(0);return k.useEffect(()=>{if("number"!=typeof e||isNaN(e))return;const r=performance.now();requestAnimationFrame(function a(o){const s=o-r,i=Math.min(s/t,1);n(0+(e-0)*i),i<1?requestAnimationFrame(a):n(e)})},[e,t]),r}const La=k.memo(function({field:e,value:t,stats:n,onAchieve:a,onPartial:o,onUnachieve:s}){const i=Wa(n.percent);return r.jsxs("div",{className:"flex flex-col gap-1 bg-white dark:bg-gray-800 rounded-xl shadow p-4 mb-1",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("span",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200 min-w-[5em]",children:e.name}),r.jsx(Q,{variant:1===t?"primary":"secondary",size:"md",onClick:a,"aria-pressed":1===t,className:"flex-1","data-testid":`daily-input-${e.fieldId}-achieve`,children:"達成"}),r.jsx(Q,{variant:.5===t?"primary":"secondary",size:"md",onClick:o,"aria-pressed":.5===t,className:"flex-1","data-testid":`daily-input-${e.fieldId}-partial`,children:"微達成"}),r.jsx(Q,{variant:0===t?"primary":"secondary",size:"md",onClick:s,"aria-pressed":0===t,className:"flex-1","data-testid":`daily-input-${e.fieldId}-unachieve`,children:"未達"})]}),r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r.jsx("span",{className:"text-base font-semibold text-blue-700 dark:text-blue-200 align-middle",children:"直近2週間の達成率："}),n.total>0?r.jsxs(r.Fragment,{children:[r.jsxs("span",{className:"ml-4 text-base font-semibold text-blue-700 dark:text-blue-200 align-middle",children:[r.jsx("span",{style:{display:"inline-block",minWidth:"3ch",textAlign:"right",fontFamily:"monospace"},children:i.toFixed(0)}),"%"]}),r.jsxs("span",{className:"ml-2 text-base font-semibold text-blue-700 dark:text-blue-200 align-middle",children:["(",n.success,"/",n.total,"日)"]})]}):"記録なし"]})]})}),Ia=k.memo(function({field:e,isEditing:t,onStartEdit:n,onEndEdit:a,onNameChange:o,onDelete:s,onToggleDisplay:i,inputRef:l,onCaretPositionChange:d}){const{attributes:c,listeners:u,setNodeRef:m,transform:h,transition:f,isDragging:g}=L({id:e.fieldId}),p={...g?{transform:I.Transform.toString(h),transition:f}:{},opacity:g?.5:1,background:g?"#f3f4f6":void 0},[x,b]=k.useState(e.name);k.useEffect(()=>{t&&b(e.name)},[t,e.name]);return r.jsxs("div",{ref:m,style:p,className:"flex items-center gap-2 rounded-xl shadow p-4 mb-2 transition-colors "+(!1===e.display?"bg-gray-100 dark:bg-gray-700 text-gray-400":"bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200"),children:[t?r.jsx("input",{ref:l,type:"text",value:x,onChange:t=>{b(t.target.value);const r=t.target.selectionStart??t.target.value.length,n=t.target.selectionEnd??t.target.value.length;null==d||d(e.fieldId,r,n)},onSelect:t=>{const r=t.target,n=r.selectionStart??r.value.length,a=r.selectionEnd??r.value.length;null==d||d(e.fieldId,n,a)},onBlur:()=>{o(x),a()},onKeyDown:e=>{"Enter"===e.key&&(o(x),a())},className:"flex-1 border rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400 text-lg font-semibold min-w-[5em] bg-inherit "+(!1===e.display?"border-gray-200 dark:border-gray-600 text-gray-400 bg-gray-50 dark:bg-gray-800":"border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200"),"data-testid":`daily-input-${e.fieldId}`}):r.jsx("span",{className:"flex-1 text-lg font-semibold min-w-[5em] cursor-pointer",onClick:n,onKeyDown:e=>{"Enter"!==e.key&&" "!==e.key||n()},role:"button","aria-label":"項目名を編集",tabIndex:0,children:e.name}),r.jsx("button",{type:"button",onClick:()=>{window.confirm("本当に削除しますか？\n（保存すると確定されます。）")&&s()},className:"text-red-500 hover:text-red-700 p-2","aria-label":"削除","data-testid":`delete-btn-${e.fieldId}`,children:r.jsx(Ve,{className:"w-6 h-6"})}),r.jsx("button",{type:"button",onClick:i,className:"p-2 "+(!1===e.display?"text-gray-400 hover:text-blue-400":"text-blue-500 hover:text-blue-700"),"aria-label":!1===e.display?"表示項目にする":"非表示項目にする","data-testid":`toggle-btn-${e.fieldId}`,children:!1===e.display?r.jsx(_e,{className:"w-6 h-6"}):r.jsx(ze,{className:"w-6 h-6"})}),r.jsx("span",{className:"cursor-move p-2","aria-label":"並び替えハンドル",style:{touchAction:"none"},...c,...u,tabIndex:0,children:r.jsx(Pe,{className:"w-6 h-6 text-gray-400"})})]})}),Pa=()=>{const[e,t]=k.useState([]),[n,a]=k.useState([]),{selectedDate:o,setSelectedDate:s,centerDate:i,setCenterDate:l,today:d,recordDate:c}=Da({records:n,getRecordDate:e=>e.date}),[u,m]=k.useState(!1),[h,f]=k.useState(""),[g,p]=k.useState(""),[x,b]=k.useState(!1),y=x?e.slice().sort((e,t)=>(e.order??0)-(t.order??0)):e.filter(e=>!("display"in e)||!1!==e.display).sort((e,t)=>(e.order??0)-(t.order??0)),[v,w]=k.useState([]),[N,j]=k.useState(()=>y.map(e=>e.fieldId)),[D,C]=k.useState([]),S=P(R(z)),E=e=>n.find(t=>t.fieldId===e&&t.date===c),T=M.useCallback(async()=>{const e=await Na();t(e)},[]),O=M.useCallback(async()=>{const e=await wa();a(e)},[]),W=[{fieldId:"exercise",name:"運動",order:10,display:!0},{fieldId:"meal",name:"食事",order:20,display:!0},{fieldId:"sleep",name:"睡眠",order:30,display:!0},{fieldId:"smoke",name:"喫煙",order:40,display:!1},{fieldId:"alcohol",name:"飲酒",order:50,display:!1}];k.useEffect(()=>{(async()=>{const e=await Na();if(!e||0===e.length){for(const e of W)await ka(e);t(await Na())}})()},[]),M.useEffect(()=>{T(),O()},[T,O]);const L=async(e,t)=>{const r=E(e);if(r&&r.value===t)await async function(e){return la("delete-daily-record",async()=>ua(aa,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.delete(e);a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}),1)}(r.id),await O();else if(r)await async function(e){return la("update-daily-record",async()=>ua(aa,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.put(e);a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}),1)}({...r,value:t}),await O();else{const r=`${Date.now()}-${Math.random().toString(36).substr(2,9)}`;await va({id:r,fieldId:e,date:c,value:t}),await O()}};k.useEffect(()=>{if(x){const t=e.slice().sort((e,t)=>(e.order??0)-(t.order??0));w(t.map(e=>({fieldId:e.fieldId,name:e.name,order:e.order??0,display:"display"in e?e.display:"boolean"!=typeof e.defaultDisplay||e.defaultDisplay}))),j(t.map(e=>e.fieldId)),C([])}},[x,e]);const[I,Y]=k.useState(null),H=k.useRef({}),Z=k.useRef({});k.useEffect(()=>{if(!I)return;const e=H.current[I];if(e){const t=Z.current[I]??{start:e.value.length,end:e.value.length};e.setSelectionRange(t.start,t.end)}},[I]);const q=k.useCallback((e,t,r)=>{Z.current[e]={start:t,end:r}},[]),G=k.useCallback(e=>{C(t=>[...t,e]),w(t=>t.filter(t=>t.fieldId!==e)),j(t=>t.filter(t=>t!==e))},[]),U=k.useCallback(e=>{w(t=>t.map(t=>t.fieldId===e?{...t,display:!t.display}:t))},[]),V=e=>{const t=(()=>{const e=[];for(let t=0;t<14;t++){const r=new Date(d);r.setDate(d.getDate()-t),e.push(nt(r))}return e.reverse()})();let r=0,a=0;return t.forEach(t=>{const o=n.find(r=>r.fieldId===e&&r.date===t);"number"==typeof(null==o?void 0:o.value)&&(r++,o.value>0&&a++)}),{total:r,success:a,percent:r>0?Math.round(a/r*100):0}},X=(t=>{if(0===n.length)return 0;const r=e.map(e=>e.fieldId),a=n.map(e=>e.date).sort();if(0===a.length)return 0;const o=new Date(a[0]);let s=0;for(let e=new Date(t);e>=o;e.setDate(e.getDate()-1)){const t=nt(e);if(!r.some(e=>n.some(r=>r.fieldId===e&&r.date===t&&"number"==typeof r.value&&r.value>0)))break;s++}return s>1?s:0})(o),K=Wa(X),J=Wa((t=>{const r=e.map(e=>e.fieldId);if(0===n.length)return 0;const a=n.map(e=>e.date).sort(),o=new Date(a[0]),s=t;let i=0;for(let e=new Date(o);e<=s;e.setDate(e.getDate()+1)){const t=nt(e);r.some(e=>n.some(r=>r.fieldId===e&&r.date===t&&"number"==typeof r.value&&r.value>0))&&i++}return i})(o));return r.jsxs("div",{className:"bg-transparent",children:[r.jsx(_n,{selectedDate:o,setSelectedDate:s,centerDate:i,setCenterDate:l,getDateStatus:t=>{const r=nt(t),a=e.map(e=>e.fieldId),o=n.filter(e=>e.date===r&&a.includes(e.fieldId));if(0===o.length)return"none";return o.some(e=>1===e.value||.5===e.value)?"green":"red"},"data-testid":"date-picker"}),r.jsx("div",{className:"w-full max-w-md mx-auto mt-3 mb-3 flex justify-start pl-4",children:r.jsxs("span",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-white",children:[c,(t=>{const r=nt(t),a=e.map(e=>e.fieldId);return n.some(e=>e.date===r&&a.includes(e.fieldId))})(o)&&r.jsx(Ae,{className:"inline-block w-6 h-6 text-green-500 ml-2 align-middle","aria-label":"入力済み"}),r.jsxs("span",{className:"inline-flex items-center",children:[X>=2&&r.jsxs("span",{className:"ml-3 px-2 py-0.5 rounded-full bg-orange-500 text-white text-xs font-bold inline-flex items-center",title:"連続達成日数",children:[r.jsx(Oa,{className:"inline-block mr-1",style:{fontSize:"1em"}}),r.jsx("span",{style:{display:"inline-block",minWidth:"3ch",textAlign:"right"},children:K.toFixed(0)}),"日継続中"]}),r.jsxs("span",{className:"ml-3 px-2 py-0.5 rounded-full bg-blue-500 text-white text-xs font-bold inline-flex items-center",title:"累計達成日数",children:[r.jsx("span",{className:"inline-block mr-1",style:{fontSize:"1em"},children:"🏅"}),r.jsx("span",{style:{display:"inline-block",minWidth:"3ch",textAlign:"right"},children:J.toFixed(0)}),"日達成"]})]})]})}),r.jsxs("div",{className:"flex flex-col items-center justify-start min-h-[60vh]",children:[r.jsx("div",{className:"flex flex-col gap-1 w-full max-w-md",children:x?r.jsx(B,{sensors:S,collisionDetection:A,onDragEnd:e=>{const{active:t,over:r}=e;if(!r)return;const n=String(t.id),a=String(r.id);if(n!==a){const e=N.indexOf(n),t=N.indexOf(a);j(_(N,e,t))}},children:r.jsx($,{items:N,strategy:F,children:N.map(e=>{const t=v.find(t=>t.fieldId===e);if(!t)return null;const n=I===t.fieldId;return r.jsx(Ia,{field:t,isEditing:n,onStartEdit:()=>Y(t.fieldId),onEndEdit:()=>Y(null),onNameChange:e=>w(r=>r.map(r=>r.fieldId===t.fieldId?{...r,name:e}:r)),onDelete:()=>G(t.fieldId),onToggleDisplay:()=>U(t.fieldId),inputRef:e=>H.current[t.fieldId]=e,onCaretPositionChange:q},t.fieldId)})})}):y.map(e=>{const t=(e=>{const t=E(e);if("number"==typeof(null==t?void 0:t.value)){if(1===t.value)return 1;if(.5===t.value)return.5;if(0===t.value)return 0}})(e.fieldId),n=V(e.fieldId);return r.jsx(La,{field:e,value:t,stats:n,onAchieve:async()=>{await L(e.fieldId,1)},onPartial:async()=>{await L(e.fieldId,.5)},onUnachieve:async()=>{await L(e.fieldId,0)}},e.fieldId)})}),x&&r.jsxs("div",{className:"w-full max-w-md mt-2 mb-2",children:[u?r.jsxs("div",{className:"flex items-center gap-1 mb-1 bg-white dark:bg-gray-800 rounded-xl shadow p-2",children:[r.jsx("input",{type:"text",value:h,onChange:e=>f(e.target.value),className:"flex-1 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"新しい項目名",maxLength:20,"data-testid":"daily-input-2"}),r.jsx(Q,{variant:"primary",size:"md",icon:Ae,"aria-label":"保存",onClick:async()=>{p("");const t=h.trim();if(!t)return void p("項目名を入力してください");if(e.some(e=>e.name===t))return void p("同じ名前の項目が既に存在します");const r=`custom_${Date.now()}_${Math.random().toString(36).substr(2,6)}`,n={fieldId:r,name:t,order:10*(e.length+1),display:!0};await ka(n),await T(),x&&(w(e=>[...e,n]),j(e=>[...e,r])),m(!1),f("")},disabled:!h.trim(),"data-testid":"save-btn",children:""}),r.jsx(Q,{variant:"secondary",size:"md",icon:Qe,"aria-label":"キャンセル",onClick:()=>{m(!1),f(""),p("")},children:""})]}):r.jsx(Q,{variant:"teal",size:"md",icon:Ge,fullWidth:!0,onClick:()=>m(!0),"data-testid":"add-btn",children:"新規項目"}),g&&r.jsx("div",{className:"text-red-500 text-sm mt-1",children:g})]}),r.jsx("div",{className:"w-full max-w-md mt-2 mb-2",children:x?r.jsxs("div",{className:"flex gap-1",children:[r.jsx(Q,{variant:"success",size:"md",icon:Be,onClick:async()=>{for(const e of D)await Ma(e);for(let e=0;e<N.length;++e){const t=v.find(t=>t.fieldId===N[e]);t&&await ja({...t,order:10*e})}await T(),b(!1)},fullWidth:!0,children:"保存"}),r.jsx(Q,{variant:"secondary",size:"md",icon:Qe,onClick:()=>{b(!1)},fullWidth:!0,children:"キャンセル"})]}):r.jsx(Q,{variant:"teal",size:"md",icon:qe,fullWidth:!0,onClick:()=>b(!0),children:"編集"})}),r.jsx("div",{className:"w-full max-w-md mx-auto mb-2 px-4",children:r.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 text-yellow-800 dark:text-yellow-100 p-3 rounded shadow-sm text-sm text-left",children:[r.jsx("strong",{children:"【ワンポイント】"})," ","日課は毎日少しずつでも続けることが大切です。完璧を目指さず、できた日を積み重ねましょう。少しでもやったら微達成として記録しましょう。"]})})]})]})},Ra=k.memo(function({startWeight:e,targetWeight:t,targetStart:n,targetEnd:a,gender:o,type:s="total"}){const{isValid:i,totalCalories:l,dailyCalories:d}=k.useMemo(()=>{const r="female"===o?7e3:6500;if(!(e&&t&&n&&a&&!isNaN(Number(e))&&!isNaN(Number(t))&&Number(t)<Number(e)&&/^\d{4}-\d{2}-\d{2}$/.test(n)&&/^\d{4}-\d{2}-\d{2}$/.test(a)&&new Date(a)>=new Date(n)))return{isValid:!1,totalCalories:0,dailyCalories:0};const s=(Number(e)-Number(t))*r,i=new Date(n),l=new Date(a),d=Math.floor((l.getTime()-i.getTime())/864e5)+1;if(d<=0)return{isValid:!1,totalCalories:0,dailyCalories:0};return{isValid:!0,totalCalories:s,dailyCalories:Math.round(s/d)}},[e,t,n,a,o]);if(!i)return null;const c=(Number(e)-Number(t)).toFixed(1);switch(s){case"total":return r.jsxs("div",{className:"text-blue-700 dark:text-blue-300 text-sm font-semibold mb-2",children:["あと",c,"kg減らすには約",Math.round(l).toLocaleString(),"kcalの消費が必要です"]});case"daily":return r.jsxs("div",{className:"text-blue-700 dark:text-blue-300 text-sm font-semibold mb-2",children:["期間中に一日あたり約",d.toLocaleString(),"kcalの消費が必要です"]});case"exercise":return r.jsxs("div",{className:"text-blue-700 dark:text-blue-300 text-sm font-semibold",children:["運動で一日あたり約",Math.round(d/2).toLocaleString(),"kcalの消費を目標にしましょう。"]});case"diet":return r.jsxs("div",{className:"text-blue-700 dark:text-blue-300 text-sm font-semibold",children:["減食で一日あたり約",Math.round(d/2).toLocaleString(),"kcalの消費を目標にしましょう。"]});default:return null}});const Ba=k.memo(function({examples:e,onSelect:t,label:n="定型文を挿入",className:h=""}){const f=function(){const[e,t]=k.useState(!1),{refs:r,floatingStyles:n,context:a}=o({open:e,onOpenChange:t,middleware:[c(6),u(),m()],placement:"bottom-end"}),h=s(a),f=i(a),g=l(a),{getReferenceProps:p,getFloatingProps:x}=d([h,f,g]);return{open:e,setOpen:t,refs:r,floatingStyles:n,getReferenceProps:p,getFloatingProps:x}}();return r.jsxs(r.Fragment,{children:[r.jsx("div",{ref:f.refs.setReference,...f.getReferenceProps({}),className:`absolute right-2 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center text-yellow-400 cursor-pointer align-middle hover:opacity-80 focus:outline-none ${h}`,tabIndex:0,"aria-label":n,onClick:()=>f.setOpen(e=>!e),children:r.jsx(Ue,{className:"w-6 h-6"})}),f.open&&r.jsx(a,{children:r.jsx("div",{ref:f.refs.setFloating,style:f.floatingStyles,...f.getFloatingProps({className:"z-30 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-lg min-w-[180px] py-1"}),children:e.map((e,n)=>r.jsx("button",{type:"button",className:"block w-full text-left px-3 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer border-none bg-transparent focus:outline-none focus:bg-gray-100 dark:focus:bg-gray-700",onClick:()=>(e=>{t(e),f.setOpen(!1)})(e),children:e},n))})})]})});function Aa(e,t){return k.useMemo(()=>{if(t.required&&!e.trim())return`${t.fieldName}は必須です。`;if(!e.trim())return null;if(isNaN(Number(e)))return`${t.fieldName}は数値で入力してください。`;const r=Number(e);if(r<t.min||r>t.max)return`${t.fieldName}は${t.min}～${t.max}の範囲で入力してください。`;if(t.step&&1!==t.step){const e=10*r%(10*t.step);if(Math.abs(e)>1e-4)return`${t.fieldName}は${t.step}刻みで入力してください。`}return null},[e,t.min,t.max,t.required,t.fieldName,t.step])}function $a(e,t="体重"){return Aa(e,{min:30,max:200,required:!0,fieldName:`${t}[kg]`,step:.1})}const Fa=Y(e=>({goal:null,setGoal:async t=>{await async function(e){return la("set-goal",async()=>ua(ta,"readwrite",async(t,r)=>{const n=r;return new Promise((t,r)=>{const a=n.put({...e,id:"singleton"});a.onsuccess=()=>t(),a.onerror=()=>r(da(a.error))})}))}(t),e({goal:t})},clearGoal:async()=>{await async function(){return la("clear-goal",async()=>ua(ta,"readwrite",async(e,t)=>{const r=t;return new Promise((e,t)=>{const n=r.delete("singleton");n.onsuccess=()=>e(),n.onerror=()=>t(da(n.error))})}))}(),e({goal:null})},loadGoal:async()=>{const t=await async function(){return la("get-goal",async()=>ua(ta,"readonly",async(e,t)=>{const r=t;return new Promise((e,t)=>{const n=r.get("singleton");n.onsuccess=()=>{const t=n.result;if(t&&"object"==typeof t){const{id:r,...n}=t;e(n)}else e(null)},n.onerror=()=>t(da(n.error))})}))}();e({goal:t})}})),_a=(new Date).getFullYear(),za=["毎日ラジオ体操(第1,2)をする","なるべく階段を使う","通勤で早歩きする","一駅歩く","毎日30分歩く","毎日5000歩歩く","毎日ジョギングをする"],Ya=["清涼飲料水を 0 cal にする","間食、夜食を控える","野菜を多く食べる","よく噛んで20分以上かける","夜はお米を食べない","毎食ご飯を半分にする"],Ha=["7時間以上寝る","23時までに就寝する","就寝90分前に入浴し体温調節をする","寝室の温度を 18–22 ℃ に保つ","寝室の照明を 300 lx 以下に落とす","寝る前にスマホを見ない"],Za=["家では吸わない","会社では吸わない","電子タバコへ移行し本数を半減する","1週間に1本ずつ減らす","禁煙外来に通う"],qa=["休肝日を作る","1日1杯までにする","週2回までにする","飲み会は月1回まで","ノンアルコール飲料にする"],Ga=[{value:"male",label:"男性"},{value:"female",label:"女性"},{value:"unknown",label:"未回答"}];function Ua(){const{goal:e,setGoal:t,loadGoal:n}=Fa(),[a,o]=k.useState("unknown"),[s,i]=k.useState(""),[l,d]=k.useState(""),[c,u]=k.useState(""),[m,h]=k.useState(""),[f,g]=k.useState(""),[p,x]=k.useState(""),[b,y]=k.useState(""),[v,w]=k.useState(""),[N,j]=k.useState(""),[M,D]=k.useState(""),[C,S]=k.useState(""),[E,T]=k.useState(null),[O,W]=k.useState(null),L=function(e,t="生年"){return Aa(e,{min:1900,max:(new Date).getFullYear(),required:!0,fieldName:t})}(s,"生年"),I=function(e,t="身長"){return Aa(e,{min:100,max:250,required:!0,fieldName:`${t}[cm]`,step:.1})}(l,"身長"),P=$a(c,"開始体重"),R=$a(p,"目標体重"),B=(e,t)=>e&&/^\d{4}-\d{2}-\d{2}$/.test(e)?null:`${t}はYYYY-MM-DD形式で入力してください。`,A=B(m,"目標開始日"),$=B(f,"目標終了日"),F=m&&f&&m>f?"目標終了日は開始日以降の日付にしてください。":null;k.useEffect(()=>{ha().then(e=>{if(e.length>0){const t=[...e].sort((e,t)=>new Date(`${e.date}T${e.time}`).getTime()-new Date(`${t.date}T${t.time}`).getTime());W(t[0].weight),T(t[t.length-1].weight)}else T(null),W(null)})},[]),k.useEffect(()=>{n()},[n]),k.useEffect(()=>{e&&(o(e.gender||"unknown"),i(e.birthYear.toString()),d(e.height.toString()),u(e.startWeight?e.startWeight.toString():""),h(e.targetStart),g(e.targetEnd),x(e.targetWeight.toString()),y(e.exerciseGoal||""),w(e.dietGoal||""),j(e.sleepGoal||""),D(e.smokingGoal||""),S(e.alcoholGoal||""))},[e]);k.useEffect(()=>{if(a&&s&&l&&c&&m&&f&&p&&!(L||I||P||A||$||F||R)){const e={gender:a,birthYear:Number(s),height:Number(l),startWeight:Number(c),targetStart:m,targetEnd:f,targetWeight:Number(p),exerciseGoal:b,dietGoal:v,sleepGoal:N,smokingGoal:M,alcoholGoal:C};t(e)}},[a,s,l,c,m,f,p,b,v,N,M,C,t]);const _=Number(l)||170;return r.jsx("div",{className:"flex flex-col items-center justify-start py-0 bg-transparent",children:r.jsxs("form",{className:"bg-white dark:bg-gray-800 rounded-xl shadow p-6 w-full max-w-md flex flex-col gap-4",children:[r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"性別"}),r.jsx("div",{className:"flex gap-4 mt-1",children:Ga.map(e=>r.jsxs("label",{className:"flex items-center gap-1 text-base",children:[r.jsx("input",{type:"radio",name:"gender",value:e.value,checked:a===e.value,onChange:()=>o(e.value),className:"accent-blue-500"}),e.label]},e.value))})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"生年（例: 1990）"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"1900",max:_a,value:s,onChange:e=>i(e.target.value),className:"border rounded px-3 py-2 text-base w-32",required:!0,placeholder:"例: 1990"}),r.jsx(Q,{type:"button",size:"sm",variant:"secondary",onClick:()=>i((_a-40).toString()),children:"40"}),r.jsx(Q,{type:"button",size:"sm",variant:"secondary",onClick:()=>i((Number(s)-5).toString()),children:"-5"}),r.jsx(Q,{type:"button",size:"sm",variant:"secondary",onClick:()=>i((Number(s)+5).toString()),children:"+5"})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"身長[cm] (例: 165.0)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"100",max:"250",value:l,onChange:e=>d(e.target.value),className:"border rounded px-3 py-2 text-base w-32",required:!0,placeholder:"例: 165.0"}),r.jsx(Q,{type:"button",size:"sm",variant:"secondary",onClick:()=>d("170"),children:"170"}),r.jsx(Q,{type:"button",size:"sm",variant:"secondary",onClick:()=>d((_-5).toString()),children:"-5"}),r.jsx(Q,{type:"button",size:"sm",variant:"secondary",onClick:()=>d((_+5).toString()),children:"+5"})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"開始体重[kg] (例: 68.0)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"30",max:"200",step:"0.1",value:c,onChange:e=>u(e.target.value),className:"border rounded px-3 py-2 text-base w-32",required:!0,placeholder:"例: 68.0","data-testid":"goal-weight-input"}),null!==E&&r.jsx(Q,{type:"button",size:"sm",variant:"secondary",onClick:()=>u(E.toString()),children:"最新"}),null!==O&&r.jsx(Q,{type:"button",size:"sm",variant:"secondary",onClick:()=>u(O.toString()),children:"最古"})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"目標体重[kg] (例: 75.0)"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"number",min:"30",max:"200",step:"0.1",value:p,onChange:e=>x(e.target.value),className:"border rounded px-3 py-2 text-base w-32",required:!0,placeholder:"例: 75.0"}),r.jsx(Q,{type:"button",size:"sm",variant:"secondary",onClick:()=>{c&&!isNaN(Number(c))&&x((Math.round(10*(Number(c)-2))/10).toString())},children:"-2kg"}),r.jsx(Q,{type:"button",size:"sm",variant:"secondary",onClick:()=>{c&&!isNaN(Number(c))&&x((Math.round(10*(Number(c)-5))/10).toString())},children:"-5kg"})]})]}),r.jsx(Ra,{startWeight:c,targetWeight:p,targetStart:m,targetEnd:f,gender:a,type:"total"}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"目標開始日"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"date",value:m,onChange:e=>h(e.target.value),className:"border rounded px-3 py-2 text-base",required:!0}),r.jsx(Q,{type:"button",size:"sm",variant:"secondary",onClick:()=>h((new Date).toISOString().slice(0,10)),children:"今日"})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"目標終了日"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"date",value:f,onChange:e=>g(e.target.value),className:"border rounded px-3 py-2 text-base",required:!0}),r.jsx(Q,{type:"button",size:"sm",variant:"secondary",onClick:()=>{const e=m?new Date(m):new Date;e.setMonth(e.getMonth()+3),g(e.toISOString().slice(0,10))},children:"3か月後"})]})]}),r.jsx(Ra,{startWeight:c,targetWeight:p,targetStart:m,targetEnd:f,gender:a,type:"daily"}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"運動目標 (例: なるべく階段を使う)"}),r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx("input",{type:"text",value:b,onChange:e=>y(e.target.value),className:"border rounded px-3 py-2 text-base flex-1 pr-10",placeholder:"例: 毎日30分歩く"}),r.jsx(Ba,{examples:za,onSelect:e=>y(e),label:"運動目標の定型文を挿入"})]})]}),r.jsx(Ra,{startWeight:c,targetWeight:p,targetStart:m,targetEnd:f,gender:a,type:"exercise"}),r.jsx("div",{className:"text-blue-700 dark:text-blue-300 text-sm font-semibold mb-2",children:"簡単に取り組める日常の動作の延長が効果的です。"}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"減食目標 (例: 間食を控える)"}),r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx("input",{type:"text",value:v,onChange:e=>w(e.target.value),className:"border rounded px-3 py-2 text-base flex-1 pr-10",placeholder:"例: 間食を控える"}),r.jsx(Ba,{examples:Ya,onSelect:e=>w(e),label:"減食目標の定型文を挿入"})]})]}),r.jsx(Ra,{startWeight:c,targetWeight:p,targetStart:m,targetEnd:f,gender:a,type:"diet"}),r.jsx("div",{className:"text-blue-700 dark:text-blue-300 text-sm font-semibold mb-2",children:"カロリーコントロールが一番効果があります。"}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"睡眠目標 (例: 23時までに就寝する)"}),r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx("input",{type:"text",value:N,onChange:e=>j(e.target.value),className:"border rounded px-3 py-2 text-base flex-1 pr-10",placeholder:"例: 7時間以上寝る"}),r.jsx(Ba,{examples:Ha,onSelect:e=>j(e),label:"睡眠目標の定型文を挿入"})]})]}),r.jsx("div",{className:"text-blue-700 dark:text-blue-300 text-sm font-semibold mb-2",children:"十分な睡眠(7時間以上)をとると痩せやすくなります。"}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"喫煙目標 (例: 1日○本までにする)"}),r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx("input",{type:"text",value:M,onChange:e=>D(e.target.value),className:"border rounded px-3 py-2 text-base flex-1 pr-10",placeholder:"例: 1日○本までにする"}),r.jsx(Ba,{examples:Za,onSelect:e=>D(e),label:"喫煙目標の定型文を挿入"})]})]}),r.jsxs("label",{className:"flex flex-col gap-1",children:[r.jsx("span",{children:"飲酒目標 (例: 週2回までにする)"}),r.jsxs("div",{className:"relative flex items-center gap-2",children:[r.jsx("input",{type:"text",value:C,onChange:e=>S(e.target.value),className:"border rounded px-3 py-2 text-base flex-1 pr-10",placeholder:"例: 週2回までにする"}),r.jsx(Ba,{examples:qa,onSelect:e=>S(e),label:"飲酒目標の定型文を挿入"})]})]}),r.jsx(Q,{type:"submit",size:"lg",variant:"primary","data-testid":"save-btn",children:"保存"})]})})}const Va=[{label:"2週間",days:14},{label:"1か月半",days:45},{label:"3か月",days:90},{label:"全データ",days:null}],Xa={exercise:"🏃",meal:"🍽",sleep:"🛌"},Qa=["日","月","火","水","木","金","土"],Ka=()=>{const[e,t]=k.useState(0),[n,a]=k.useState(!1),{dailyRecords:o,goal:s,isLoading:i,error:l,getFilteredData:d,getStatusStats:c}=function(){const[e,t]=k.useState([]),[r,n]=k.useState([]),[a,o]=k.useState(!0),[s,i]=k.useState(!0),[l,d]=k.useState(!0),[c,u]=k.useState(null),[m,h]=k.useState(null),{goal:f,loadGoal:g}=Fa(),p=async()=>{try{o(!0),u(null);const e=await ha();t(e)}catch(e){u(e instanceof Error?e.message:"体重データの取得に失敗しました")}finally{o(!1)}},x=async()=>{try{i(!0),h(null);const e=await wa();n(e)}catch(e){h(e instanceof Error?e.message:"日課データの取得に失敗しました")}finally{i(!1)}},b=async()=>{try{d(!0),await g()}catch(e){}finally{d(!1)}};k.useEffect(()=>{Promise.all([p(),x(),b()])},[]);const y=k.useMemo(()=>e.length?Math.max(...e.map(e=>new Date(`${e.date}T${e.time}`).getTime())):0,[e]),v=e=>{const t=[{label:"2週間",days:14},{label:"1か月半",days:45},{label:"3か月",days:90},{label:"全データ",days:null}];if(!r.length)return[];let n=null,a=null;if(t[e].days&&y)a=new Date(y),n=new Date(y),n.setDate(a.getDate()-t[e].days+1);else if(r.length>0){const e=[...r].sort((e,t)=>e.date.localeCompare(t.date));n=new Date(e[0].date),a=new Date(e[e.length-1].date)}if(!n||!a)return[];const o=[],s=new Date(n);for(;s<=a;)o.push(`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`),s.setDate(s.getDate()+1);return o};return{weightRecords:e,dailyRecords:r,goal:f,latestTimestamp:y,isLoading:a||s||l,error:c||m,getFilteredData:(t,r)=>{let n=e.filter(e=>"number"==typeof e.weight&&(r||!e.excludeFromGraph)).sort((e,t)=>new Date(`${e.date}T${e.time}`).getTime()-new Date(`${t.date}T${t.time}`).getTime()).map(e=>({datetime:`${e.date}T${e.time}`,timestamp:new Date(`${e.date}T${e.time}`).getTime(),value:Number(e.weight),excluded:!!e.excludeFromGraph}));const a=[{label:"2週間",days:14},{label:"1か月半",days:45},{label:"3か月",days:90},{label:"全データ",days:null}][t];if(a.days&&y){const e=y-24*a.days*60*60*1e3;n=n.filter(t=>t.timestamp>=e)}return n},getPeriodDateList:v,getStatusStats:(e,t)=>{const n=v(t);let a=0,o=0;return n.forEach(t=>{const n=r.find(r=>r.fieldId===e&&r.date===t);!n||1!==n.value&&0!==n.value||(a++,1===n.value&&o++)}),{total:a,success:o,percent:a>0?Math.round(o/a*100):0}},refetch:()=>Promise.all([p(),x(),b()])}}(),u=k.useMemo(()=>d(e,n),[d,e,n]),m=k.useMemo(()=>{if(!u.length)return[];const e=new Date(u[0].timestamp),t=new Date(u[u.length-1].timestamp);e.setHours(0,0,0,0),t.setHours(0,0,0,0);const r=[];for(let n=new Date(e);n<=t;n.setDate(n.getDate()+1))r.push(new Date(n.getFullYear(),n.getMonth(),n.getDate(),0,0,0,0).getTime());return r},[u]),w=k.useMemo(()=>{if(!u.length)return["auto","auto"];const e=new Date(u[0].timestamp),t=new Date(u[u.length-1].timestamp);return e.setHours(0,0,0,0),t.setHours(23,59,59,999),[e.getTime(),t.getTime()]},[u]),N=k.useMemo(()=>{if(0!==e||!u.length)return;const t=new Date(u[0].timestamp),r=new Date(u[u.length-1].timestamp);t.setHours(0,0,0,0),r.setHours(0,0,0,0);const n=[];for(let e=new Date(t);e<=r;e.setDate(e.getDate()+1))n.push(new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0).getTime());return n},[u,e]),j=k.useMemo(()=>{if(u.length<2)return null;const e=u.length;let t=0,r=0,n=0,a=0;for(const h of u)t+=h.timestamp,r+=h.value,n+=h.timestamp*h.timestamp,a+=h.timestamp*h.value;const o=t/e,s=r/e,i=n-t*o;if(0===i)return null;const l=(a-t*s)/i,d=s-l*o,c=u[0].timestamp,m=u[u.length-1].timestamp;return[{timestamp:c,value:l*c+d},{timestamp:m,value:l*m+d}]},[u]);return i?r.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mb-4"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"データを読み込み中..."})]}):l?r.jsx("div",{className:"flex flex-col items-center justify-center py-8",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 max-w-md",children:[r.jsx("p",{className:"text-red-800 text-sm mb-2",children:"データの読み込みに失敗しました"}),r.jsx("p",{className:"text-red-600 text-xs",children:l})]})}):r.jsxs("div",{className:"flex flex-col items-center justify-start py-0 bg-transparent","data-testid":"record-graph",children:[r.jsx("div",{className:"w-full mx-auto bg-white dark:bg-gray-800 shadow flex justify-center items-center mb-4 p-2",children:Va.map((n,a)=>r.jsx("button",{className:`flex-1 py-2 rounded-xl border-2 font-bold transition mx-0.5\n              ${e===a?"border-orange-400 text-orange-500 scale-105 shadow":"border-gray-300 text-gray-500 hover:border-orange-300 hover:text-orange-400"}\n            `,onClick:()=>t(a),children:n.label},n.label))}),r.jsxs("div",{className:"flex gap-4 items-center mb-2",children:[r.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[r.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#f59e42",borderRadius:2,marginRight:6}}),"目標"]}),r.jsxs("span",{className:"flex items-center text-sm font-semibold",children:[r.jsx("span",{style:{display:"inline-block",width:18,height:6,background:"#22c55e",borderRadius:2,marginRight:6}}),"傾向"]})]}),r.jsxs("div",{className:"w-full h-[400px] bg-white dark:bg-gray-800 rounded-xl shadow p-1 relative",children:[r.jsxs("label",{className:"flex items-center absolute right-0 top-0 bg-white/80 dark:bg-gray-800/80 px-1 py-0 h-6 min-h-0 rounded-none leading-tight text-xs font-bold z-10 w-auto cursor-pointer select-none",children:[r.jsx("input",{type:"checkbox",className:"form-checkbox accent-blue-600 mr-1",checked:n,onChange:e=>a(e.target.checked)}),"除外値も表示"]}),r.jsx(h,{width:"100%",height:"100%",children:r.jsxs(f,{data:u,margin:{top:20,right:30,left:0,bottom:20},children:[r.jsx(g,{stroke:"#eee",strokeDasharray:"5 5"}),r.jsx(p,{dataKey:"timestamp",type:"number",domain:w,tick:0===e?e=>{const{x:t=0,y:n=0,payload:a}=e,o=a.value,s=new Date(o),i=Qa[s.getDay()];return r.jsx("g",{children:r.jsx("text",{x:t,y:n+10,textAnchor:"middle",fontSize:"12",children:`${s.getMonth()+1}/${s.getDate()}(${i})`})})}:void 0,tickFormatter:0===e?void 0:e=>{const t=new Date(e),r=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0"),a=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0");return`${r}/${n}(${Qa[t.getDay()]}) ${a}:${o}`},ticks:N}),0===e&&m.map(e=>r.jsx(x,{x:e,stroke:"#888",strokeDasharray:"2 2"},e)),r.jsx(b,{domain:["auto","auto"],unit:"kg"}),(()=>{if(!s)return null;const e="number"==typeof s.startWeight&&isFinite(s.startWeight),t="number"==typeof s.targetWeight&&isFinite(s.targetWeight),n="string"==typeof s.targetStart&&!isNaN(Date.parse(s.targetStart)),a="string"==typeof s.targetEnd&&!isNaN(Date.parse(s.targetEnd));if(!(e&&t&&n&&a))return null;const o=Date.parse(s.targetStart),i=s.startWeight,l=Date.parse(s.targetEnd),d=s.targetWeight;if(o>=l)return null;const[c,u]=w,m=Math.max(o,c),h=Math.min(l,u);if(m>h)return null;const f=e=>i+(d-i)*(e-o)/(l-o),g=[{timestamp:m,value:f(m)},{timestamp:h,value:f(h)}];return r.jsx(y,{type:"linear",data:g,dataKey:"value",stroke:"#f59e42",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"4 2",legendType:"none"})})(),r.jsx(v,{content:({active:e,payload:t,label:n})=>{var a;if(!e||!t||!t.length)return null;const s=null==(a=t[0])?void 0:a.payload,i=null==s?void 0:s.timestamp,l=i?new Date(i):null,d=l?`${l.getFullYear()}-${String(l.getMonth()+1).padStart(2,"0")}-${String(l.getDate()).padStart(2,"0")}`:"";return r.jsxs("div",{style:{background:"#fff",border:"1px solid #ccc",padding:8,borderRadius:8},children:[r.jsx("div",{style:{fontWeight:"bold",marginBottom:4},children:(()=>{var e;if(!t||!Array.isArray(t)||0===t.length)return"";const r=null==(e=t[0])?void 0:e.payload;if(!r||"object"!=typeof r||null===r||!("timestamp"in r))return"";const n=r.timestamp,a=new Date(n),o=String(a.getMonth()+1).padStart(2,"0"),s=String(a.getDate()).padStart(2,"0"),i=String(a.getHours()).padStart(2,"0"),l=String(a.getMinutes()).padStart(2,"0");return`${o}/${s}(${Qa[a.getDay()]}) ${i}:${l}`})()}),(t??[]).filter(e=>e&&"#f59e42"!==e.color&&"#22c55e"!==e.color).map((e,t)=>r.jsxs("div",{style:{color:e.color,fontSize:14},children:["number"==typeof e.value?e.value.toFixed(2):e.value,"kg"]},t)),r.jsx("div",{style:{marginTop:6,fontSize:13},children:[{key:"exercise",label:"🏃‍♂️"},{key:"meal",label:"🍽"},{key:"sleep",label:"🛌"}].map(({key:e,label:t})=>{const n=o.find(t=>t.fieldId===e&&t.date===d);return void 0===n?null:r.jsxs("span",{style:{marginRight:8,verticalAlign:"middle",fontSize:"1.1em",display:"inline-flex",alignItems:"center"},children:[t,1===n.value?r.jsx(Ae,{style:{color:"#38bdf8",fontSize:"1.3em",marginLeft:2,verticalAlign:"middle"}}):r.jsx(Qe,{style:{color:"#bbb",fontSize:"1.3em",marginLeft:2,verticalAlign:"middle"}})]},e)})})]})}}),r.jsx(y,{type:"monotone",dataKey:"value",data:u,stroke:"#38bdf8",strokeWidth:3,dot:({cx:e,cy:t,payload:n})=>r.jsx("circle",{cx:e,cy:t,r:4,fill:n.excluded?"#f87171":"#38bdf8",stroke:"#fff",strokeWidth:1},(null==n?void 0:n.timestamp)??`${e}-${t}`),activeDot:!1}),j&&r.jsx(y,{type:"linear",data:j,dataKey:"value",stroke:"#22c55e",strokeWidth:3,dot:!1,activeDot:!1,isAnimationActive:!1,strokeDasharray:"6 6",legendType:"none"})]})})]}),r.jsx("div",{className:"w-full flex flex-col items-start gap-1 mt-4 mb-2 text-left",children:["exercise","meal","sleep"].map(t=>{const n=c(t,e);let a="";s&&("exercise"===t&&s.exerciseGoal&&(a=`${s.exerciseGoal}`),"meal"===t&&s.dietGoal&&(a=`${s.dietGoal}`),"sleep"===t&&s.sleepGoal&&(a=`${s.sleepGoal}`));const o=Xa[t]??"";return n?r.jsxs("div",{className:"flex items-baseline text-xs sm:text-base text-blue-700 dark:text-blue-200 font-semibold whitespace-nowrap",children:[r.jsx("span",{className:"inline-block min-w-[2em] text-center",children:o}),r.jsx("span",{className:"inline-block min-w-[7em]",children:n.total>0?`${n.percent}% (${n.success}/${n.total}日)`:"記録なし"}),a&&r.jsx("span",{className:"ml-0 text-gray-500 dark:text-gray-300 text-xs sm:text-sm font-normal",children:a})]},t):r.jsxs("div",{className:"flex items-baseline text-xs sm:text-base text-blue-700 dark:text-blue-200 font-semibold whitespace-nowrap",children:[r.jsx("span",{className:"inline-block min-w-[2em] text-center",children:o}),r.jsx("span",{className:"inline-block min-w-[7em]",children:"記録なし"}),a&&r.jsx("span",{className:"ml-0 text-gray-500 dark:text-gray-300 text-xs sm:text-sm font-normal",children:a})]},t)})})]})};function Ja(e){return W({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M232,208a8,8,0,0,1-8,8H32a8,8,0,0,1-8-8V48a8,8,0,0,1,16,0V60.69l56,56,26.34-26.35a8,8,0,0,1,11.32,0L192,148.69V128a8,8,0,0,1,16,0v40a7,7,0,0,1,0,.8c0,.11,0,.21-.05.32s0,.3-.07.46a2.83,2.83,0,0,1-.09.37c0,.13-.06.26-.1.39s-.08.23-.12.35l-.14.39-.15.31c-.06.13-.12.27-.19.4s-.11.18-.16.28l-.24.39-.21.28-.26.35c-.11.14-.24.27-.36.4l-.16.18-.17.15a4.83,4.83,0,0,1-.42.37,3.92,3.92,0,0,1-.32.25l-.3.22-.38.23a2.91,2.91,0,0,1-.3.17l-.37.19-.34.15-.36.13a2.84,2.84,0,0,1-.38.13l-.36.1c-.14,0-.26.07-.4.09l-.42.07-.35.05a7,7,0,0,1-.79,0H160a8,8,0,0,1,0-16h20.69L128,107.31l-26.34,26.35a8,8,0,0,1-11.32,0L40,83.31V200H224A8,8,0,0,1,232,208Z"},child:[]}]})(e)}const eo=[{min:0,max:18.5,color:"#6ec6f1",label:"低体重",range:"<18.5"},{min:18.5,max:25,color:"#7edfa0",label:"普通体重",range:"18.5-24.9"},{min:25,max:30,color:"#b6d97a",label:"肥満(1度)",range:"25-29.9"},{min:30,max:35,color:"#ffe066",label:"肥満(2度)",range:"30-34.9"},{min:35,max:40,color:"#ff9800",label:"肥満(3度)",range:"35-39.9"},{min:40,max:100,color:"#f44336",label:"肥満(4度)",range:"40.0+"}],to=k.memo(function({currentWeight:e,goal:t,showWeightDiff:n=!0}){const a=e&&t&&t.height?e/Math.pow(t.height/100,2):null,o="number"!=typeof a||isNaN(a)?0:a,s=(()=>{if(null===a)return 0;let e=0;for(let t=0;t<eo.length;t++){const r=eo[t];if(a<r.max){return e+100/eo.length*((a-r.min)/(r.max-r.min))}e+=100/eo.length}return 100})(),[i,l]=k.useState(0);k.useEffect(()=>{if("number"!=typeof a||isNaN(a))return;const e=performance.now();requestAnimationFrame(function t(r){const n=r-e,a=Math.min(n/800,1);l(0+(o-0)*a),a<1?requestAnimationFrame(t):l(o)})},[o,a]);const[d,c]=k.useState(0);return k.useEffect(()=>{if(n&&t&&void 0!==t.startWeight&&null!==e&&e-t.startWeight<0){let r=function(e){const t=e-s,i=Math.min(t/o,1);c(a+(n-a)*i),i<1?requestAnimationFrame(r):c(n)};const n=e-t.startWeight,a=0,o=800,s=performance.now();requestAnimationFrame(r)}else c(0)},[t,e,n]),a&&t&&t.height?r.jsxs("div",{className:"w-full max-w-md mx-auto",children:[n&&r.jsxs("div",{className:"flex items-center justify-center mb-2",children:[r.jsxs("span",{className:"text-base font-semibold text-blue-700 dark:text-blue-200",children:["BMI"," ",r.jsx("span",{style:{display:"inline-block",minWidth:"4ch",textAlign:"right",fontFamily:"monospace"},children:i.toFixed(1)})]}),n&&d<0&&r.jsxs("span",{className:"ml-2 text-base font-semibold text-green-600 dark:text-green-400",children:["🏆",d.toFixed(1),"kg"]})]}),r.jsxs("div",{className:"flex flex-col items-center mb-2",children:[r.jsxs("div",{className:"relative w-full h-8 flex rounded overflow-hidden shadow",style:{minWidth:240},children:[eo.map(e=>r.jsx("div",{className:"flex-1 flex flex-col items-center justify-center",style:{backgroundColor:e.color},title:`${e.label} (${e.range})`,children:r.jsx("span",{className:"text-[10px] font-bold text-gray-800 dark:text-gray-900",children:e.label})},e.label)),r.jsx("div",{className:"absolute top-0 text-red-600 text-lg font-bold",style:{left:`${s}%`,transform:"translateX(-50%)",lineHeight:"32px",fontSize:"20px",fontWeight:"bold",textShadow:"0 0 2px #fff, 0 0 2px #fff, 1px 1px 2px #0002",zIndex:2},"aria-label":"現在のBMI位置",children:"▼"})]}),r.jsx("div",{className:"w-full flex justify-between mt-1 px-1",children:eo.map(e=>r.jsx("span",{className:"text-[10px] text-gray-700 dark:text-gray-200",style:{flex:1,textAlign:"center"},children:e.range},e.label+"-range"))})]})]}):null}),ro=["朝一","朝食後","夕食前","夕食後","就寝前","運動後に測定","外食あり"],no={weight:"",bodyFat:"",waist:"",time:rt(),note:"",excludeFromGraph:!1};const ao=({showTipsModal:e})=>{const{goal:t,loadGoal:n}=Fa(),{records:h,isLoading:f,error:g,handleAdd:p,handleUpdate:x,handleDelete:b,clearError:y}=Ca({getAllRecords:ha,addRecord:ma,updateRecord:fa,deleteRecord:ga,onRecordAdded:e}),{selectedDate:v,setSelectedDate:w,centerDate:N,setCenterDate:j,today:D,recordDate:C,recordsOfDay:S,isRecorded:E}=Da({records:h,getRecordDate:e=>e.date}),{formData:T,updateField:O,resetForm:W,createRecordFromForm:L}=Sa({initialValues:no,createRecord:(e,t)=>({id:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,date:t,time:e.time,weight:Number(e.weight),bodyFat:""!==e.bodyFat?Number(e.bodyFat):null,waist:""!==e.waist?Number(e.waist):null,note:e.note||null,excludeFromGraph:e.excludeFromGraph}),resetValues:no}),I=k.useMemo(()=>{if(0===S.length)return null;const e=S.map(e=>Number(e.weight));return Math.min(...e)},[S]);M.useEffect(()=>{t&&t.height||n()},[t,n]);const P=T.weight||T.bodyFat||T.waist,R=k.useCallback(async()=>{if(P)try{const e=L(C);await p(e),W()}catch(e){}},[P,L,C,p,W]),B=function(){const[e,t]=k.useState(!1),{refs:r,floatingStyles:n,context:a}=o({open:e,onOpenChange:t,middleware:[c(6),u(),m()],placement:"bottom-end"}),h=s(a),f=i(a),g=l(a),{getReferenceProps:p,getFloatingProps:x}=d([h,f,g]);return{open:e,setOpen:t,refs:r,floatingStyles:n,getReferenceProps:p,getFloatingProps:x}}();return r.jsxs("div",{className:"bg-transparent",children:[r.jsx(_n,{selectedDate:v,setSelectedDate:w,centerDate:N,setCenterDate:j,today:D,isRecorded:E,"data-testid":"date-picker"}),r.jsx("div",{className:"w-full max-w-md mx-auto mt-3 mb-3 flex justify-start pl-4",children:r.jsxs("span",{className:"text-lg sm:text-xl font-bold text-gray-800 dark:text-white",children:[v.toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"}),E(v)&&r.jsxs(r.Fragment,{children:[r.jsx(Ae,{className:"inline-block w-6 h-6 text-green-500 ml-2 align-middle","aria-label":"入力済み"}),I&&t&&t.height&&r.jsxs("span",{className:"ml-3 text-base font-semibold text-blue-700 dark:text-blue-200 align-middle",children:["BMI ",(I/Math.pow(t.height/100,2)).toFixed(1),t.startWeight&&I-t.startWeight<0&&r.jsxs("span",{className:"ml-2 text-base font-semibold text-green-600 dark:text-green-400",children:["🏆",(I-t.startWeight).toFixed(1),"kg"]})]})]})]})}),r.jsx(to,{currentWeight:I,goal:t,showWeightDiff:!1}),r.jsxs("div",{className:"flex flex-col items-center justify-start min-h-[60vh]",children:[g&&r.jsx("div",{className:"w-full max-w-md mb-4",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[r.jsx("p",{className:"text-red-800 text-sm",children:g}),r.jsx("button",{onClick:y,className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"エラーを閉じる"})]})}),r.jsx("div",{className:"flex flex-col gap-2 w-full max-w-md",children:S.map(e=>r.jsxs("div",{className:"flex flex-col gap-1 bg-white dark:bg-gray-800 rounded-xl shadow p-2 mb-1",children:[r.jsxs("div",{className:"flex items-center w-full mb-1 justify-between",children:[r.jsx("input",{type:"time",className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-3 py-2 text-base bg-inherit text-gray-700 dark:text-gray-200 w-[6.5em]",value:e.time,onChange:t=>x({...e,time:t.target.value})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Q,{variant:"danger",size:"sm",icon:Ve,"aria-label":"削除",onClick:()=>b(e.id),children:""}),r.jsxs(Q,{variant:e.excludeFromGraph?"secondary":"sky",size:"sm","aria-label":e.excludeFromGraph?"グラフ除外":"グラフ表示",onClick:()=>x({...e,excludeFromGraph:!e.excludeFromGraph}),children:["",r.jsxs("span",{className:"relative inline-block w-5 h-5",children:[r.jsx(Ja,{className:"w-5 h-5 text-white"}),e.excludeFromGraph&&r.jsx(Ze,{className:"w-5 h-5 text-red-500 absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 w-full",children:[r.jsx(zn,{value:e.weight,onChange:t=>x({...e,weight:Number(t)}),placeholder:"体重",step:"0.1",min:"0",width:"lg"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500",children:"kg"}),r.jsx(zn,{value:e.bodyFat??"",onChange:t=>x({...e,bodyFat:""===t?null:Number(t)}),placeholder:"体脂肪",step:"0.1",min:"0",width:"lg"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500",children:"%"}),r.jsx(zn,{value:e.waist??"",onChange:t=>x({...e,waist:""===t?null:Number(t)}),placeholder:"腹囲",step:"0.1",min:"0",width:"lg"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500",children:"cm"})]}),r.jsx("textarea",{className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-2 py-1 text-base bg-inherit text-gray-700 dark:text-gray-200 resize-none w-full pr-10 mb-0",value:e.note??"",onChange:t=>x({...e,note:t.target.value}),placeholder:"補足・メモ（任意）"})]},e.id))}),r.jsx("div",{className:"w-full max-w-md mt-2 mb-2",children:r.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow p-2 mb-0 flex flex-col gap-1",children:[r.jsxs("div",{className:"flex items-center w-full mb-1 justify-between",children:[r.jsx(qn,{value:T.time,onChange:e=>O("time",e)}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Q,{variant:"success",size:"sm",icon:Ae,"aria-label":"保存",onClick:R,"data-testid":"save-btn",disabled:f||!P,children:""}),r.jsxs(Q,{variant:T.excludeFromGraph?"secondary":"sky",size:"sm","aria-label":T.excludeFromGraph?"グラフ除外":"グラフ表示",onClick:()=>O("excludeFromGraph",!T.excludeFromGraph),children:["",r.jsxs("span",{className:"relative inline-block w-5 h-5",children:[r.jsx(Ja,{className:"w-5 h-5 text-white"}),T.excludeFromGraph&&r.jsx(Ze,{className:"w-5 h-5 text-red-500 absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"})]})]})]})]}),r.jsxs("div",{className:"flex items-center gap-1 w-full mb-1",children:[r.jsx(zn,{value:T.weight,onChange:e=>O("weight",e),placeholder:"体重",step:"0.1",min:"0",width:"lg"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500",children:"kg"}),r.jsx(zn,{value:T.bodyFat,onChange:e=>O("bodyFat",e),placeholder:"体脂肪",step:"0.1",min:"0",width:"lg"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500",children:"%"}),r.jsx(zn,{value:T.waist,onChange:e=>O("waist",e),placeholder:"腹囲",step:"0.1",min:"0",width:"lg"}),r.jsx("span",{className:"ml-0.5 mr-3 text-gray-500",children:"cm"})]}),r.jsxs("div",{className:"relative w-full mt-0",children:[r.jsx("textarea",{className:"h-10 border border-gray-300 dark:border-gray-600 rounded-lg px-2 py-1 text-base bg-inherit text-gray-700 dark:text-gray-200 resize-none w-full pr-10 mb-0",rows:1,value:T.note,onChange:e=>O("note",e.target.value),placeholder:"補足・メモ（任意）"}),r.jsx("div",{ref:B.refs.setReference,...B.getReferenceProps({}),className:"absolute right-2 top-1/2 -translate-y-1/2 w-6 h-6 flex items-center justify-center text-yellow-400 cursor-pointer align-middle hover:opacity-80 focus:outline-none",tabIndex:0,"aria-label":"定型文を挿入",onClick:()=>B.setOpen(e=>!e),children:r.jsx(Yn,{className:"w-6 h-6"})}),B.open&&r.jsx(a,{children:r.jsx("div",{ref:B.refs.setFloating,style:B.floatingStyles,...B.getFloatingProps({className:"z-30 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-lg min-w-[180px] py-1"}),children:ro.map(e=>r.jsx("button",{type:"button",className:"block w-full text-left px-4 py-2 text-sm hover:bg-yellow-100 dark:hover:bg-yellow-900",onClick:()=>{O("note",e),B.setOpen(!1)},children:e},e))})})]})]})}),r.jsx("div",{className:"w-full max-w-md mx-auto mb-2 px-4",children:r.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 text-yellow-800 dark:text-yellow-100 p-3 rounded shadow-sm text-sm text-left",children:[r.jsx("strong",{children:"【ワンポイント】"})," ","体重はできるだけ毎日同じタイミング（例：朝起きてトイレ後、食事前など）で測ると、日々の変化がより正確にわかります。同じタイミングではない記録はグラフから除外できます。"]})})]})]})},oo=Y(e=>({recordsOperation:{loading:!1,error:null},fieldsOperation:{loading:!1,error:null},clearRecordsError:()=>{e(e=>({recordsOperation:{...e.recordsOperation,error:null}}))},clearFieldsError:()=>{e(e=>({fieldsOperation:{...e.fieldsOperation,error:null}}))},deleteAllData:async()=>{e({recordsOperation:{loading:!0,error:null},fieldsOperation:{loading:!0,error:null}});try{await async function(){return la("delete-all-data",async()=>ua([ta,ra,na,aa,oa],"readwrite",async(e,t)=>{const[r,n,a,o,s]=t;return new Promise((e,t)=>{let i=0;const l=()=>{i++,5===i&&e()},d=r.clear();d.onsuccess=l,d.onerror=()=>t(da(d.error));const c=n.clear();c.onsuccess=l,c.onerror=()=>t(da(c.error));const u=a.clear();u.onsuccess=l,u.onerror=()=>t(da(u.error));const m=o.clear();m.onsuccess=l,m.onerror=()=>t(da(m.error));const h=s.clear();h.onsuccess=l,h.onerror=()=>t(da(h.error))})}))}(),e({recordsOperation:{loading:!1,error:null},fieldsOperation:{loading:!1,error:null}})}catch(t){const r=t instanceof ia?t:new ia(sa.UNKNOWN,"全データ削除に失敗しました",t);throw e({recordsOperation:{loading:!1,error:r},fieldsOperation:{loading:!1,error:r}}),t}}})),so=({pageName:e})=>r.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-600"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 font-medium",children:e?`${e}を読み込み中...`:"ページを読み込み中..."}),Gn]})});function io(){const e=E(),[t,n]=k.useState(!1),a=()=>{n(!1)};k.useEffect(()=>{const e=e=>{"Escape"===e.key&&t&&a()};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[t]),k.useEffect(()=>{if(t){const e=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.body.style.overflow=e}}},[t]);const o=[{path:"/weight",label:"体重",color:"teal"},{path:"/daily",label:"日課",color:"teal"},{path:"/bp",label:"血圧",color:"teal"},{path:"/graph",label:"グラフ",color:"blue"},{path:"/goal",label:"目標",color:"teal"},{path:"/export",label:"管理",color:"purple"}],s=t=>e.pathname===t;return r.jsxs("div",{className:"relative",children:[r.jsx("a",{href:"#main-content",className:"sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 bg-blue-600 text-white px-4 py-2 rounded-lg z-50 font-medium",children:"スキップリンク"}),r.jsxs("nav",{className:"hidden md:flex justify-between items-center gap-4 mb-12 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg mx-4 mt-4",role:"navigation","aria-label":"メインへ移動",children:[r.jsx("div",{className:"flex gap-4",children:o.map(e=>r.jsxs(T,{to:e.path,className:("purple"===e.color?"bg-purple-600 border-purple-600 hover:bg-purple-700 hover:border-purple-700":"bg-blue-500 border-blue-500 hover:bg-blue-600 hover:border-blue-600")+" !text-white px-4 py-2 rounded-lg shadow-md transition-colors duration-200 font-medium text-base border-2 hover:!text-white visited:!text-white active:!text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-current":s(e.path)?"page":void 0,"aria-label":e.label,children:[e.label,s(e.path)&&r.jsx("span",{className:"sr-only",children:"現在のページ"})]},e.path))}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(Te,{}),r.jsx(K,{className:"ml-2",debug:!1})]})]}),r.jsx("div",{className:"md:hidden flex w-full mb-4",children:r.jsxs("nav",{className:"flex w-full",children:[["/weight","/daily","/bp","/graph"].map((e,t,n)=>{const i=o.find(t=>t.path===e);return i?r.jsx(T,{to:i.path,className:`flex-1 text-center py-3 font-bold text-base transition-colors duration-200\n                  ${s(i.path)?"bg-blue-600 text-white mobile-nav-current":"bg-gray-100 dark:bg-gray-700 text-blue-700 dark:text-white hover:bg-blue-100 dark:hover:bg-blue-800 mobile-nav-link"}\n                  ${0===t?"rounded-l-xl":""}\n                  ${t===n.length?"rounded-r-xl":""}\n                  rounded-none focus:outline-none focus:ring-0 border-0`,"aria-current":s(i.path)?"page":void 0,"aria-label":i.label,style:{minWidth:0},onClick:a,children:i.label},i.path):null}),r.jsx("button",{onClick:()=>{n(!t)},className:"flex-1 text-center py-3 font-bold text-base bg-gray-100 dark:bg-gray-700 text-blue-700 dark:text-blue-200 hover:bg-blue-100 dark:hover:bg-blue-800 rounded-r-xl border-0 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-600 focus:ring-offset-2","aria-label":t?"メニューを閉じる":"メニューを開く","aria-expanded":t,"aria-controls":"mobile-menu",style:{minWidth:0},children:r.jsx("span",{className:"inline-block align-middle",children:r.jsxs("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("rect",{y:"5",width:"24",height:"2",rx:"1",fill:"currentColor"}),r.jsx("rect",{y:"11",width:"24",height:"2",rx:"1",fill:"currentColor"}),r.jsx("rect",{y:"17",width:"24",height:"2",rx:"1",fill:"currentColor"})]})})})]})}),t&&r.jsx("div",{id:"mobile-menu",className:"md:hidden absolute top-full left-4 right-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg z-40 mb-4",role:"dialog","aria-modal":"true","aria-label":"モバイルメニュー",children:r.jsx("nav",{role:"navigation","aria-label":"モバイルメインナビゲーション",children:r.jsxs("div",{className:"flex flex-col",children:[o.map(e=>r.jsxs(T,{to:e.path,onClick:a,className:"px-4 py-3 font-medium text-base hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500 border-b border-gray-100 dark:border-gray-600 "+(s(e.path)?"bg-blue-600 text-white":"purple"===e.color?"!text-purple-600 dark:!text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 focus:bg-purple-50 dark:focus:bg-purple-900/20 hover:!text-purple-600 dark:hover:!text-purple-400 visited:!text-purple-600 dark:visited:!text-purple-400 active:!text-purple-600 dark:active:!text-purple-400":"!text-blue-500 dark:!text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/20 focus:bg-blue-50 dark:focus:bg-blue-900/20 hover:!text-blue-500 dark:hover:!text-blue-400 visited:!text-blue-500 dark:visited:!text-blue-400 active:!text-blue-500 dark:active:!text-blue-400"),"aria-current":s(e.path)?"page":void 0,"aria-label":e.label,children:[e.label,s(e.path)&&r.jsx("span",{className:"sr-only",children:"現在のページ"})]},e.path)),r.jsxs("div",{className:"flex justify-center gap-2 px-4 py-3 border-t border-gray-100 dark:border-gray-600",children:[r.jsx(Te,{className:"text-sm px-3 py-2"}),r.jsx(K,{className:"text-sm px-3 py-2",debug:!1})]})]})})}),t&&r.jsx("div",{className:"md:hidden fixed inset-0 z-30 backdrop-blur-sm",style:{backgroundColor:"rgba(0, 0, 0, 0.3)"},onClick:a,"aria-hidden":"true"})]})}const lo=k.lazy(()=>function(e,t){let r=Promise.resolve();if(t&&t.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const n=document.querySelector("meta[property=csp-nonce]"),a=(null==n?void 0:n.nonce)||(null==n?void 0:n.getAttribute("nonce"));r=e(t.map(e=>{if((e=function(e){return"/aloe-wellness-log/"+e}(e))in G)return;G[e]=!0;const t=e.endsWith(".css"),r=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${r}`))return;const n=document.createElement("link");return n.rel=t?"stylesheet":"modulepreload",t||(n.as="script"),n.crossOrigin="",n.href=e,a&&n.setAttribute("nonce",a),document.head.appendChild(n),t?new Promise((t,r)=>{n.addEventListener("load",t),n.addEventListener("error",()=>r(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function n(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return r.then(t=>{for(const e of t||[])"rejected"===e.status&&n(e.reason);return e().catch(n)})}(()=>import("./RecordExport-B6AsUDs0.js"),__vite__mapDeps([0,1,2,3,4,5])).then(e=>e).catch(e=>({default:function(){return r.jsxs("div",{className:"p-8 text-center",children:[r.jsx("h2",{className:"text-xl font-bold text-red-600 mb-4",children:"ロードエラー"}),r.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-4",children:"エクスポートページのロードに失敗しました。"}),r.jsx(Q,{variant:"primary",size:"md",onClick:()=>window.location.reload(),children:"ページを再読み込み"})]})}})));function co(){oo();const[e,t]=k.useState(!1),[n,a]=k.useState(""),[o,s]=k.useState(!1),i=()=>{const e=We[Math.floor(Math.random()*We.length)];a(e),t(!0)};k.useEffect(()=>{(async()=>{try{const e=[{fieldId:"exercise",name:"運動",order:6,display:!0},{fieldId:"meal",name:"食事",order:7,display:!0},{fieldId:"sleep",name:"睡眠",order:8,display:!0},{fieldId:"smoke",name:"喫煙",order:9,display:!1},{fieldId:"alcohol",name:"飲酒",order:10,display:!1}];if(0===(await Na()).length)for(const t of e)await ka(t);s(!0)}catch(e){}})()},[]),k.useEffect(()=>{const e=new Date,t=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`,r=localStorage.getItem("lastTipsDate");"1"===localStorage.getItem("disableTips")||r===t||i()},[]);return r.jsxs("div",{children:[r.jsx(Oe,{open:e,onClose:()=>{const e=new Date,r=`${e.getFullYear()}-${String(e.getMonth()+1).padStart(2,"0")}-${String(e.getDate()).padStart(2,"0")}`;localStorage.setItem("lastTipsDate",r),t(!1)},tipText:n}),r.jsx("header",{role:"banner",children:r.jsx(io,{})}),r.jsx("main",{id:"main-content",role:"main",tabIndex:-1,children:o?r.jsx(k.Suspense,{fallback:r.jsx(so,{pageName:"日課"}),children:r.jsxs(D,{children:[r.jsx(C,{path:"/goal",element:r.jsx(k.Suspense,{fallback:r.jsx(so,{pageName:"目標"}),children:r.jsx(Ua,{})})}),r.jsx(C,{path:"/daily",element:r.jsx(k.Suspense,{fallback:r.jsx(so,{pageName:"日課"}),children:r.jsx(Pa,{})})}),r.jsx(C,{path:"/weight",element:r.jsx(k.Suspense,{fallback:r.jsx(so,{pageName:"体重"}),children:r.jsx(ao,{showTipsModal:i})})}),r.jsx(C,{path:"/bp",element:r.jsx(k.Suspense,{fallback:r.jsx(so,{pageName:"血圧"}),children:r.jsx(Ta,{})})}),r.jsx(C,{path:"/graph",element:r.jsx(k.Suspense,{fallback:r.jsx(so,{pageName:"グラフ"}),children:r.jsx(Ka,{})})}),r.jsx(C,{path:"/export",element:r.jsx(k.Suspense,{fallback:r.jsx(so,{pageName:"管理"}),children:r.jsx(lo,{showTipsModal:i})})}),r.jsx(C,{path:"*",element:r.jsx(S,{to:"/weight",replace:!0})})]})}):r.jsx(so,{pageName:"データ初期化中"})})]})}function uo(e){return r.jsx(mo,{...e})}class mo extends k.Component{constructor(e){super(e),t(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})}),t(this,"handleReload",()=>{window.location.reload()}),t(this,"handleCopy",async()=>{const{error:e,errorInfo:t}=this.state;if(!e)return;const r=`エラー名: ${e.name}\nエラーメッセージ: ${e.message}\n`+(t?`スタックトレース:\n${t.componentStack}`:"");await navigator.clipboard.writeText(r),this.setState({copied:!0}),setTimeout(()=>this.setState({copied:!1}),1500)}),this.state={hasError:!1,error:null,errorInfo:null,copied:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){this.setState({errorInfo:t})}render(){const{hasError:e,error:t,errorInfo:n}=this.state,{children:a,fallback:o}=this.props;return e&&t?o?o(t,this.handleReset):r.jsxs("div",{className:"flex flex-col items-center justify-center p-8 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg",children:[r.jsx("h2",{className:"text-xl font-bold text-red-800 dark:text-red-200 mb-2 text-center",children:"エラーが発生しました"}),r.jsxs("p",{className:"text-red-700 dark:text-red-300 mb-6 text-center max-w-md",children:["申し訳ありません。予期しないエラーが発生しました。",r.jsx("br",{}),"ページを再読み込みしてください。"]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx("button",{onClick:this.handleReset,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors duration-200",children:"再試行"}),r.jsx("button",{onClick:this.handleReload,className:"inline-flex items-center px-4 py-2 border border-gray-300 dark:border-gray-600 text-sm font-medium rounded-md text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-50 dark:hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-offset-gray-800 transition-colors duration-200",children:"再読み込み"})]}),r.jsxs("details",{className:"mt-6 w-full max-w-2xl text-left",children:[r.jsxs("summary",{className:"cursor-pointer text-sm text-red-600 dark:text-red-400 font-medium flex items-center justify-between",children:[r.jsx("span",{children:"詳細"}),r.jsx("button",{type:"button",onClick:this.handleCopy,className:"ml-4 px-2 py-1 text-xs rounded bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{minWidth:60},children:this.state.copied?"コピーしました":"コピー"})]}),r.jsxs("div",{className:"mt-2 p-4 bg-red-100 dark:bg-red-900/30 border border-red-300 dark:border-red-700 rounded text-xs font-mono overflow-auto max-h-40 text-left",children:[r.jsxs("div",{className:"mb-2 text-left",children:[r.jsx("strong",{children:"エラー名:"})," ",t.name]}),r.jsxs("div",{className:"mb-2 text-left",children:[r.jsx("strong",{children:"エラーメッセージ:"})," ",t.message]}),n&&r.jsxs("div",{className:"text-left",children:[r.jsx("strong",{children:"スタックトレース:"}),r.jsx("pre",{className:"whitespace-pre-wrap text-xs mt-1 text-left",children:n.componentStack})]})]})]})]}):a}}const ho=Y((e,t)=>({toasts:[],showToast:(r,n="info",a=3e3)=>{const o=`toast-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,s={id:o,type:n,message:r,duration:a};e(e=>({toasts:[...e.toasts,s]})),a&&a>0&&setTimeout(()=>{t().removeToast(o)},a)},showSuccess:(e,r=2e3)=>{t().showToast(e,"success",r)},showError:(e,r=5e3)=>{t().showToast(e,"error",r)},showWarning:(e,r=4e3)=>{t().showToast(e,"warning",r)},showInfo:(e,r=3e3)=>{t().showToast(e,"info",r)},removeToast:t=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==t)}))},clearAll:()=>{e({toasts:[]})}})),fo=()=>{const{toasts:e,removeToast:t}=ho(),n=k.useRef(null);k.useEffect(()=>{if(e.length>0){const t=e[e.length-1];if("error"===t.type||"warning"===t.type){const e=document.querySelector(`[data-toast-id="${t.id}"]`);e&&e.focus()}}},[e]);const a=e=>{switch(e){case"success":return r.jsx(Be,{className:"w-5 h-5 text-green-600 dark:text-green-400","aria-hidden":"true"});case"error":return r.jsx(Xe,{className:"w-5 h-5 text-red-600 dark:text-red-400","aria-hidden":"true"});case"warning":return r.jsx(Fe,{className:"w-5 h-5 text-yellow-600 dark:text-yellow-400","aria-hidden":"true"});case"info":return r.jsx(He,{className:"w-5 h-5 text-blue-600 dark:text-blue-400","aria-hidden":"true"})}},o=e=>{switch(e){case"success":return"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-700 text-green-800 dark:text-green-200";case"error":return"bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700 text-red-800 dark:text-red-200";case"warning":return"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200 dark:border-yellow-700 text-yellow-800 dark:text-yellow-200";case"info":return"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-700 text-blue-800 dark:text-blue-200"}},s=e=>{switch(e){case"success":return"成功";case"error":return"エラー";case"warning":return"警告";case"info":return"情報"}};return 0===e.length?null:r.jsx("div",{ref:n,className:"fixed top-4 right-4 z-50 space-y-2",role:"region","aria-label":"情報","aria-live":"polite","aria-atomic":"false",children:e.map(e=>r.jsx("div",{"data-toast-id":e.id,className:`${o(e.type)} border rounded-lg p-4 shadow-lg max-w-sm transform transition-all duration-300 ease-in-out animate-in slide-in-from-right-5 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400`,role:"error"===e.type||"warning"===e.type?"alert":"status","aria-label":`${s(e.type)}: ${e.message}`,tabIndex:"error"===e.type||"warning"===e.type?0:-1,children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0",children:a(e.type)}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsxs("p",{className:"text-sm font-medium leading-5",children:[r.jsxs("span",{className:"sr-only",children:[s(e.type),": "]}),e.message]})}),r.jsx("button",{onClick:()=>t(e.id),className:"flex-shrink-0 text-gray-400 dark:text-slate-400 bg-gray-100 dark:bg-slate-700 hover:text-gray-600 dark:hover:text-slate-200 hover:bg-gray-200 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 dark:focus:ring-blue-400 rounded-full p-1","aria-label":"閉じる",children:r.jsx(Qe,{className:"w-4 h-4","aria-hidden":"true"})})]})},e.id))})},go=31536e6,po="error";function xo(e,t,r){if(!("error"===e||"warn"===e&&["debug","info","warn"].includes(po)||"info"===e&&["debug","info"].includes(po)||"debug"===e&&"debug"===po))return;(new Date).toISOString(),e.toUpperCase()}function bo(e,t=go){return Date.now()-e>t}async function yo(){try{xo("info"),"indexedDB"in window&&await async function(){xo("debug")}(),function(){const e=[];for(let t=0;t<localStorage.length;t++){const r=localStorage.key(t);if(r){const t=localStorage.getItem(r);if(t)try{const n=JSON.parse(t);n.timestamp&&bo(n.timestamp)&&e.push(r)}catch{(localStorage.getItem(r)&&r.startsWith("cache_")||r.startsWith("temp_"))&&e.push(r)}}}e.forEach(e=>{localStorage.removeItem(e),xo("debug")})}(),function(){const e=[];for(let t=0;t<sessionStorage.length;t++){const r=sessionStorage.key(t);r&&(r.startsWith("temp_")||r.startsWith("cache_"))&&e.push(r)}e.forEach(e=>{sessionStorage.removeItem(e),xo("debug")})}(),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CLEANUP_EXPIRED_CACHE"}),xo("info")}catch(e){xo("error")}}xo("info"),setInterval(yo,36e5),window.addEventListener("beforeunload",()=>{yo().catch(e=>{xo("error")})}),window.addEventListener("securitypolicyviolation",e=>{xo("error",0,(e.violatedDirective,e.blockedURI,e.disposition))}),xo("info"),document.addEventListener("contextmenu",e=>{});const vo={open:!1};setInterval(function(){window.outerHeight-window.innerHeight>160||window.outerWidth-window.innerWidth>160?vo.open||(vo.open=!0):vo.open=!1},500);const wo=(e,t)=>{"undefined"!=typeof window&&window.dispatchEvent(new CustomEvent(`performance:${e}`,{detail:t}))},ko=performance.now(),No=e=>{var t;let r;if(r=e instanceof ErrorEvent?{message:e.message,filename:e.filename,lineno:e.lineno,colno:e.colno,stack:null==(t=e.error)?void 0:t.stack,timestamp:(new Date).toLocaleString(),userAgent:navigator.userAgent,url:window.location.href}:{reason:e.reason,promise:String(e.promise),timestamp:(new Date).toLocaleString(),userAgent:navigator.userAgent,url:window.location.href},"undefined"!=typeof performance){const e={timing:performance.timing,navigation:performance.navigation,memory:performance.memory};r.performance=e}const n={...r,userAgent:navigator.userAgent.substring(0,100),url:new URL(window.location.href).pathname};wo("error",n)};window.addEventListener("error",No),window.addEventListener("unhandledrejection",No);const jo=(()=>{const e="/aloe-wellness-log/";return e.replace(/\/$/,"")})();function Mo(e){const t=document.createElement("div");t.style.position="fixed",t.style.bottom="32px",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.zIndex="9999",document.body.appendChild(t),t.innerHTML='\n    <div style="background:#059669;color:#fff;padding:16px 24px;border-radius:12px;box-shadow:0 2px 8px #0002;display:flex;align-items:center;gap:16px;font-size:1rem;">\n      <span>新しいバージョンがあります。<br>再読み込みで最新に更新できます。</span>\n      <button id="sw-update-btn" style="background:#fff;color:#059669;font-weight:bold;padding:8px 16px;border:none;border-radius:8px;cursor:pointer;">再読み込み</button>\n    </div>\n  ';t.querySelector("#sw-update-btn").onclick=()=>{e.waiting&&e.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}}q.createRoot(document.getElementById("root")).render(r.jsxs(uo,{children:[r.jsx(fo,{}),r.jsx(O,{basename:jo,children:r.jsx(co,{})})]})),window.addEventListener("load",()=>{const e=performance.now()-ko;wo("initialLoad",{loadTime:e})}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{const e=`${"/aloe-wellness-log/".replace(/\/$/,"")}/sw.js`;navigator.serviceWorker.register(e).then(e=>{e.waiting&&Mo(e),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{"installed"===t.state&&navigator.serviceWorker.controller&&Mo(e)})})}).catch(e=>{})}),"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{window.location.reload()});export{Q as B,Ie as H,xa as a,wa as b,Na as c,$e as d,He as e,Fe as f,ha as g,Xe as h,Be as i,ka as j,ma as k,pa as l,va as m,Le as n,Ye as o,Ve as p,Gn as q,ea as r,Ue as s,oo as u};
